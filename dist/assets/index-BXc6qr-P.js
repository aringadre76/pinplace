function AE(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in r)){const c=Object.getOwnPropertyDescriptor(s,a);c&&Object.defineProperty(r,a,c.get?c:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function Xv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var If={exports:{}},yu={},Sf={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function kE(){if(t_)return Ye;t_=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),C=Symbol.iterator;function k(U){return U===null||typeof U!="object"?null:(U=C&&U[C]||U["@@iterator"],typeof U=="function"?U:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,Q={};function G(U,ne,ve){this.props=U,this.context=ne,this.refs=Q,this.updater=ve||$}G.prototype.isReactComponent={},G.prototype.setState=function(U,ne){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ne,"setState")},G.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function pe(){}pe.prototype=G.prototype;function de(U,ne,ve){this.props=U,this.context=ne,this.refs=Q,this.updater=ve||$}var me=de.prototype=new pe;me.constructor=de,W(me,G.prototype),me.isPureReactComponent=!0;var Me=Array.isArray,rt=Object.prototype.hasOwnProperty,$e={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function N(U,ne,ve){var Ce,Te={},we=null,qe=null;if(ne!=null)for(Ce in ne.ref!==void 0&&(qe=ne.ref),ne.key!==void 0&&(we=""+ne.key),ne)rt.call(ne,Ce)&&!B.hasOwnProperty(Ce)&&(Te[Ce]=ne[Ce]);var Ge=arguments.length-2;if(Ge===1)Te.children=ve;else if(1<Ge){for(var ft=Array(Ge),bt=0;bt<Ge;bt++)ft[bt]=arguments[bt+2];Te.children=ft}if(U&&U.defaultProps)for(Ce in Ge=U.defaultProps,Ge)Te[Ce]===void 0&&(Te[Ce]=Ge[Ce]);return{$$typeof:r,type:U,key:we,ref:qe,props:Te,_owner:$e.current}}function D(U,ne){return{$$typeof:r,type:U.type,key:ne,ref:U.ref,props:U.props,_owner:U._owner}}function F(U){return typeof U=="object"&&U!==null&&U.$$typeof===r}function z(U){var ne={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ve){return ne[ve]})}var H=/\/+/g;function O(U,ne){return typeof U=="object"&&U!==null&&U.key!=null?z(""+U.key):ne.toString(36)}function ot(U,ne,ve,Ce,Te){var we=typeof U;(we==="undefined"||we==="boolean")&&(U=null);var qe=!1;if(U===null)qe=!0;else switch(we){case"string":case"number":qe=!0;break;case"object":switch(U.$$typeof){case r:case e:qe=!0}}if(qe)return qe=U,Te=Te(qe),U=Ce===""?"."+O(qe,0):Ce,Me(Te)?(ve="",U!=null&&(ve=U.replace(H,"$&/")+"/"),ot(Te,ne,ve,"",function(bt){return bt})):Te!=null&&(F(Te)&&(Te=D(Te,ve+(!Te.key||qe&&qe.key===Te.key?"":(""+Te.key).replace(H,"$&/")+"/")+U)),ne.push(Te)),1;if(qe=0,Ce=Ce===""?".":Ce+":",Me(U))for(var Ge=0;Ge<U.length;Ge++){we=U[Ge];var ft=Ce+O(we,Ge);qe+=ot(we,ne,ve,ft,Te)}else if(ft=k(U),typeof ft=="function")for(U=ft.call(U),Ge=0;!(we=U.next()).done;)we=we.value,ft=Ce+O(we,Ge++),qe+=ot(we,ne,ve,ft,Te);else if(we==="object")throw ne=String(U),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return qe}function sn(U,ne,ve){if(U==null)return U;var Ce=[],Te=0;return ot(U,Ce,"","",function(we){return ne.call(ve,we,Te++)}),Ce}function lt(U){if(U._status===-1){var ne=U._result;ne=ne(),ne.then(function(ve){(U._status===0||U._status===-1)&&(U._status=1,U._result=ve)},function(ve){(U._status===0||U._status===-1)&&(U._status=2,U._result=ve)}),U._status===-1&&(U._status=0,U._result=ne)}if(U._status===1)return U._result.default;throw U._result}var tt={current:null},re={transition:null},ke={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:re,ReactCurrentOwner:$e};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ye.Children={map:sn,forEach:function(U,ne,ve){sn(U,function(){ne.apply(this,arguments)},ve)},count:function(U){var ne=0;return sn(U,function(){ne++}),ne},toArray:function(U){return sn(U,function(ne){return ne})||[]},only:function(U){if(!F(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ye.Component=G,Ye.Fragment=t,Ye.Profiler=a,Ye.PureComponent=de,Ye.StrictMode=s,Ye.Suspense=v,Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ke,Ye.act=se,Ye.cloneElement=function(U,ne,ve){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Ce=W({},U.props),Te=U.key,we=U.ref,qe=U._owner;if(ne!=null){if(ne.ref!==void 0&&(we=ne.ref,qe=$e.current),ne.key!==void 0&&(Te=""+ne.key),U.type&&U.type.defaultProps)var Ge=U.type.defaultProps;for(ft in ne)rt.call(ne,ft)&&!B.hasOwnProperty(ft)&&(Ce[ft]=ne[ft]===void 0&&Ge!==void 0?Ge[ft]:ne[ft])}var ft=arguments.length-2;if(ft===1)Ce.children=ve;else if(1<ft){Ge=Array(ft);for(var bt=0;bt<ft;bt++)Ge[bt]=arguments[bt+2];Ce.children=Ge}return{$$typeof:r,type:U.type,key:Te,ref:we,props:Ce,_owner:qe}},Ye.createContext=function(U){return U={$$typeof:f,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:c,_context:U},U.Consumer=U},Ye.createElement=N,Ye.createFactory=function(U){var ne=N.bind(null,U);return ne.type=U,ne},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(U){return{$$typeof:_,render:U}},Ye.isValidElement=F,Ye.lazy=function(U){return{$$typeof:P,_payload:{_status:-1,_result:U},_init:lt}},Ye.memo=function(U,ne){return{$$typeof:T,type:U,compare:ne===void 0?null:ne}},Ye.startTransition=function(U){var ne=re.transition;re.transition={};try{U()}finally{re.transition=ne}},Ye.unstable_act=se,Ye.useCallback=function(U,ne){return tt.current.useCallback(U,ne)},Ye.useContext=function(U){return tt.current.useContext(U)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(U){return tt.current.useDeferredValue(U)},Ye.useEffect=function(U,ne){return tt.current.useEffect(U,ne)},Ye.useId=function(){return tt.current.useId()},Ye.useImperativeHandle=function(U,ne,ve){return tt.current.useImperativeHandle(U,ne,ve)},Ye.useInsertionEffect=function(U,ne){return tt.current.useInsertionEffect(U,ne)},Ye.useLayoutEffect=function(U,ne){return tt.current.useLayoutEffect(U,ne)},Ye.useMemo=function(U,ne){return tt.current.useMemo(U,ne)},Ye.useReducer=function(U,ne,ve){return tt.current.useReducer(U,ne,ve)},Ye.useRef=function(U){return tt.current.useRef(U)},Ye.useState=function(U){return tt.current.useState(U)},Ye.useSyncExternalStore=function(U,ne,ve){return tt.current.useSyncExternalStore(U,ne,ve)},Ye.useTransition=function(){return tt.current.useTransition()},Ye.version="18.3.1",Ye}var n_;function gp(){return n_||(n_=1,Sf.exports=kE()),Sf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function RE(){if(r_)return yu;r_=1;var r=gp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(_,v,T){var P,C={},k=null,$=null;T!==void 0&&(k=""+T),v.key!==void 0&&(k=""+v.key),v.ref!==void 0&&($=v.ref);for(P in v)s.call(v,P)&&!c.hasOwnProperty(P)&&(C[P]=v[P]);if(_&&_.defaultProps)for(P in v=_.defaultProps,v)C[P]===void 0&&(C[P]=v[P]);return{$$typeof:e,type:_,key:k,ref:$,props:C,_owner:a.current}}return yu.Fragment=t,yu.jsx=f,yu.jsxs=f,yu}var i_;function LE(){return i_||(i_=1,If.exports=RE()),If.exports}var b=LE(),ih={},Pf={exports:{}},ir={},xf={exports:{}},Cf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function NE(){return s_||(s_=1,(function(r){function e(re,ke){var se=re.length;re.push(ke);e:for(;0<se;){var U=se-1>>>1,ne=re[U];if(0<a(ne,ke))re[U]=ke,re[se]=ne,se=U;else break e}}function t(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var ke=re[0],se=re.pop();if(se!==ke){re[0]=se;e:for(var U=0,ne=re.length,ve=ne>>>1;U<ve;){var Ce=2*(U+1)-1,Te=re[Ce],we=Ce+1,qe=re[we];if(0>a(Te,se))we<ne&&0>a(qe,Te)?(re[U]=qe,re[we]=se,U=we):(re[U]=Te,re[Ce]=se,U=Ce);else if(we<ne&&0>a(qe,se))re[U]=qe,re[we]=se,U=we;else break e}}return ke}function a(re,ke){var se=re.sortIndex-ke.sortIndex;return se!==0?se:re.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,_=f.now();r.unstable_now=function(){return f.now()-_}}var v=[],T=[],P=1,C=null,k=3,$=!1,W=!1,Q=!1,G=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,de=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function me(re){for(var ke=t(T);ke!==null;){if(ke.callback===null)s(T);else if(ke.startTime<=re)s(T),ke.sortIndex=ke.expirationTime,e(v,ke);else break;ke=t(T)}}function Me(re){if(Q=!1,me(re),!W)if(t(v)!==null)W=!0,lt(rt);else{var ke=t(T);ke!==null&&tt(Me,ke.startTime-re)}}function rt(re,ke){W=!1,Q&&(Q=!1,pe(N),N=-1),$=!0;var se=k;try{for(me(ke),C=t(v);C!==null&&(!(C.expirationTime>ke)||re&&!z());){var U=C.callback;if(typeof U=="function"){C.callback=null,k=C.priorityLevel;var ne=U(C.expirationTime<=ke);ke=r.unstable_now(),typeof ne=="function"?C.callback=ne:C===t(v)&&s(v),me(ke)}else s(v);C=t(v)}if(C!==null)var ve=!0;else{var Ce=t(T);Ce!==null&&tt(Me,Ce.startTime-ke),ve=!1}return ve}finally{C=null,k=se,$=!1}}var $e=!1,B=null,N=-1,D=5,F=-1;function z(){return!(r.unstable_now()-F<D)}function H(){if(B!==null){var re=r.unstable_now();F=re;var ke=!0;try{ke=B(!0,re)}finally{ke?O():($e=!1,B=null)}}else $e=!1}var O;if(typeof de=="function")O=function(){de(H)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,sn=ot.port2;ot.port1.onmessage=H,O=function(){sn.postMessage(null)}}else O=function(){G(H,0)};function lt(re){B=re,$e||($e=!0,O())}function tt(re,ke){N=G(function(){re(r.unstable_now())},ke)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){W||$||(W=!0,lt(rt))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_getFirstCallbackNode=function(){return t(v)},r.unstable_next=function(re){switch(k){case 1:case 2:case 3:var ke=3;break;default:ke=k}var se=k;k=ke;try{return re()}finally{k=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,ke){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var se=k;k=re;try{return ke()}finally{k=se}},r.unstable_scheduleCallback=function(re,ke,se){var U=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?U+se:U):se=U,re){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=se+ne,re={id:P++,callback:ke,priorityLevel:re,startTime:se,expirationTime:ne,sortIndex:-1},se>U?(re.sortIndex=se,e(T,re),t(v)===null&&re===t(T)&&(Q?(pe(N),N=-1):Q=!0,tt(Me,se-U))):(re.sortIndex=ne,e(v,re),W||$||(W=!0,lt(rt))),re},r.unstable_shouldYield=z,r.unstable_wrapCallback=function(re){var ke=k;return function(){var se=k;k=ke;try{return re.apply(this,arguments)}finally{k=se}}}})(Cf)),Cf}var o_;function bE(){return o_||(o_=1,xf.exports=NE()),xf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function OE(){if(a_)return ir;a_=1;var r=gp(),e=bE();function t(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(n,o){f(n,o),f(n+"Capture",o)}function f(n,o){for(a[n]=o,n=0;n<o.length;n++)s.add(o[n])}var _=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},C={};function k(n){return v.call(C,n)?!0:v.call(P,n)?!1:T.test(n)?C[n]=!0:(P[n]=!0,!1)}function $(n,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W(n,o,u,p){if(o===null||typeof o>"u"||$(n,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function Q(n,o,u,p,g,w,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=n,this.type=o,this.sanitizeURL=w,this.removeEmptyString=S}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){G[n]=new Q(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];G[o]=new Q(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){G[n]=new Q(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){G[n]=new Q(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){G[n]=new Q(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){G[n]=new Q(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){G[n]=new Q(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){G[n]=new Q(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){G[n]=new Q(n,5,!1,n.toLowerCase(),null,!1,!1)});var pe=/[\-:]([a-z])/g;function de(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(pe,de);G[o]=new Q(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(pe,de);G[o]=new Q(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(pe,de);G[o]=new Q(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){G[n]=new Q(n,1,!1,n.toLowerCase(),null,!1,!1)}),G.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){G[n]=new Q(n,1,!1,n.toLowerCase(),null,!0,!0)});function me(n,o,u,p){var g=G.hasOwnProperty(o)?G[o]:null;(g!==null?g.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(W(o,u,g,p)&&(u=null),p||g===null?k(o)&&(u===null?n.removeAttribute(o):n.setAttribute(o,""+u)):g.mustUseProperty?n[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,p=g.attributeNamespace,u===null?n.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,p?n.setAttributeNS(p,o,u):n.setAttribute(o,u))))}var Me=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rt=Symbol.for("react.element"),$e=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),z=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),sn=Symbol.for("react.memo"),lt=Symbol.for("react.lazy"),tt=Symbol.for("react.offscreen"),re=Symbol.iterator;function ke(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,U;function ne(n){if(U===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+n}var ve=!1;function Ce(n,o){if(!n||ve)return"";ve=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(J){var p=J}Reflect.construct(n,[],o)}else{try{o.call()}catch(J){p=J}n.call(o.prototype)}else{try{throw Error()}catch(J){p=J}n()}}catch(J){if(J&&p&&typeof J.stack=="string"){for(var g=J.stack.split(`
`),w=p.stack.split(`
`),S=g.length-1,R=w.length-1;1<=S&&0<=R&&g[S]!==w[R];)R--;for(;1<=S&&0<=R;S--,R--)if(g[S]!==w[R]){if(S!==1||R!==1)do if(S--,R--,0>R||g[S]!==w[R]){var V=`
`+g[S].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=S&&0<=R);break}}}finally{ve=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?ne(n):""}function Te(n){switch(n.tag){case 5:return ne(n.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return n=Ce(n.type,!1),n;case 11:return n=Ce(n.type.render,!1),n;case 1:return n=Ce(n.type,!0),n;default:return""}}function we(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case $e:return"Portal";case D:return"Profiler";case N:return"StrictMode";case O:return"Suspense";case ot:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case z:return(n.displayName||"Context")+".Consumer";case F:return(n._context.displayName||"Context")+".Provider";case H:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case sn:return o=n.displayName||null,o!==null?o:we(n.type)||"Memo";case lt:o=n._payload,n=n._init;try{return we(n(o))}catch{}}return null}function qe(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(o);case 8:return o===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ge(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ft(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function bt(n){var o=ft(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),p=""+n[o];if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,w=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(S){p=""+S,w.call(this,S)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function ar(n){n._valueTracker||(n._valueTracker=bt(n))}function Tr(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return n&&(p=ft(n)?n.checked?"true":"false":n.value),n=p,n!==u?(o.setValue(n),!0):!1}function Ir(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function bi(n,o){var u=o.checked;return se({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function Oi(n,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=Ge(o.value!=null?o.value:u),n._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function xs(n,o){o=o.checked,o!=null&&me(n,"checked",o,!1)}function Mi(n,o){xs(n,o);var u=Ge(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(p==="submit"||p==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?Cs(n,o.type,u):o.hasOwnProperty("defaultValue")&&Cs(n,o.type,Ge(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function Di(n,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,u||o===n.value||(n.value=o),n.defaultValue=o}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function Cs(n,o,u){(o!=="number"||Ir(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var Sr=Array.isArray;function lr(n,o,u,p){if(n=n.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<n.length;u++)g=o.hasOwnProperty("$"+n[u].value),n[u].selected!==g&&(n[u].selected=g),g&&p&&(n[u].defaultSelected=!0)}else{for(u=""+Ge(u),o=null,g=0;g<n.length;g++){if(n[g].value===u){n[g].selected=!0,p&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function As(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Vi(n,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Sr(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}n._wrapperState={initialValue:Ge(u)}}function ks(n,o){var u=Ge(o.value),p=Ge(o.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),o.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),p!=null&&(n.defaultValue=""+p)}function Xo(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function Ct(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ot(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?Ct(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Pr,Jo=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,g){MSApp.execUnsafeLocalFunction(function(){return n(o,u,p,g)})}:n})(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(Pr=Pr||document.createElement("div"),Pr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Pr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function Hr(n,o){if(o){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=o;return}}n.textContent=o}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fi=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(n){Fi.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),ui[o]=ui[n]})});function Rs(n,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||ui.hasOwnProperty(n)&&ui[n]?(""+o).trim():o+"px"}function zi(n,o){n=n.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,g=Rs(u,o[u],p);u==="float"&&(u="cssFloat"),p?n.setProperty(u,g):n[u]=g}}var Ls=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ea(n,o){if(o){if(Ls[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Wr(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ui=null;function Ns(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ji=null,On=null,ur=null;function bs(n){if(n=ls(n)){if(typeof ji!="function")throw Error(t(280));var o=n.stateNode;o&&(o=il(o),ji(n.stateNode,n.type,o))}}function xr(n){On?ur?ur.push(n):ur=[n]:On=n}function ta(){if(On){var n=On,o=ur;if(ur=On=null,bs(n),o)for(n=0;n<o.length;n++)bs(o[n])}}function Bi(n,o){return n(o)}function na(){}var $r=!1;function Hi(n,o,u){if($r)return n(o,u);$r=!0;try{return Bi(n,o,u)}finally{$r=!1,(On!==null||ur!==null)&&(na(),ta())}}function At(n,o){var u=n.stateNode;if(u===null)return null;var p=il(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(n=n.type,p=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!p;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Os=!1;if(_)try{var cr={};Object.defineProperty(cr,"passive",{get:function(){Os=!0}}),window.addEventListener("test",cr,cr),window.removeEventListener("test",cr,cr)}catch{Os=!1}function Wi(n,o,u,p,g,w,S,R,V){var J=Array.prototype.slice.call(arguments,3);try{o.apply(u,J)}catch(ue){this.onError(ue)}}var on=!1,Pe=null,jn=!1,Ms=null,Ua={onError:function(n){on=!0,Pe=n}};function $i(n,o,u,p,g,w,S,R,V){on=!1,Pe=null,Wi.apply(Ua,arguments)}function Ds(n,o,u,p,g,w,S,R,V){if($i.apply(this,arguments),on){if(on){var J=Pe;on=!1,Pe=null}else throw Error(t(198));jn||(jn=!0,Ms=J)}}function Bn(n){var o=n,u=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(u=o.return),n=o.return;while(n)}return o.tag===3?u:null}function Hn(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function Wn(n){if(Bn(n)!==n)throw Error(t(188))}function ja(n){var o=n.alternate;if(!o){if(o=Bn(n),o===null)throw Error(t(188));return o!==n?null:n}for(var u=n,p=o;;){var g=u.return;if(g===null)break;var w=g.alternate;if(w===null){if(p=g.return,p!==null){u=p;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===u)return Wn(g),n;if(w===p)return Wn(g),o;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=g,p=w;else{for(var S=!1,R=g.child;R;){if(R===u){S=!0,u=g,p=w;break}if(R===p){S=!0,p=g,u=w;break}R=R.sibling}if(!S){for(R=w.child;R;){if(R===u){S=!0,u=w,p=g;break}if(R===p){S=!0,p=w,u=g;break}R=R.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?n:o}function ra(n){return n=ja(n),n!==null?Vs(n):null}function Vs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=Vs(n);if(o!==null)return o;n=n.sibling}return null}var Fs=e.unstable_scheduleCallback,zs=e.unstable_cancelCallback,Ba=e.unstable_shouldYield,Us=e.unstable_requestPaint,_t=e.unstable_now,Ha=e.unstable_getCurrentPriorityLevel,qi=e.unstable_ImmediatePriority,ci=e.unstable_UserBlockingPriority,$n=e.unstable_NormalPriority,Zi=e.unstable_LowPriority,hi=e.unstable_IdlePriority,di=null,wn=null;function fi(n){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(di,n,void 0,(n.current.flags&128)===128)}catch{}}var ze=Math.clz32?Math.clz32:qr,pt=Math.log,Gi=Math.LN2;function qr(n){return n>>>=0,n===0?32:31-(pt(n)/Gi|0)|0}var hr=64,pi=4194304;function De(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function mt(n,o){var u=n.pendingLanes;if(u===0)return 0;var p=0,g=n.suspendedLanes,w=n.pingedLanes,S=u&268435455;if(S!==0){var R=S&~g;R!==0?p=De(R):(w&=S,w!==0&&(p=De(w)))}else S=u&~g,S!==0?p=De(S):w!==0&&(p=De(w));if(p===0)return 0;if(o!==0&&o!==p&&(o&g)===0&&(g=p&-p,w=o&-o,g>=w||g===16&&(w&4194240)!==0))return o;if((p&4)!==0&&(p|=u&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=p;0<o;)u=31-ze(o),g=1<<u,p|=n[u],o&=~g;return p}function ia(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qn(n,o){for(var u=n.suspendedLanes,p=n.pingedLanes,g=n.expirationTimes,w=n.pendingLanes;0<w;){var S=31-ze(w),R=1<<S,V=g[S];V===-1?((R&u)===0||(R&p)!==0)&&(g[S]=ia(R,o)):V<=o&&(n.expiredLanes|=R),w&=~R}}function wt(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ki(){var n=hr;return hr<<=1,(hr&4194240)===0&&(hr=64),n}function dr(n){for(var o=[],u=0;31>u;u++)o.push(n);return o}function En(n,o,u){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-ze(o),n[o]=u}function Ue(n,o){var u=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var p=n.eventTimes;for(n=n.expirationTimes;0<u;){var g=31-ze(u),w=1<<g;o[g]=0,p[g]=-1,n[g]=-1,u&=~w}}function Tn(n,o){var u=n.entangledLanes|=o;for(n=n.entanglements;u;){var p=31-ze(u),g=1<<p;g&o|n[p]&o&&(n[p]|=o),u&=~g}}var Ze=0;function Zn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var js,Cr,Bs,Hs,Qi,Yi=!1,Gn=[],Mt=null,Kn=null,Mn=null,mi=new Map,Re=new Map,zt=[],ut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sa(n,o){switch(n){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":mi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Re.delete(o.pointerId)}}function an(n,o,u,p,g,w){return n===null||n.nativeEvent!==w?(n={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[g]},o!==null&&(o=ls(o),o!==null&&Cr(o)),n):(n.eventSystemFlags|=p,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function oa(n,o,u,p,g){switch(o){case"focusin":return Mt=an(Mt,n,o,u,p,g),!0;case"dragenter":return Kn=an(Kn,n,o,u,p,g),!0;case"mouseover":return Mn=an(Mn,n,o,u,p,g),!0;case"pointerover":var w=g.pointerId;return mi.set(w,an(mi.get(w)||null,n,o,u,p,g)),!0;case"gotpointercapture":return w=g.pointerId,Re.set(w,an(Re.get(w)||null,n,o,u,p,g)),!0}return!1}function Ws(n){var o=as(n.target);if(o!==null){var u=Bn(o);if(u!==null){if(o=u.tag,o===13){if(o=Hn(u),o!==null){n.blockedOn=o,Qi(n.priority,function(){Bs(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fn(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var u=es(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var p=new u.constructor(u.type,u);Ui=p,u.target.dispatchEvent(p),Ui=null}else return o=ls(u),o!==null&&Cr(o),n.blockedOn=u,!1;o.shift()}return!0}function Zr(n,o,u){fn(n)&&u.delete(o)}function gi(){Yi=!1,Mt!==null&&fn(Mt)&&(Mt=null),Kn!==null&&fn(Kn)&&(Kn=null),Mn!==null&&fn(Mn)&&(Mn=null),mi.forEach(Zr),Re.forEach(Zr)}function gt(n,o){n.blockedOn===o&&(n.blockedOn=null,Yi||(Yi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gi)))}function Xt(n){function o(g){return gt(g,n)}if(0<Gn.length){gt(Gn[0],n);for(var u=1;u<Gn.length;u++){var p=Gn[u];p.blockedOn===n&&(p.blockedOn=null)}}for(Mt!==null&&gt(Mt,n),Kn!==null&&gt(Kn,n),Mn!==null&&gt(Mn,n),mi.forEach(o),Re.forEach(o),u=0;u<zt.length;u++)p=zt[u],p.blockedOn===n&&(p.blockedOn=null);for(;0<zt.length&&(u=zt[0],u.blockedOn===null);)Ws(u),u.blockedOn===null&&zt.shift()}var Ar=Me.ReactCurrentBatchConfig,Gr=!0;function Et(n,o,u,p){var g=Ze,w=Ar.transition;Ar.transition=null;try{Ze=1,Xi(n,o,u,p)}finally{Ze=g,Ar.transition=w}}function Wa(n,o,u,p){var g=Ze,w=Ar.transition;Ar.transition=null;try{Ze=4,Xi(n,o,u,p)}finally{Ze=g,Ar.transition=w}}function Xi(n,o,u,p){if(Gr){var g=es(n,o,u,p);if(g===null)i(n,o,p,Ji,u),sa(n,p);else if(oa(g,n,o,u,p))p.stopPropagation();else if(sa(n,p),o&4&&-1<ut.indexOf(n)){for(;g!==null;){var w=ls(g);if(w!==null&&js(w),w=es(n,o,u,p),w===null&&i(n,o,p,Ji,u),w===g)break;g=w}g!==null&&p.stopPropagation()}else i(n,o,p,null,u)}}var Ji=null;function es(n,o,u,p){if(Ji=null,n=Ns(p),n=as(n),n!==null)if(o=Bn(n),o===null)n=null;else if(u=o.tag,u===13){if(n=Hn(o),n!==null)return n;n=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return Ji=n,null}function Ke(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ha()){case qi:return 1;case ci:return 4;case $n:case Zi:return 16;case hi:return 536870912;default:return 16}default:return 16}}var Dn=null,ln=null,Ht=null;function $s(){if(Ht)return Ht;var n,o=ln,u=o.length,p,g="value"in Dn?Dn.value:Dn.textContent,w=g.length;for(n=0;n<u&&o[n]===g[n];n++);var S=u-n;for(p=1;p<=S&&o[u-p]===g[w-p];p++);return Ht=g.slice(n,1<p?1-p:void 0)}function qs(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Qn(){return!0}function aa(){return!1}function Wt(n){function o(u,p,g,w,S){this._reactName=u,this._targetInst=g,this.type=p,this.nativeEvent=w,this.target=S,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(u=n[R],this[R]=u?u(w):w[R]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Qn:aa,this.isPropagationStopped=aa,this}return se(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){},isPersistent:Qn}),o}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=Wt(fr),Yn=se({},fr,{view:0,detail:0}),ql=Wt(Yn),pn,Kr,Qr,In=se({},Yn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Qr&&(Qr&&n.type==="mousemove"?(pn=n.screenX-Qr.screenX,Kr=n.screenY-Qr.screenY):Kr=pn=0,Qr=n),pn)},movementY:function(n){return"movementY"in n?n.movementY:Kr}}),ts=Wt(In),Gs=se({},In,{dataTransfer:0}),Ks=Wt(Gs),Qs=se({},Yn,{relatedTarget:0}),ns=Wt(Qs),la=se({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Yr=Wt(la),$a=se({},fr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ys=Wt($a),qa=se({},fr,{data:0}),Xs=Wt(qa),rs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$t={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Za(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=kr[n])?!!o[n]:!1}function Sn(){return Za}var h=se({},Yn,{key:function(n){if(n.key){var o=rs[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=qs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$t[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(n){return n.type==="keypress"?qs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),y=Wt(h),I=se({},In,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A=Wt(I),q=se({},Yn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn}),ee=Wt(q),fe=se({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),at=Wt(fe),Dt=se({},In,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Xe=Wt(Dt),ct=[9,13,27,32],yt=_&&"CompositionEvent"in window,Xn=null;_&&"documentMode"in document&&(Xn=document.documentMode);var kt=_&&"TextEvent"in window&&!Xn,is=_&&(!yt||Xn&&8<Xn&&11>=Xn),pr=" ",lc=!1;function Js(n,o){switch(n){case"keyup":return ct.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xr=!1;function fd(n,o){switch(n){case"compositionend":return Zl(o);case"keypress":return o.which!==32?null:(lc=!0,pr);case"textInput":return n=o.data,n===pr&&lc?null:n;default:return null}}function _i(n,o){if(Xr)return n==="compositionend"||!yt&&Js(n,o)?(n=$s(),Ht=ln=Dn=null,Xr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return is&&o.locale!=="ko"?null:o.data;default:return null}}var Ga={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uc(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Ga[n.type]:o==="textarea"}function Ka(n,o,u,p){xr(p),o=d(o,"onChange"),0<o.length&&(u=new Zs("onChange","change",null,u,p),n.push({event:u,listeners:o}))}var ua=null,Vn=null;function pd(n){nu(n,0)}function Jr(n){var o=us(n);if(Tr(o))return n}function md(n,o){if(n==="change")return o}var Rr=!1;if(_){var eo;if(_){var Qa="oninput"in document;if(!Qa){var Ya=document.createElement("div");Ya.setAttribute("oninput","return;"),Qa=typeof Ya.oninput=="function"}eo=Qa}else eo=!1;Rr=eo&&(!document.documentMode||9<document.documentMode)}function ca(){ua&&(ua.detachEvent("onpropertychange",Xa),Vn=ua=null)}function Xa(n){if(n.propertyName==="value"&&Jr(Vn)){var o=[];Ka(o,Vn,n,Ns(n)),Hi(pd,o)}}function Ja(n,o,u){n==="focusin"?(ca(),ua=o,Vn=u,ua.attachEvent("onpropertychange",Xa)):n==="focusout"&&ca()}function to(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Jr(Vn)}function el(n,o){if(n==="click")return Jr(o)}function Gl(n,o){if(n==="input"||n==="change")return Jr(o)}function cc(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var mr=typeof Object.is=="function"?Object.is:cc;function vi(n,o){if(mr(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var u=Object.keys(n),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var g=u[p];if(!v.call(o,g)||!mr(n[g],o[g]))return!1}return!0}function hc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Kl(n,o){var u=hc(n);n=0;for(var p;u;){if(u.nodeType===3){if(p=n+u.textContent.length,n<=o&&p>=o)return{node:u,offset:o-n};n=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=hc(u)}}function dc(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?dc(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Ql(){for(var n=window,o=Ir();o instanceof n.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)n=o.contentWindow;else break;o=Ir(n.document)}return o}function Yl(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function Lr(n){var o=Ql(),u=n.focusedElem,p=n.selectionRange;if(o!==u&&u&&u.ownerDocument&&dc(u.ownerDocument.documentElement,u)){if(p!==null&&Yl(u)){if(o=p.start,n=p.end,n===void 0&&(n=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(n,u.value.length);else if(n=(o=u.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var g=u.textContent.length,w=Math.min(p.start,g);p=p.end===void 0?w:Math.min(p.end,g),!n.extend&&w>p&&(g=p,p=w,w=g),g=Kl(u,w);var S=Kl(u,p);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),n.removeAllRanges(),w>p?(n.addRange(o),n.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),n.addRange(o)))}}for(o=[],n=u;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)n=o[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var tl=_&&"documentMode"in document&&11>=document.documentMode,no=null,ro=null,ha=null,nl=!1;function fc(n,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;nl||no==null||no!==Ir(p)||(p=no,"selectionStart"in p&&Yl(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ha&&vi(ha,p)||(ha=p,p=d(ro,"onSelect"),0<p.length&&(o=new Zs("onSelect","select",null,o,u),n.push({event:o,listeners:p}),o.target=no)))}function yi(n,o){var u={};return u[n.toLowerCase()]=o.toLowerCase(),u["Webkit"+n]="webkit"+o,u["Moz"+n]="moz"+o,u}var io={animationend:yi("Animation","AnimationEnd"),animationiteration:yi("Animation","AnimationIteration"),animationstart:yi("Animation","AnimationStart"),transitionend:yi("Transition","TransitionEnd")},wi={},Xl={};_&&(Xl=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function da(n){if(wi[n])return wi[n];if(!io[n])return n;var o=io[n],u;for(u in o)if(o.hasOwnProperty(u)&&u in Xl)return wi[n]=o[u];return n}var pc=da("animationend"),Nr=da("animationiteration"),Jl=da("animationstart"),eu=da("transitionend"),so=new Map,mc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(n,o){so.set(n,o),c(o,[n])}for(var ss=0;ss<mc.length;ss++){var rl=mc[ss],gc=rl.toLowerCase(),gd=rl[0].toUpperCase()+rl.slice(1);gr(gc,"on"+gd)}gr(pc,"onAnimationEnd"),gr(Nr,"onAnimationIteration"),gr(Jl,"onAnimationStart"),gr("dblclick","onDoubleClick"),gr("focusin","onFocus"),gr("focusout","onBlur"),gr(eu,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_c=new Set("cancel close invalid load scroll toggle".split(" ").concat(oo));function tu(n,o,u){var p=n.type||"unknown-event";n.currentTarget=u,Ds(p,o,void 0,n),n.currentTarget=null}function nu(n,o){o=(o&4)!==0;for(var u=0;u<n.length;u++){var p=n[u],g=p.event;p=p.listeners;e:{var w=void 0;if(o)for(var S=p.length-1;0<=S;S--){var R=p[S],V=R.instance,J=R.currentTarget;if(R=R.listener,V!==w&&g.isPropagationStopped())break e;tu(g,R,J),w=V}else for(S=0;S<p.length;S++){if(R=p[S],V=R.instance,J=R.currentTarget,R=R.listener,V!==w&&g.isPropagationStopped())break e;tu(g,R,J),w=V}}}if(jn)throw n=Ms,jn=!1,Ms=null,n}function vt(n,o){var u=o[co];u===void 0&&(u=o[co]=new Set);var p=n+"__bubble";u.has(p)||(vc(o,n,2,!1),u.add(p))}function ru(n,o,u){var p=0;o&&(p|=4),vc(u,n,p,o)}var fa="_reactListening"+Math.random().toString(36).slice(2);function ao(n){if(!n[fa]){n[fa]=!0,s.forEach(function(u){u!=="selectionchange"&&(_c.has(u)||ru(u,!1,n),ru(u,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[fa]||(o[fa]=!0,ru("selectionchange",!1,o))}}function vc(n,o,u,p){switch(Ke(o)){case 1:var g=Et;break;case 4:g=Wa;break;default:g=Xi}u=g.bind(null,o,u,n),g=void 0,!Os||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),p?g!==void 0?n.addEventListener(o,u,{capture:!0,passive:g}):n.addEventListener(o,u,!0):g!==void 0?n.addEventListener(o,u,{passive:g}):n.addEventListener(o,u,!1)}function i(n,o,u,p,g){var w=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var R=p.stateNode.containerInfo;if(R===g||R.nodeType===8&&R.parentNode===g)break;if(S===4)for(S=p.return;S!==null;){var V=S.tag;if((V===3||V===4)&&(V=S.stateNode.containerInfo,V===g||V.nodeType===8&&V.parentNode===g))return;S=S.return}for(;R!==null;){if(S=as(R),S===null)return;if(V=S.tag,V===5||V===6){p=w=S;continue e}R=R.parentNode}}p=p.return}Hi(function(){var J=w,ue=Ns(u),ce=[];e:{var le=so.get(n);if(le!==void 0){var ye=Zs,Se=n;switch(n){case"keypress":if(qs(u)===0)break e;case"keydown":case"keyup":ye=y;break;case"focusin":Se="focus",ye=ns;break;case"focusout":Se="blur",ye=ns;break;case"beforeblur":case"afterblur":ye=ns;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=ts;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Ks;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=ee;break;case pc:case Nr:case Jl:ye=Yr;break;case eu:ye=at;break;case"scroll":ye=ql;break;case"wheel":ye=Xe;break;case"copy":case"cut":case"paste":ye=Ys;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=A}var xe=(o&4)!==0,Ut=!xe&&n==="scroll",K=xe?le!==null?le+"Capture":null:le;xe=[];for(var j=J,Y;j!==null;){Y=j;var he=Y.stateNode;if(Y.tag===5&&he!==null&&(Y=he,K!==null&&(he=At(j,K),he!=null&&xe.push(l(j,he,Y)))),Ut)break;j=j.return}0<xe.length&&(le=new ye(le,Se,null,u,ue),ce.push({event:le,listeners:xe}))}}if((o&7)===0){e:{if(le=n==="mouseover"||n==="pointerover",ye=n==="mouseout"||n==="pointerout",le&&u!==Ui&&(Se=u.relatedTarget||u.fromElement)&&(as(Se)||Se[ht]))break e;if((ye||le)&&(le=ue.window===ue?ue:(le=ue.ownerDocument)?le.defaultView||le.parentWindow:window,ye?(Se=u.relatedTarget||u.toElement,ye=J,Se=Se?as(Se):null,Se!==null&&(Ut=Bn(Se),Se!==Ut||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(ye=null,Se=J),ye!==Se)){if(xe=ts,he="onMouseLeave",K="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(xe=A,he="onPointerLeave",K="onPointerEnter",j="pointer"),Ut=ye==null?le:us(ye),Y=Se==null?le:us(Se),le=new xe(he,j+"leave",ye,u,ue),le.target=Ut,le.relatedTarget=Y,he=null,as(ue)===J&&(xe=new xe(K,j+"enter",Se,u,ue),xe.target=Y,xe.relatedTarget=Ut,he=xe),Ut=he,ye&&Se)t:{for(xe=ye,K=Se,j=0,Y=xe;Y;Y=m(Y))j++;for(Y=0,he=K;he;he=m(he))Y++;for(;0<j-Y;)xe=m(xe),j--;for(;0<Y-j;)K=m(K),Y--;for(;j--;){if(xe===K||K!==null&&xe===K.alternate)break t;xe=m(xe),K=m(K)}xe=null}else xe=null;ye!==null&&E(ce,le,ye,xe,!1),Se!==null&&Ut!==null&&E(ce,Ut,Se,xe,!0)}}e:{if(le=J?us(J):window,ye=le.nodeName&&le.nodeName.toLowerCase(),ye==="select"||ye==="input"&&le.type==="file")var Ae=md;else if(uc(le))if(Rr)Ae=Gl;else{Ae=to;var be=Ja}else(ye=le.nodeName)&&ye.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(Ae=el);if(Ae&&(Ae=Ae(n,J))){Ka(ce,Ae,u,ue);break e}be&&be(n,le,J),n==="focusout"&&(be=le._wrapperState)&&be.controlled&&le.type==="number"&&Cs(le,"number",le.value)}switch(be=J?us(J):window,n){case"focusin":(uc(be)||be.contentEditable==="true")&&(no=be,ro=J,ha=null);break;case"focusout":ha=ro=no=null;break;case"mousedown":nl=!0;break;case"contextmenu":case"mouseup":case"dragend":nl=!1,fc(ce,u,ue);break;case"selectionchange":if(tl)break;case"keydown":case"keyup":fc(ce,u,ue)}var Oe;if(yt)e:{switch(n){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else Xr?Js(n,u)&&(je="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(je="onCompositionStart");je&&(is&&u.locale!=="ko"&&(Xr||je!=="onCompositionStart"?je==="onCompositionEnd"&&Xr&&(Oe=$s()):(Dn=ue,ln="value"in Dn?Dn.value:Dn.textContent,Xr=!0)),be=d(J,je),0<be.length&&(je=new Xs(je,n,null,u,ue),ce.push({event:je,listeners:be}),Oe?je.data=Oe:(Oe=Zl(u),Oe!==null&&(je.data=Oe)))),(Oe=kt?fd(n,u):_i(n,u))&&(J=d(J,"onBeforeInput"),0<J.length&&(ue=new Xs("onBeforeInput","beforeinput",null,u,ue),ce.push({event:ue,listeners:J}),ue.data=Oe))}nu(ce,o)})}function l(n,o,u){return{instance:n,listener:o,currentTarget:u}}function d(n,o){for(var u=o+"Capture",p=[];n!==null;){var g=n,w=g.stateNode;g.tag===5&&w!==null&&(g=w,w=At(n,u),w!=null&&p.unshift(l(n,w,g)),w=At(n,o),w!=null&&p.push(l(n,w,g))),n=n.return}return p}function m(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function E(n,o,u,p,g){for(var w=o._reactName,S=[];u!==null&&u!==p;){var R=u,V=R.alternate,J=R.stateNode;if(V!==null&&V===p)break;R.tag===5&&J!==null&&(R=J,g?(V=At(u,w),V!=null&&S.unshift(l(u,V,R))):g||(V=At(u,w),V!=null&&S.push(l(u,V,R)))),u=u.return}S.length!==0&&n.push({event:o,listeners:S})}var x=/\r\n?/g,M=/\u0000|\uFFFD/g;function Z(n){return(typeof n=="string"?n:""+n).replace(x,`
`).replace(M,"")}function X(n,o,u){if(o=Z(o),Z(n)!==o&&u)throw Error(t(425))}function ae(){}var ge=null,Ne=null;function We(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Jt=typeof setTimeout=="function"?setTimeout:void 0,qt=typeof clearTimeout=="function"?clearTimeout:void 0,Fn=typeof Promise=="function"?Promise:void 0,Pn=typeof queueMicrotask=="function"?queueMicrotask:typeof Fn<"u"?function(n){return Fn.resolve(null).then(n).catch(lo)}:Jt;function lo(n){setTimeout(function(){throw n})}function iu(n,o){var u=o,p=0;do{var g=u.nextSibling;if(n.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(p===0){n.removeChild(g),Xt(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=g}while(u);Xt(o)}function Ei(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function yc(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return n;o--}else u==="/$"&&o++}n=n.previousSibling}return null}var os=Math.random().toString(36).slice(2),br="__reactFiber$"+os,uo="__reactProps$"+os,ht="__reactContainer$"+os,co="__reactEvents$"+os,_d="__reactListeners$"+os,vd="__reactHandles$"+os;function as(n){var o=n[br];if(o)return o;for(var u=n.parentNode;u;){if(o=u[ht]||u[br]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(n=yc(n);n!==null;){if(u=n[br])return u;n=yc(n)}return o}n=u,u=n.parentNode}return null}function ls(n){return n=n[br]||n[ht],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function us(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function il(n){return n[uo]||null}var yd=[],sl=-1;function ho(n){return{current:n}}function St(n){0>sl||(n.current=yd[sl],yd[sl]=null,sl--)}function Tt(n,o){sl++,yd[sl]=n.current,n.current=o}var fo={},xn=ho(fo),Jn=ho(!1),pa=fo;function ol(n,o){var u=n.type.contextTypes;if(!u)return fo;var p=n.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var g={},w;for(w in u)g[w]=o[w];return p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=g),g}function er(n){return n=n.childContextTypes,n!=null}function wc(){St(Jn),St(xn)}function Im(n,o,u){if(xn.current!==fo)throw Error(t(168));Tt(xn,o),Tt(Jn,u)}function Sm(n,o,u){var p=n.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var g in p)if(!(g in o))throw Error(t(108,qe(n)||"Unknown",g));return se({},u,p)}function Ec(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fo,pa=xn.current,Tt(xn,n),Tt(Jn,Jn.current),!0}function Pm(n,o,u){var p=n.stateNode;if(!p)throw Error(t(169));u?(n=Sm(n,o,pa),p.__reactInternalMemoizedMergedChildContext=n,St(Jn),St(xn),Tt(xn,n)):St(Jn),Tt(Jn,u)}var cs=null,Tc=!1,wd=!1;function xm(n){cs===null?cs=[n]:cs.push(n)}function Z0(n){Tc=!0,xm(n)}function po(){if(!wd&&cs!==null){wd=!0;var n=0,o=Ze;try{var u=cs;for(Ze=1;n<u.length;n++){var p=u[n];do p=p(!0);while(p!==null)}cs=null,Tc=!1}catch(g){throw cs!==null&&(cs=cs.slice(n+1)),Fs(qi,po),g}finally{Ze=o,wd=!1}}return null}var al=[],ll=0,Ic=null,Sc=0,Or=[],Mr=0,ma=null,hs=1,ds="";function ga(n,o){al[ll++]=Sc,al[ll++]=Ic,Ic=n,Sc=o}function Cm(n,o,u){Or[Mr++]=hs,Or[Mr++]=ds,Or[Mr++]=ma,ma=n;var p=hs;n=ds;var g=32-ze(p)-1;p&=~(1<<g),u+=1;var w=32-ze(o)+g;if(30<w){var S=g-g%5;w=(p&(1<<S)-1).toString(32),p>>=S,g-=S,hs=1<<32-ze(o)+g|u<<g|p,ds=w+n}else hs=1<<w|u<<g|p,ds=n}function Ed(n){n.return!==null&&(ga(n,1),Cm(n,1,0))}function Td(n){for(;n===Ic;)Ic=al[--ll],al[ll]=null,Sc=al[--ll],al[ll]=null;for(;n===ma;)ma=Or[--Mr],Or[Mr]=null,ds=Or[--Mr],Or[Mr]=null,hs=Or[--Mr],Or[Mr]=null}var _r=null,vr=null,xt=!1,ei=null;function Am(n,o){var u=zr(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=n,o=n.deletions,o===null?(n.deletions=[u],n.flags|=16):o.push(u)}function km(n,o){switch(n.tag){case 5:var u=n.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,_r=n,vr=Ei(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,_r=n,vr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=ma!==null?{id:hs,overflow:ds}:null,n.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=zr(18,null,null,0),u.stateNode=o,u.return=n,n.child=u,_r=n,vr=null,!0):!1;default:return!1}}function Id(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Sd(n){if(xt){var o=vr;if(o){var u=o;if(!km(n,o)){if(Id(n))throw Error(t(418));o=Ei(u.nextSibling);var p=_r;o&&km(n,o)?Am(p,u):(n.flags=n.flags&-4097|2,xt=!1,_r=n)}}else{if(Id(n))throw Error(t(418));n.flags=n.flags&-4097|2,xt=!1,_r=n}}}function Rm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;_r=n}function Pc(n){if(n!==_r)return!1;if(!xt)return Rm(n),xt=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!We(n.type,n.memoizedProps)),o&&(o=vr)){if(Id(n))throw Lm(),Error(t(418));for(;o;)Am(n,o),o=Ei(o.nextSibling)}if(Rm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(o===0){vr=Ei(n.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}n=n.nextSibling}vr=null}}else vr=_r?Ei(n.stateNode.nextSibling):null;return!0}function Lm(){for(var n=vr;n;)n=Ei(n.nextSibling)}function ul(){vr=_r=null,xt=!1}function Pd(n){ei===null?ei=[n]:ei.push(n)}var G0=Me.ReactCurrentBatchConfig;function su(n,o,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,n));var g=p,w=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(S){var R=g.refs;S===null?delete R[w]:R[w]=S},o._stringRef=w,o)}if(typeof n!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,n))}return n}function xc(n,o){throw n=Object.prototype.toString.call(o),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function Nm(n){var o=n._init;return o(n._payload)}function bm(n){function o(K,j){if(n){var Y=K.deletions;Y===null?(K.deletions=[j],K.flags|=16):Y.push(j)}}function u(K,j){if(!n)return null;for(;j!==null;)o(K,j),j=j.sibling;return null}function p(K,j){for(K=new Map;j!==null;)j.key!==null?K.set(j.key,j):K.set(j.index,j),j=j.sibling;return K}function g(K,j){return K=To(K,j),K.index=0,K.sibling=null,K}function w(K,j,Y){return K.index=Y,n?(Y=K.alternate,Y!==null?(Y=Y.index,Y<j?(K.flags|=2,j):Y):(K.flags|=2,j)):(K.flags|=1048576,j)}function S(K){return n&&K.alternate===null&&(K.flags|=2),K}function R(K,j,Y,he){return j===null||j.tag!==6?(j=_f(Y,K.mode,he),j.return=K,j):(j=g(j,Y),j.return=K,j)}function V(K,j,Y,he){var Ae=Y.type;return Ae===B?ue(K,j,Y.props.children,he,Y.key):j!==null&&(j.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===lt&&Nm(Ae)===j.type)?(he=g(j,Y.props),he.ref=su(K,j,Y),he.return=K,he):(he=Qc(Y.type,Y.key,Y.props,null,K.mode,he),he.ref=su(K,j,Y),he.return=K,he)}function J(K,j,Y,he){return j===null||j.tag!==4||j.stateNode.containerInfo!==Y.containerInfo||j.stateNode.implementation!==Y.implementation?(j=vf(Y,K.mode,he),j.return=K,j):(j=g(j,Y.children||[]),j.return=K,j)}function ue(K,j,Y,he,Ae){return j===null||j.tag!==7?(j=Sa(Y,K.mode,he,Ae),j.return=K,j):(j=g(j,Y),j.return=K,j)}function ce(K,j,Y){if(typeof j=="string"&&j!==""||typeof j=="number")return j=_f(""+j,K.mode,Y),j.return=K,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case rt:return Y=Qc(j.type,j.key,j.props,null,K.mode,Y),Y.ref=su(K,null,j),Y.return=K,Y;case $e:return j=vf(j,K.mode,Y),j.return=K,j;case lt:var he=j._init;return ce(K,he(j._payload),Y)}if(Sr(j)||ke(j))return j=Sa(j,K.mode,Y,null),j.return=K,j;xc(K,j)}return null}function le(K,j,Y,he){var Ae=j!==null?j.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Ae!==null?null:R(K,j,""+Y,he);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case rt:return Y.key===Ae?V(K,j,Y,he):null;case $e:return Y.key===Ae?J(K,j,Y,he):null;case lt:return Ae=Y._init,le(K,j,Ae(Y._payload),he)}if(Sr(Y)||ke(Y))return Ae!==null?null:ue(K,j,Y,he,null);xc(K,Y)}return null}function ye(K,j,Y,he,Ae){if(typeof he=="string"&&he!==""||typeof he=="number")return K=K.get(Y)||null,R(j,K,""+he,Ae);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case rt:return K=K.get(he.key===null?Y:he.key)||null,V(j,K,he,Ae);case $e:return K=K.get(he.key===null?Y:he.key)||null,J(j,K,he,Ae);case lt:var be=he._init;return ye(K,j,Y,be(he._payload),Ae)}if(Sr(he)||ke(he))return K=K.get(Y)||null,ue(j,K,he,Ae,null);xc(j,he)}return null}function Se(K,j,Y,he){for(var Ae=null,be=null,Oe=j,je=j=0,hn=null;Oe!==null&&je<Y.length;je++){Oe.index>je?(hn=Oe,Oe=null):hn=Oe.sibling;var st=le(K,Oe,Y[je],he);if(st===null){Oe===null&&(Oe=hn);break}n&&Oe&&st.alternate===null&&o(K,Oe),j=w(st,j,je),be===null?Ae=st:be.sibling=st,be=st,Oe=hn}if(je===Y.length)return u(K,Oe),xt&&ga(K,je),Ae;if(Oe===null){for(;je<Y.length;je++)Oe=ce(K,Y[je],he),Oe!==null&&(j=w(Oe,j,je),be===null?Ae=Oe:be.sibling=Oe,be=Oe);return xt&&ga(K,je),Ae}for(Oe=p(K,Oe);je<Y.length;je++)hn=ye(Oe,K,je,Y[je],he),hn!==null&&(n&&hn.alternate!==null&&Oe.delete(hn.key===null?je:hn.key),j=w(hn,j,je),be===null?Ae=hn:be.sibling=hn,be=hn);return n&&Oe.forEach(function(Io){return o(K,Io)}),xt&&ga(K,je),Ae}function xe(K,j,Y,he){var Ae=ke(Y);if(typeof Ae!="function")throw Error(t(150));if(Y=Ae.call(Y),Y==null)throw Error(t(151));for(var be=Ae=null,Oe=j,je=j=0,hn=null,st=Y.next();Oe!==null&&!st.done;je++,st=Y.next()){Oe.index>je?(hn=Oe,Oe=null):hn=Oe.sibling;var Io=le(K,Oe,st.value,he);if(Io===null){Oe===null&&(Oe=hn);break}n&&Oe&&Io.alternate===null&&o(K,Oe),j=w(Io,j,je),be===null?Ae=Io:be.sibling=Io,be=Io,Oe=hn}if(st.done)return u(K,Oe),xt&&ga(K,je),Ae;if(Oe===null){for(;!st.done;je++,st=Y.next())st=ce(K,st.value,he),st!==null&&(j=w(st,j,je),be===null?Ae=st:be.sibling=st,be=st);return xt&&ga(K,je),Ae}for(Oe=p(K,Oe);!st.done;je++,st=Y.next())st=ye(Oe,K,je,st.value,he),st!==null&&(n&&st.alternate!==null&&Oe.delete(st.key===null?je:st.key),j=w(st,j,je),be===null?Ae=st:be.sibling=st,be=st);return n&&Oe.forEach(function(CE){return o(K,CE)}),xt&&ga(K,je),Ae}function Ut(K,j,Y,he){if(typeof Y=="object"&&Y!==null&&Y.type===B&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case rt:e:{for(var Ae=Y.key,be=j;be!==null;){if(be.key===Ae){if(Ae=Y.type,Ae===B){if(be.tag===7){u(K,be.sibling),j=g(be,Y.props.children),j.return=K,K=j;break e}}else if(be.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===lt&&Nm(Ae)===be.type){u(K,be.sibling),j=g(be,Y.props),j.ref=su(K,be,Y),j.return=K,K=j;break e}u(K,be);break}else o(K,be);be=be.sibling}Y.type===B?(j=Sa(Y.props.children,K.mode,he,Y.key),j.return=K,K=j):(he=Qc(Y.type,Y.key,Y.props,null,K.mode,he),he.ref=su(K,j,Y),he.return=K,K=he)}return S(K);case $e:e:{for(be=Y.key;j!==null;){if(j.key===be)if(j.tag===4&&j.stateNode.containerInfo===Y.containerInfo&&j.stateNode.implementation===Y.implementation){u(K,j.sibling),j=g(j,Y.children||[]),j.return=K,K=j;break e}else{u(K,j);break}else o(K,j);j=j.sibling}j=vf(Y,K.mode,he),j.return=K,K=j}return S(K);case lt:return be=Y._init,Ut(K,j,be(Y._payload),he)}if(Sr(Y))return Se(K,j,Y,he);if(ke(Y))return xe(K,j,Y,he);xc(K,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,j!==null&&j.tag===6?(u(K,j.sibling),j=g(j,Y),j.return=K,K=j):(u(K,j),j=_f(Y,K.mode,he),j.return=K,K=j),S(K)):u(K,j)}return Ut}var cl=bm(!0),Om=bm(!1),Cc=ho(null),Ac=null,hl=null,xd=null;function Cd(){xd=hl=Ac=null}function Ad(n){var o=Cc.current;St(Cc),n._currentValue=o}function kd(n,o,u){for(;n!==null;){var p=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),n===u)break;n=n.return}}function dl(n,o){Ac=n,xd=hl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&o)!==0&&(tr=!0),n.firstContext=null)}function Dr(n){var o=n._currentValue;if(xd!==n)if(n={context:n,memoizedValue:o,next:null},hl===null){if(Ac===null)throw Error(t(308));hl=n,Ac.dependencies={lanes:0,firstContext:n}}else hl=hl.next=n;return o}var _a=null;function Rd(n){_a===null?_a=[n]:_a.push(n)}function Mm(n,o,u,p){var g=o.interleaved;return g===null?(u.next=u,Rd(o)):(u.next=g.next,g.next=u),o.interleaved=u,fs(n,p)}function fs(n,o){n.lanes|=o;var u=n.alternate;for(u!==null&&(u.lanes|=o),u=n,n=n.return;n!==null;)n.childLanes|=o,u=n.alternate,u!==null&&(u.childLanes|=o),u=n,n=n.return;return u.tag===3?u.stateNode:null}var mo=!1;function Ld(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dm(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ps(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function go(n,o,u){var p=n.updateQueue;if(p===null)return null;if(p=p.shared,(it&2)!==0){var g=p.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),p.pending=o,fs(n,u)}return g=p.interleaved,g===null?(o.next=o,Rd(p)):(o.next=g.next,g.next=o),p.interleaved=o,fs(n,u)}function kc(n,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=n.pendingLanes,u|=p,o.lanes=u,Tn(n,u)}}function Vm(n,o){var u=n.updateQueue,p=n.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var g=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?g=w=S:w=w.next=S,u=u.next}while(u!==null);w===null?g=w=o:w=w.next=o}else g=w=o;u={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:p.shared,effects:p.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=o:n.next=o,u.lastBaseUpdate=o}function Rc(n,o,u,p){var g=n.updateQueue;mo=!1;var w=g.firstBaseUpdate,S=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var V=R,J=V.next;V.next=null,S===null?w=J:S.next=J,S=V;var ue=n.alternate;ue!==null&&(ue=ue.updateQueue,R=ue.lastBaseUpdate,R!==S&&(R===null?ue.firstBaseUpdate=J:R.next=J,ue.lastBaseUpdate=V))}if(w!==null){var ce=g.baseState;S=0,ue=J=V=null,R=w;do{var le=R.lane,ye=R.eventTime;if((p&le)===le){ue!==null&&(ue=ue.next={eventTime:ye,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var Se=n,xe=R;switch(le=o,ye=u,xe.tag){case 1:if(Se=xe.payload,typeof Se=="function"){ce=Se.call(ye,ce,le);break e}ce=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=xe.payload,le=typeof Se=="function"?Se.call(ye,ce,le):Se,le==null)break e;ce=se({},ce,le);break e;case 2:mo=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,le=g.effects,le===null?g.effects=[R]:le.push(R))}else ye={eventTime:ye,lane:le,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ue===null?(J=ue=ye,V=ce):ue=ue.next=ye,S|=le;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;le=R,R=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);if(ue===null&&(V=ce),g.baseState=V,g.firstBaseUpdate=J,g.lastBaseUpdate=ue,o=g.shared.interleaved,o!==null){g=o;do S|=g.lane,g=g.next;while(g!==o)}else w===null&&(g.shared.lanes=0);wa|=S,n.lanes=S,n.memoizedState=ce}}function Fm(n,o,u){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var p=n[o],g=p.callback;if(g!==null){if(p.callback=null,p=u,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var ou={},Ti=ho(ou),au=ho(ou),lu=ho(ou);function va(n){if(n===ou)throw Error(t(174));return n}function Nd(n,o){switch(Tt(lu,o),Tt(au,n),Tt(Ti,ou),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Ot(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=Ot(o,n)}St(Ti),Tt(Ti,o)}function fl(){St(Ti),St(au),St(lu)}function zm(n){va(lu.current);var o=va(Ti.current),u=Ot(o,n.type);o!==u&&(Tt(au,n),Tt(Ti,u))}function bd(n){au.current===n&&(St(Ti),St(au))}var Rt=ho(0);function Lc(n){for(var o=n;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Od=[];function Md(){for(var n=0;n<Od.length;n++)Od[n]._workInProgressVersionPrimary=null;Od.length=0}var Nc=Me.ReactCurrentDispatcher,Dd=Me.ReactCurrentBatchConfig,ya=0,Lt=null,en=null,un=null,bc=!1,uu=!1,cu=0,K0=0;function Cn(){throw Error(t(321))}function Vd(n,o){if(o===null)return!1;for(var u=0;u<o.length&&u<n.length;u++)if(!mr(n[u],o[u]))return!1;return!0}function Fd(n,o,u,p,g,w){if(ya=w,Lt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Nc.current=n===null||n.memoizedState===null?J0:eE,n=u(p,g),uu){w=0;do{if(uu=!1,cu=0,25<=w)throw Error(t(301));w+=1,un=en=null,o.updateQueue=null,Nc.current=tE,n=u(p,g)}while(uu)}if(Nc.current=Dc,o=en!==null&&en.next!==null,ya=0,un=en=Lt=null,bc=!1,o)throw Error(t(300));return n}function zd(){var n=cu!==0;return cu=0,n}function Ii(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Lt.memoizedState=un=n:un=un.next=n,un}function Vr(){if(en===null){var n=Lt.alternate;n=n!==null?n.memoizedState:null}else n=en.next;var o=un===null?Lt.memoizedState:un.next;if(o!==null)un=o,en=n;else{if(n===null)throw Error(t(310));en=n,n={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},un===null?Lt.memoizedState=un=n:un=un.next=n}return un}function hu(n,o){return typeof o=="function"?o(n):o}function Ud(n){var o=Vr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var p=en,g=p.baseQueue,w=u.pending;if(w!==null){if(g!==null){var S=g.next;g.next=w.next,w.next=S}p.baseQueue=g=w,u.pending=null}if(g!==null){w=g.next,p=p.baseState;var R=S=null,V=null,J=w;do{var ue=J.lane;if((ya&ue)===ue)V!==null&&(V=V.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),p=J.hasEagerState?J.eagerState:n(p,J.action);else{var ce={lane:ue,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};V===null?(R=V=ce,S=p):V=V.next=ce,Lt.lanes|=ue,wa|=ue}J=J.next}while(J!==null&&J!==w);V===null?S=p:V.next=R,mr(p,o.memoizedState)||(tr=!0),o.memoizedState=p,o.baseState=S,o.baseQueue=V,u.lastRenderedState=p}if(n=u.interleaved,n!==null){g=n;do w=g.lane,Lt.lanes|=w,wa|=w,g=g.next;while(g!==n)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function jd(n){var o=Vr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var p=u.dispatch,g=u.pending,w=o.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do w=n(w,S.action),S=S.next;while(S!==g);mr(w,o.memoizedState)||(tr=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,p]}function Um(){}function jm(n,o){var u=Lt,p=Vr(),g=o(),w=!mr(p.memoizedState,g);if(w&&(p.memoizedState=g,tr=!0),p=p.queue,Bd(Wm.bind(null,u,p,n),[n]),p.getSnapshot!==o||w||un!==null&&un.memoizedState.tag&1){if(u.flags|=2048,du(9,Hm.bind(null,u,p,g,o),void 0,null),cn===null)throw Error(t(349));(ya&30)!==0||Bm(u,o,g)}return g}function Bm(n,o,u){n.flags|=16384,n={getSnapshot:o,value:u},o=Lt.updateQueue,o===null?(o={lastEffect:null,stores:null},Lt.updateQueue=o,o.stores=[n]):(u=o.stores,u===null?o.stores=[n]:u.push(n))}function Hm(n,o,u,p){o.value=u,o.getSnapshot=p,$m(o)&&qm(n)}function Wm(n,o,u){return u(function(){$m(o)&&qm(n)})}function $m(n){var o=n.getSnapshot;n=n.value;try{var u=o();return!mr(n,u)}catch{return!0}}function qm(n){var o=fs(n,1);o!==null&&ii(o,n,1,-1)}function Zm(n){var o=Ii();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hu,lastRenderedState:n},o.queue=n,n=n.dispatch=X0.bind(null,Lt,n),[o.memoizedState,n]}function du(n,o,u,p){return n={tag:n,create:o,destroy:u,deps:p,next:null},o=Lt.updateQueue,o===null?(o={lastEffect:null,stores:null},Lt.updateQueue=o,o.lastEffect=n.next=n):(u=o.lastEffect,u===null?o.lastEffect=n.next=n:(p=u.next,u.next=n,n.next=p,o.lastEffect=n)),n}function Gm(){return Vr().memoizedState}function Oc(n,o,u,p){var g=Ii();Lt.flags|=n,g.memoizedState=du(1|o,u,void 0,p===void 0?null:p)}function Mc(n,o,u,p){var g=Vr();p=p===void 0?null:p;var w=void 0;if(en!==null){var S=en.memoizedState;if(w=S.destroy,p!==null&&Vd(p,S.deps)){g.memoizedState=du(o,u,w,p);return}}Lt.flags|=n,g.memoizedState=du(1|o,u,w,p)}function Km(n,o){return Oc(8390656,8,n,o)}function Bd(n,o){return Mc(2048,8,n,o)}function Qm(n,o){return Mc(4,2,n,o)}function Ym(n,o){return Mc(4,4,n,o)}function Xm(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function Jm(n,o,u){return u=u!=null?u.concat([n]):null,Mc(4,4,Xm.bind(null,o,n),u)}function Hd(){}function eg(n,o){var u=Vr();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&Vd(o,p[1])?p[0]:(u.memoizedState=[n,o],n)}function tg(n,o){var u=Vr();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&Vd(o,p[1])?p[0]:(n=n(),u.memoizedState=[n,o],n)}function ng(n,o,u){return(ya&21)===0?(n.baseState&&(n.baseState=!1,tr=!0),n.memoizedState=u):(mr(u,o)||(u=Ki(),Lt.lanes|=u,wa|=u,n.baseState=!0),o)}function Q0(n,o){var u=Ze;Ze=u!==0&&4>u?u:4,n(!0);var p=Dd.transition;Dd.transition={};try{n(!1),o()}finally{Ze=u,Dd.transition=p}}function rg(){return Vr().memoizedState}function Y0(n,o,u){var p=wo(n);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},ig(n))sg(o,u);else if(u=Mm(n,o,u,p),u!==null){var g=Un();ii(u,n,p,g),og(u,o,p)}}function X0(n,o,u){var p=wo(n),g={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(ig(n))sg(o,g);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var S=o.lastRenderedState,R=w(S,u);if(g.hasEagerState=!0,g.eagerState=R,mr(R,S)){var V=o.interleaved;V===null?(g.next=g,Rd(o)):(g.next=V.next,V.next=g),o.interleaved=g;return}}catch{}finally{}u=Mm(n,o,g,p),u!==null&&(g=Un(),ii(u,n,p,g),og(u,o,p))}}function ig(n){var o=n.alternate;return n===Lt||o!==null&&o===Lt}function sg(n,o){uu=bc=!0;var u=n.pending;u===null?o.next=o:(o.next=u.next,u.next=o),n.pending=o}function og(n,o,u){if((u&4194240)!==0){var p=o.lanes;p&=n.pendingLanes,u|=p,o.lanes=u,Tn(n,u)}}var Dc={readContext:Dr,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},J0={readContext:Dr,useCallback:function(n,o){return Ii().memoizedState=[n,o===void 0?null:o],n},useContext:Dr,useEffect:Km,useImperativeHandle:function(n,o,u){return u=u!=null?u.concat([n]):null,Oc(4194308,4,Xm.bind(null,o,n),u)},useLayoutEffect:function(n,o){return Oc(4194308,4,n,o)},useInsertionEffect:function(n,o){return Oc(4,2,n,o)},useMemo:function(n,o){var u=Ii();return o=o===void 0?null:o,n=n(),u.memoizedState=[n,o],n},useReducer:function(n,o,u){var p=Ii();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},p.queue=n,n=n.dispatch=Y0.bind(null,Lt,n),[p.memoizedState,n]},useRef:function(n){var o=Ii();return n={current:n},o.memoizedState=n},useState:Zm,useDebugValue:Hd,useDeferredValue:function(n){return Ii().memoizedState=n},useTransition:function(){var n=Zm(!1),o=n[0];return n=Q0.bind(null,n[1]),Ii().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,u){var p=Lt,g=Ii();if(xt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),cn===null)throw Error(t(349));(ya&30)!==0||Bm(p,o,u)}g.memoizedState=u;var w={value:u,getSnapshot:o};return g.queue=w,Km(Wm.bind(null,p,w,n),[n]),p.flags|=2048,du(9,Hm.bind(null,p,w,u,o),void 0,null),u},useId:function(){var n=Ii(),o=cn.identifierPrefix;if(xt){var u=ds,p=hs;u=(p&~(1<<32-ze(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=cu++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=K0++,o=":"+o+"r"+u.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},eE={readContext:Dr,useCallback:eg,useContext:Dr,useEffect:Bd,useImperativeHandle:Jm,useInsertionEffect:Qm,useLayoutEffect:Ym,useMemo:tg,useReducer:Ud,useRef:Gm,useState:function(){return Ud(hu)},useDebugValue:Hd,useDeferredValue:function(n){var o=Vr();return ng(o,en.memoizedState,n)},useTransition:function(){var n=Ud(hu)[0],o=Vr().memoizedState;return[n,o]},useMutableSource:Um,useSyncExternalStore:jm,useId:rg,unstable_isNewReconciler:!1},tE={readContext:Dr,useCallback:eg,useContext:Dr,useEffect:Bd,useImperativeHandle:Jm,useInsertionEffect:Qm,useLayoutEffect:Ym,useMemo:tg,useReducer:jd,useRef:Gm,useState:function(){return jd(hu)},useDebugValue:Hd,useDeferredValue:function(n){var o=Vr();return en===null?o.memoizedState=n:ng(o,en.memoizedState,n)},useTransition:function(){var n=jd(hu)[0],o=Vr().memoizedState;return[n,o]},useMutableSource:Um,useSyncExternalStore:jm,useId:rg,unstable_isNewReconciler:!1};function ti(n,o){if(n&&n.defaultProps){o=se({},o),n=n.defaultProps;for(var u in n)o[u]===void 0&&(o[u]=n[u]);return o}return o}function Wd(n,o,u,p){o=n.memoizedState,u=u(p,o),u=u==null?o:se({},o,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Vc={isMounted:function(n){return(n=n._reactInternals)?Bn(n)===n:!1},enqueueSetState:function(n,o,u){n=n._reactInternals;var p=Un(),g=wo(n),w=ps(p,g);w.payload=o,u!=null&&(w.callback=u),o=go(n,w,g),o!==null&&(ii(o,n,g,p),kc(o,n,g))},enqueueReplaceState:function(n,o,u){n=n._reactInternals;var p=Un(),g=wo(n),w=ps(p,g);w.tag=1,w.payload=o,u!=null&&(w.callback=u),o=go(n,w,g),o!==null&&(ii(o,n,g,p),kc(o,n,g))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var u=Un(),p=wo(n),g=ps(u,p);g.tag=2,o!=null&&(g.callback=o),o=go(n,g,p),o!==null&&(ii(o,n,p,u),kc(o,n,p))}};function ag(n,o,u,p,g,w,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(p,w,S):o.prototype&&o.prototype.isPureReactComponent?!vi(u,p)||!vi(g,w):!0}function lg(n,o,u){var p=!1,g=fo,w=o.contextType;return typeof w=="object"&&w!==null?w=Dr(w):(g=er(o)?pa:xn.current,p=o.contextTypes,w=(p=p!=null)?ol(n,g):fo),o=new o(u,w),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Vc,n.stateNode=o,o._reactInternals=n,p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=w),o}function ug(n,o,u,p){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==n&&Vc.enqueueReplaceState(o,o.state,null)}function $d(n,o,u,p){var g=n.stateNode;g.props=u,g.state=n.memoizedState,g.refs={},Ld(n);var w=o.contextType;typeof w=="object"&&w!==null?g.context=Dr(w):(w=er(o)?pa:xn.current,g.context=ol(n,w)),g.state=n.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Wd(n,o,w,u),g.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Vc.enqueueReplaceState(g,g.state,null),Rc(n,u,g,p),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function pl(n,o){try{var u="",p=o;do u+=Te(p),p=p.return;while(p);var g=u}catch(w){g=`
Error generating stack: `+w.message+`
`+w.stack}return{value:n,source:o,stack:g,digest:null}}function qd(n,o,u){return{value:n,source:null,stack:u??null,digest:o??null}}function Zd(n,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var nE=typeof WeakMap=="function"?WeakMap:Map;function cg(n,o,u){u=ps(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){Wc||(Wc=!0,uf=p),Zd(n,o)},u}function hg(n,o,u){u=ps(-1,u),u.tag=3;var p=n.type.getDerivedStateFromError;if(typeof p=="function"){var g=o.value;u.payload=function(){return p(g)},u.callback=function(){Zd(n,o)}}var w=n.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){Zd(n,o),typeof p!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),u}function dg(n,o,u){var p=n.pingCache;if(p===null){p=n.pingCache=new nE;var g=new Set;p.set(o,g)}else g=p.get(o),g===void 0&&(g=new Set,p.set(o,g));g.has(u)||(g.add(u),n=gE.bind(null,n,o,u),o.then(n,n))}function fg(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function pg(n,o,u,p,g){return(n.mode&1)===0?(n===o?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ps(-1,1),o.tag=2,go(u,o,1))),u.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var rE=Me.ReactCurrentOwner,tr=!1;function zn(n,o,u,p){o.child=n===null?Om(o,null,u,p):cl(o,n.child,u,p)}function mg(n,o,u,p,g){u=u.render;var w=o.ref;return dl(o,g),p=Fd(n,o,u,p,w,g),u=zd(),n!==null&&!tr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,ms(n,o,g)):(xt&&u&&Ed(o),o.flags|=1,zn(n,o,p,g),o.child)}function gg(n,o,u,p,g){if(n===null){var w=u.type;return typeof w=="function"&&!gf(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=w,_g(n,o,w,p,g)):(n=Qc(u.type,null,p,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(w=n.child,(n.lanes&g)===0){var S=w.memoizedProps;if(u=u.compare,u=u!==null?u:vi,u(S,p)&&n.ref===o.ref)return ms(n,o,g)}return o.flags|=1,n=To(w,p),n.ref=o.ref,n.return=o,o.child=n}function _g(n,o,u,p,g){if(n!==null){var w=n.memoizedProps;if(vi(w,p)&&n.ref===o.ref)if(tr=!1,o.pendingProps=p=w,(n.lanes&g)!==0)(n.flags&131072)!==0&&(tr=!0);else return o.lanes=n.lanes,ms(n,o,g)}return Gd(n,o,u,p,g)}function vg(n,o,u){var p=o.pendingProps,g=p.children,w=n!==null?n.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(gl,yr),yr|=u;else{if((u&1073741824)===0)return n=w!==null?w.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,Tt(gl,yr),yr|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,Tt(gl,yr),yr|=p}else w!==null?(p=w.baseLanes|u,o.memoizedState=null):p=u,Tt(gl,yr),yr|=p;return zn(n,o,g,u),o.child}function yg(n,o){var u=o.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Gd(n,o,u,p,g){var w=er(u)?pa:xn.current;return w=ol(o,w),dl(o,g),u=Fd(n,o,u,p,w,g),p=zd(),n!==null&&!tr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,ms(n,o,g)):(xt&&p&&Ed(o),o.flags|=1,zn(n,o,u,g),o.child)}function wg(n,o,u,p,g){if(er(u)){var w=!0;Ec(o)}else w=!1;if(dl(o,g),o.stateNode===null)zc(n,o),lg(o,u,p),$d(o,u,p,g),p=!0;else if(n===null){var S=o.stateNode,R=o.memoizedProps;S.props=R;var V=S.context,J=u.contextType;typeof J=="object"&&J!==null?J=Dr(J):(J=er(u)?pa:xn.current,J=ol(o,J));var ue=u.getDerivedStateFromProps,ce=typeof ue=="function"||typeof S.getSnapshotBeforeUpdate=="function";ce||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(R!==p||V!==J)&&ug(o,S,p,J),mo=!1;var le=o.memoizedState;S.state=le,Rc(o,p,S,g),V=o.memoizedState,R!==p||le!==V||Jn.current||mo?(typeof ue=="function"&&(Wd(o,u,ue,p),V=o.memoizedState),(R=mo||ag(o,u,R,p,le,V,J))?(ce||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=V),S.props=p,S.state=V,S.context=J,p=R):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{S=o.stateNode,Dm(n,o),R=o.memoizedProps,J=o.type===o.elementType?R:ti(o.type,R),S.props=J,ce=o.pendingProps,le=S.context,V=u.contextType,typeof V=="object"&&V!==null?V=Dr(V):(V=er(u)?pa:xn.current,V=ol(o,V));var ye=u.getDerivedStateFromProps;(ue=typeof ye=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(R!==ce||le!==V)&&ug(o,S,p,V),mo=!1,le=o.memoizedState,S.state=le,Rc(o,p,S,g);var Se=o.memoizedState;R!==ce||le!==Se||Jn.current||mo?(typeof ye=="function"&&(Wd(o,u,ye,p),Se=o.memoizedState),(J=mo||ag(o,u,J,p,le,Se,V)||!1)?(ue||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,Se,V),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,Se,V)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||R===n.memoizedProps&&le===n.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&le===n.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=Se),S.props=p,S.state=Se,S.context=V,p=J):(typeof S.componentDidUpdate!="function"||R===n.memoizedProps&&le===n.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&le===n.memoizedState||(o.flags|=1024),p=!1)}return Kd(n,o,u,p,w,g)}function Kd(n,o,u,p,g,w){yg(n,o);var S=(o.flags&128)!==0;if(!p&&!S)return g&&Pm(o,u,!1),ms(n,o,w);p=o.stateNode,rE.current=o;var R=S&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,n!==null&&S?(o.child=cl(o,n.child,null,w),o.child=cl(o,null,R,w)):zn(n,o,R,w),o.memoizedState=p.state,g&&Pm(o,u,!0),o.child}function Eg(n){var o=n.stateNode;o.pendingContext?Im(n,o.pendingContext,o.pendingContext!==o.context):o.context&&Im(n,o.context,!1),Nd(n,o.containerInfo)}function Tg(n,o,u,p,g){return ul(),Pd(g),o.flags|=256,zn(n,o,u,p),o.child}var Qd={dehydrated:null,treeContext:null,retryLane:0};function Yd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Ig(n,o,u){var p=o.pendingProps,g=Rt.current,w=!1,S=(o.flags&128)!==0,R;if((R=S)||(R=n!==null&&n.memoizedState===null?!1:(g&2)!==0),R?(w=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Tt(Rt,g&1),n===null)return Sd(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((o.mode&1)===0?o.lanes=1:n.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=p.children,n=p.fallback,w?(p=o.mode,w=o.child,S={mode:"hidden",children:S},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=S):w=Yc(S,p,0,null),n=Sa(n,p,u,null),w.return=o,n.return=o,w.sibling=n,o.child=w,o.child.memoizedState=Yd(u),o.memoizedState=Qd,n):Xd(o,S));if(g=n.memoizedState,g!==null&&(R=g.dehydrated,R!==null))return iE(n,o,S,p,R,g,u);if(w){w=p.fallback,S=o.mode,g=n.child,R=g.sibling;var V={mode:"hidden",children:p.children};return(S&1)===0&&o.child!==g?(p=o.child,p.childLanes=0,p.pendingProps=V,o.deletions=null):(p=To(g,V),p.subtreeFlags=g.subtreeFlags&14680064),R!==null?w=To(R,w):(w=Sa(w,S,u,null),w.flags|=2),w.return=o,p.return=o,p.sibling=w,o.child=p,p=w,w=o.child,S=n.child.memoizedState,S=S===null?Yd(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},w.memoizedState=S,w.childLanes=n.childLanes&~u,o.memoizedState=Qd,p}return w=n.child,n=w.sibling,p=To(w,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=u),p.return=o,p.sibling=null,n!==null&&(u=o.deletions,u===null?(o.deletions=[n],o.flags|=16):u.push(n)),o.child=p,o.memoizedState=null,p}function Xd(n,o){return o=Yc({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function Fc(n,o,u,p){return p!==null&&Pd(p),cl(o,n.child,null,u),n=Xd(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function iE(n,o,u,p,g,w,S){if(u)return o.flags&256?(o.flags&=-257,p=qd(Error(t(422))),Fc(n,o,S,p)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(w=p.fallback,g=o.mode,p=Yc({mode:"visible",children:p.children},g,0,null),w=Sa(w,g,S,null),w.flags|=2,p.return=o,w.return=o,p.sibling=w,o.child=p,(o.mode&1)!==0&&cl(o,n.child,null,S),o.child.memoizedState=Yd(S),o.memoizedState=Qd,w);if((o.mode&1)===0)return Fc(n,o,S,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var R=p.dgst;return p=R,w=Error(t(419)),p=qd(w,p,void 0),Fc(n,o,S,p)}if(R=(S&n.childLanes)!==0,tr||R){if(p=cn,p!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|S))!==0?0:g,g!==0&&g!==w.retryLane&&(w.retryLane=g,fs(n,g),ii(p,n,g,-1))}return mf(),p=qd(Error(t(421))),Fc(n,o,S,p)}return g.data==="$?"?(o.flags|=128,o.child=n.child,o=_E.bind(null,n),g._reactRetry=o,null):(n=w.treeContext,vr=Ei(g.nextSibling),_r=o,xt=!0,ei=null,n!==null&&(Or[Mr++]=hs,Or[Mr++]=ds,Or[Mr++]=ma,hs=n.id,ds=n.overflow,ma=o),o=Xd(o,p.children),o.flags|=4096,o)}function Sg(n,o,u){n.lanes|=o;var p=n.alternate;p!==null&&(p.lanes|=o),kd(n.return,o,u)}function Jd(n,o,u,p,g){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:g}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=g)}function Pg(n,o,u){var p=o.pendingProps,g=p.revealOrder,w=p.tail;if(zn(n,o,p.children,u),p=Rt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Sg(n,u,o);else if(n.tag===19)Sg(n,u,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}p&=1}if(Tt(Rt,p),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)n=u.alternate,n!==null&&Lc(n)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Jd(o,!1,g,u,w);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&Lc(n)===null){o.child=g;break}n=g.sibling,g.sibling=u,u=g,g=n}Jd(o,!0,u,null,w);break;case"together":Jd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function zc(n,o){(o.mode&1)===0&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function ms(n,o,u){if(n!==null&&(o.dependencies=n.dependencies),wa|=o.lanes,(u&o.childLanes)===0)return null;if(n!==null&&o.child!==n.child)throw Error(t(153));if(o.child!==null){for(n=o.child,u=To(n,n.pendingProps),o.child=u,u.return=o;n.sibling!==null;)n=n.sibling,u=u.sibling=To(n,n.pendingProps),u.return=o;u.sibling=null}return o.child}function sE(n,o,u){switch(o.tag){case 3:Eg(o),ul();break;case 5:zm(o);break;case 1:er(o.type)&&Ec(o);break;case 4:Nd(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,g=o.memoizedProps.value;Tt(Cc,p._currentValue),p._currentValue=g;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Tt(Rt,Rt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Ig(n,o,u):(Tt(Rt,Rt.current&1),n=ms(n,o,u),n!==null?n.sibling:null);Tt(Rt,Rt.current&1);break;case 19:if(p=(u&o.childLanes)!==0,(n.flags&128)!==0){if(p)return Pg(n,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Tt(Rt,Rt.current),p)break;return null;case 22:case 23:return o.lanes=0,vg(n,o,u)}return ms(n,o,u)}var xg,ef,Cg,Ag;xg=function(n,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},ef=function(){},Cg=function(n,o,u,p){var g=n.memoizedProps;if(g!==p){n=o.stateNode,va(Ti.current);var w=null;switch(u){case"input":g=bi(n,g),p=bi(n,p),w=[];break;case"select":g=se({},g,{value:void 0}),p=se({},p,{value:void 0}),w=[];break;case"textarea":g=As(n,g),p=As(n,p),w=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(n.onclick=ae)}ea(u,p);var S;u=null;for(J in g)if(!p.hasOwnProperty(J)&&g.hasOwnProperty(J)&&g[J]!=null)if(J==="style"){var R=g[J];for(S in R)R.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(a.hasOwnProperty(J)?w||(w=[]):(w=w||[]).push(J,null));for(J in p){var V=p[J];if(R=g!=null?g[J]:void 0,p.hasOwnProperty(J)&&V!==R&&(V!=null||R!=null))if(J==="style")if(R){for(S in R)!R.hasOwnProperty(S)||V&&V.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in V)V.hasOwnProperty(S)&&R[S]!==V[S]&&(u||(u={}),u[S]=V[S])}else u||(w||(w=[]),w.push(J,u)),u=V;else J==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,R=R?R.__html:void 0,V!=null&&R!==V&&(w=w||[]).push(J,V)):J==="children"?typeof V!="string"&&typeof V!="number"||(w=w||[]).push(J,""+V):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(a.hasOwnProperty(J)?(V!=null&&J==="onScroll"&&vt("scroll",n),w||R===V||(w=[])):(w=w||[]).push(J,V))}u&&(w=w||[]).push("style",u);var J=w;(o.updateQueue=J)&&(o.flags|=4)}},Ag=function(n,o,u,p){u!==p&&(o.flags|=4)};function fu(n,o){if(!xt)switch(n.tailMode){case"hidden":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:p.sibling=null}}function An(n){var o=n.alternate!==null&&n.alternate.child===n.child,u=0,p=0;if(o)for(var g=n.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=p,n.childLanes=u,o}function oE(n,o,u){var p=o.pendingProps;switch(Td(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(o),null;case 1:return er(o.type)&&wc(),An(o),null;case 3:return p=o.stateNode,fl(),St(Jn),St(xn),Md(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(n===null||n.child===null)&&(Pc(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ei!==null&&(df(ei),ei=null))),ef(n,o),An(o),null;case 5:bd(o);var g=va(lu.current);if(u=o.type,n!==null&&o.stateNode!=null)Cg(n,o,u,p,g),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return An(o),null}if(n=va(Ti.current),Pc(o)){p=o.stateNode,u=o.type;var w=o.memoizedProps;switch(p[br]=o,p[uo]=w,n=(o.mode&1)!==0,u){case"dialog":vt("cancel",p),vt("close",p);break;case"iframe":case"object":case"embed":vt("load",p);break;case"video":case"audio":for(g=0;g<oo.length;g++)vt(oo[g],p);break;case"source":vt("error",p);break;case"img":case"image":case"link":vt("error",p),vt("load",p);break;case"details":vt("toggle",p);break;case"input":Oi(p,w),vt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},vt("invalid",p);break;case"textarea":Vi(p,w),vt("invalid",p)}ea(u,w),g=null;for(var S in w)if(w.hasOwnProperty(S)){var R=w[S];S==="children"?typeof R=="string"?p.textContent!==R&&(w.suppressHydrationWarning!==!0&&X(p.textContent,R,n),g=["children",R]):typeof R=="number"&&p.textContent!==""+R&&(w.suppressHydrationWarning!==!0&&X(p.textContent,R,n),g=["children",""+R]):a.hasOwnProperty(S)&&R!=null&&S==="onScroll"&&vt("scroll",p)}switch(u){case"input":ar(p),Di(p,w,!0);break;case"textarea":ar(p),Xo(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=ae)}p=g,o.updateQueue=p,p!==null&&(o.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ct(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof p.is=="string"?n=S.createElement(u,{is:p.is}):(n=S.createElement(u),u==="select"&&(S=n,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):n=S.createElementNS(n,u),n[br]=o,n[uo]=p,xg(n,o,!1,!1),o.stateNode=n;e:{switch(S=Wr(u,p),u){case"dialog":vt("cancel",n),vt("close",n),g=p;break;case"iframe":case"object":case"embed":vt("load",n),g=p;break;case"video":case"audio":for(g=0;g<oo.length;g++)vt(oo[g],n);g=p;break;case"source":vt("error",n),g=p;break;case"img":case"image":case"link":vt("error",n),vt("load",n),g=p;break;case"details":vt("toggle",n),g=p;break;case"input":Oi(n,p),g=bi(n,p),vt("invalid",n);break;case"option":g=p;break;case"select":n._wrapperState={wasMultiple:!!p.multiple},g=se({},p,{value:void 0}),vt("invalid",n);break;case"textarea":Vi(n,p),g=As(n,p),vt("invalid",n);break;default:g=p}ea(u,g),R=g;for(w in R)if(R.hasOwnProperty(w)){var V=R[w];w==="style"?zi(n,V):w==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Jo(n,V)):w==="children"?typeof V=="string"?(u!=="textarea"||V!=="")&&Hr(n,V):typeof V=="number"&&Hr(n,""+V):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(a.hasOwnProperty(w)?V!=null&&w==="onScroll"&&vt("scroll",n):V!=null&&me(n,w,V,S))}switch(u){case"input":ar(n),Di(n,p,!1);break;case"textarea":ar(n),Xo(n);break;case"option":p.value!=null&&n.setAttribute("value",""+Ge(p.value));break;case"select":n.multiple=!!p.multiple,w=p.value,w!=null?lr(n,!!p.multiple,w,!1):p.defaultValue!=null&&lr(n,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=ae)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return An(o),null;case 6:if(n&&o.stateNode!=null)Ag(n,o,n.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(u=va(lu.current),va(Ti.current),Pc(o)){if(p=o.stateNode,u=o.memoizedProps,p[br]=o,(w=p.nodeValue!==u)&&(n=_r,n!==null))switch(n.tag){case 3:X(p.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&X(p.nodeValue,u,(n.mode&1)!==0)}w&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[br]=o,o.stateNode=p}return An(o),null;case 13:if(St(Rt),p=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(xt&&vr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Lm(),ul(),o.flags|=98560,w=!1;else if(w=Pc(o),p!==null&&p.dehydrated!==null){if(n===null){if(!w)throw Error(t(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[br]=o}else ul(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;An(o),w=!1}else ei!==null&&(df(ei),ei=null),w=!0;if(!w)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(p=p!==null,p!==(n!==null&&n.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(n===null||(Rt.current&1)!==0?tn===0&&(tn=3):mf())),o.updateQueue!==null&&(o.flags|=4),An(o),null);case 4:return fl(),ef(n,o),n===null&&ao(o.stateNode.containerInfo),An(o),null;case 10:return Ad(o.type._context),An(o),null;case 17:return er(o.type)&&wc(),An(o),null;case 19:if(St(Rt),w=o.memoizedState,w===null)return An(o),null;if(p=(o.flags&128)!==0,S=w.rendering,S===null)if(p)fu(w,!1);else{if(tn!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(S=Lc(n),S!==null){for(o.flags|=128,fu(w,!1),p=S.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)w=u,n=p,w.flags&=14680066,S=w.alternate,S===null?(w.childLanes=0,w.lanes=n,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=S.childLanes,w.lanes=S.lanes,w.child=S.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=S.memoizedProps,w.memoizedState=S.memoizedState,w.updateQueue=S.updateQueue,w.type=S.type,n=S.dependencies,w.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return Tt(Rt,Rt.current&1|2),o.child}n=n.sibling}w.tail!==null&&_t()>_l&&(o.flags|=128,p=!0,fu(w,!1),o.lanes=4194304)}else{if(!p)if(n=Lc(S),n!==null){if(o.flags|=128,p=!0,u=n.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),fu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!S.alternate&&!xt)return An(o),null}else 2*_t()-w.renderingStartTime>_l&&u!==1073741824&&(o.flags|=128,p=!0,fu(w,!1),o.lanes=4194304);w.isBackwards?(S.sibling=o.child,o.child=S):(u=w.last,u!==null?u.sibling=S:o.child=S,w.last=S)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=_t(),o.sibling=null,u=Rt.current,Tt(Rt,p?u&1|2:u&1),o):(An(o),null);case 22:case 23:return pf(),p=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(yr&1073741824)!==0&&(An(o),o.subtreeFlags&6&&(o.flags|=8192)):An(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function aE(n,o){switch(Td(o),o.tag){case 1:return er(o.type)&&wc(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return fl(),St(Jn),St(xn),Md(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 5:return bd(o),null;case 13:if(St(Rt),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ul()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return St(Rt),null;case 4:return fl(),null;case 10:return Ad(o.type._context),null;case 22:case 23:return pf(),null;case 24:return null;default:return null}}var Uc=!1,kn=!1,lE=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function ml(n,o){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){Vt(n,o,p)}else u.current=null}function tf(n,o,u){try{u()}catch(p){Vt(n,o,p)}}var kg=!1;function uE(n,o){if(ge=Gr,n=Ql(),Yl(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var g=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var S=0,R=-1,V=-1,J=0,ue=0,ce=n,le=null;t:for(;;){for(var ye;ce!==u||g!==0&&ce.nodeType!==3||(R=S+g),ce!==w||p!==0&&ce.nodeType!==3||(V=S+p),ce.nodeType===3&&(S+=ce.nodeValue.length),(ye=ce.firstChild)!==null;)le=ce,ce=ye;for(;;){if(ce===n)break t;if(le===u&&++J===g&&(R=S),le===w&&++ue===p&&(V=S),(ye=ce.nextSibling)!==null)break;ce=le,le=ce.parentNode}ce=ye}u=R===-1||V===-1?null:{start:R,end:V}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ne={focusedElem:n,selectionRange:u},Gr=!1,Ie=o;Ie!==null;)if(o=Ie,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Ie=n;else for(;Ie!==null;){o=Ie;try{var Se=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var xe=Se.memoizedProps,Ut=Se.memoizedState,K=o.stateNode,j=K.getSnapshotBeforeUpdate(o.elementType===o.type?xe:ti(o.type,xe),Ut);K.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var Y=o.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(he){Vt(o,o.return,he)}if(n=o.sibling,n!==null){n.return=o.return,Ie=n;break}Ie=o.return}return Se=kg,kg=!1,Se}function pu(n,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&n)===n){var w=g.destroy;g.destroy=void 0,w!==void 0&&tf(o,u,w)}g=g.next}while(g!==p)}}function jc(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&n)===n){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function nf(n){var o=n.ref;if(o!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof o=="function"?o(n):o.current=n}}function Rg(n){var o=n.alternate;o!==null&&(n.alternate=null,Rg(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[br],delete o[uo],delete o[co],delete o[_d],delete o[vd])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Lg(n){return n.tag===5||n.tag===3||n.tag===4}function Ng(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Lg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rf(n,o,u){var p=n.tag;if(p===5||p===6)n=n.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(n,o):u.insertBefore(n,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(n,u)):(o=u,o.appendChild(n)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ae));else if(p!==4&&(n=n.child,n!==null))for(rf(n,o,u),n=n.sibling;n!==null;)rf(n,o,u),n=n.sibling}function sf(n,o,u){var p=n.tag;if(p===5||p===6)n=n.stateNode,o?u.insertBefore(n,o):u.appendChild(n);else if(p!==4&&(n=n.child,n!==null))for(sf(n,o,u),n=n.sibling;n!==null;)sf(n,o,u),n=n.sibling}var mn=null,ni=!1;function _o(n,o,u){for(u=u.child;u!==null;)bg(n,o,u),u=u.sibling}function bg(n,o,u){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(di,u)}catch{}switch(u.tag){case 5:kn||ml(u,o);case 6:var p=mn,g=ni;mn=null,_o(n,o,u),mn=p,ni=g,mn!==null&&(ni?(n=mn,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):mn.removeChild(u.stateNode));break;case 18:mn!==null&&(ni?(n=mn,u=u.stateNode,n.nodeType===8?iu(n.parentNode,u):n.nodeType===1&&iu(n,u),Xt(n)):iu(mn,u.stateNode));break;case 4:p=mn,g=ni,mn=u.stateNode.containerInfo,ni=!0,_o(n,o,u),mn=p,ni=g;break;case 0:case 11:case 14:case 15:if(!kn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var w=g,S=w.destroy;w=w.tag,S!==void 0&&((w&2)!==0||(w&4)!==0)&&tf(u,o,S),g=g.next}while(g!==p)}_o(n,o,u);break;case 1:if(!kn&&(ml(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(R){Vt(u,o,R)}_o(n,o,u);break;case 21:_o(n,o,u);break;case 22:u.mode&1?(kn=(p=kn)||u.memoizedState!==null,_o(n,o,u),kn=p):_o(n,o,u);break;default:_o(n,o,u)}}function Og(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new lE),o.forEach(function(p){var g=vE.bind(null,n,p);u.has(p)||(u.add(p),p.then(g,g))})}}function ri(n,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];try{var w=n,S=o,R=S;e:for(;R!==null;){switch(R.tag){case 5:mn=R.stateNode,ni=!1;break e;case 3:mn=R.stateNode.containerInfo,ni=!0;break e;case 4:mn=R.stateNode.containerInfo,ni=!0;break e}R=R.return}if(mn===null)throw Error(t(160));bg(w,S,g),mn=null,ni=!1;var V=g.alternate;V!==null&&(V.return=null),g.return=null}catch(J){Vt(g,o,J)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Mg(o,n),o=o.sibling}function Mg(n,o){var u=n.alternate,p=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ri(o,n),Si(n),p&4){try{pu(3,n,n.return),jc(3,n)}catch(xe){Vt(n,n.return,xe)}try{pu(5,n,n.return)}catch(xe){Vt(n,n.return,xe)}}break;case 1:ri(o,n),Si(n),p&512&&u!==null&&ml(u,u.return);break;case 5:if(ri(o,n),Si(n),p&512&&u!==null&&ml(u,u.return),n.flags&32){var g=n.stateNode;try{Hr(g,"")}catch(xe){Vt(n,n.return,xe)}}if(p&4&&(g=n.stateNode,g!=null)){var w=n.memoizedProps,S=u!==null?u.memoizedProps:w,R=n.type,V=n.updateQueue;if(n.updateQueue=null,V!==null)try{R==="input"&&w.type==="radio"&&w.name!=null&&xs(g,w),Wr(R,S);var J=Wr(R,w);for(S=0;S<V.length;S+=2){var ue=V[S],ce=V[S+1];ue==="style"?zi(g,ce):ue==="dangerouslySetInnerHTML"?Jo(g,ce):ue==="children"?Hr(g,ce):me(g,ue,ce,J)}switch(R){case"input":Mi(g,w);break;case"textarea":ks(g,w);break;case"select":var le=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!w.multiple;var ye=w.value;ye!=null?lr(g,!!w.multiple,ye,!1):le!==!!w.multiple&&(w.defaultValue!=null?lr(g,!!w.multiple,w.defaultValue,!0):lr(g,!!w.multiple,w.multiple?[]:"",!1))}g[uo]=w}catch(xe){Vt(n,n.return,xe)}}break;case 6:if(ri(o,n),Si(n),p&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,w=n.memoizedProps;try{g.nodeValue=w}catch(xe){Vt(n,n.return,xe)}}break;case 3:if(ri(o,n),Si(n),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Xt(o.containerInfo)}catch(xe){Vt(n,n.return,xe)}break;case 4:ri(o,n),Si(n);break;case 13:ri(o,n),Si(n),g=n.child,g.flags&8192&&(w=g.memoizedState!==null,g.stateNode.isHidden=w,!w||g.alternate!==null&&g.alternate.memoizedState!==null||(lf=_t())),p&4&&Og(n);break;case 22:if(ue=u!==null&&u.memoizedState!==null,n.mode&1?(kn=(J=kn)||ue,ri(o,n),kn=J):ri(o,n),Si(n),p&8192){if(J=n.memoizedState!==null,(n.stateNode.isHidden=J)&&!ue&&(n.mode&1)!==0)for(Ie=n,ue=n.child;ue!==null;){for(ce=Ie=ue;Ie!==null;){switch(le=Ie,ye=le.child,le.tag){case 0:case 11:case 14:case 15:pu(4,le,le.return);break;case 1:ml(le,le.return);var Se=le.stateNode;if(typeof Se.componentWillUnmount=="function"){p=le,u=le.return;try{o=p,Se.props=o.memoizedProps,Se.state=o.memoizedState,Se.componentWillUnmount()}catch(xe){Vt(p,u,xe)}}break;case 5:ml(le,le.return);break;case 22:if(le.memoizedState!==null){Fg(ce);continue}}ye!==null?(ye.return=le,Ie=ye):Fg(ce)}ue=ue.sibling}e:for(ue=null,ce=n;;){if(ce.tag===5){if(ue===null){ue=ce;try{g=ce.stateNode,J?(w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(R=ce.stateNode,V=ce.memoizedProps.style,S=V!=null&&V.hasOwnProperty("display")?V.display:null,R.style.display=Rs("display",S))}catch(xe){Vt(n,n.return,xe)}}}else if(ce.tag===6){if(ue===null)try{ce.stateNode.nodeValue=J?"":ce.memoizedProps}catch(xe){Vt(n,n.return,xe)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===n)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===n)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===n)break e;ue===ce&&(ue=null),ce=ce.return}ue===ce&&(ue=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:ri(o,n),Si(n),p&4&&Og(n);break;case 21:break;default:ri(o,n),Si(n)}}function Si(n){var o=n.flags;if(o&2){try{e:{for(var u=n.return;u!==null;){if(Lg(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(Hr(g,""),p.flags&=-33);var w=Ng(n);sf(n,w,g);break;case 3:case 4:var S=p.stateNode.containerInfo,R=Ng(n);rf(n,R,S);break;default:throw Error(t(161))}}catch(V){Vt(n,n.return,V)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function cE(n,o,u){Ie=n,Dg(n)}function Dg(n,o,u){for(var p=(n.mode&1)!==0;Ie!==null;){var g=Ie,w=g.child;if(g.tag===22&&p){var S=g.memoizedState!==null||Uc;if(!S){var R=g.alternate,V=R!==null&&R.memoizedState!==null||kn;R=Uc;var J=kn;if(Uc=S,(kn=V)&&!J)for(Ie=g;Ie!==null;)S=Ie,V=S.child,S.tag===22&&S.memoizedState!==null?zg(g):V!==null?(V.return=S,Ie=V):zg(g);for(;w!==null;)Ie=w,Dg(w),w=w.sibling;Ie=g,Uc=R,kn=J}Vg(n)}else(g.subtreeFlags&8772)!==0&&w!==null?(w.return=g,Ie=w):Vg(n)}}function Vg(n){for(;Ie!==null;){var o=Ie;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:kn||jc(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!kn)if(u===null)p.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:ti(o.type,u.memoizedProps);p.componentDidUpdate(g,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&Fm(o,w,p);break;case 3:var S=o.updateQueue;if(S!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}Fm(o,S,u)}break;case 5:var R=o.stateNode;if(u===null&&o.flags&4){u=R;var V=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&u.focus();break;case"img":V.src&&(u.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var J=o.alternate;if(J!==null){var ue=J.memoizedState;if(ue!==null){var ce=ue.dehydrated;ce!==null&&Xt(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}kn||o.flags&512&&nf(o)}catch(le){Vt(o,o.return,le)}}if(o===n){Ie=null;break}if(u=o.sibling,u!==null){u.return=o.return,Ie=u;break}Ie=o.return}}function Fg(n){for(;Ie!==null;){var o=Ie;if(o===n){Ie=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Ie=u;break}Ie=o.return}}function zg(n){for(;Ie!==null;){var o=Ie;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{jc(4,o)}catch(V){Vt(o,u,V)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var g=o.return;try{p.componentDidMount()}catch(V){Vt(o,g,V)}}var w=o.return;try{nf(o)}catch(V){Vt(o,w,V)}break;case 5:var S=o.return;try{nf(o)}catch(V){Vt(o,S,V)}}}catch(V){Vt(o,o.return,V)}if(o===n){Ie=null;break}var R=o.sibling;if(R!==null){R.return=o.return,Ie=R;break}Ie=o.return}}var hE=Math.ceil,Bc=Me.ReactCurrentDispatcher,of=Me.ReactCurrentOwner,Fr=Me.ReactCurrentBatchConfig,it=0,cn=null,Zt=null,gn=0,yr=0,gl=ho(0),tn=0,mu=null,wa=0,Hc=0,af=0,gu=null,nr=null,lf=0,_l=1/0,gs=null,Wc=!1,uf=null,vo=null,$c=!1,yo=null,qc=0,_u=0,cf=null,Zc=-1,Gc=0;function Un(){return(it&6)!==0?_t():Zc!==-1?Zc:Zc=_t()}function wo(n){return(n.mode&1)===0?1:(it&2)!==0&&gn!==0?gn&-gn:G0.transition!==null?(Gc===0&&(Gc=Ki()),Gc):(n=Ze,n!==0||(n=window.event,n=n===void 0?16:Ke(n.type)),n)}function ii(n,o,u,p){if(50<_u)throw _u=0,cf=null,Error(t(185));En(n,u,p),((it&2)===0||n!==cn)&&(n===cn&&((it&2)===0&&(Hc|=u),tn===4&&Eo(n,gn)),rr(n,p),u===1&&it===0&&(o.mode&1)===0&&(_l=_t()+500,Tc&&po()))}function rr(n,o){var u=n.callbackNode;qn(n,o);var p=mt(n,n===cn?gn:0);if(p===0)u!==null&&zs(u),n.callbackNode=null,n.callbackPriority=0;else if(o=p&-p,n.callbackPriority!==o){if(u!=null&&zs(u),o===1)n.tag===0?Z0(jg.bind(null,n)):xm(jg.bind(null,n)),Pn(function(){(it&6)===0&&po()}),u=null;else{switch(Zn(p)){case 1:u=qi;break;case 4:u=ci;break;case 16:u=$n;break;case 536870912:u=hi;break;default:u=$n}u=Kg(u,Ug.bind(null,n))}n.callbackPriority=o,n.callbackNode=u}}function Ug(n,o){if(Zc=-1,Gc=0,(it&6)!==0)throw Error(t(327));var u=n.callbackNode;if(vl()&&n.callbackNode!==u)return null;var p=mt(n,n===cn?gn:0);if(p===0)return null;if((p&30)!==0||(p&n.expiredLanes)!==0||o)o=Kc(n,p);else{o=p;var g=it;it|=2;var w=Hg();(cn!==n||gn!==o)&&(gs=null,_l=_t()+500,Ta(n,o));do try{pE();break}catch(R){Bg(n,R)}while(!0);Cd(),Bc.current=w,it=g,Zt!==null?o=0:(cn=null,gn=0,o=tn)}if(o!==0){if(o===2&&(g=wt(n),g!==0&&(p=g,o=hf(n,g))),o===1)throw u=mu,Ta(n,0),Eo(n,p),rr(n,_t()),u;if(o===6)Eo(n,p);else{if(g=n.current.alternate,(p&30)===0&&!dE(g)&&(o=Kc(n,p),o===2&&(w=wt(n),w!==0&&(p=w,o=hf(n,w))),o===1))throw u=mu,Ta(n,0),Eo(n,p),rr(n,_t()),u;switch(n.finishedWork=g,n.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:Ia(n,nr,gs);break;case 3:if(Eo(n,p),(p&130023424)===p&&(o=lf+500-_t(),10<o)){if(mt(n,0)!==0)break;if(g=n.suspendedLanes,(g&p)!==p){Un(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=Jt(Ia.bind(null,n,nr,gs),o);break}Ia(n,nr,gs);break;case 4:if(Eo(n,p),(p&4194240)===p)break;for(o=n.eventTimes,g=-1;0<p;){var S=31-ze(p);w=1<<S,S=o[S],S>g&&(g=S),p&=~w}if(p=g,p=_t()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*hE(p/1960))-p,10<p){n.timeoutHandle=Jt(Ia.bind(null,n,nr,gs),p);break}Ia(n,nr,gs);break;case 5:Ia(n,nr,gs);break;default:throw Error(t(329))}}}return rr(n,_t()),n.callbackNode===u?Ug.bind(null,n):null}function hf(n,o){var u=gu;return n.current.memoizedState.isDehydrated&&(Ta(n,o).flags|=256),n=Kc(n,o),n!==2&&(o=nr,nr=u,o!==null&&df(o)),n}function df(n){nr===null?nr=n:nr.push.apply(nr,n)}function dE(n){for(var o=n;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var g=u[p],w=g.getSnapshot;g=g.value;try{if(!mr(w(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Eo(n,o){for(o&=~af,o&=~Hc,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var u=31-ze(o),p=1<<u;n[u]=-1,o&=~p}}function jg(n){if((it&6)!==0)throw Error(t(327));vl();var o=mt(n,0);if((o&1)===0)return rr(n,_t()),null;var u=Kc(n,o);if(n.tag!==0&&u===2){var p=wt(n);p!==0&&(o=p,u=hf(n,p))}if(u===1)throw u=mu,Ta(n,0),Eo(n,o),rr(n,_t()),u;if(u===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,Ia(n,nr,gs),rr(n,_t()),null}function ff(n,o){var u=it;it|=1;try{return n(o)}finally{it=u,it===0&&(_l=_t()+500,Tc&&po())}}function Ea(n){yo!==null&&yo.tag===0&&(it&6)===0&&vl();var o=it;it|=1;var u=Fr.transition,p=Ze;try{if(Fr.transition=null,Ze=1,n)return n()}finally{Ze=p,Fr.transition=u,it=o,(it&6)===0&&po()}}function pf(){yr=gl.current,St(gl)}function Ta(n,o){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,qt(u)),Zt!==null)for(u=Zt.return;u!==null;){var p=u;switch(Td(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&wc();break;case 3:fl(),St(Jn),St(xn),Md();break;case 5:bd(p);break;case 4:fl();break;case 13:St(Rt);break;case 19:St(Rt);break;case 10:Ad(p.type._context);break;case 22:case 23:pf()}u=u.return}if(cn=n,Zt=n=To(n.current,null),gn=yr=o,tn=0,mu=null,af=Hc=wa=0,nr=gu=null,_a!==null){for(o=0;o<_a.length;o++)if(u=_a[o],p=u.interleaved,p!==null){u.interleaved=null;var g=p.next,w=u.pending;if(w!==null){var S=w.next;w.next=g,p.next=S}u.pending=p}_a=null}return n}function Bg(n,o){do{var u=Zt;try{if(Cd(),Nc.current=Dc,bc){for(var p=Lt.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}bc=!1}if(ya=0,un=en=Lt=null,uu=!1,cu=0,of.current=null,u===null||u.return===null){tn=1,mu=o,Zt=null;break}e:{var w=n,S=u.return,R=u,V=o;if(o=gn,R.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var J=V,ue=R,ce=ue.tag;if((ue.mode&1)===0&&(ce===0||ce===11||ce===15)){var le=ue.alternate;le?(ue.updateQueue=le.updateQueue,ue.memoizedState=le.memoizedState,ue.lanes=le.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var ye=fg(S);if(ye!==null){ye.flags&=-257,pg(ye,S,R,w,o),ye.mode&1&&dg(w,J,o),o=ye,V=J;var Se=o.updateQueue;if(Se===null){var xe=new Set;xe.add(V),o.updateQueue=xe}else Se.add(V);break e}else{if((o&1)===0){dg(w,J,o),mf();break e}V=Error(t(426))}}else if(xt&&R.mode&1){var Ut=fg(S);if(Ut!==null){(Ut.flags&65536)===0&&(Ut.flags|=256),pg(Ut,S,R,w,o),Pd(pl(V,R));break e}}w=V=pl(V,R),tn!==4&&(tn=2),gu===null?gu=[w]:gu.push(w),w=S;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var K=cg(w,V,o);Vm(w,K);break e;case 1:R=V;var j=w.type,Y=w.stateNode;if((w.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(vo===null||!vo.has(Y)))){w.flags|=65536,o&=-o,w.lanes|=o;var he=hg(w,R,o);Vm(w,he);break e}}w=w.return}while(w!==null)}$g(u)}catch(Ae){o=Ae,Zt===u&&u!==null&&(Zt=u=u.return);continue}break}while(!0)}function Hg(){var n=Bc.current;return Bc.current=Dc,n===null?Dc:n}function mf(){(tn===0||tn===3||tn===2)&&(tn=4),cn===null||(wa&268435455)===0&&(Hc&268435455)===0||Eo(cn,gn)}function Kc(n,o){var u=it;it|=2;var p=Hg();(cn!==n||gn!==o)&&(gs=null,Ta(n,o));do try{fE();break}catch(g){Bg(n,g)}while(!0);if(Cd(),it=u,Bc.current=p,Zt!==null)throw Error(t(261));return cn=null,gn=0,tn}function fE(){for(;Zt!==null;)Wg(Zt)}function pE(){for(;Zt!==null&&!Ba();)Wg(Zt)}function Wg(n){var o=Gg(n.alternate,n,yr);n.memoizedProps=n.pendingProps,o===null?$g(n):Zt=o,of.current=null}function $g(n){var o=n;do{var u=o.alternate;if(n=o.return,(o.flags&32768)===0){if(u=oE(u,o,yr),u!==null){Zt=u;return}}else{if(u=aE(u,o),u!==null){u.flags&=32767,Zt=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{tn=6,Zt=null;return}}if(o=o.sibling,o!==null){Zt=o;return}Zt=o=n}while(o!==null);tn===0&&(tn=5)}function Ia(n,o,u){var p=Ze,g=Fr.transition;try{Fr.transition=null,Ze=1,mE(n,o,u,p)}finally{Fr.transition=g,Ze=p}return null}function mE(n,o,u,p){do vl();while(yo!==null);if((it&6)!==0)throw Error(t(327));u=n.finishedWork;var g=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var w=u.lanes|u.childLanes;if(Ue(n,w),n===cn&&(Zt=cn=null,gn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||$c||($c=!0,Kg($n,function(){return vl(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=Fr.transition,Fr.transition=null;var S=Ze;Ze=1;var R=it;it|=4,of.current=null,uE(n,u),Mg(u,n),Lr(Ne),Gr=!!ge,Ne=ge=null,n.current=u,cE(u),Us(),it=R,Ze=S,Fr.transition=w}else n.current=u;if($c&&($c=!1,yo=n,qc=g),w=n.pendingLanes,w===0&&(vo=null),fi(u.stateNode),rr(n,_t()),o!==null)for(p=n.onRecoverableError,u=0;u<o.length;u++)g=o[u],p(g.value,{componentStack:g.stack,digest:g.digest});if(Wc)throw Wc=!1,n=uf,uf=null,n;return(qc&1)!==0&&n.tag!==0&&vl(),w=n.pendingLanes,(w&1)!==0?n===cf?_u++:(_u=0,cf=n):_u=0,po(),null}function vl(){if(yo!==null){var n=Zn(qc),o=Fr.transition,u=Ze;try{if(Fr.transition=null,Ze=16>n?16:n,yo===null)var p=!1;else{if(n=yo,yo=null,qc=0,(it&6)!==0)throw Error(t(331));var g=it;for(it|=4,Ie=n.current;Ie!==null;){var w=Ie,S=w.child;if((Ie.flags&16)!==0){var R=w.deletions;if(R!==null){for(var V=0;V<R.length;V++){var J=R[V];for(Ie=J;Ie!==null;){var ue=Ie;switch(ue.tag){case 0:case 11:case 15:pu(8,ue,w)}var ce=ue.child;if(ce!==null)ce.return=ue,Ie=ce;else for(;Ie!==null;){ue=Ie;var le=ue.sibling,ye=ue.return;if(Rg(ue),ue===J){Ie=null;break}if(le!==null){le.return=ye,Ie=le;break}Ie=ye}}}var Se=w.alternate;if(Se!==null){var xe=Se.child;if(xe!==null){Se.child=null;do{var Ut=xe.sibling;xe.sibling=null,xe=Ut}while(xe!==null)}}Ie=w}}if((w.subtreeFlags&2064)!==0&&S!==null)S.return=w,Ie=S;else e:for(;Ie!==null;){if(w=Ie,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:pu(9,w,w.return)}var K=w.sibling;if(K!==null){K.return=w.return,Ie=K;break e}Ie=w.return}}var j=n.current;for(Ie=j;Ie!==null;){S=Ie;var Y=S.child;if((S.subtreeFlags&2064)!==0&&Y!==null)Y.return=S,Ie=Y;else e:for(S=j;Ie!==null;){if(R=Ie,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:jc(9,R)}}catch(Ae){Vt(R,R.return,Ae)}if(R===S){Ie=null;break e}var he=R.sibling;if(he!==null){he.return=R.return,Ie=he;break e}Ie=R.return}}if(it=g,po(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(di,n)}catch{}p=!0}return p}finally{Ze=u,Fr.transition=o}}return!1}function qg(n,o,u){o=pl(u,o),o=cg(n,o,1),n=go(n,o,1),o=Un(),n!==null&&(En(n,1,o),rr(n,o))}function Vt(n,o,u){if(n.tag===3)qg(n,n,u);else for(;o!==null;){if(o.tag===3){qg(o,n,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(vo===null||!vo.has(p))){n=pl(u,n),n=hg(o,n,1),o=go(o,n,1),n=Un(),o!==null&&(En(o,1,n),rr(o,n));break}}o=o.return}}function gE(n,o,u){var p=n.pingCache;p!==null&&p.delete(o),o=Un(),n.pingedLanes|=n.suspendedLanes&u,cn===n&&(gn&u)===u&&(tn===4||tn===3&&(gn&130023424)===gn&&500>_t()-lf?Ta(n,0):af|=u),rr(n,o)}function Zg(n,o){o===0&&((n.mode&1)===0?o=1:(o=pi,pi<<=1,(pi&130023424)===0&&(pi=4194304)));var u=Un();n=fs(n,o),n!==null&&(En(n,o,u),rr(n,u))}function _E(n){var o=n.memoizedState,u=0;o!==null&&(u=o.retryLane),Zg(n,u)}function vE(n,o){var u=0;switch(n.tag){case 13:var p=n.stateNode,g=n.memoizedState;g!==null&&(u=g.retryLane);break;case 19:p=n.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),Zg(n,u)}var Gg;Gg=function(n,o,u){if(n!==null)if(n.memoizedProps!==o.pendingProps||Jn.current)tr=!0;else{if((n.lanes&u)===0&&(o.flags&128)===0)return tr=!1,sE(n,o,u);tr=(n.flags&131072)!==0}else tr=!1,xt&&(o.flags&1048576)!==0&&Cm(o,Sc,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;zc(n,o),n=o.pendingProps;var g=ol(o,xn.current);dl(o,u),g=Fd(null,o,p,n,g,u);var w=zd();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,er(p)?(w=!0,Ec(o)):w=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Ld(o),g.updater=Vc,o.stateNode=g,g._reactInternals=o,$d(o,p,n,u),o=Kd(null,o,p,!0,w,u)):(o.tag=0,xt&&w&&Ed(o),zn(null,o,g,u),o=o.child),o;case 16:p=o.elementType;e:{switch(zc(n,o),n=o.pendingProps,g=p._init,p=g(p._payload),o.type=p,g=o.tag=wE(p),n=ti(p,n),g){case 0:o=Gd(null,o,p,n,u);break e;case 1:o=wg(null,o,p,n,u);break e;case 11:o=mg(null,o,p,n,u);break e;case 14:o=gg(null,o,p,ti(p.type,n),u);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:ti(p,g),Gd(n,o,p,g,u);case 1:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:ti(p,g),wg(n,o,p,g,u);case 3:e:{if(Eg(o),n===null)throw Error(t(387));p=o.pendingProps,w=o.memoizedState,g=w.element,Dm(n,o),Rc(o,p,null,u);var S=o.memoizedState;if(p=S.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){g=pl(Error(t(423)),o),o=Tg(n,o,p,u,g);break e}else if(p!==g){g=pl(Error(t(424)),o),o=Tg(n,o,p,u,g);break e}else for(vr=Ei(o.stateNode.containerInfo.firstChild),_r=o,xt=!0,ei=null,u=Om(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ul(),p===g){o=ms(n,o,u);break e}zn(n,o,p,u)}o=o.child}return o;case 5:return zm(o),n===null&&Sd(o),p=o.type,g=o.pendingProps,w=n!==null?n.memoizedProps:null,S=g.children,We(p,g)?S=null:w!==null&&We(p,w)&&(o.flags|=32),yg(n,o),zn(n,o,S,u),o.child;case 6:return n===null&&Sd(o),null;case 13:return Ig(n,o,u);case 4:return Nd(o,o.stateNode.containerInfo),p=o.pendingProps,n===null?o.child=cl(o,null,p,u):zn(n,o,p,u),o.child;case 11:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:ti(p,g),mg(n,o,p,g,u);case 7:return zn(n,o,o.pendingProps,u),o.child;case 8:return zn(n,o,o.pendingProps.children,u),o.child;case 12:return zn(n,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,g=o.pendingProps,w=o.memoizedProps,S=g.value,Tt(Cc,p._currentValue),p._currentValue=S,w!==null)if(mr(w.value,S)){if(w.children===g.children&&!Jn.current){o=ms(n,o,u);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var R=w.dependencies;if(R!==null){S=w.child;for(var V=R.firstContext;V!==null;){if(V.context===p){if(w.tag===1){V=ps(-1,u&-u),V.tag=2;var J=w.updateQueue;if(J!==null){J=J.shared;var ue=J.pending;ue===null?V.next=V:(V.next=ue.next,ue.next=V),J.pending=V}}w.lanes|=u,V=w.alternate,V!==null&&(V.lanes|=u),kd(w.return,u,o),R.lanes|=u;break}V=V.next}}else if(w.tag===10)S=w.type===o.type?null:w.child;else if(w.tag===18){if(S=w.return,S===null)throw Error(t(341));S.lanes|=u,R=S.alternate,R!==null&&(R.lanes|=u),kd(S,u,o),S=w.sibling}else S=w.child;if(S!==null)S.return=w;else for(S=w;S!==null;){if(S===o){S=null;break}if(w=S.sibling,w!==null){w.return=S.return,S=w;break}S=S.return}w=S}zn(n,o,g.children,u),o=o.child}return o;case 9:return g=o.type,p=o.pendingProps.children,dl(o,u),g=Dr(g),p=p(g),o.flags|=1,zn(n,o,p,u),o.child;case 14:return p=o.type,g=ti(p,o.pendingProps),g=ti(p.type,g),gg(n,o,p,g,u);case 15:return _g(n,o,o.type,o.pendingProps,u);case 17:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:ti(p,g),zc(n,o),o.tag=1,er(p)?(n=!0,Ec(o)):n=!1,dl(o,u),lg(o,p,g),$d(o,p,g,u),Kd(null,o,p,!0,n,u);case 19:return Pg(n,o,u);case 22:return vg(n,o,u)}throw Error(t(156,o.tag))};function Kg(n,o){return Fs(n,o)}function yE(n,o,u,p){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(n,o,u,p){return new yE(n,o,u,p)}function gf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wE(n){if(typeof n=="function")return gf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===H)return 11;if(n===sn)return 14}return 2}function To(n,o){var u=n.alternate;return u===null?(u=zr(n.tag,o,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=o,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,o=n.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function Qc(n,o,u,p,g,w){var S=2;if(p=n,typeof n=="function")gf(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case B:return Sa(u.children,g,w,o);case N:S=8,g|=8;break;case D:return n=zr(12,u,o,g|2),n.elementType=D,n.lanes=w,n;case O:return n=zr(13,u,o,g),n.elementType=O,n.lanes=w,n;case ot:return n=zr(19,u,o,g),n.elementType=ot,n.lanes=w,n;case tt:return Yc(u,g,w,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case F:S=10;break e;case z:S=9;break e;case H:S=11;break e;case sn:S=14;break e;case lt:S=16,p=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return o=zr(S,u,o,g),o.elementType=n,o.type=p,o.lanes=w,o}function Sa(n,o,u,p){return n=zr(7,n,p,o),n.lanes=u,n}function Yc(n,o,u,p){return n=zr(22,n,p,o),n.elementType=tt,n.lanes=u,n.stateNode={isHidden:!1},n}function _f(n,o,u){return n=zr(6,n,null,o),n.lanes=u,n}function vf(n,o,u){return o=zr(4,n.children!==null?n.children:[],n.key,o),o.lanes=u,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function EE(n,o,u,p,g){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dr(0),this.expirationTimes=dr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dr(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function yf(n,o,u,p,g,w,S,R,V){return n=new EE(n,o,u,R,V),o===1?(o=1,w===!0&&(o|=8)):o=0,w=zr(3,null,null,o),n.current=w,w.stateNode=n,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ld(w),n}function TE(n,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$e,key:p==null?null:""+p,children:n,containerInfo:o,implementation:u}}function Qg(n){if(!n)return fo;n=n._reactInternals;e:{if(Bn(n)!==n||n.tag!==1)throw Error(t(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(er(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(n.tag===1){var u=n.type;if(er(u))return Sm(n,u,o)}return o}function Yg(n,o,u,p,g,w,S,R,V){return n=yf(u,p,!0,n,g,w,S,R,V),n.context=Qg(null),u=n.current,p=Un(),g=wo(u),w=ps(p,g),w.callback=o??null,go(u,w,g),n.current.lanes=g,En(n,g,p),rr(n,p),n}function Xc(n,o,u,p){var g=o.current,w=Un(),S=wo(g);return u=Qg(u),o.context===null?o.context=u:o.pendingContext=u,o=ps(w,S),o.payload={element:n},p=p===void 0?null:p,p!==null&&(o.callback=p),n=go(g,o,S),n!==null&&(ii(n,g,S,w),kc(n,g,S)),S}function Jc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Xg(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<o?u:o}}function wf(n,o){Xg(n,o),(n=n.alternate)&&Xg(n,o)}function IE(){return null}var Jg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ef(n){this._internalRoot=n}eh.prototype.render=Ef.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(t(409));Xc(n,o,null,null)},eh.prototype.unmount=Ef.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;Ea(function(){Xc(null,n,null,null)}),o[ht]=null}};function eh(n){this._internalRoot=n}eh.prototype.unstable_scheduleHydration=function(n){if(n){var o=Hs();n={blockedOn:null,target:n,priority:o};for(var u=0;u<zt.length&&o!==0&&o<zt[u].priority;u++);zt.splice(u,0,n),u===0&&Ws(n)}};function Tf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function th(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function e_(){}function SE(n,o,u,p,g){if(g){if(typeof p=="function"){var w=p;p=function(){var J=Jc(S);w.call(J)}}var S=Yg(o,p,n,0,null,!1,!1,"",e_);return n._reactRootContainer=S,n[ht]=S.current,ao(n.nodeType===8?n.parentNode:n),Ea(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof p=="function"){var R=p;p=function(){var J=Jc(V);R.call(J)}}var V=yf(n,0,!1,null,null,!1,!1,"",e_);return n._reactRootContainer=V,n[ht]=V.current,ao(n.nodeType===8?n.parentNode:n),Ea(function(){Xc(o,V,u,p)}),V}function nh(n,o,u,p,g){var w=u._reactRootContainer;if(w){var S=w;if(typeof g=="function"){var R=g;g=function(){var V=Jc(S);R.call(V)}}Xc(o,S,n,g)}else S=SE(u,o,n,g,p);return Jc(S)}js=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var u=De(o.pendingLanes);u!==0&&(Tn(o,u|1),rr(o,_t()),(it&6)===0&&(_l=_t()+500,po()))}break;case 13:Ea(function(){var p=fs(n,1);if(p!==null){var g=Un();ii(p,n,1,g)}}),wf(n,1)}},Cr=function(n){if(n.tag===13){var o=fs(n,134217728);if(o!==null){var u=Un();ii(o,n,134217728,u)}wf(n,134217728)}},Bs=function(n){if(n.tag===13){var o=wo(n),u=fs(n,o);if(u!==null){var p=Un();ii(u,n,o,p)}wf(n,o)}},Hs=function(){return Ze},Qi=function(n,o){var u=Ze;try{return Ze=n,o()}finally{Ze=u}},ji=function(n,o,u){switch(o){case"input":if(Mi(n,u),o=u.name,u.type==="radio"&&o!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==n&&p.form===n.form){var g=il(p);if(!g)throw Error(t(90));Tr(p),Mi(p,g)}}}break;case"textarea":ks(n,u);break;case"select":o=u.value,o!=null&&lr(n,!!u.multiple,o,!1)}},Bi=ff,na=Ea;var PE={usingClientEntryPoint:!1,Events:[ls,us,il,xr,ta,ff]},vu={findFiberByHostInstance:as,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xE={bundleType:vu.bundleType,version:vu.version,rendererPackageName:vu.rendererPackageName,rendererConfig:vu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Me.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ra(n),n===null?null:n.stateNode},findFiberByHostInstance:vu.findFiberByHostInstance||IE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{di=rh.inject(xE),wn=rh}catch{}}return ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PE,ir.createPortal=function(n,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tf(o))throw Error(t(200));return TE(n,o,null,u)},ir.createRoot=function(n,o){if(!Tf(n))throw Error(t(299));var u=!1,p="",g=Jg;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=yf(n,1,!1,null,null,u,!1,p,g),n[ht]=o.current,ao(n.nodeType===8?n.parentNode:n),new Ef(o)},ir.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ra(o),n=n===null?null:n.stateNode,n},ir.flushSync=function(n){return Ea(n)},ir.hydrate=function(n,o,u){if(!th(o))throw Error(t(200));return nh(null,n,o,!0,u)},ir.hydrateRoot=function(n,o,u){if(!Tf(n))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,g=!1,w="",S=Jg;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),o=Yg(o,null,n,1,u??null,g,!1,w,S),n[ht]=o.current,ao(n),p)for(n=0;n<p.length;n++)u=p[n],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new eh(o)},ir.render=function(n,o,u){if(!th(o))throw Error(t(200));return nh(null,n,o,!1,u)},ir.unmountComponentAtNode=function(n){if(!th(n))throw Error(t(40));return n._reactRootContainer?(Ea(function(){nh(null,null,n,!1,function(){n._reactRootContainer=null,n[ht]=null})}),!0):!1},ir.unstable_batchedUpdates=ff,ir.unstable_renderSubtreeIntoContainer=function(n,o,u,p){if(!th(u))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return nh(n,o,u,!1,p)},ir.version="18.3.1-next-f1338f8080-20240426",ir}var l_;function Jv(){if(l_)return Pf.exports;l_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Pf.exports=OE(),Pf.exports}var u_;function ME(){if(u_)return ih;u_=1;var r=Jv();return ih.createRoot=r.createRoot,ih.hydrateRoot=r.hydrateRoot,ih}var DE=ME(),te=gp();const Rl=Xv(te),VE=AE({__proto__:null,default:Rl},[te]);var FE=Jv();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bu(){return bu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},bu.apply(this,arguments)}var ko;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ko||(ko={}));const c_="popstate";function zE(r){r===void 0&&(r={});function e(s,a){let{pathname:c,search:f,hash:_}=s.location;return Uf("",{pathname:c,search:f,hash:_},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:ty(a)}return jE(e,t,null,r)}function Yt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ey(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function UE(){return Math.random().toString(36).substr(2,8)}function h_(r,e){return{usr:r.state,key:r.key,idx:e}}function Uf(r,e,t,s){return t===void 0&&(t=null),bu({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Vl(e):e,{state:t,key:e&&e.key||s||UE()})}function ty(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Vl(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function jE(r,e,t,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:c=!1}=s,f=a.history,_=ko.Pop,v=null,T=P();T==null&&(T=0,f.replaceState(bu({},f.state,{idx:T}),""));function P(){return(f.state||{idx:null}).idx}function C(){_=ko.Pop;let G=P(),pe=G==null?null:G-T;T=G,v&&v({action:_,location:Q.location,delta:pe})}function k(G,pe){_=ko.Push;let de=Uf(Q.location,G,pe);T=P()+1;let me=h_(de,T),Me=Q.createHref(de);try{f.pushState(me,"",Me)}catch(rt){if(rt instanceof DOMException&&rt.name==="DataCloneError")throw rt;a.location.assign(Me)}c&&v&&v({action:_,location:Q.location,delta:1})}function $(G,pe){_=ko.Replace;let de=Uf(Q.location,G,pe);T=P();let me=h_(de,T),Me=Q.createHref(de);f.replaceState(me,"",Me),c&&v&&v({action:_,location:Q.location,delta:0})}function W(G){let pe=a.location.origin!=="null"?a.location.origin:a.location.href,de=typeof G=="string"?G:ty(G);return de=de.replace(/ $/,"%20"),Yt(pe,"No window.location.(origin|href) available to create URL for href: "+de),new URL(de,pe)}let Q={get action(){return _},get location(){return r(a,f)},listen(G){if(v)throw new Error("A history only accepts one active listener");return a.addEventListener(c_,C),v=G,()=>{a.removeEventListener(c_,C),v=null}},createHref(G){return e(a,G)},createURL:W,encodeLocation(G){let pe=W(G);return{pathname:pe.pathname,search:pe.search,hash:pe.hash}},push:k,replace:$,go(G){return f.go(G)}};return Q}var d_;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(d_||(d_={}));function BE(r,e,t){return t===void 0&&(t="/"),HE(r,e,t)}function HE(r,e,t,s){let a=typeof e=="string"?Vl(e):e,c=iy(a.pathname||"/",t);if(c==null)return null;let f=ny(r);WE(f);let _=null;for(let v=0;_==null&&v<f.length;++v){let T=nT(c);_=JE(f[v],T)}return _}function ny(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let a=(c,f,_)=>{let v={relativePath:_===void 0?c.path||"":_,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};v.relativePath.startsWith("/")&&(Yt(v.relativePath.startsWith(s),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(s.length));let T=Ca([s,v.relativePath]),P=t.concat(v);c.children&&c.children.length>0&&(Yt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+T+'".')),ny(c.children,e,P,T)),!(c.path==null&&!c.index)&&e.push({path:T,score:YE(T,c.index),routesMeta:P})};return r.forEach((c,f)=>{var _;if(c.path===""||!((_=c.path)!=null&&_.includes("?")))a(c,f);else for(let v of ry(c.path))a(c,f,v)}),e}function ry(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),c=t.replace(/\?$/,"");if(s.length===0)return a?[c,""]:[c];let f=ry(s.join("/")),_=[];return _.push(...f.map(v=>v===""?c:[c,v].join("/"))),a&&_.push(...f),_.map(v=>r.startsWith("/")&&v===""?"/":v)}function WE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:XE(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const $E=/^:[\w-]+$/,qE=3,ZE=2,GE=1,KE=10,QE=-2,f_=r=>r==="*";function YE(r,e){let t=r.split("/"),s=t.length;return t.some(f_)&&(s+=QE),e&&(s+=ZE),t.filter(a=>!f_(a)).reduce((a,c)=>a+($E.test(c)?qE:c===""?GE:KE),s)}function XE(r,e){return r.length===e.length&&r.slice(0,-1).every((s,a)=>s===e[a])?r[r.length-1]-e[e.length-1]:0}function JE(r,e,t){let{routesMeta:s}=r,a={},c="/",f=[];for(let _=0;_<s.length;++_){let v=s[_],T=_===s.length-1,P=c==="/"?e:e.slice(c.length)||"/",C=eT({path:v.relativePath,caseSensitive:v.caseSensitive,end:T},P),k=v.route;if(!C)return null;Object.assign(a,C.params),f.push({params:a,pathname:Ca([c,C.pathname]),pathnameBase:oT(Ca([c,C.pathnameBase])),route:k}),C.pathnameBase!=="/"&&(c=Ca([c,C.pathnameBase]))}return f}function eT(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=tT(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let c=a[0],f=c.replace(/(.)\/+$/,"$1"),_=a.slice(1);return{params:s.reduce((T,P,C)=>{let{paramName:k,isOptional:$}=P;if(k==="*"){let Q=_[C]||"";f=c.slice(0,c.length-Q.length).replace(/(.)\/+$/,"$1")}const W=_[C];return $&&!W?T[k]=void 0:T[k]=(W||"").replace(/%2F/g,"/"),T},{}),pathname:c,pathnameBase:f,pattern:r}}function tT(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),ey(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,_,v)=>(s.push({paramName:_,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function nT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ey(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function iy(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function rT(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:a=""}=typeof r=="string"?Vl(r):r;return{pathname:t?t.startsWith("/")?t:iT(t,e):e,search:aT(s),hash:lT(a)}}function iT(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Af(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sT(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function sy(r,e){let t=sT(r);return e?t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function oy(r,e,t,s){s===void 0&&(s=!1);let a;typeof r=="string"?a=Vl(r):(a=bu({},r),Yt(!a.pathname||!a.pathname.includes("?"),Af("?","pathname","search",a)),Yt(!a.pathname||!a.pathname.includes("#"),Af("#","pathname","hash",a)),Yt(!a.search||!a.search.includes("#"),Af("#","search","hash",a)));let c=r===""||a.pathname==="",f=c?"/":a.pathname,_;if(f==null)_=t;else{let C=e.length-1;if(!s&&f.startsWith("..")){let k=f.split("/");for(;k[0]==="..";)k.shift(),C-=1;a.pathname=k.join("/")}_=C>=0?e[C]:"/"}let v=rT(a,_),T=f&&f!=="/"&&f.endsWith("/"),P=(c||f===".")&&t.endsWith("/");return!v.pathname.endsWith("/")&&(T||P)&&(v.pathname+="/"),v}const Ca=r=>r.join("/").replace(/\/\/+/g,"/"),oT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),aT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,lT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function uT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const ay=["post","put","patch","delete"];new Set(ay);const cT=["get",...ay];new Set(cT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Ou.apply(this,arguments)}const _p=te.createContext(null),hT=te.createContext(null),Zu=te.createContext(null),Bh=te.createContext(null),$o=te.createContext({outlet:null,matches:[],isDataRoute:!1}),ly=te.createContext(null);function Gu(){return te.useContext(Bh)!=null}function vp(){return Gu()||Yt(!1),te.useContext(Bh).location}function uy(r){te.useContext(Zu).static||te.useLayoutEffect(r)}function yp(){let{isDataRoute:r}=te.useContext($o);return r?PT():dT()}function dT(){Gu()||Yt(!1);let r=te.useContext(_p),{basename:e,future:t,navigator:s}=te.useContext(Zu),{matches:a}=te.useContext($o),{pathname:c}=vp(),f=JSON.stringify(sy(a,t.v7_relativeSplatPath)),_=te.useRef(!1);return uy(()=>{_.current=!0}),te.useCallback(function(T,P){if(P===void 0&&(P={}),!_.current)return;if(typeof T=="number"){s.go(T);return}let C=oy(T,JSON.parse(f),c,P.relative==="path");r==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:Ca([e,C.pathname])),(P.replace?s.replace:s.push)(C,P.state,P)},[e,s,f,c,r])}function fT(){let{matches:r}=te.useContext($o),e=r[r.length-1];return e?e.params:{}}function pT(r,e){return mT(r,e)}function mT(r,e,t,s){Gu()||Yt(!1);let{navigator:a}=te.useContext(Zu),{matches:c}=te.useContext($o),f=c[c.length-1],_=f?f.params:{};f&&f.pathname;let v=f?f.pathnameBase:"/";f&&f.route;let T=vp(),P;if(e){var C;let G=typeof e=="string"?Vl(e):e;v==="/"||(C=G.pathname)!=null&&C.startsWith(v)||Yt(!1),P=G}else P=T;let k=P.pathname||"/",$=k;if(v!=="/"){let G=v.replace(/^\//,"").split("/");$="/"+k.replace(/^\//,"").split("/").slice(G.length).join("/")}let W=BE(r,{pathname:$}),Q=wT(W&&W.map(G=>Object.assign({},G,{params:Object.assign({},_,G.params),pathname:Ca([v,a.encodeLocation?a.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?v:Ca([v,a.encodeLocation?a.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),c,t,s);return e&&Q?te.createElement(Bh.Provider,{value:{location:Ou({pathname:"/",search:"",hash:"",state:null,key:"default"},P),navigationType:ko.Pop}},Q):Q}function gT(){let r=ST(),e=uT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return te.createElement(te.Fragment,null,te.createElement("h2",null,"Unexpected Application Error!"),te.createElement("h3",{style:{fontStyle:"italic"}},e),t?te.createElement("pre",{style:a},t):null,null)}const _T=te.createElement(gT,null);class vT extends te.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?te.createElement($o.Provider,{value:this.props.routeContext},te.createElement(ly.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yT(r){let{routeContext:e,match:t,children:s}=r,a=te.useContext(_p);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),te.createElement($o.Provider,{value:e},s)}function wT(r,e,t,s){var a;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var c;if(!t)return null;if(t.errors)r=t.matches;else if((c=s)!=null&&c.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let f=r,_=(a=t)==null?void 0:a.errors;if(_!=null){let P=f.findIndex(C=>C.route.id&&(_==null?void 0:_[C.route.id])!==void 0);P>=0||Yt(!1),f=f.slice(0,Math.min(f.length,P+1))}let v=!1,T=-1;if(t&&s&&s.v7_partialHydration)for(let P=0;P<f.length;P++){let C=f[P];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(T=P),C.route.id){let{loaderData:k,errors:$}=t,W=C.route.loader&&k[C.route.id]===void 0&&(!$||$[C.route.id]===void 0);if(C.route.lazy||W){v=!0,T>=0?f=f.slice(0,T+1):f=[f[0]];break}}}return f.reduceRight((P,C,k)=>{let $,W=!1,Q=null,G=null;t&&($=_&&C.route.id?_[C.route.id]:void 0,Q=C.route.errorElement||_T,v&&(T<0&&k===0?(xT("route-fallback"),W=!0,G=null):T===k&&(W=!0,G=C.route.hydrateFallbackElement||null)));let pe=e.concat(f.slice(0,k+1)),de=()=>{let me;return $?me=Q:W?me=G:C.route.Component?me=te.createElement(C.route.Component,null):C.route.element?me=C.route.element:me=P,te.createElement(yT,{match:C,routeContext:{outlet:P,matches:pe,isDataRoute:t!=null},children:me})};return t&&(C.route.ErrorBoundary||C.route.errorElement||k===0)?te.createElement(vT,{location:t.location,revalidation:t.revalidation,component:Q,error:$,children:de(),routeContext:{outlet:null,matches:pe,isDataRoute:!0}}):de()},null)}var cy=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(cy||{}),hy=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(hy||{});function ET(r){let e=te.useContext(_p);return e||Yt(!1),e}function TT(r){let e=te.useContext(hT);return e||Yt(!1),e}function IT(r){let e=te.useContext($o);return e||Yt(!1),e}function dy(r){let e=IT(),t=e.matches[e.matches.length-1];return t.route.id||Yt(!1),t.route.id}function ST(){var r;let e=te.useContext(ly),t=TT(),s=dy();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function PT(){let{router:r}=ET(cy.UseNavigateStable),e=dy(hy.UseNavigateStable),t=te.useRef(!1);return uy(()=>{t.current=!0}),te.useCallback(function(a,c){c===void 0&&(c={}),t.current&&(typeof a=="number"?r.navigate(a):r.navigate(a,Ou({fromRouteId:e},c)))},[r,e])}const p_={};function xT(r,e,t){p_[r]||(p_[r]=!0)}function CT(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function fy(r){let{to:e,replace:t,state:s,relative:a}=r;Gu()||Yt(!1);let{future:c,static:f}=te.useContext(Zu),{matches:_}=te.useContext($o),{pathname:v}=vp(),T=yp(),P=oy(e,sy(_,c.v7_relativeSplatPath),v,a==="path"),C=JSON.stringify(P);return te.useEffect(()=>T(JSON.parse(C),{replace:t,state:s,relative:a}),[T,C,a,t,s]),null}function yl(r){Yt(!1)}function AT(r){let{basename:e="/",children:t=null,location:s,navigationType:a=ko.Pop,navigator:c,static:f=!1,future:_}=r;Gu()&&Yt(!1);let v=e.replace(/^\/*/,"/"),T=te.useMemo(()=>({basename:v,navigator:c,static:f,future:Ou({v7_relativeSplatPath:!1},_)}),[v,_,c,f]);typeof s=="string"&&(s=Vl(s));let{pathname:P="/",search:C="",hash:k="",state:$=null,key:W="default"}=s,Q=te.useMemo(()=>{let G=iy(P,v);return G==null?null:{location:{pathname:G,search:C,hash:k,state:$,key:W},navigationType:a}},[v,P,C,k,$,W,a]);return Q==null?null:te.createElement(Zu.Provider,{value:T},te.createElement(Bh.Provider,{children:t,value:Q}))}function kT(r){let{children:e,location:t}=r;return pT(jf(e),t)}new Promise(()=>{});function jf(r,e){e===void 0&&(e=[]);let t=[];return te.Children.forEach(r,(s,a)=>{if(!te.isValidElement(s))return;let c=[...e,a];if(s.type===te.Fragment){t.push.apply(t,jf(s.props.children,c));return}s.type!==yl&&Yt(!1),!s.props.index||!s.props.children||Yt(!1);let f={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=jf(s.props.children,c)),t.push(f)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const RT="6";try{window.__reactRouterVersion=RT}catch{}const LT="startTransition",m_=VE[LT];function NT(r){let{basename:e,children:t,future:s,window:a}=r,c=te.useRef();c.current==null&&(c.current=zE({window:a,v5Compat:!0}));let f=c.current,[_,v]=te.useState({action:f.action,location:f.location}),{v7_startTransition:T}=s||{},P=te.useCallback(C=>{T&&m_?m_(()=>v(C)):v(C)},[v,T]);return te.useLayoutEffect(()=>f.listen(P),[f,P]),te.useEffect(()=>CT(s),[s]),te.createElement(AT,{basename:e,children:t,location:_.location,navigationType:_.action,navigator:f,future:s})}var g_;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(g_||(g_={}));var __;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(__||(__={}));const bT=()=>{};var v_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},OT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=r[t++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=r[t++],f=r[t++],_=r[t++],v=((a&7)<<18|(c&63)<<12|(f&63)<<6|_&63)-65536;e[s++]=String.fromCharCode(55296+(v>>10)),e[s++]=String.fromCharCode(56320+(v&1023))}else{const c=r[t++],f=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},my={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const c=r[a],f=a+1<r.length,_=f?r[a+1]:0,v=a+2<r.length,T=v?r[a+2]:0,P=c>>2,C=(c&3)<<4|_>>4;let k=(_&15)<<2|T>>6,$=T&63;v||($=64,f||(k=64)),s.push(t[P],t[C],t[k],t[$])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(py(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):OT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const c=t[r.charAt(a++)],_=a<r.length?t[r.charAt(a)]:0;++a;const T=a<r.length?t[r.charAt(a)]:64;++a;const C=a<r.length?t[r.charAt(a)]:64;if(++a,c==null||_==null||T==null||C==null)throw new MT;const k=c<<2|_>>4;if(s.push(k),T!==64){const $=_<<4&240|T>>2;if(s.push($),C!==64){const W=T<<6&192|C;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class MT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DT=function(r){const e=py(r);return my.encodeByteArray(e,!0)},Ih=function(r){return DT(r).replace(/\./g,"")},gy=function(r){try{return my.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=()=>VT().__FIREBASE_DEFAULTS__,zT=()=>{if(typeof process>"u"||typeof v_>"u")return;const r=v_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},UT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&gy(r[1]);return e&&JSON.parse(e)},Hh=()=>{try{return bT()||FT()||zT()||UT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},_y=r=>{var e,t;return(t=(e=Hh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},jT=r=>{const e=_y(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},vy=()=>{var r;return(r=Hh())===null||r===void 0?void 0:r.config},yy=r=>{var e;return(e=Hh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wy(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ih(JSON.stringify(t)),Ih(JSON.stringify(f)),""].join(".")}const Cu={};function WT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Cu))Cu[e]?r.emulator.push(e):r.prod.push(e);return r}function $T(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let y_=!1;function Ey(r,e){if(typeof window>"u"||typeof document>"u"||!Fl(window.location.host)||Cu[r]===e||Cu[r]||y_)return;Cu[r]=e;function t(k){return`__firebase__banner__${k}`}const s="__firebase__banner",c=WT().prod.length>0;function f(){const k=document.getElementById(s);k&&k.remove()}function _(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function v(k,$){k.setAttribute("width","24"),k.setAttribute("id",$),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function T(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{y_=!0,f()},k}function P(k,$){k.setAttribute("id",$),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function C(){const k=$T(s),$=t("text"),W=document.getElementById($)||document.createElement("span"),Q=t("learnmore"),G=document.getElementById(Q)||document.createElement("a"),pe=t("preprendIcon"),de=document.getElementById(pe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const me=k.element;_(me),P(G,Q);const Me=T();v(de,pe),me.append(de,W,G,Me),document.body.appendChild(me)}c?(W.innerText="Preview backend disconnected.",de.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(de.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",$)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function ZT(){var r;const e=(r=Hh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function QT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YT(){const r=bn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function XT(){return!ZT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JT(){try{return typeof indexedDB=="object"}catch{return!1}}function eI(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="FirebaseError";class Ps extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=tI,Object.setPrototypeOf(this,Ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ku.prototype.create)}}class Ku{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?nI(c,s):"Error",_=`${this.serviceName}: ${f} (${a}).`;return new Ps(a,_,s)}}function nI(r,e){return r.replace(rI,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const rI=/\{\$([^}]+)}/g;function iI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function La(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const c=r[a],f=e[a];if(w_(c)&&w_(f)){if(!La(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function w_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function wu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,c]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function Eu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function sI(r,e){const t=new oI(r,e);return t.subscribe.bind(t)}class oI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");aI(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=kf),a.error===void 0&&(a.error=kf),a.complete===void 0&&(a.complete=kf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function kf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(r){return r&&r._delegate?r._delegate:r}class Na{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new BT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cI(e))try{this.getOrInitializeService({instanceIdentifier:Pa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pa){return this.instances.has(e)}getOptions(e=Pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,f]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(c);s===_&&f.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const f=this.instances.get(a);return f&&e(f,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:uI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Pa){return this.component?this.component.multipleInstances?e:Pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uI(r){return r===Pa?void 0:r}function cI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Je||(Je={}));const dI={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},fI=Je.INFO,pI={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},mI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=pI[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wp{constructor(e){this.name=e,this._logLevel=fI,this._logHandler=mI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const gI=(r,e)=>e.some(t=>r instanceof t);let E_,T_;function _I(){return E_||(E_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vI(){return T_||(T_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ty=new WeakMap,Bf=new WeakMap,Iy=new WeakMap,Rf=new WeakMap,Ep=new WeakMap;function yI(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{t(Lo(r.result)),a()},f=()=>{s(r.error),a()};r.addEventListener("success",c),r.addEventListener("error",f)});return e.then(t=>{t instanceof IDBCursor&&Ty.set(t,r)}).catch(()=>{}),Ep.set(e,r),e}function wI(r){if(Bf.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{t(),a()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});Bf.set(r,e)}let Hf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Bf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Iy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Lo(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function EI(r){Hf=r(Hf)}function TI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Lf(this),e,...t);return Iy.set(s,e.sort?e.sort():[e]),Lo(s)}:vI().includes(r)?function(...e){return r.apply(Lf(this),e),Lo(Ty.get(this))}:function(...e){return Lo(r.apply(Lf(this),e))}}function II(r){return typeof r=="function"?TI(r):(r instanceof IDBTransaction&&wI(r),gI(r,_I())?new Proxy(r,Hf):r)}function Lo(r){if(r instanceof IDBRequest)return yI(r);if(Rf.has(r))return Rf.get(r);const e=II(r);return e!==r&&(Rf.set(r,e),Ep.set(e,r)),e}const Lf=r=>Ep.get(r);function SI(r,e,{blocked:t,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(r,e),_=Lo(f);return s&&f.addEventListener("upgradeneeded",v=>{s(Lo(f.result),v.oldVersion,v.newVersion,Lo(f.transaction),v)}),t&&f.addEventListener("blocked",v=>t(v.oldVersion,v.newVersion,v)),_.then(v=>{c&&v.addEventListener("close",()=>c()),a&&v.addEventListener("versionchange",T=>a(T.oldVersion,T.newVersion,T))}).catch(()=>{}),_}const PI=["get","getKey","getAll","getAllKeys","count"],xI=["put","add","delete","clear"],Nf=new Map;function I_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=xI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||PI.includes(t)))return;const c=async function(f,..._){const v=this.transaction(f,a?"readwrite":"readonly");let T=v.store;return s&&(T=T.index(_.shift())),(await Promise.all([T[t](..._),a&&v.done]))[0]};return Nf.set(e,c),c}EI(r=>({...r,get:(e,t,s)=>I_(e,t)||r.get(e,t,s),has:(e,t)=>!!I_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(AI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function AI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wf="@firebase/app",S_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new wp("@firebase/app"),kI="@firebase/app-compat",RI="@firebase/analytics-compat",LI="@firebase/analytics",NI="@firebase/app-check-compat",bI="@firebase/app-check",OI="@firebase/auth",MI="@firebase/auth-compat",DI="@firebase/database",VI="@firebase/data-connect",FI="@firebase/database-compat",zI="@firebase/functions",UI="@firebase/functions-compat",jI="@firebase/installations",BI="@firebase/installations-compat",HI="@firebase/messaging",WI="@firebase/messaging-compat",$I="@firebase/performance",qI="@firebase/performance-compat",ZI="@firebase/remote-config",GI="@firebase/remote-config-compat",KI="@firebase/storage",QI="@firebase/storage-compat",YI="@firebase/firestore",XI="@firebase/ai",JI="@firebase/firestore-compat",eS="firebase",tS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="[DEFAULT]",nS={[Wf]:"fire-core",[kI]:"fire-core-compat",[LI]:"fire-analytics",[RI]:"fire-analytics-compat",[bI]:"fire-app-check",[NI]:"fire-app-check-compat",[OI]:"fire-auth",[MI]:"fire-auth-compat",[DI]:"fire-rtdb",[VI]:"fire-data-connect",[FI]:"fire-rtdb-compat",[zI]:"fire-fn",[UI]:"fire-fn-compat",[jI]:"fire-iid",[BI]:"fire-iid-compat",[HI]:"fire-fcm",[WI]:"fire-fcm-compat",[$I]:"fire-perf",[qI]:"fire-perf-compat",[ZI]:"fire-rc",[GI]:"fire-rc-compat",[KI]:"fire-gcs",[QI]:"fire-gcs-compat",[YI]:"fire-fst",[JI]:"fire-fst-compat",[XI]:"fire-vertex","fire-js":"fire-js",[eS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Map,rS=new Map,qf=new Map;function P_(r,e){try{r.container.addComponent(e)}catch(t){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ll(r){const e=r.name;if(qf.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;qf.set(e,r);for(const t of Sh.values())P_(t,r);for(const t of rS.values())P_(t,r);return!0}function Tp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Ur(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},No=new Ku("app","Firebase",iS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw No.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=tS;function Sy(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:$f,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw No.create("bad-app-name",{appName:String(a)});if(t||(t=vy()),!t)throw No.create("no-options");const c=Sh.get(a);if(c){if(La(t,c.options)&&La(s,c.config))return c;throw No.create("duplicate-app",{appName:a})}const f=new hI(a);for(const v of qf.values())f.addComponent(v);const _=new sS(t,s,f);return Sh.set(a,_),_}function Py(r=$f){const e=Sh.get(r);if(!e&&r===$f&&vy())return Sy();if(!e)throw No.create("no-app",{appName:r});return e}function bo(r,e,t){var s;let a=(s=nS[r])!==null&&s!==void 0?s:r;t&&(a+=`-${t}`);const c=a.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const _=[`Unable to register library "${a}" with version "${e}":`];c&&_.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&f&&_.push("and"),f&&_.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(_.join(" "));return}Ll(new Na(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="firebase-heartbeat-database",aS=1,Mu="firebase-heartbeat-store";let bf=null;function xy(){return bf||(bf=SI(oS,aS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Mu)}catch(t){console.warn(t)}}}}).catch(r=>{throw No.create("idb-open",{originalErrorMessage:r.message})})),bf}async function lS(r){try{const t=(await xy()).transaction(Mu),s=await t.objectStore(Mu).get(Cy(r));return await t.done,s}catch(e){if(e instanceof Ps)Es.warn(e.message);else{const t=No.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Es.warn(t.message)}}}async function x_(r,e){try{const s=(await xy()).transaction(Mu,"readwrite");await s.objectStore(Mu).put(e,Cy(r)),await s.done}catch(t){if(t instanceof Ps)Es.warn(t.message);else{const s=No.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Es.warn(s.message)}}}function Cy(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=1024,cS=30;class hS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=C_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>cS){const f=pS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Es.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=C_(),{heartbeatsToSend:s,unsentEntries:a}=dS(this._heartbeatsCache.heartbeats),c=Ih(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Es.warn(t),""}}}function C_(){return new Date().toISOString().substring(0,10)}function dS(r,e=uS){const t=[];let s=r.slice();for(const a of r){const c=t.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),A_(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),A_(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class fS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JT()?eI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return x_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return x_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function A_(r){return Ih(JSON.stringify({version:2,heartbeats:r})).length}function pS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(r){Ll(new Na("platform-logger",e=>new CI(e),"PRIVATE")),Ll(new Na("heartbeat",e=>new hS(e),"PRIVATE")),bo(Wf,S_,r),bo(Wf,S_,"esm2017"),bo("fire-js","")}mS("");function Ip(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t}function Ay(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gS=Ay,ky=new Ku("auth","Firebase",Ay());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new wp("@firebase/auth");function _S(r,...e){Ph.logLevel<=Je.WARN&&Ph.warn(`Auth (${zl}): ${r}`,...e)}function dh(r,...e){Ph.logLevel<=Je.ERROR&&Ph.error(`Auth (${zl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(r,...e){throw Sp(r,...e)}function xi(r,...e){return Sp(r,...e)}function Ry(r,e,t){const s=Object.assign(Object.assign({},gS()),{[e]:t});return new Ku("auth","Firebase",s).create(e,{appName:r.name})}function ys(r){return Ry(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return ky.create(r,...e)}function Ve(r,e,...t){if(!r)throw Sp(e,...t)}function _s(r){const e="INTERNAL ASSERTION FAILED: "+r;throw dh(e),new Error(e)}function Ts(r,e){r||_s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function vS(){return k_()==="http:"||k_()==="https:"}function k_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vS()||KT()||"connection"in navigator)?navigator.onLine:!0}function wS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ts(t>e,"Short delay should be less than long delay!"),this.isMobile=qT()||QT()}get(){return yS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(r,e){Ts(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IS=new Yu(3e4,6e4);function qo(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Zo(r,e,t,s,a={}){return Ny(r,a,async()=>{let c={},f={};s&&(e==="GET"?f=s:c={body:JSON.stringify(s)});const _=Qu(Object.assign({key:r.config.apiKey},f)).slice(1),v=await r._getAdditionalHeaders();v["Content-Type"]="application/json",r.languageCode&&(v["X-Firebase-Locale"]=r.languageCode);const T=Object.assign({method:e,headers:v},c);return GT()||(T.referrerPolicy="no-referrer"),r.emulatorConfig&&Fl(r.emulatorConfig.host)&&(T.credentials="include"),Ly.fetch()(await by(r,r.config.apiHost,t,_),T)})}async function Ny(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},ES),e);try{const a=new PS(r),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw sh(r,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const _=c.ok?f.errorMessage:f.error.message,[v,T]=_.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw sh(r,"credential-already-in-use",f);if(v==="EMAIL_EXISTS")throw sh(r,"email-already-in-use",f);if(v==="USER_DISABLED")throw sh(r,"user-disabled",f);const P=s[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw Ry(r,P,T);ai(r,P)}}catch(a){if(a instanceof Ps)throw a;ai(r,"network-request-failed",{message:String(a)})}}async function Xu(r,e,t,s,a={}){const c=await Zo(r,e,t,s,a);return"mfaPendingCredential"in c&&ai(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function by(r,e,t,s){const a=`${e}${t}?${s}`,c=r,f=c.config.emulator?Pp(r.config,a):`${r.config.apiScheme}://${a}`;return TS.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function SS(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(xi(this.auth,"network-request-failed")),IS.get())})}}function sh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=xi(r,e,s);return a.customData._tokenResponse=t,a}function R_(r){return r!==void 0&&r.enterprise!==void 0}class xS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return SS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function CS(r,e){return Zo(r,"GET","/v2/recaptchaConfig",qo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(r,e){return Zo(r,"POST","/v1/accounts:delete",e)}async function xh(r,e){return Zo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kS(r,e=!1){const t=rn(r),s=await t.getIdToken(e),a=xp(s);Ve(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,f=c==null?void 0:c.sign_in_provider;return{claims:a,token:s,authTime:Au(Of(a.auth_time)),issuedAtTime:Au(Of(a.iat)),expirationTime:Au(Of(a.exp)),signInProvider:f||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Of(r){return Number(r)*1e3}function xp(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const a=gy(t);return a?JSON.parse(a):(dh("Failed to decode base64 JWT payload"),null)}catch(a){return dh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function L_(r){const e=xp(r);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ps&&RS(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function RS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(r){var e;const t=r.auth,s=await r.getIdToken(),a=await Du(r,xh(t,{idToken:s}));Ve(a==null?void 0:a.users.length,t,"internal-error");const c=a.users[0];r._notifyReloadListener(c);const f=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?Oy(c.providerUserInfo):[],_=bS(r.providerData,f),v=r.isAnonymous,T=!(r.email&&c.passwordHash)&&!(_!=null&&_.length),P=v?T:!1,C={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:_,metadata:new Gf(c.createdAt,c.lastLoginAt),isAnonymous:P};Object.assign(r,C)}async function NS(r){const e=rn(r);await Ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bS(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function Oy(r){return r.map(e=>{var{providerId:t}=e,s=Ip(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(r,e){const t=await Ny(r,{},async()=>{const s=Qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=r.config,f=await by(r,a,"/v1/token",`key=${c}`),_=await r._getAdditionalHeaders();_["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:_,body:s};return r.emulatorConfig&&Fl(r.emulatorConfig.host)&&(v.credentials="include"),Ly.fetch()(f,v)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function MS(r,e){return Zo(r,"POST","/v2/accounts:revokeToken",qo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):L_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=L_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:c}=await OS(e,t);this.updateTokensAndExpiration(s,a,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:c}=t,f=new xl;return s&&(Ve(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),a&&(Ve(typeof a=="string","internal-error",{appName:e}),f.accessToken=a),c&&(Ve(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(r,e){Ve(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class si{constructor(e){var{uid:t,auth:s,stsTokenManager:a}=e,c=Ip(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Gf(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await Du(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return kS(this,e)}reload(){return NS(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Ch(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ur(this.auth.app))return Promise.reject(ys(this.auth));const e=await this.getIdToken();return await Du(this,AS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,a,c,f,_,v,T,P;const C=(s=t.displayName)!==null&&s!==void 0?s:void 0,k=(a=t.email)!==null&&a!==void 0?a:void 0,$=(c=t.phoneNumber)!==null&&c!==void 0?c:void 0,W=(f=t.photoURL)!==null&&f!==void 0?f:void 0,Q=(_=t.tenantId)!==null&&_!==void 0?_:void 0,G=(v=t._redirectEventId)!==null&&v!==void 0?v:void 0,pe=(T=t.createdAt)!==null&&T!==void 0?T:void 0,de=(P=t.lastLoginAt)!==null&&P!==void 0?P:void 0,{uid:me,emailVerified:Me,isAnonymous:rt,providerData:$e,stsTokenManager:B}=t;Ve(me&&B,e,"internal-error");const N=xl.fromJSON(this.name,B);Ve(typeof me=="string",e,"internal-error"),So(C,e.name),So(k,e.name),Ve(typeof Me=="boolean",e,"internal-error"),Ve(typeof rt=="boolean",e,"internal-error"),So($,e.name),So(W,e.name),So(Q,e.name),So(G,e.name),So(pe,e.name),So(de,e.name);const D=new si({uid:me,auth:e,email:k,emailVerified:Me,displayName:C,isAnonymous:rt,photoURL:W,phoneNumber:$,tenantId:Q,stsTokenManager:N,createdAt:pe,lastLoginAt:de});return $e&&Array.isArray($e)&&(D.providerData=$e.map(F=>Object.assign({},F))),G&&(D._redirectEventId=G),D}static async _fromIdTokenResponse(e,t,s=!1){const a=new xl;a.updateFromServerResponse(t);const c=new si({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Ch(c),c}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Ve(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?Oy(a.providerUserInfo):[],f=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),_=new xl;_.updateFromIdToken(s);const v=new si({uid:a.localId,auth:e,stsTokenManager:_,isAnonymous:f}),T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Gf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(v,T),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=new Map;function vs(r){Ts(r instanceof Function,"Expected a class definition");let e=N_.get(r);return e?(Ts(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,N_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}My.type="NONE";const b_=My;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(r,e,t){return`firebase:${r}:${e}:${t}`}class Cl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:c}=this.auth;this.fullUserKey=fh(this.userKey,a.apiKey,c),this.fullPersistenceKey=fh("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xh(this.auth,{idToken:e}).catch(()=>{});return t?si._fromGetAccountInfoResponse(this.auth,t,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Cl(vs(b_),e,s);const a=(await Promise.all(t.map(async T=>{if(await T._isAvailable())return T}))).filter(T=>T);let c=a[0]||vs(b_);const f=fh(s,e.config.apiKey,e.name);let _=null;for(const T of t)try{const P=await T._get(f);if(P){let C;if(typeof P=="string"){const k=await xh(e,{idToken:P}).catch(()=>{});if(!k)break;C=await si._fromGetAccountInfoResponse(e,k,P)}else C=si._fromJSON(e,P);T!==c&&(_=C),c=T;break}}catch{}const v=a.filter(T=>T._shouldAllowMigration);return!c._shouldAllowMigration||!v.length?new Cl(c,e,s):(c=v[0],_&&await c._set(f,_.toJSON()),await Promise.all(t.map(async T=>{if(T!==c)try{await T._remove(f)}catch{}})),new Cl(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Dy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jy(e))return"Blackberry";if(By(e))return"Webos";if(Vy(e))return"Safari";if((e.includes("chrome/")||Fy(e))&&!e.includes("edge/"))return"Chrome";if(Uy(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Dy(r=bn()){return/firefox\//i.test(r)}function Vy(r=bn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fy(r=bn()){return/crios\//i.test(r)}function zy(r=bn()){return/iemobile/i.test(r)}function Uy(r=bn()){return/android/i.test(r)}function jy(r=bn()){return/blackberry/i.test(r)}function By(r=bn()){return/webos/i.test(r)}function Cp(r=bn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function DS(r=bn()){var e;return Cp(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function VS(){return YT()&&document.documentMode===10}function Hy(r=bn()){return Cp(r)||Uy(r)||By(r)||jy(r)||/windows phone/i.test(r)||zy(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(r,e=[]){let t;switch(r){case"Browser":t=O_(bn());break;case"Worker":t=`${O_(bn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((f,_)=>{try{const v=e(c);f(v)}catch(v){_(v)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(r,e={}){return Zo(r,"GET","/v2/passwordPolicy",qo(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=6;class jS{constructor(e){var t,s,a,c;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=f.minPasswordLength)!==null&&t!==void 0?t:US,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,a,c,f,_;const v={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,v),this.validatePasswordCharacterOptions(e,v),v.isValid&&(v.isValid=(t=v.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),v.isValid&&(v.isValid=(s=v.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),v.isValid&&(v.isValid=(a=v.containsLowercaseLetter)!==null&&a!==void 0?a:!0),v.isValid&&(v.isValid=(c=v.containsUppercaseLetter)!==null&&c!==void 0?c:!0),v.isValid&&(v.isValid=(f=v.containsNumericCharacter)!==null&&f!==void 0?f:!0),v.isValid&&(v.isValid=(_=v.containsNonAlphanumericCharacter)!==null&&_!==void 0?_:!0),v}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M_(this),this.idTokenSubscription=new M_(this),this.beforeStateQueue=new FS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ky,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vs(t)),this._initializationPromise=this.queue(async()=>{var s,a,c;if(!this._deleted&&(this.persistenceManager=await Cl.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xh(this,{idToken:e}),s=await si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ur(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(_=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(_,_))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,_=a==null?void 0:a._redirectEventId,v=await this.tryRedirectSignIn(e);(!f||f===_)&&(v!=null&&v.user)&&(a=v.user,c=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(a)}catch(f){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ch(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ur(this.app))return Promise.reject(ys(this));const t=e?rn(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ur(this.app)?Promise.reject(ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ur(this.app)?Promise.reject(ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zS(this),t=new jS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ku("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await MS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vs(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Cl.create(this,[vs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let f=!1;const _=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(_,this,"internal-error"),_.then(()=>{f||c(this.currentUser)}),typeof t=="function"){const v=e.addObserver(t,s,a);return()=>{f=!0,v()}}else{const v=e.addObserver(t);return()=>{f=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&_S(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Va(r){return rn(r)}class M_{constructor(e){this.auth=e,this.observer=null,this.addObserver=sI(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HS(r){Wh=r}function $y(r){return Wh.loadJS(r)}function WS(){return Wh.recaptchaEnterpriseScript}function $S(){return Wh.gapiScript}function qS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class ZS{constructor(){this.enterprise=new GS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class GS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const KS="recaptcha-enterprise",qy="NO_RECAPTCHA";class QS{constructor(e){this.type=KS,this.auth=Va(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,_)=>{CS(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)_(new Error("recaptcha Enterprise site key undefined"));else{const T=new xS(v);return c.tenantId==null?c._agentRecaptchaConfig=T:c._tenantRecaptchaConfigs[c.tenantId]=T,f(T.siteKey)}}).catch(v=>{_(v)})})}function a(c,f,_){const v=window.grecaptcha;R_(v)?v.enterprise.ready(()=>{v.enterprise.execute(c,{action:e}).then(T=>{f(T)}).catch(()=>{f(qy)})}):_(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZS().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{s(this.auth).then(_=>{if(!t&&R_(window.grecaptcha))a(_,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let v=WS();v.length!==0&&(v+=_),$y(v).then(()=>{a(_,c,f)}).catch(T=>{f(T)})}}).catch(_=>{f(_)})})}}async function D_(r,e,t,s=!1,a=!1){const c=new QS(r);let f;if(a)f=qy;else try{f=await c.verify(t)}catch{f=await c.verify(t,!0)}const _=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in _){const v=_.phoneEnrollmentInfo.phoneNumber,T=_.phoneEnrollmentInfo.recaptchaToken;Object.assign(_,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:T,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in _){const v=_.phoneSignInInfo.recaptchaToken;Object.assign(_,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return _}return s?Object.assign(_,{captchaResp:f}):Object.assign(_,{captchaResponse:f}),Object.assign(_,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(_,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),_}async function Kf(r,e,t,s,a){var c;if(!((c=r._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await D_(r,e,t,t==="getOobCode");return s(r,f)}else return s(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const _=await D_(r,e,t,t==="getOobCode");return s(r,_)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(r,e){const t=Tp(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(La(c,e??{}))return a;ai(a,"already-initialized")}return t.initialize({options:e})}function XS(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(vs);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function JS(r,e,t){const s=Va(r);Ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,c=Zy(e),{host:f,port:_}=eP(e),v=_===null?"":`:${_}`,T={url:`${c}//${f}${v}/`},P=Object.freeze({host:f,port:_,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Ve(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ve(La(T,s.config.emulator)&&La(P,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=T,s.emulatorConfig=P,s.settings.appVerificationDisabledForTesting=!0,Fl(f)?(wy(`${c}//${f}${v}`),Ey("Auth",!0)):tP()}function Zy(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function eP(r){const e=Zy(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const c=a[1];return{host:c,port:V_(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:V_(f)}}}function V_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function tP(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _s("not implemented")}_getIdTokenResponse(e){return _s("not implemented")}_linkToIdToken(e,t){return _s("not implemented")}_getReauthenticationResolver(e){return _s("not implemented")}}async function nP(r,e){return Zo(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rP(r,e){return Xu(r,"POST","/v1/accounts:signInWithPassword",qo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(r,e){return Xu(r,"POST","/v1/accounts:signInWithEmailLink",qo(r,e))}async function sP(r,e){return Xu(r,"POST","/v1/accounts:signInWithEmailLink",qo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends Ap{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Vu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Vu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kf(e,t,"signInWithPassword",rP);case"emailLink":return iP(e,{email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kf(e,s,"signUpPassword",nP);case"emailLink":return sP(e,{idToken:t,email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(r,e){return Xu(r,"POST","/v1/accounts:signInWithIdp",qo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP="http://localhost";class ba extends Ap{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ai("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=t,c=Ip(t,["providerId","signInMethod"]);if(!s||!a)return null;const f=new ba(s,a);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const t=this.buildRequest();return Al(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Al(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Al(e,t)}buildRequest(){const e={requestUri:oP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Qu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lP(r){const e=wu(Eu(r)).link,t=e?wu(Eu(e)).deep_link_id:null,s=wu(Eu(r)).deep_link_id;return(s?wu(Eu(s)).link:null)||s||t||e||r}class kp{constructor(e){var t,s,a,c,f,_;const v=wu(Eu(e)),T=(t=v.apiKey)!==null&&t!==void 0?t:null,P=(s=v.oobCode)!==null&&s!==void 0?s:null,C=aP((a=v.mode)!==null&&a!==void 0?a:null);Ve(T&&P&&C,"argument-error"),this.apiKey=T,this.operation=C,this.code=P,this.continueUrl=(c=v.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(f=v.lang)!==null&&f!==void 0?f:null,this.tenantId=(_=v.tenantId)!==null&&_!==void 0?_:null}static parseLink(e){const t=lP(e);try{return new kp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this.providerId=Ul.PROVIDER_ID}static credential(e,t){return Vu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=kp.parseLink(t);return Ve(s,"argument-error"),Vu._fromEmailAndCode(e,s.code,s.tenantId)}}Ul.PROVIDER_ID="password";Ul.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ul.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends Gy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends Ju{constructor(){super("facebook.com")}static credential(e){return ba._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Po.credential(e.oauthAccessToken)}catch{return null}}}Po.FACEBOOK_SIGN_IN_METHOD="facebook.com";Po.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ba._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return xo.credential(t,s)}catch{return null}}}xo.GOOGLE_SIGN_IN_METHOD="google.com";xo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends Ju{constructor(){super("github.com")}static credential(e){return ba._fromParams({providerId:Co.PROVIDER_ID,signInMethod:Co.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Co.credentialFromTaggedObject(e)}static credentialFromError(e){return Co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Co.credential(e.oauthAccessToken)}catch{return null}}}Co.GITHUB_SIGN_IN_METHOD="github.com";Co.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Ju{constructor(){super("twitter.com")}static credential(e,t){return ba._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ao.credential(t,s)}catch{return null}}}Ao.TWITTER_SIGN_IN_METHOD="twitter.com";Ao.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(r,e){return Xu(r,"POST","/v1/accounts:signUp",qo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const c=await si._fromIdTokenResponse(e,s,a),f=F_(s);return new Oa({user:c,providerId:f,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=F_(s);return new Oa({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function F_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends Ps{constructor(e,t,s,a){var c;super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Ah(e,t,s,a)}}function Ky(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(r,c,e,s):c})}async function cP(r,e,t=!1){const s=await Du(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Oa._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hP(r,e,t=!1){const{auth:s}=r;if(Ur(s.app))return Promise.reject(ys(s));const a="reauthenticate";try{const c=await Du(r,Ky(s,a,e,r),t);Ve(c.idToken,s,"internal-error");const f=xp(c.idToken);Ve(f,s,"internal-error");const{sub:_}=f;return Ve(r.uid===_,s,"user-mismatch"),Oa._forOperation(r,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&ai(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qy(r,e,t=!1){if(Ur(r.app))return Promise.reject(ys(r));const s="signIn",a=await Ky(r,s,e),c=await Oa._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(c.user),c}async function dP(r,e){return Qy(Va(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yy(r){const e=Va(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fP(r,e,t){if(Ur(r.app))return Promise.reject(ys(r));const s=Va(r),f=await Kf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uP).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&Yy(r),v}),_=await Oa._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(_.user),_}function pP(r,e,t){return Ur(r.app)?Promise.reject(ys(r)):dP(rn(r),Ul.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Yy(r),s})}function mP(r,e,t,s){return rn(r).onIdTokenChanged(e,t,s)}function gP(r,e,t){return rn(r).beforeAuthStateChanged(e,t)}function _P(r,e,t,s){return rn(r).onAuthStateChanged(e,t,s)}function vP(r){return rn(r).signOut()}const kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=1e3,wP=10;class Jy extends Xy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((f,_,v)=>{this.notifyListeners(f,v)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const f=this.storage.getItem(s);!t&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);VS()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,wP):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},yP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jy.type="LOCAL";const EP=Jy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew extends Xy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ew.type="SESSION";const tw=ew;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new $h(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:c}=t.data,f=this.handlersMap[a];if(!(f!=null&&f.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const _=Array.from(f).map(async T=>T(t.origin,c)),v=await TP(_);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:v})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,f;return new Promise((_,v)=>{const T=Rp("",20);a.port1.start();const P=setTimeout(()=>{v(new Error("unsupported_event"))},s);f={messageChannel:a,onMessage(C){const k=C;if(k.data.eventId===T)switch(k.data.status){case"ack":clearTimeout(P),c=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),_(k.data.response);break;default:clearTimeout(P),clearTimeout(c),v(new Error("invalid_response"));break}}},this.handlers.add(f),a.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:T,data:t},[a.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){return window}function SP(r){Ci().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function PP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xP(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function CP(){return nw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="firebaseLocalStorageDb",AP=1,Rh="firebaseLocalStorage",iw="fbase_key";class ec{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function qh(r,e){return r.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function kP(){const r=indexedDB.deleteDatabase(rw);return new ec(r).toPromise()}function Qf(){const r=indexedDB.open(rw,AP);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Rh,{keyPath:iw})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Rh)?e(s):(s.close(),await kP(),e(await Qf()))})})}async function z_(r,e,t){const s=qh(r,!0).put({[iw]:e,value:t});return new ec(s).toPromise()}async function RP(r,e){const t=qh(r,!1).get(e),s=await new ec(t).toPromise();return s===void 0?null:s.value}function U_(r,e){const t=qh(r,!0).delete(e);return new ec(t).toPromise()}const LP=800,NP=3;class sw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>NP)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(CP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await PP(),!this.activeServiceWorker)return;this.sender=new IP(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qf();return await z_(e,kh,"1"),await U_(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>z_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>RP(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>U_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=qh(a,!1).getAll();return new ec(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sw.type="LOCAL";const bP=sw;new Yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(r,e){return e?vs(e):(Ve(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp extends Ap{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Al(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Al(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Al(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function MP(r){return Qy(r.auth,new Lp(r),r.bypassAuthState)}function DP(r){const{auth:e,user:t}=r;return Ve(t,e,"internal-error"),hP(t,new Lp(r),r.bypassAuthState)}async function VP(r){const{auth:e,user:t}=r;return Ve(t,e,"internal-error"),cP(t,new Lp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,t,s,a,c=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:c,error:f,type:_}=e;if(f){this.reject(f);return}const v={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(_)(v))}catch(T){this.reject(T)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MP;case"linkViaPopup":case"linkViaRedirect":return VP;case"reauthViaPopup":case"reauthViaRedirect":return DP;default:ai(this.auth,"internal-error")}}resolve(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=new Yu(2e3,1e4);class Sl extends ow{constructor(e,t,s,a,c){super(e,t,a,c),this.provider=s,this.authWindow=null,this.pollId=null,Sl.currentPopupAction&&Sl.currentPopupAction.cancel(),Sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){Ts(this.filter.length===1,"Popup operations only handle one event");const e=Rp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FP.get())};e()}}Sl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="pendingRedirect",ph=new Map;class UP extends ow{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=ph.get(this.auth._key());if(!e){try{const s=await jP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}ph.set(this.auth._key(),e)}return this.bypassAuthState||ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jP(r,e){const t=WP(e),s=HP(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function BP(r,e){ph.set(r._key(),e)}function HP(r){return vs(r._redirectPersistence)}function WP(r){return fh(zP,r.config.apiKey,r.name)}async function $P(r,e,t=!1){if(Ur(r.app))return Promise.reject(ys(r));const s=Va(r),a=OP(s,e),f=await new UP(s,a,t).execute();return f&&!t&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=600*1e3;class ZP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!aw(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(xi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qP&&this.cachedEventUids.clear(),this.cachedEventUids.has(j_(e))}saveEventToCache(e){this.cachedEventUids.add(j_(e)),this.lastProcessedEventTime=Date.now()}}function j_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function aw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GP(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KP(r,e={}){return Zo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YP=/^https?/;async function XP(r){if(r.config.emulator)return;const{authorizedDomains:e}=await KP(r);for(const t of e)try{if(JP(t))return}catch{}ai(r,"unauthorized-domain")}function JP(r){const e=Zf(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&f.hostname===s}if(!YP.test(t))return!1;if(QP.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new Yu(3e4,6e4);function B_(){const r=Ci().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function t1(r){return new Promise((e,t)=>{var s,a,c;function f(){B_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B_(),t(xi(r,"network-request-failed"))},timeout:e1.get()})}if(!((a=(s=Ci().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((c=Ci().gapi)===null||c===void 0)&&c.load)f();else{const _=qS("iframefcb");return Ci()[_]=()=>{gapi.load?f():t(xi(r,"network-request-failed"))},$y(`${$S()}?onload=${_}`).catch(v=>t(v))}}).catch(e=>{throw mh=null,e})}let mh=null;function n1(r){return mh=mh||t1(r),mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Yu(5e3,15e3),i1="__/auth/iframe",s1="emulator/auth/iframe",o1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function l1(r){const e=r.config;Ve(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Pp(e,s1):`https://${r.config.authDomain}/${i1}`,s={apiKey:e.apiKey,appName:r.name,v:zl},a=a1.get(r.config.apiHost);a&&(s.eid=a);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Qu(s).slice(1)}`}async function u1(r){const e=await n1(r),t=Ci().gapi;return Ve(t,r,"internal-error"),e.open({where:document.body,url:l1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o1,dontclear:!0},s=>new Promise(async(a,c)=>{await s.restyle({setHideOnLeave:!1});const f=xi(r,"network-request-failed"),_=Ci().setTimeout(()=>{c(f)},r1.get());function v(){Ci().clearTimeout(_),a(s)}s.ping(v).then(v,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h1=500,d1=600,f1="_blank",p1="http://localhost";class H_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function m1(r,e,t,s=h1,a=d1){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let _="";const v=Object.assign(Object.assign({},c1),{width:s.toString(),height:a.toString(),top:c,left:f}),T=bn().toLowerCase();t&&(_=Fy(T)?f1:t),Dy(T)&&(e=e||p1,v.scrollbars="yes");const P=Object.entries(v).reduce((k,[$,W])=>`${k}${$}=${W},`,"");if(DS(T)&&_!=="_self")return g1(e||"",_),new H_(null);const C=window.open(e||"",_,P);Ve(C,r,"popup-blocked");try{C.focus()}catch{}return new H_(C)}function g1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="__/auth/handler",v1="emulator/auth/handler",y1=encodeURIComponent("fac");async function W_(r,e,t,s,a,c){Ve(r.config.authDomain,r,"auth-domain-config-required"),Ve(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:zl,eventId:a};if(e instanceof Gy){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",iI(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[P,C]of Object.entries({}))f[P]=C}if(e instanceof Ju){const P=e.getScopes().filter(C=>C!=="");P.length>0&&(f.scopes=P.join(","))}r.tenantId&&(f.tid=r.tenantId);const _=f;for(const P of Object.keys(_))_[P]===void 0&&delete _[P];const v=await r._getAppCheckToken(),T=v?`#${y1}=${encodeURIComponent(v)}`:"";return`${w1(r)}?${Qu(_).slice(1)}${T}`}function w1({config:r}){return r.emulator?Pp(r,v1):`https://${r.authDomain}/${_1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="webStorageSupport";class E1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tw,this._completeRedirectFn=$P,this._overrideRedirectResult=BP}async _openPopup(e,t,s,a){var c;Ts((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const f=await W_(e,t,s,Zf(),a);return m1(e,f,Rp())}async _openRedirect(e,t,s,a){await this._originValidation(e);const c=await W_(e,t,s,Zf(),a);return SP(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(Ts(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await u1(e),s=new ZP(e);return t.register("authEvent",a=>(Ve(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mf,{type:Mf},a=>{var c;const f=(c=a==null?void 0:a[0])===null||c===void 0?void 0:c[Mf];f!==void 0&&t(!!f),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=XP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hy()||Vy()||Cp()}}const T1=E1;var $_="@firebase/auth",q_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function P1(r){Ll(new Na("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:_}=s.options;Ve(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const v={apiKey:f,authDomain:_,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wy(r)},T=new BS(s,a,c,v);return XS(T,t),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ll(new Na("auth-internal",e=>{const t=Va(e.getProvider("auth").getImmediate());return(s=>new I1(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bo($_,q_,S1(r)),bo($_,q_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=300,C1=yy("authIdTokenMaxAge")||x1;let Z_=null;const A1=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>C1)return;const a=t==null?void 0:t.token;Z_!==a&&(Z_=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function k1(r=Py()){const e=Tp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=YS(r,{popupRedirectResolver:T1,persistence:[bP,EP,tw]}),s=yy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=A1(c.toString());gP(t,f,()=>f(t.currentUser)),mP(t,_=>f(_))}}const a=_y("auth");return a&&JS(t,`http://${a}`),t}function R1(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}HS({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const c=xi("internal-error");c.customData=a,t(c)},s.type="text/javascript",s.charset="UTF-8",R1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});P1("Browser");var L1="firebase",N1="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bo(L1,N1,"app");var G_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oo,lw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(B,N){function D(){}D.prototype=N.prototype,B.D=N.prototype,B.prototype=new D,B.prototype.constructor=B,B.C=function(F,z,H){for(var O=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)O[ot-2]=arguments[ot];return N.prototype[z].apply(F,O)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(B,N,D){D||(D=0);var F=Array(16);if(typeof N=="string")for(var z=0;16>z;++z)F[z]=N.charCodeAt(D++)|N.charCodeAt(D++)<<8|N.charCodeAt(D++)<<16|N.charCodeAt(D++)<<24;else for(z=0;16>z;++z)F[z]=N[D++]|N[D++]<<8|N[D++]<<16|N[D++]<<24;N=B.g[0],D=B.g[1],z=B.g[2];var H=B.g[3],O=N+(H^D&(z^H))+F[0]+3614090360&4294967295;N=D+(O<<7&4294967295|O>>>25),O=H+(z^N&(D^z))+F[1]+3905402710&4294967295,H=N+(O<<12&4294967295|O>>>20),O=z+(D^H&(N^D))+F[2]+606105819&4294967295,z=H+(O<<17&4294967295|O>>>15),O=D+(N^z&(H^N))+F[3]+3250441966&4294967295,D=z+(O<<22&4294967295|O>>>10),O=N+(H^D&(z^H))+F[4]+4118548399&4294967295,N=D+(O<<7&4294967295|O>>>25),O=H+(z^N&(D^z))+F[5]+1200080426&4294967295,H=N+(O<<12&4294967295|O>>>20),O=z+(D^H&(N^D))+F[6]+2821735955&4294967295,z=H+(O<<17&4294967295|O>>>15),O=D+(N^z&(H^N))+F[7]+4249261313&4294967295,D=z+(O<<22&4294967295|O>>>10),O=N+(H^D&(z^H))+F[8]+1770035416&4294967295,N=D+(O<<7&4294967295|O>>>25),O=H+(z^N&(D^z))+F[9]+2336552879&4294967295,H=N+(O<<12&4294967295|O>>>20),O=z+(D^H&(N^D))+F[10]+4294925233&4294967295,z=H+(O<<17&4294967295|O>>>15),O=D+(N^z&(H^N))+F[11]+2304563134&4294967295,D=z+(O<<22&4294967295|O>>>10),O=N+(H^D&(z^H))+F[12]+1804603682&4294967295,N=D+(O<<7&4294967295|O>>>25),O=H+(z^N&(D^z))+F[13]+4254626195&4294967295,H=N+(O<<12&4294967295|O>>>20),O=z+(D^H&(N^D))+F[14]+2792965006&4294967295,z=H+(O<<17&4294967295|O>>>15),O=D+(N^z&(H^N))+F[15]+1236535329&4294967295,D=z+(O<<22&4294967295|O>>>10),O=N+(z^H&(D^z))+F[1]+4129170786&4294967295,N=D+(O<<5&4294967295|O>>>27),O=H+(D^z&(N^D))+F[6]+3225465664&4294967295,H=N+(O<<9&4294967295|O>>>23),O=z+(N^D&(H^N))+F[11]+643717713&4294967295,z=H+(O<<14&4294967295|O>>>18),O=D+(H^N&(z^H))+F[0]+3921069994&4294967295,D=z+(O<<20&4294967295|O>>>12),O=N+(z^H&(D^z))+F[5]+3593408605&4294967295,N=D+(O<<5&4294967295|O>>>27),O=H+(D^z&(N^D))+F[10]+38016083&4294967295,H=N+(O<<9&4294967295|O>>>23),O=z+(N^D&(H^N))+F[15]+3634488961&4294967295,z=H+(O<<14&4294967295|O>>>18),O=D+(H^N&(z^H))+F[4]+3889429448&4294967295,D=z+(O<<20&4294967295|O>>>12),O=N+(z^H&(D^z))+F[9]+568446438&4294967295,N=D+(O<<5&4294967295|O>>>27),O=H+(D^z&(N^D))+F[14]+3275163606&4294967295,H=N+(O<<9&4294967295|O>>>23),O=z+(N^D&(H^N))+F[3]+4107603335&4294967295,z=H+(O<<14&4294967295|O>>>18),O=D+(H^N&(z^H))+F[8]+1163531501&4294967295,D=z+(O<<20&4294967295|O>>>12),O=N+(z^H&(D^z))+F[13]+2850285829&4294967295,N=D+(O<<5&4294967295|O>>>27),O=H+(D^z&(N^D))+F[2]+4243563512&4294967295,H=N+(O<<9&4294967295|O>>>23),O=z+(N^D&(H^N))+F[7]+1735328473&4294967295,z=H+(O<<14&4294967295|O>>>18),O=D+(H^N&(z^H))+F[12]+2368359562&4294967295,D=z+(O<<20&4294967295|O>>>12),O=N+(D^z^H)+F[5]+4294588738&4294967295,N=D+(O<<4&4294967295|O>>>28),O=H+(N^D^z)+F[8]+2272392833&4294967295,H=N+(O<<11&4294967295|O>>>21),O=z+(H^N^D)+F[11]+1839030562&4294967295,z=H+(O<<16&4294967295|O>>>16),O=D+(z^H^N)+F[14]+4259657740&4294967295,D=z+(O<<23&4294967295|O>>>9),O=N+(D^z^H)+F[1]+2763975236&4294967295,N=D+(O<<4&4294967295|O>>>28),O=H+(N^D^z)+F[4]+1272893353&4294967295,H=N+(O<<11&4294967295|O>>>21),O=z+(H^N^D)+F[7]+4139469664&4294967295,z=H+(O<<16&4294967295|O>>>16),O=D+(z^H^N)+F[10]+3200236656&4294967295,D=z+(O<<23&4294967295|O>>>9),O=N+(D^z^H)+F[13]+681279174&4294967295,N=D+(O<<4&4294967295|O>>>28),O=H+(N^D^z)+F[0]+3936430074&4294967295,H=N+(O<<11&4294967295|O>>>21),O=z+(H^N^D)+F[3]+3572445317&4294967295,z=H+(O<<16&4294967295|O>>>16),O=D+(z^H^N)+F[6]+76029189&4294967295,D=z+(O<<23&4294967295|O>>>9),O=N+(D^z^H)+F[9]+3654602809&4294967295,N=D+(O<<4&4294967295|O>>>28),O=H+(N^D^z)+F[12]+3873151461&4294967295,H=N+(O<<11&4294967295|O>>>21),O=z+(H^N^D)+F[15]+530742520&4294967295,z=H+(O<<16&4294967295|O>>>16),O=D+(z^H^N)+F[2]+3299628645&4294967295,D=z+(O<<23&4294967295|O>>>9),O=N+(z^(D|~H))+F[0]+4096336452&4294967295,N=D+(O<<6&4294967295|O>>>26),O=H+(D^(N|~z))+F[7]+1126891415&4294967295,H=N+(O<<10&4294967295|O>>>22),O=z+(N^(H|~D))+F[14]+2878612391&4294967295,z=H+(O<<15&4294967295|O>>>17),O=D+(H^(z|~N))+F[5]+4237533241&4294967295,D=z+(O<<21&4294967295|O>>>11),O=N+(z^(D|~H))+F[12]+1700485571&4294967295,N=D+(O<<6&4294967295|O>>>26),O=H+(D^(N|~z))+F[3]+2399980690&4294967295,H=N+(O<<10&4294967295|O>>>22),O=z+(N^(H|~D))+F[10]+4293915773&4294967295,z=H+(O<<15&4294967295|O>>>17),O=D+(H^(z|~N))+F[1]+2240044497&4294967295,D=z+(O<<21&4294967295|O>>>11),O=N+(z^(D|~H))+F[8]+1873313359&4294967295,N=D+(O<<6&4294967295|O>>>26),O=H+(D^(N|~z))+F[15]+4264355552&4294967295,H=N+(O<<10&4294967295|O>>>22),O=z+(N^(H|~D))+F[6]+2734768916&4294967295,z=H+(O<<15&4294967295|O>>>17),O=D+(H^(z|~N))+F[13]+1309151649&4294967295,D=z+(O<<21&4294967295|O>>>11),O=N+(z^(D|~H))+F[4]+4149444226&4294967295,N=D+(O<<6&4294967295|O>>>26),O=H+(D^(N|~z))+F[11]+3174756917&4294967295,H=N+(O<<10&4294967295|O>>>22),O=z+(N^(H|~D))+F[2]+718787259&4294967295,z=H+(O<<15&4294967295|O>>>17),O=D+(H^(z|~N))+F[9]+3951481745&4294967295,B.g[0]=B.g[0]+N&4294967295,B.g[1]=B.g[1]+(z+(O<<21&4294967295|O>>>11))&4294967295,B.g[2]=B.g[2]+z&4294967295,B.g[3]=B.g[3]+H&4294967295}s.prototype.u=function(B,N){N===void 0&&(N=B.length);for(var D=N-this.blockSize,F=this.B,z=this.h,H=0;H<N;){if(z==0)for(;H<=D;)a(this,B,H),H+=this.blockSize;if(typeof B=="string"){for(;H<N;)if(F[z++]=B.charCodeAt(H++),z==this.blockSize){a(this,F),z=0;break}}else for(;H<N;)if(F[z++]=B[H++],z==this.blockSize){a(this,F),z=0;break}}this.h=z,this.o+=N},s.prototype.v=function(){var B=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);B[0]=128;for(var N=1;N<B.length-8;++N)B[N]=0;var D=8*this.o;for(N=B.length-8;N<B.length;++N)B[N]=D&255,D/=256;for(this.u(B),B=Array(16),N=D=0;4>N;++N)for(var F=0;32>F;F+=8)B[D++]=this.g[N]>>>F&255;return B};function c(B,N){var D=_;return Object.prototype.hasOwnProperty.call(D,B)?D[B]:D[B]=N(B)}function f(B,N){this.h=N;for(var D=[],F=!0,z=B.length-1;0<=z;z--){var H=B[z]|0;F&&H==N||(D[z]=H,F=!1)}this.g=D}var _={};function v(B){return-128<=B&&128>B?c(B,function(N){return new f([N|0],0>N?-1:0)}):new f([B|0],0>B?-1:0)}function T(B){if(isNaN(B)||!isFinite(B))return C;if(0>B)return G(T(-B));for(var N=[],D=1,F=0;B>=D;F++)N[F]=B/D|0,D*=4294967296;return new f(N,0)}function P(B,N){if(B.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(B.charAt(0)=="-")return G(P(B.substring(1),N));if(0<=B.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=T(Math.pow(N,8)),F=C,z=0;z<B.length;z+=8){var H=Math.min(8,B.length-z),O=parseInt(B.substring(z,z+H),N);8>H?(H=T(Math.pow(N,H)),F=F.j(H).add(T(O))):(F=F.j(D),F=F.add(T(O)))}return F}var C=v(0),k=v(1),$=v(16777216);r=f.prototype,r.m=function(){if(Q(this))return-G(this).m();for(var B=0,N=1,D=0;D<this.g.length;D++){var F=this.i(D);B+=(0<=F?F:4294967296+F)*N,N*=4294967296}return B},r.toString=function(B){if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(W(this))return"0";if(Q(this))return"-"+G(this).toString(B);for(var N=T(Math.pow(B,6)),D=this,F="";;){var z=Me(D,N).g;D=pe(D,z.j(N));var H=((0<D.g.length?D.g[0]:D.h)>>>0).toString(B);if(D=z,W(D))return H+F;for(;6>H.length;)H="0"+H;F=H+F}},r.i=function(B){return 0>B?0:B<this.g.length?this.g[B]:this.h};function W(B){if(B.h!=0)return!1;for(var N=0;N<B.g.length;N++)if(B.g[N]!=0)return!1;return!0}function Q(B){return B.h==-1}r.l=function(B){return B=pe(this,B),Q(B)?-1:W(B)?0:1};function G(B){for(var N=B.g.length,D=[],F=0;F<N;F++)D[F]=~B.g[F];return new f(D,~B.h).add(k)}r.abs=function(){return Q(this)?G(this):this},r.add=function(B){for(var N=Math.max(this.g.length,B.g.length),D=[],F=0,z=0;z<=N;z++){var H=F+(this.i(z)&65535)+(B.i(z)&65535),O=(H>>>16)+(this.i(z)>>>16)+(B.i(z)>>>16);F=O>>>16,H&=65535,O&=65535,D[z]=O<<16|H}return new f(D,D[D.length-1]&-2147483648?-1:0)};function pe(B,N){return B.add(G(N))}r.j=function(B){if(W(this)||W(B))return C;if(Q(this))return Q(B)?G(this).j(G(B)):G(G(this).j(B));if(Q(B))return G(this.j(G(B)));if(0>this.l($)&&0>B.l($))return T(this.m()*B.m());for(var N=this.g.length+B.g.length,D=[],F=0;F<2*N;F++)D[F]=0;for(F=0;F<this.g.length;F++)for(var z=0;z<B.g.length;z++){var H=this.i(F)>>>16,O=this.i(F)&65535,ot=B.i(z)>>>16,sn=B.i(z)&65535;D[2*F+2*z]+=O*sn,de(D,2*F+2*z),D[2*F+2*z+1]+=H*sn,de(D,2*F+2*z+1),D[2*F+2*z+1]+=O*ot,de(D,2*F+2*z+1),D[2*F+2*z+2]+=H*ot,de(D,2*F+2*z+2)}for(F=0;F<N;F++)D[F]=D[2*F+1]<<16|D[2*F];for(F=N;F<2*N;F++)D[F]=0;return new f(D,0)};function de(B,N){for(;(B[N]&65535)!=B[N];)B[N+1]+=B[N]>>>16,B[N]&=65535,N++}function me(B,N){this.g=B,this.h=N}function Me(B,N){if(W(N))throw Error("division by zero");if(W(B))return new me(C,C);if(Q(B))return N=Me(G(B),N),new me(G(N.g),G(N.h));if(Q(N))return N=Me(B,G(N)),new me(G(N.g),N.h);if(30<B.g.length){if(Q(B)||Q(N))throw Error("slowDivide_ only works with positive integers.");for(var D=k,F=N;0>=F.l(B);)D=rt(D),F=rt(F);var z=$e(D,1),H=$e(F,1);for(F=$e(F,2),D=$e(D,2);!W(F);){var O=H.add(F);0>=O.l(B)&&(z=z.add(D),H=O),F=$e(F,1),D=$e(D,1)}return N=pe(B,z.j(N)),new me(z,N)}for(z=C;0<=B.l(N);){for(D=Math.max(1,Math.floor(B.m()/N.m())),F=Math.ceil(Math.log(D)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),H=T(D),O=H.j(N);Q(O)||0<O.l(B);)D-=F,H=T(D),O=H.j(N);W(H)&&(H=k),z=z.add(H),B=pe(B,O)}return new me(z,B)}r.A=function(B){return Me(this,B).h},r.and=function(B){for(var N=Math.max(this.g.length,B.g.length),D=[],F=0;F<N;F++)D[F]=this.i(F)&B.i(F);return new f(D,this.h&B.h)},r.or=function(B){for(var N=Math.max(this.g.length,B.g.length),D=[],F=0;F<N;F++)D[F]=this.i(F)|B.i(F);return new f(D,this.h|B.h)},r.xor=function(B){for(var N=Math.max(this.g.length,B.g.length),D=[],F=0;F<N;F++)D[F]=this.i(F)^B.i(F);return new f(D,this.h^B.h)};function rt(B){for(var N=B.g.length+1,D=[],F=0;F<N;F++)D[F]=B.i(F)<<1|B.i(F-1)>>>31;return new f(D,B.h)}function $e(B,N){var D=N>>5;N%=32;for(var F=B.g.length-D,z=[],H=0;H<F;H++)z[H]=0<N?B.i(H+D)>>>N|B.i(H+D+1)<<32-N:B.i(H+D);return new f(z,B.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,lw=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=T,f.fromString=P,Oo=f}).apply(typeof G_<"u"?G_:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uw,Tu,cw,gh,Yf,hw,dw,fw;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,I){return h==Array.prototype||h==Object.prototype||(h[y]=I.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var y=0;y<h.length;++y){var I=h[y];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var s=t(this);function a(h,y){if(y)e:{var I=s;h=h.split(".");for(var A=0;A<h.length-1;A++){var q=h[A];if(!(q in I))break e;I=I[q]}h=h[h.length-1],A=I[h],y=y(A),y!=A&&y!=null&&e(I,h,{configurable:!0,writable:!0,value:y})}}function c(h,y){h instanceof String&&(h+="");var I=0,A=!1,q={next:function(){if(!A&&I<h.length){var ee=I++;return{value:y(ee,h[ee]),done:!1}}return A=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}a("Array.prototype.values",function(h){return h||function(){return c(this,function(y,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},_=this||self;function v(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function T(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function P(h,y,I){return h.call.apply(h.bind,arguments)}function C(h,y,I){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,A),h.apply(y,q)}}return function(){return h.apply(y,arguments)}}function k(h,y,I){return k=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?P:C,k.apply(null,arguments)}function $(h,y){var I=Array.prototype.slice.call(arguments,1);return function(){var A=I.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function W(h,y){function I(){}I.prototype=y.prototype,h.aa=y.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(A,q,ee){for(var fe=Array(arguments.length-2),at=2;at<arguments.length;at++)fe[at-2]=arguments[at];return y.prototype[q].apply(A,fe)}}function Q(h){const y=h.length;if(0<y){const I=Array(y);for(let A=0;A<y;A++)I[A]=h[A];return I}return[]}function G(h,y){for(let I=1;I<arguments.length;I++){const A=arguments[I];if(v(A)){const q=h.length||0,ee=A.length||0;h.length=q+ee;for(let fe=0;fe<ee;fe++)h[q+fe]=A[fe]}else h.push(A)}}class pe{constructor(y,I){this.i=y,this.j=I,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function de(h){return/^[\s\xa0]*$/.test(h)}function me(){var h=_.navigator;return h&&(h=h.userAgent)?h:""}function Me(h){return Me[" "](h),h}Me[" "]=function(){};var rt=me().indexOf("Gecko")!=-1&&!(me().toLowerCase().indexOf("webkit")!=-1&&me().indexOf("Edge")==-1)&&!(me().indexOf("Trident")!=-1||me().indexOf("MSIE")!=-1)&&me().indexOf("Edge")==-1;function $e(h,y,I){for(const A in h)y.call(I,h[A],A,h)}function B(h,y){for(const I in h)y.call(void 0,h[I],I,h)}function N(h){const y={};for(const I in h)y[I]=h[I];return y}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(h,y){let I,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(I in A)h[I]=A[I];for(let ee=0;ee<D.length;ee++)I=D[ee],Object.prototype.hasOwnProperty.call(A,I)&&(h[I]=A[I])}}function z(h){var y=1;h=h.split(":");const I=[];for(;0<y&&h.length;)I.push(h.shift()),y--;return h.length&&I.push(h.join(":")),I}function H(h){_.setTimeout(()=>{throw h},0)}function O(){var h=ke;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ot{constructor(){this.h=this.g=null}add(y,I){const A=sn.get();A.set(y,I),this.h?this.h.next=A:this.g=A,this.h=A}}var sn=new pe(()=>new lt,h=>h.reset());class lt{constructor(){this.next=this.g=this.h=null}set(y,I){this.h=y,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,re=!1,ke=new ot,se=()=>{const h=_.Promise.resolve(void 0);tt=()=>{h.then(U)}};var U=()=>{for(var h;h=O();){try{h.h.call(h.g)}catch(I){H(I)}var y=sn;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}re=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Ce=(function(){if(!_.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};_.addEventListener("test",I,y),_.removeEventListener("test",I,y)}catch{}return h})();function Te(h,y){if(ve.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(rt){e:{try{Me(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else I=="mouseover"?y=h.fromElement:I=="mouseout"&&(y=h.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:we[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Te.aa.h.call(this)}}W(Te,ve);var we={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function ft(h,y,I,A,q){this.listener=h,this.proxy=null,this.src=y,this.type=I,this.capture=!!A,this.ha=q,this.key=++Ge,this.da=this.fa=!1}function bt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ar(h){this.src=h,this.g={},this.h=0}ar.prototype.add=function(h,y,I,A,q){var ee=h.toString();h=this.g[ee],h||(h=this.g[ee]=[],this.h++);var fe=Ir(h,y,A,q);return-1<fe?(y=h[fe],I||(y.fa=!1)):(y=new ft(y,this.src,ee,!!A,q),y.fa=I,h.push(y)),y};function Tr(h,y){var I=y.type;if(I in h.g){var A=h.g[I],q=Array.prototype.indexOf.call(A,y,void 0),ee;(ee=0<=q)&&Array.prototype.splice.call(A,q,1),ee&&(bt(y),h.g[I].length==0&&(delete h.g[I],h.h--))}}function Ir(h,y,I,A){for(var q=0;q<h.length;++q){var ee=h[q];if(!ee.da&&ee.listener==y&&ee.capture==!!I&&ee.ha==A)return q}return-1}var bi="closure_lm_"+(1e6*Math.random()|0),Oi={};function xs(h,y,I,A,q){if(Array.isArray(y)){for(var ee=0;ee<y.length;ee++)xs(h,y[ee],I,A,q);return null}return I=Xo(I),h&&h[qe]?h.K(y,I,T(A)?!!A.capture:!1,q):Mi(h,y,I,!1,A,q)}function Mi(h,y,I,A,q,ee){if(!y)throw Error("Invalid event type");var fe=T(q)?!!q.capture:!!q,at=Vi(h);if(at||(h[bi]=at=new ar(h)),I=at.add(y,I,A,fe,ee),I.proxy)return I;if(A=Di(),I.proxy=A,A.src=h,A.listener=I,h.addEventListener)Ce||(q=fe),q===void 0&&(q=!1),h.addEventListener(y.toString(),A,q);else if(h.attachEvent)h.attachEvent(lr(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Di(){function h(I){return y.call(h.src,h.listener,I)}const y=As;return h}function Cs(h,y,I,A,q){if(Array.isArray(y))for(var ee=0;ee<y.length;ee++)Cs(h,y[ee],I,A,q);else A=T(A)?!!A.capture:!!A,I=Xo(I),h&&h[qe]?(h=h.i,y=String(y).toString(),y in h.g&&(ee=h.g[y],I=Ir(ee,I,A,q),-1<I&&(bt(ee[I]),Array.prototype.splice.call(ee,I,1),ee.length==0&&(delete h.g[y],h.h--)))):h&&(h=Vi(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ir(y,I,A,q)),(I=-1<h?y[h]:null)&&Sr(I))}function Sr(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[qe])Tr(y.i,h);else{var I=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(I,A,h.capture):y.detachEvent?y.detachEvent(lr(I),A):y.addListener&&y.removeListener&&y.removeListener(A),(I=Vi(y))?(Tr(I,h),I.h==0&&(I.src=null,y[bi]=null)):bt(h)}}}function lr(h){return h in Oi?Oi[h]:Oi[h]="on"+h}function As(h,y){if(h.da)h=!0;else{y=new Te(y,this);var I=h.listener,A=h.ha||h.src;h.fa&&Sr(h),h=I.call(A,y)}return h}function Vi(h){return h=h[bi],h instanceof ar?h:null}var ks="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xo(h){return typeof h=="function"?h:(h[ks]||(h[ks]=function(y){return h.handleEvent(y)}),h[ks])}function Ct(){ne.call(this),this.i=new ar(this),this.M=this,this.F=null}W(Ct,ne),Ct.prototype[qe]=!0,Ct.prototype.removeEventListener=function(h,y,I,A){Cs(this,h,y,I,A)};function Ot(h,y){var I,A=h.F;if(A)for(I=[];A;A=A.F)I.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new ve(y,h);else if(y instanceof ve)y.target=y.target||h;else{var q=y;y=new ve(A,h),F(y,q)}if(q=!0,I)for(var ee=I.length-1;0<=ee;ee--){var fe=y.g=I[ee];q=Pr(fe,A,!0,y)&&q}if(fe=y.g=h,q=Pr(fe,A,!0,y)&&q,q=Pr(fe,A,!1,y)&&q,I)for(ee=0;ee<I.length;ee++)fe=y.g=I[ee],q=Pr(fe,A,!1,y)&&q}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var I=h.g[y],A=0;A<I.length;A++)bt(I[A]);delete h.g[y],h.h--}}this.F=null},Ct.prototype.K=function(h,y,I,A){return this.i.add(String(h),y,!1,I,A)},Ct.prototype.L=function(h,y,I,A){return this.i.add(String(h),y,!0,I,A)};function Pr(h,y,I,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,ee=0;ee<y.length;++ee){var fe=y[ee];if(fe&&!fe.da&&fe.capture==I){var at=fe.listener,Dt=fe.ha||fe.src;fe.fa&&Tr(h.i,fe),q=at.call(Dt,A)!==!1&&q}}return q&&!A.defaultPrevented}function Jo(h,y,I){if(typeof h=="function")I&&(h=k(h,I));else if(h&&typeof h.handleEvent=="function")h=k(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:_.setTimeout(h,y||0)}function Hr(h){h.g=Jo(()=>{h.g=null,h.i&&(h.i=!1,Hr(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class ui extends ne{constructor(y,I){super(),this.m=y,this.l=I,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Hr(this)}N(){super.N(),this.g&&(_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(h){ne.call(this),this.h=h,this.g={}}W(Fi,ne);var Rs=[];function zi(h){$e(h.g,function(y,I){this.g.hasOwnProperty(I)&&Sr(y)},h),h.g={}}Fi.prototype.N=function(){Fi.aa.N.call(this),zi(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ls=_.JSON.stringify,ea=_.JSON.parse,Wr=class{stringify(h){return _.JSON.stringify(h,void 0)}parse(h){return _.JSON.parse(h,void 0)}};function Ui(){}Ui.prototype.h=null;function Ns(h){return h.h||(h.h=h.i())}function ji(){}var On={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){ve.call(this,"d")}W(ur,ve);function bs(){ve.call(this,"c")}W(bs,ve);var xr={},ta=null;function Bi(){return ta=ta||new Ct}xr.La="serverreachability";function na(h){ve.call(this,xr.La,h)}W(na,ve);function $r(h){const y=Bi();Ot(y,new na(y))}xr.STAT_EVENT="statevent";function Hi(h,y){ve.call(this,xr.STAT_EVENT,h),this.stat=y}W(Hi,ve);function At(h){const y=Bi();Ot(y,new Hi(y,h))}xr.Ma="timingevent";function Os(h,y){ve.call(this,xr.Ma,h),this.size=y}W(Os,ve);function cr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){h()},y)}function Wi(){this.g=!0}Wi.prototype.xa=function(){this.g=!1};function on(h,y,I,A,q,ee){h.info(function(){if(h.g)if(ee)for(var fe="",at=ee.split("&"),Dt=0;Dt<at.length;Dt++){var Xe=at[Dt].split("=");if(1<Xe.length){var ct=Xe[0];Xe=Xe[1];var yt=ct.split("_");fe=2<=yt.length&&yt[1]=="type"?fe+(ct+"="+Xe+"&"):fe+(ct+"=redacted&")}}else fe=null;else fe=ee;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+y+`
`+I+`
`+fe})}function Pe(h,y,I,A,q,ee,fe){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+y+`
`+I+`
`+ee+" "+fe})}function jn(h,y,I,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ua(h,I)+(A?" "+A:"")})}function Ms(h,y){h.info(function(){return"TIMEOUT: "+y})}Wi.prototype.info=function(){};function Ua(h,y){if(!h.g)return y;if(!y)return null;try{var I=JSON.parse(y);if(I){for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var A=I[h];if(!(2>A.length)){var q=A[1];if(Array.isArray(q)&&!(1>q.length)){var ee=q[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var fe=1;fe<q.length;fe++)q[fe]=""}}}}return Ls(I)}catch{return y}}var $i={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ds={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bn;function Hn(){}W(Hn,Ui),Hn.prototype.g=function(){return new XMLHttpRequest},Hn.prototype.i=function(){return{}},Bn=new Hn;function Wn(h,y,I,A){this.j=h,this.i=y,this.l=I,this.R=A||1,this.U=new Fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ja}function ja(){this.i=null,this.g="",this.h=!1}var ra={},Vs={};function Fs(h,y,I){h.L=1,h.v=Tn(wt(y)),h.m=I,h.P=!0,zs(h,null)}function zs(h,y){h.F=Date.now(),_t(h),h.A=wt(h.v);var I=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),mi(I.i,"t",A),h.C=0,I=h.j.J,h.h=new ja,h.g=qa(h.j,I?y:null,!h.m),0<h.O&&(h.M=new ui(k(h.Y,h,h.g),h.O)),y=h.U,I=h.g,A=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Rs[0]=q.toString()),q=Rs);for(var ee=0;ee<q.length;ee++){var fe=xs(I,q[ee],A||y.handleEvent,!1,y.h||y);if(!fe)break;y.g[fe.key]=fe}y=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),$r(),on(h.i,h.u,h.A,h.l,h.R,h.m)}Wn.prototype.ca=function(h){h=h.target;const y=this.M;y&&Ht(h)==3?y.j():this.Y(h)},Wn.prototype.Y=function(h){try{if(h==this.g)e:{const yt=Ht(this.g);var y=this.g.Ba();const Xn=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||$s(this.g)))){this.J||yt!=4||y==7||(y==8||0>=Xn?$r(3):$r(2)),qi(this);var I=this.g.Z();this.X=I;t:if(Ba(this)){var A=$s(this.g);h="";var q=A.length,ee=Ht(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$n(this),ci(this);var fe="";break t}this.h.i=new _.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,h+=this.h.i.decode(A[y],{stream:!(ee&&y==q-1)});A.length=0,this.h.g+=h,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=I==200,Pe(this.i,this.u,this.A,this.l,this.R,yt,I),this.o){if(this.T&&!this.K){t:{if(this.g){var at,Dt=this.g;if((at=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!de(at)){var Xe=at;break t}}Xe=null}if(I=Xe)jn(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zi(this,I);else{this.o=!1,this.s=3,At(12),$n(this),ci(this);break e}}if(this.P){I=!0;let kt;for(;!this.J&&this.C<fe.length;)if(kt=Us(this,fe),kt==Vs){yt==4&&(this.s=4,At(14),I=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==ra){this.s=4,At(15),jn(this.i,this.l,fe,"[Invalid Chunk]"),I=!1;break}else jn(this.i,this.l,kt,null),Zi(this,kt);if(Ba(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||fe.length!=0||this.h.h||(this.s=1,At(16),I=!1),this.o=this.o&&I,!I)jn(this.i,this.l,fe,"[Invalid Chunked Response]"),$n(this),ci(this);else if(0<fe.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Gs(ct),ct.M=!0,At(11))}}else jn(this.i,this.l,fe,null),Zi(this,fe);yt==4&&$n(this),this.o&&!this.J&&(yt==4?ns(this.j,this):(this.o=!1,_t(this)))}else qs(this.g),I==400&&0<fe.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),$n(this),ci(this)}}}catch{}finally{}};function Ba(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Us(h,y){var I=h.C,A=y.indexOf(`
`,I);return A==-1?Vs:(I=Number(y.substring(I,A)),isNaN(I)?ra:(A+=1,A+I>y.length?Vs:(y=y.slice(A,A+I),h.C=A+I,y)))}Wn.prototype.cancel=function(){this.J=!0,$n(this)};function _t(h){h.S=Date.now()+h.I,Ha(h,h.I)}function Ha(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=cr(k(h.ba,h),y)}function qi(h){h.B&&(_.clearTimeout(h.B),h.B=null)}Wn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ms(this.i,this.A),this.L!=2&&($r(),At(17)),$n(this),this.s=2,ci(this)):Ha(this,this.S-h)};function ci(h){h.j.G==0||h.J||ns(h.j,h)}function $n(h){qi(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,zi(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Zi(h,y){try{var I=h.j;if(I.G!=0&&(I.g==h||ze(I.h,h))){if(!h.K&&ze(I.h,h)&&I.G==3){try{var A=I.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<h.F)Qs(I),fr(I);else break e;ts(I),At(18)}}else I.za=q[1],0<I.za-I.T&&37500>q[2]&&I.F&&I.v==0&&!I.C&&(I.C=cr(k(I.Za,I),6e3));if(1>=fi(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Yr(I,11)}else if((h.K||I.g==h)&&Qs(I),!de(y))for(q=I.Da.g.parse(y),y=0;y<q.length;y++){let Xe=q[y];if(I.T=Xe[0],Xe=Xe[1],I.G==2)if(Xe[0]=="c"){I.K=Xe[1],I.ia=Xe[2];const ct=Xe[3];ct!=null&&(I.la=ct,I.j.info("VER="+I.la));const yt=Xe[4];yt!=null&&(I.Aa=yt,I.j.info("SVER="+I.Aa));const Xn=Xe[5];Xn!=null&&typeof Xn=="number"&&0<Xn&&(A=1.5*Xn,I.L=A,I.j.info("backChannelRequestTimeoutMs_="+A)),A=I;const kt=h.g;if(kt){const is=kt.g?kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(is){var ee=A.h;ee.g||is.indexOf("spdy")==-1&&is.indexOf("quic")==-1&&is.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(pt(ee,ee.h),ee.h=null))}if(A.D){const pr=kt.g?kt.g.getResponseHeader("X-HTTP-Session-Id"):null;pr&&(A.ya=pr,Ue(A.I,A.D,pr))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms")),A=I;var fe=h;if(A.qa=Ys(A,A.J?A.ia:null,A.W),fe.K){Gi(A.h,fe);var at=fe,Dt=A.L;Dt&&(at.I=Dt),at.B&&(qi(at),_t(at)),A.g=fe}else In(A);0<I.i.length&&Yn(I)}else Xe[0]!="stop"&&Xe[0]!="close"||Yr(I,7);else I.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Yr(I,7):Wt(I):Xe[0]!="noop"&&I.l&&I.l.ta(Xe),I.v=0)}}$r(4)}catch{}}var hi=class{constructor(h,y){this.g=h,this.map=y}};function di(h){this.l=h||10,_.PerformanceNavigationTiming?(h=_.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(_.chrome&&_.chrome.loadTimes&&_.chrome.loadTimes()&&_.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function fi(h){return h.h?1:h.g?h.g.size:0}function ze(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function pt(h,y){h.g?h.g.add(y):h.h=y}function Gi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}di.prototype.cancel=function(){if(this.i=qr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function qr(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const I of h.g.values())y=y.concat(I.D);return y}return Q(h.i)}function hr(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(v(h)){for(var y=[],I=h.length,A=0;A<I;A++)y.push(h[A]);return y}y=[],I=0;for(A in h)y[I++]=h[A];return y}function pi(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(v(h)||typeof h=="string"){var y=[];h=h.length;for(var I=0;I<h;I++)y.push(I);return y}y=[],I=0;for(const A in h)y[I++]=A;return y}}}function De(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(v(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var I=pi(h),A=hr(h),q=A.length,ee=0;ee<q;ee++)y.call(void 0,A[ee],I&&I[ee],h)}var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ia(h,y){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var A=h[I].indexOf("="),q=null;if(0<=A){var ee=h[I].substring(0,A);q=h[I].substring(A+1)}else ee=h[I];y(ee,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function qn(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof qn){this.h=h.h,Ki(this,h.j),this.o=h.o,this.g=h.g,dr(this,h.s),this.l=h.l;var y=h.i,I=new Gn;I.i=y.i,y.g&&(I.g=new Map(y.g),I.h=y.h),En(this,I),this.m=h.m}else h&&(y=String(h).match(mt))?(this.h=!1,Ki(this,y[1]||"",!0),this.o=Ze(y[2]||""),this.g=Ze(y[3]||"",!0),dr(this,y[4]),this.l=Ze(y[5]||"",!0),En(this,y[6]||"",!0),this.m=Ze(y[7]||"")):(this.h=!1,this.i=new Gn(null,this.h))}qn.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Zn(y,Cr,!0),":");var I=this.g;return(I||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Zn(y,Cr,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&h.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(Zn(I,I.charAt(0)=="/"?Hs:Bs,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",Zn(I,Yi)),h.join("")};function wt(h){return new qn(h)}function Ki(h,y,I){h.j=I?Ze(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function dr(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function En(h,y,I){y instanceof Gn?(h.i=y,zt(h.i,h.h)):(I||(y=Zn(y,Qi)),h.i=new Gn(y,h.h))}function Ue(h,y,I){h.i.set(y,I)}function Tn(h){return Ue(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ze(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Zn(h,y,I){return typeof h=="string"?(h=encodeURI(h).replace(y,js),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function js(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Cr=/[#\/\?@]/g,Bs=/[#\?:]/g,Hs=/[#\?]/g,Qi=/[#\?@]/g,Yi=/#/g;function Gn(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Mt(h){h.g||(h.g=new Map,h.h=0,h.i&&ia(h.i,function(y,I){h.add(decodeURIComponent(y.replace(/\+/g," ")),I)}))}r=Gn.prototype,r.add=function(h,y){Mt(this),this.i=null,h=Re(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(y),this.h+=1,this};function Kn(h,y){Mt(h),y=Re(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Mn(h,y){return Mt(h),y=Re(h,y),h.g.has(y)}r.forEach=function(h,y){Mt(this),this.g.forEach(function(I,A){I.forEach(function(q){h.call(y,q,A,this)},this)},this)},r.na=function(){Mt(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),I=[];for(let A=0;A<y.length;A++){const q=h[A];for(let ee=0;ee<q.length;ee++)I.push(y[A])}return I},r.V=function(h){Mt(this);let y=[];if(typeof h=="string")Mn(this,h)&&(y=y.concat(this.g.get(Re(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)y=y.concat(h[I])}return y},r.set=function(h,y){return Mt(this),this.i=null,h=Re(this,h),Mn(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function mi(h,y,I){Kn(h,y),0<I.length&&(h.i=null,h.g.set(Re(h,y),Q(I)),h.h+=I.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var I=0;I<y.length;I++){var A=y[I];const ee=encodeURIComponent(String(A)),fe=this.V(A);for(A=0;A<fe.length;A++){var q=ee;fe[A]!==""&&(q+="="+encodeURIComponent(String(fe[A]))),h.push(q)}}return this.i=h.join("&")};function Re(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function zt(h,y){y&&!h.j&&(Mt(h),h.i=null,h.g.forEach(function(I,A){var q=A.toLowerCase();A!=q&&(Kn(this,A),mi(this,q,I))},h)),h.j=y}function ut(h,y){const I=new Wi;if(_.Image){const A=new Image;A.onload=$(an,I,"TestLoadImage: loaded",!0,y,A),A.onerror=$(an,I,"TestLoadImage: error",!1,y,A),A.onabort=$(an,I,"TestLoadImage: abort",!1,y,A),A.ontimeout=$(an,I,"TestLoadImage: timeout",!1,y,A),_.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function sa(h,y){const I=new Wi,A=new AbortController,q=setTimeout(()=>{A.abort(),an(I,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(ee=>{clearTimeout(q),ee.ok?an(I,"TestPingServer: ok",!0,y):an(I,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),an(I,"TestPingServer: error",!1,y)})}function an(h,y,I,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(I)}catch{}}function oa(){this.g=new Wr}function Ws(h,y,I){const A=I||"";try{De(h,function(q,ee){let fe=q;T(q)&&(fe=Ls(q)),y.push(A+ee+"="+encodeURIComponent(fe))})}catch(q){throw y.push(A+"type="+encodeURIComponent("_badmap")),q}}function fn(h){this.l=h.Ub||null,this.j=h.eb||!1}W(fn,Ui),fn.prototype.g=function(){return new Zr(this.l,this.j)},fn.prototype.i=(function(h){return function(){return h}})({});function Zr(h,y){Ct.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}W(Zr,Ct),r=Zr.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Xt(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||_).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gt(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Xt(this)),this.g&&(this.readyState=3,Xt(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof _.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gi(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function gi(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?gt(this):Xt(this),this.readyState==3&&gi(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,gt(this))},r.Qa=function(h){this.g&&(this.response=h,gt(this))},r.ga=function(){this.g&&gt(this)};function gt(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Xt(h)}r.setRequestHeader=function(h,y){this.u.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var I=y.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=y.next();return h.join(`\r
`)};function Xt(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ar(h){let y="";return $e(h,function(I,A){y+=A,y+=":",y+=I,y+=`\r
`}),y}function Gr(h,y,I){e:{for(A in I){var A=!1;break e}A=!0}A||(I=Ar(I),typeof h=="string"?I!=null&&encodeURIComponent(String(I)):Ue(h,y,I))}function Et(h){Ct.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}W(Et,Ct);var Wa=/^https?$/i,Xi=["POST","PUT"];r=Et.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,y,I,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bn.g(),this.v=this.o?Ns(this.o):Ns(Bn),this.g.onreadystatechange=k(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ee){Ji(this,ee);return}if(h=I||"",I=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)I.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const ee of A.keys())I.set(ee,A.get(ee));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(I.keys()).find(ee=>ee.toLowerCase()=="content-type"),q=_.FormData&&h instanceof _.FormData,!(0<=Array.prototype.indexOf.call(Xi,y,void 0))||A||q||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,fe]of I)this.g.setRequestHeader(ee,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ln(this),this.u=!0,this.g.send(h),this.u=!1}catch(ee){Ji(this,ee)}};function Ji(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,es(h),Dn(h)}function es(h){h.A||(h.A=!0,Ot(h,"complete"),Ot(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ot(this,"complete"),Ot(this,"abort"),Dn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dn(this,!0)),Et.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ke(this):this.bb())},r.bb=function(){Ke(this)};function Ke(h){if(h.h&&typeof f<"u"&&(!h.v[1]||Ht(h)!=4||h.Z()!=2)){if(h.u&&Ht(h)==4)Jo(h.Ea,0,h);else if(Ot(h,"readystatechange"),Ht(h)==4){h.h=!1;try{const fe=h.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var I;if(!(I=y)){var A;if(A=fe===0){var q=String(h.D).match(mt)[1]||null;!q&&_.self&&_.self.location&&(q=_.self.location.protocol.slice(0,-1)),A=!Wa.test(q?q.toLowerCase():"")}I=A}if(I)Ot(h,"complete"),Ot(h,"success");else{h.m=6;try{var ee=2<Ht(h)?h.g.statusText:""}catch{ee=""}h.l=ee+" ["+h.Z()+"]",es(h)}}finally{Dn(h)}}}}function Dn(h,y){if(h.g){ln(h);const I=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Ot(h,"ready");try{I.onreadystatechange=A}catch{}}}function ln(h){h.I&&(_.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function Ht(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),ea(y)}};function $s(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function qs(h){const y={};h=(h.g&&2<=Ht(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(de(h[A]))continue;var I=z(h[A]);const q=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ee=y[q]||[];y[q]=ee,ee.push(I)}B(y,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qn(h,y,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||y}function aa(h){this.Aa=0,this.i=[],this.j=new Wi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qn("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qn("baseRetryDelayMs",5e3,h),this.cb=Qn("retryDelaySeedMs",1e4,h),this.Wa=Qn("forwardChannelMaxRetries",2,h),this.wa=Qn("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new di(h&&h.concurrentRequestLimit),this.Da=new oa,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=aa.prototype,r.la=8,r.G=1,r.connect=function(h,y,I,A){At(0),this.W=h,this.H=y||{},I&&A!==void 0&&(this.H.OSID=I,this.H.OAID=A),this.F=this.X,this.I=Ys(this,null,this.W),Yn(this)};function Wt(h){if(Zs(h),h.G==3){var y=h.U++,I=wt(h.I);if(Ue(I,"SID",h.K),Ue(I,"RID",y),Ue(I,"TYPE","terminate"),Kr(h,I),y=new Wn(h,h.j,y),y.L=2,y.v=Tn(wt(I)),I=!1,_.navigator&&_.navigator.sendBeacon)try{I=_.navigator.sendBeacon(y.v.toString(),"")}catch{}!I&&_.Image&&(new Image().src=y.v,I=!0),I||(y.g=qa(y.j,null),y.g.ea(y.v)),y.F=Date.now(),_t(y)}$a(h)}function fr(h){h.g&&(Gs(h),h.g.cancel(),h.g=null)}function Zs(h){fr(h),h.u&&(_.clearTimeout(h.u),h.u=null),Qs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&_.clearTimeout(h.s),h.s=null)}function Yn(h){if(!wn(h.h)&&!h.s){h.s=!0;var y=h.Ga;tt||se(),re||(tt(),re=!0),ke.add(y,h),h.B=0}}function ql(h,y){return fi(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=cr(k(h.Ga,h,y),la(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new Wn(this,this.j,h);let ee=this.o;if(this.S&&(ee?(ee=N(ee),F(ee,this.S)):ee=this.S),this.m!==null||this.O||(q.H=ee,ee=null),this.P)e:{for(var y=0,I=0;I<this.i.length;I++){t:{var A=this.i[I];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=I;break e}if(y===4096||I===this.i.length-1){y=I+1;break e}}y=1e3}else y=1e3;y=Qr(this,q,y),I=wt(this.I),Ue(I,"RID",h),Ue(I,"CVER",22),this.D&&Ue(I,"X-HTTP-Session-Id",this.D),Kr(this,I),ee&&(this.O?y="headers="+encodeURIComponent(String(Ar(ee)))+"&"+y:this.m&&Gr(I,this.m,ee)),pt(this.h,q),this.Ua&&Ue(I,"TYPE","init"),this.P?(Ue(I,"$req",y),Ue(I,"SID","null"),q.T=!0,Fs(q,I,null)):Fs(q,I,y),this.G=2}}else this.G==3&&(h?pn(this,h):this.i.length==0||wn(this.h)||pn(this))};function pn(h,y){var I;y?I=y.l:I=h.U++;const A=wt(h.I);Ue(A,"SID",h.K),Ue(A,"RID",I),Ue(A,"AID",h.T),Kr(h,A),h.m&&h.o&&Gr(A,h.m,h.o),I=new Wn(h,h.j,I,h.B+1),h.m===null&&(I.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Qr(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),pt(h.h,I),Fs(I,A,y)}function Kr(h,y){h.H&&$e(h.H,function(I,A){Ue(y,A,I)}),h.l&&De({},function(I,A){Ue(y,A,I)})}function Qr(h,y,I){I=Math.min(h.i.length,I);var A=h.l?k(h.l.Na,h.l,h):null;e:{var q=h.i;let ee=-1;for(;;){const fe=["count="+I];ee==-1?0<I?(ee=q[0].g,fe.push("ofs="+ee)):ee=0:fe.push("ofs="+ee);let at=!0;for(let Dt=0;Dt<I;Dt++){let Xe=q[Dt].g;const ct=q[Dt].map;if(Xe-=ee,0>Xe)ee=Math.max(0,q[Dt].g-100),at=!1;else try{Ws(ct,fe,"req"+Xe+"_")}catch{A&&A(ct)}}if(at){A=fe.join("&");break e}}}return h=h.i.splice(0,I),y.D=h,A}function In(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;tt||se(),re||(tt(),re=!0),ke.add(y,h),h.v=0}}function ts(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=cr(k(h.Fa,h),la(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,Ks(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=cr(k(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),fr(this),Ks(this))};function Gs(h){h.A!=null&&(_.clearTimeout(h.A),h.A=null)}function Ks(h){h.g=new Wn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=wt(h.qa);Ue(y,"RID","rpc"),Ue(y,"SID",h.K),Ue(y,"AID",h.T),Ue(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ue(y,"TO",h.ja),Ue(y,"TYPE","xmlhttp"),Kr(h,y),h.m&&h.o&&Gr(y,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=Tn(wt(y)),I.m=null,I.P=!0,zs(I,h)}r.Za=function(){this.C!=null&&(this.C=null,fr(this),ts(this),At(19))};function Qs(h){h.C!=null&&(_.clearTimeout(h.C),h.C=null)}function ns(h,y){var I=null;if(h.g==y){Qs(h),Gs(h),h.g=null;var A=2}else if(ze(h.h,y))I=y.D,Gi(h.h,y),A=1;else return;if(h.G!=0){if(y.o)if(A==1){I=y.m?y.m.length:0,y=Date.now()-y.F;var q=h.B;A=Bi(),Ot(A,new Os(A,I)),Yn(h)}else In(h);else if(q=y.s,q==3||q==0&&0<y.X||!(A==1&&ql(h,y)||A==2&&ts(h)))switch(I&&0<I.length&&(y=h.h,y.i=y.i.concat(I)),q){case 1:Yr(h,5);break;case 4:Yr(h,10);break;case 3:Yr(h,6);break;default:Yr(h,2)}}}function la(h,y){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*y}function Yr(h,y){if(h.j.info("Error code "+y),y==2){var I=k(h.fb,h),A=h.Xa;const q=!A;A=new qn(A||"//www.google.com/images/cleardot.gif"),_.location&&_.location.protocol=="http"||Ki(A,"https"),Tn(A),q?ut(A.toString(),I):sa(A.toString(),I)}else At(2);h.G=0,h.l&&h.l.sa(y),$a(h),Zs(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function $a(h){if(h.G=0,h.ka=[],h.l){const y=qr(h.h);(y.length!=0||h.i.length!=0)&&(G(h.ka,y),G(h.ka,h.i),h.h.i.length=0,Q(h.i),h.i.length=0),h.l.ra()}}function Ys(h,y,I){var A=I instanceof qn?wt(I):new qn(I);if(A.g!="")y&&(A.g=y+"."+A.g),dr(A,A.s);else{var q=_.location;A=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var ee=new qn(null);A&&Ki(ee,A),y&&(ee.g=y),q&&dr(ee,q),I&&(ee.l=I),A=ee}return I=h.D,y=h.ya,I&&y&&Ue(A,I,y),Ue(A,"VER",h.la),Kr(h,A),A}function qa(h,y,I){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Et(new fn({eb:I})):new Et(h.pa),y.Ha(h.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xs(){}r=Xs.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function rs(){}rs.prototype.g=function(h,y){return new $t(h,y)};function $t(h,y){Ct.call(this),this.g=new aa(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!de(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!de(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Sn(this)}W($t,Ct),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Wt(this.g)},$t.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.u&&(I={},I.__data__=Ls(h),h=I);y.i.push(new hi(y.Ya++,h)),y.G==3&&Yn(y)},$t.prototype.N=function(){this.g.l=null,delete this.j,Wt(this.g),delete this.g,$t.aa.N.call(this)};function kr(h){ur.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const I in y){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}W(kr,ur);function Za(){bs.call(this),this.status=1}W(Za,bs);function Sn(h){this.g=h}W(Sn,Xs),Sn.prototype.ua=function(){Ot(this.g,"a")},Sn.prototype.ta=function(h){Ot(this.g,new kr(h))},Sn.prototype.sa=function(h){Ot(this.g,new Za)},Sn.prototype.ra=function(){Ot(this.g,"b")},rs.prototype.createWebChannel=rs.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,fw=function(){return new rs},dw=function(){return Bi()},hw=xr,Yf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$i.NO_ERROR=0,$i.TIMEOUT=8,$i.HTTP_ERROR=6,gh=$i,Ds.COMPLETE="complete",cw=Ds,ji.EventType=On,On.OPEN="a",On.CLOSE="b",On.ERROR="c",On.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,Tu=ji,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,uw=Et}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});const K_="@firebase/firestore",Q_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new wp("@firebase/firestore");function wl(){return Ma.logLevel}function Ee(r,...e){if(Ma.logLevel<=Je.DEBUG){const t=e.map(Np);Ma.debug(`Firestore (${jl}): ${r}`,...t)}}function Is(r,...e){if(Ma.logLevel<=Je.ERROR){const t=e.map(Np);Ma.error(`Firestore (${jl}): ${r}`,...t)}}function Vo(r,...e){if(Ma.logLevel<=Je.WARN){const t=e.map(Np);Ma.warn(`Firestore (${jl}): ${r}`,...t)}}function Np(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,pw(r,s,t)}function pw(r,e,t){let s=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Is(s),new Error(s)}function dt(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||pw(e,a,s)}function He(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Ps{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ln.UNAUTHENTICATED)))}shutdown(){}}class O1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class M1{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0,42304);let s=this.i;const a=v=>this.i!==s?(s=this.i,t(v)):Promise.resolve();let c=new ws;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ws,e.enqueueRetryable((()=>a(this.currentUser)))};const f=()=>{const v=c;e.enqueueRetryable((async()=>{await v.promise,await a(this.currentUser)}))},_=v=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((v=>_(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?_(v):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ws)}}),0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(dt(typeof s.accessToken=="string",31837,{l:s}),new mw(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new Ln(e)}}class D1{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class V1{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new D1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Y_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ur(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dt(this.o===void 0,3512);const s=c=>{c.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,Ee("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const a=c=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Y_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Y_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=z1(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%62))}return s}}function Qe(r,e){return r<e?-1:r>e?1:0}function Xf(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),a=e.codePointAt(t);if(s!==a){if(s<128&&a<128)return Qe(s,a);{const c=gw(),f=U1(c.encode(X_(r,t)),c.encode(X_(e,t)));return f!==0?f:Qe(s,a)}}t+=s>65535?2:1}return Qe(r.length,e.length)}function X_(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function U1(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Qe(r[t],e[t]);return Qe(r.length,e.length)}function Nl(r,e,t){return r.length===e.length&&r.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="__name__";class Pi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Fe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Fe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Pi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=Pi.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return Qe(e.length,t.length)}static compareSegments(e,t){const s=Pi.isNumericId(e),a=Pi.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Pi.extractNumericId(e).compare(Pi.extractNumericId(t)):Xf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oo.fromString(e.substring(4,e.length-2))}}class It extends Pi{construct(e,t,s){return new It(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new _e(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new It(t)}static emptyPath(){return new It([])}}const j1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends Pi{construct(e,t,s){return new vn(e,t,s)}static isValidIdentifier(e){return j1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===J_}static keyField(){return new vn([J_])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(s.length===0)throw new _e(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let f=!1;for(;a<e.length;){const _=e[a];if(_==="\\"){if(a+1===e.length)throw new _e(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[a+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new _e(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=v,a+=2}else _==="`"?(f=!f,a++):_!=="."||f?(s+=_,a++):(c(),a++)}if(c(),f)throw new _e(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(t)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(It.fromString(e))}static fromName(e){return new Le(It.fromString(e).popFirst(5))}static empty(){return new Le(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return It.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new It(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(r,e,t){if(!t)throw new _e(ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function B1(r,e,t,s){if(e===!0&&s===!0)throw new _e(ie.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ev(r){if(!Le.isDocumentKey(r))throw new _e(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function tv(r){if(Le.isDocumentKey(r))throw new _e(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function vw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Zh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Fe(12329,{type:typeof r})}function Br(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new _e(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zh(r);throw new _e(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(r,e){const t={typeString:r};return e&&(t.value=e),t}function tc(r,e){if(!vw(r))throw new _e(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const f=r[s];if(a&&typeof f!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(c!==void 0&&f!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new _e(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=-62135596800,rv=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*rv);return new Pt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<nv)throw new _e(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rv}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tc(e,Pt._jsonSchema))return new Pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pt._jsonSchemaVersion="firestore/timestamp/1.0",Pt._jsonSchema={type:Qt("string",Pt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Pt(0,0))}static max(){return new Be(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=-1;function H1(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Be.fromTimestamp(s===1e9?new Pt(t+1,0):new Pt(t,s));return new Fo(a,Le.empty(),e)}function W1(r){return new Fo(r.readTime,r.key,Fu)}class Fo{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Fo(Be.min(),Le.empty(),Fu)}static max(){return new Fo(Be.max(),Le.empty(),Fu)}}function $1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(r.documentKey,e.documentKey),t!==0?t:Qe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(r){if(r.code!==ie.FAILED_PRECONDITION||r.message!==q1)throw r;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,s)=>{t(e)}))}static reject(e){return new oe(((t,s)=>{s(e)}))}static waitFor(e){return new oe(((t,s)=>{let a=0,c=0,f=!1;e.forEach((_=>{++a,_.next((()=>{++c,f&&c===a&&t()}),(v=>s(v)))})),f=!0,c===a&&t()}))}static or(e){let t=oe.resolve(!1);for(const s of e)t=t.next((a=>a?oe.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,c)=>{s.push(t.call(this,a,c))})),this.waitFor(s)}static mapArray(e,t){return new oe(((s,a)=>{const c=e.length,f=new Array(c);let _=0;for(let v=0;v<c;v++){const T=v;t(e[T]).next((P=>{f[T]=P,++_,_===c&&s(f)}),(P=>a(P)))}}))}static doWhile(e,t){return new oe(((s,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):s()};c()}))}}function G1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Hl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Gh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=-1;function Kh(r){return r==null}function Lh(r){return r===0&&1/r==-1/0}function K1(r){return typeof r=="number"&&Number.isInteger(r)&&!Lh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="";function Q1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=iv(e)),e=Y1(r.get(t),e);return iv(e)}function Y1(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const c=r.charAt(a);switch(c){case"\0":t+="";break;case yw:t+="";break;default:t+=c}}return t}function iv(r){return r+yw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Go(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function ww(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,t){this.comparator=e,this.root=t||_n.EMPTY}insert(e,t){return new Nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??_n.RED,this.left=a??_n.EMPTY,this.right=c??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new _n(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return _n.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,t,s,a,c){return this}insert(e,t,s){return new _n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ov(this.data.getIterator())}getIteratorFrom(e){return new ov(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new nn(this.comparator);return t.data=e,t}}class ov{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new Er([])}unionWith(e){let t=new nn(vn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Er(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Ew("Invalid base64 string: "+c):c}})(e);return new yn(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c})(e);return new yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const X1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(r){if(dt(!!r,39018),typeof r=="string"){let e=0;const t=X1.exec(r);if(dt(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:jt(r.seconds),nanos:jt(r.nanos)}}function jt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Uo(r){return typeof r=="string"?yn.fromBase64String(r):yn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="server_timestamp",Iw="__type__",Sw="__previous_value__",Pw="__local_write_time__";function Mp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Iw])===null||t===void 0?void 0:t.stringValue)===Tw}function Qh(r){const e=r.mapValue.fields[Sw];return Mp(e)?Qh(e):e}function zu(r){const e=zo(r.mapValue.fields[Pw].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,t,s,a,c,f,_,v,T,P){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=_,this.longPollingOptions=v,this.useFetchStreams=T,this.isUsingEmulator=P}}const Nh="(default)";class Uu{constructor(e,t){this.projectId=e,this.database=t||Nh}static empty(){return new Uu("","")}get isDefaultDatabase(){return this.database===Nh}isEqual(e){return e instanceof Uu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="__type__",ex="__max__",lh={mapValue:{}},Cw="__vector__",bh="value";function jo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Mp(r)?4:nx(r)?9007199254740991:tx(r)?10:11:Fe(28295,{value:r})}function Ni(r,e){if(r===e)return!0;const t=jo(r);if(t!==jo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return zu(r).isEqual(zu(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=zo(a.timestampValue),_=zo(c.timestampValue);return f.seconds===_.seconds&&f.nanos===_.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,c){return Uo(a.bytesValue).isEqual(Uo(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,c){return jt(a.geoPointValue.latitude)===jt(c.geoPointValue.latitude)&&jt(a.geoPointValue.longitude)===jt(c.geoPointValue.longitude)})(r,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return jt(a.integerValue)===jt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=jt(a.doubleValue),_=jt(c.doubleValue);return f===_?Lh(f)===Lh(_):isNaN(f)&&isNaN(_)}return!1})(r,e);case 9:return Nl(r.arrayValue.values||[],e.arrayValue.values||[],Ni);case 10:case 11:return(function(a,c){const f=a.mapValue.fields||{},_=c.mapValue.fields||{};if(sv(f)!==sv(_))return!1;for(const v in f)if(f.hasOwnProperty(v)&&(_[v]===void 0||!Ni(f[v],_[v])))return!1;return!0})(r,e);default:return Fe(52216,{left:r})}}function ju(r,e){return(r.values||[]).find((t=>Ni(t,e)))!==void 0}function bl(r,e){if(r===e)return 0;const t=jo(r),s=jo(e);if(t!==s)return Qe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(r.booleanValue,e.booleanValue);case 2:return(function(c,f){const _=jt(c.integerValue||c.doubleValue),v=jt(f.integerValue||f.doubleValue);return _<v?-1:_>v?1:_===v?0:isNaN(_)?isNaN(v)?0:-1:1})(r,e);case 3:return av(r.timestampValue,e.timestampValue);case 4:return av(zu(r),zu(e));case 5:return Xf(r.stringValue,e.stringValue);case 6:return(function(c,f){const _=Uo(c),v=Uo(f);return _.compareTo(v)})(r.bytesValue,e.bytesValue);case 7:return(function(c,f){const _=c.split("/"),v=f.split("/");for(let T=0;T<_.length&&T<v.length;T++){const P=Qe(_[T],v[T]);if(P!==0)return P}return Qe(_.length,v.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,f){const _=Qe(jt(c.latitude),jt(f.latitude));return _!==0?_:Qe(jt(c.longitude),jt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return lv(r.arrayValue,e.arrayValue);case 10:return(function(c,f){var _,v,T,P;const C=c.fields||{},k=f.fields||{},$=(_=C[bh])===null||_===void 0?void 0:_.arrayValue,W=(v=k[bh])===null||v===void 0?void 0:v.arrayValue,Q=Qe(((T=$==null?void 0:$.values)===null||T===void 0?void 0:T.length)||0,((P=W==null?void 0:W.values)===null||P===void 0?void 0:P.length)||0);return Q!==0?Q:lv($,W)})(r.mapValue,e.mapValue);case 11:return(function(c,f){if(c===lh.mapValue&&f===lh.mapValue)return 0;if(c===lh.mapValue)return 1;if(f===lh.mapValue)return-1;const _=c.fields||{},v=Object.keys(_),T=f.fields||{},P=Object.keys(T);v.sort(),P.sort();for(let C=0;C<v.length&&C<P.length;++C){const k=Xf(v[C],P[C]);if(k!==0)return k;const $=bl(_[v[C]],T[P[C]]);if($!==0)return $}return Qe(v.length,P.length)})(r.mapValue,e.mapValue);default:throw Fe(23264,{le:t})}}function av(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Qe(r,e);const t=zo(r),s=zo(e),a=Qe(t.seconds,s.seconds);return a!==0?a:Qe(t.nanos,s.nanos)}function lv(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const c=bl(t[a],s[a]);if(c)return c}return Qe(t.length,s.length)}function Ol(r){return Jf(r)}function Jf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=zo(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Uo(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Le.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",a=!0;for(const c of t.values||[])a?a=!1:s+=",",s+=Jf(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const f of s)c?c=!1:a+=",",a+=`${f}:${Jf(t.fields[f])}`;return a+"}"})(r.mapValue):Fe(61005,{value:r})}function _h(r){switch(jo(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qh(r);return e?16+_h(e):16;case 5:return 2*r.stringValue.length;case 6:return Uo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,c)=>a+_h(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let a=0;return Go(s.fields,((c,f)=>{a+=c.length+_h(f)})),a})(r.mapValue);default:throw Fe(13486,{value:r})}}function uv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ep(r){return!!r&&"integerValue"in r}function Dp(r){return!!r&&"arrayValue"in r}function cv(r){return!!r&&"nullValue"in r}function hv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function vh(r){return!!r&&"mapValue"in r}function tx(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[xw])===null||t===void 0?void 0:t.stringValue)===Cw}function ku(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Go(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=ku(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ku(r.arrayValue.values[t]);return e}return Object.assign({},r)}function nx(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===ex}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!vh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(t)}setAll(e){let t=vn.emptyPath(),s={},a=[];e.forEach(((f,_)=>{if(!t.isImmediateParentOf(_)){const v=this.getFieldsMap(t);this.applyChanges(v,s,a),s={},a=[],t=_.popLast()}f?s[_.lastSegment()]=ku(f):a.push(_.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());vh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ni(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];vh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Go(t,((a,c)=>e[a]=c));for(const a of s)delete e[a]}clone(){return new or(ku(this.value))}}function Aw(r){const e=[];return Go(r.fields,((t,s)=>{const a=new vn([t]);if(vh(s)){const c=Aw(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)})),new Er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,t,s,a,c,f,_){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=_}static newInvalidDocument(e){return new Nn(e,0,Be.min(),Be.min(),Be.min(),or.empty(),0)}static newFoundDocument(e,t,s,a){return new Nn(e,1,t,Be.min(),s,a,0)}static newNoDocument(e,t){return new Nn(e,2,t,Be.min(),Be.min(),or.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,Be.min(),Be.min(),or.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t){this.position=e,this.inclusive=t}}function dv(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const c=e[a],f=r.position[a];if(c.field.isKeyField()?s=Le.comparator(Le.fromName(f.referenceValue),t.key):s=bl(f,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function fv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ni(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t="asc"){this.field=e,this.dir=t}}function rx(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{}class Kt extends kw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new sx(e,t,s):t==="array-contains"?new lx(e,s):t==="in"?new ux(e,s):t==="not-in"?new cx(e,s):t==="array-contains-any"?new hx(e,s):new Kt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new ox(e,s):new ax(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bl(t,this.value)):t!==null&&jo(this.value)===jo(t)&&this.matchesComparison(bl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class li extends kw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new li(e,t)}matches(e){return Rw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Rw(r){return r.op==="and"}function Lw(r){return ix(r)&&Rw(r)}function ix(r){for(const e of r.filters)if(e instanceof li)return!1;return!0}function tp(r){if(r instanceof Kt)return r.field.canonicalString()+r.op.toString()+Ol(r.value);if(Lw(r))return r.filters.map((e=>tp(e))).join(",");{const e=r.filters.map((t=>tp(t))).join(",");return`${r.op}(${e})`}}function Nw(r,e){return r instanceof Kt?(function(s,a){return a instanceof Kt&&s.op===a.op&&s.field.isEqual(a.field)&&Ni(s.value,a.value)})(r,e):r instanceof li?(function(s,a){return a instanceof li&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((c,f,_)=>c&&Nw(f,a.filters[_])),!0):!1})(r,e):void Fe(19439)}function bw(r){return r instanceof Kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ol(t.value)}`})(r):r instanceof li?(function(t){return t.op.toString()+" {"+t.getFilters().map(bw).join(" ,")+"}"})(r):"Filter"}class sx extends Kt{constructor(e,t,s){super(e,t,s),this.key=Le.fromName(s.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class ox extends Kt{constructor(e,t){super(e,"in",t),this.keys=Ow("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ax extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=Ow("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ow(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>Le.fromName(s.referenceValue)))}class lx extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dp(t)&&ju(t.arrayValue,this.value)}}class ux extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ju(this.value.arrayValue,t)}}class cx extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ju(this.value.arrayValue,t)}}class hx extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ju(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,t=null,s=[],a=[],c=null,f=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=_,this.Pe=null}}function pv(r,e=null,t=[],s=[],a=null,c=null,f=null){return new dx(r,e,t,s,a,c,f)}function Vp(r){const e=He(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>tp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Kh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ol(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ol(s))).join(",")),e.Pe=t}return e.Pe}function Fp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!rx(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Nw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!fv(r.startAt,e.startAt)&&fv(r.endAt,e.endAt)}function np(r){return Le.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t=null,s=[],a=[],c=null,f="F",_=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=_,this.endAt=v,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function fx(r,e,t,s,a,c,f,_){return new Wl(r,e,t,s,a,c,f,_)}function Yh(r){return new Wl(r)}function mv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Mw(r){return r.collectionGroup!==null}function Ru(r){const e=He(r);if(e.Te===null){e.Te=[];const t=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let _=new nn(vn.comparator);return f.filters.forEach((v=>{v.getFlattenedFilters().forEach((T=>{T.isInequality()&&(_=_.add(T.field))}))})),_})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Te.push(new Bu(c,s))})),t.has(vn.keyField().canonicalString())||e.Te.push(new Bu(vn.keyField(),s))}return e.Te}function Ai(r){const e=He(r);return e.Ie||(e.Ie=px(e,Ru(r))),e.Ie}function px(r,e){if(r.limitType==="F")return pv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new Bu(a.field,c)}));const t=r.endAt?new Oh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Oh(r.startAt.position,r.startAt.inclusive):null;return pv(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function rp(r,e){const t=r.filters.concat([e]);return new Wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function ip(r,e,t){return new Wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Xh(r,e){return Fp(Ai(r),Ai(e))&&r.limitType===e.limitType}function Dw(r){return`${Vp(Ai(r))}|lt:${r.limitType}`}function El(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>bw(a))).join(", ")}]`),Kh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Ol(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Ol(a))).join(",")),`Target(${s})`})(Ai(r))}; limitType=${r.limitType})`}function Jh(r,e){return e.isFoundDocument()&&(function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Le.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,a){for(const c of Ru(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0})(r,e)&&(function(s,a){return!(s.startAt&&!(function(f,_,v){const T=dv(f,_,v);return f.inclusive?T<=0:T<0})(s.startAt,Ru(s),a)||s.endAt&&!(function(f,_,v){const T=dv(f,_,v);return f.inclusive?T>=0:T>0})(s.endAt,Ru(s),a))})(r,e)}function mx(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Vw(r){return(e,t)=>{let s=!1;for(const a of Ru(r)){const c=gx(a,e,t);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function gx(r,e,t){const s=r.field.isKeyField()?Le.comparator(e.key,t.key):(function(c,f,_){const v=f.data.field(c),T=_.data.field(c);return v!==null&&T!==null?bl(v,T):Fe(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Fe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Go(this.inner,((t,s)=>{for(const[a,c]of s)e(a,c)}))}isEmpty(){return ww(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=new Nt(Le.comparator);function Ss(){return _x}const Fw=new Nt(Le.comparator);function Iu(...r){let e=Fw;for(const t of r)e=e.insert(t.key,t);return e}function zw(r){let e=Fw;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function xa(){return Lu()}function Uw(){return Lu()}function Lu(){return new Fa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const vx=new Nt(Le.comparator),yx=new nn(Le.comparator);function et(...r){let e=yx;for(const t of r)e=e.add(t);return e}const wx=new nn(Qe);function Ex(){return wx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function jw(r){return{integerValue:""+r}}function Tx(r,e){return K1(e)?jw(e):zp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this._=void 0}}function Ix(r,e,t){return r instanceof Hu?(function(a,c){const f={fields:{[Iw]:{stringValue:Tw},[Pw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Mp(c)&&(c=Qh(c)),c&&(f.fields[Sw]=c),{mapValue:f}})(t,e):r instanceof Wu?Hw(r,e):r instanceof $u?Ww(r,e):(function(a,c){const f=Bw(a,c),_=gv(f)+gv(a.Ee);return ep(f)&&ep(a.Ee)?jw(_):zp(a.serializer,_)})(r,e)}function Sx(r,e,t){return r instanceof Wu?Hw(r,e):r instanceof $u?Ww(r,e):t}function Bw(r,e){return r instanceof Mh?(function(s){return ep(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Hu extends ed{}class Wu extends ed{constructor(e){super(),this.elements=e}}function Hw(r,e){const t=$w(e);for(const s of r.elements)t.some((a=>Ni(a,s)))||t.push(s);return{arrayValue:{values:t}}}class $u extends ed{constructor(e){super(),this.elements=e}}function Ww(r,e){let t=$w(e);for(const s of r.elements)t=t.filter((a=>!Ni(a,s)));return{arrayValue:{values:t}}}class Mh extends ed{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function gv(r){return jt(r.integerValue||r.doubleValue)}function $w(r){return Dp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,t){this.field=e,this.transform=t}}function xx(r,e){return r.field.isEqual(e.field)&&(function(s,a){return s instanceof Wu&&a instanceof Wu||s instanceof $u&&a instanceof $u?Nl(s.elements,a.elements,Ni):s instanceof Mh&&a instanceof Mh?Ni(s.Ee,a.Ee):s instanceof Hu&&a instanceof Hu})(r.transform,e.transform)}class Cx{constructor(e,t){this.version=e,this.transformResults=t}}class oi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new oi}static exists(e){return new oi(void 0,e)}static updateTime(e){return new oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class td{}function qw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Up(r.key,oi.none()):new nc(r.key,r.data,oi.none());{const t=r.data,s=or.empty();let a=new nn(vn.comparator);for(let c of e.fields)if(!a.has(c)){let f=t.field(c);f===null&&c.length>1&&(c=c.popLast(),f=t.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new Ko(r.key,s,new Er(a.toArray()),oi.none())}}function Ax(r,e,t){r instanceof nc?(function(a,c,f){const _=a.value.clone(),v=vv(a.fieldTransforms,c,f.transformResults);_.setAll(v),c.convertToFoundDocument(f.version,_).setHasCommittedMutations()})(r,e,t):r instanceof Ko?(function(a,c,f){if(!yh(a.precondition,c))return void c.convertToUnknownDocument(f.version);const _=vv(a.fieldTransforms,c,f.transformResults),v=c.data;v.setAll(Zw(a)),v.setAll(_),c.convertToFoundDocument(f.version,v).setHasCommittedMutations()})(r,e,t):(function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,t)}function Nu(r,e,t,s){return r instanceof nc?(function(c,f,_,v){if(!yh(c.precondition,f))return _;const T=c.value.clone(),P=yv(c.fieldTransforms,v,f);return T.setAll(P),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),null})(r,e,t,s):r instanceof Ko?(function(c,f,_,v){if(!yh(c.precondition,f))return _;const T=yv(c.fieldTransforms,v,f),P=f.data;return P.setAll(Zw(c)),P.setAll(T),f.convertToFoundDocument(f.version,P).setHasLocalMutations(),_===null?null:_.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((C=>C.field)))})(r,e,t,s):(function(c,f,_){return yh(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):_})(r,e,t)}function kx(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),c=Bw(s.transform,a||null);c!=null&&(t===null&&(t=or.empty()),t.set(s.field,c))}return t||null}function _v(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Nl(s,a,((c,f)=>xx(c,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class nc extends td{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ko extends td{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Zw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function vv(r,e,t){const s=new Map;dt(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let a=0;a<t.length;a++){const c=r[a],f=c.transform,_=e.data.field(c.field);s.set(c.field,Sx(f,_,t[a]))}return s}function yv(r,e,t){const s=new Map;for(const a of r){const c=a.transform,f=t.data.field(a.field);s.set(a.field,Ix(c,f,e))}return s}class Up extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rx extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Ax(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Nu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Nu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Uw();return this.mutations.forEach((a=>{const c=e.get(a.key),f=c.overlayedDocument;let _=this.applyToLocalView(f,c.mutatedFields);_=t.has(a.key)?null:_;const v=qw(f,_);v!==null&&s.set(a.key,v),f.isValidDocument()||f.convertToNoDocument(Be.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),et())}isEqual(e){return this.batchId===e.batchId&&Nl(this.mutations,e.mutations,((t,s)=>_v(t,s)))&&Nl(this.baseMutations,e.baseMutations,((t,s)=>_v(t,s)))}}class jp{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){dt(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let a=(function(){return vx})();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new jp(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,nt;function Ox(r){switch(r){case ie.OK:return Fe(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Fe(15467,{code:r})}}function Gw(r){if(r===void 0)return Is("GRPC error has no .code"),ie.UNKNOWN;switch(r){case Gt.OK:return ie.OK;case Gt.CANCELLED:return ie.CANCELLED;case Gt.UNKNOWN:return ie.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return ie.INTERNAL;case Gt.UNAVAILABLE:return ie.UNAVAILABLE;case Gt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Gt.NOT_FOUND:return ie.NOT_FOUND;case Gt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Gt.ABORTED:return ie.ABORTED;case Gt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Gt.DATA_LOSS:return ie.DATA_LOSS;default:return Fe(39323,{code:r})}}(nt=Gt||(Gt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=new Oo([4294967295,4294967295],0);function wv(r){const e=gw().encode(r),t=new lw;return t.update(e),new Uint8Array(t.digest())}function Ev(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Oo([t,s],0),new Oo([a,c],0)]}class Bp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Su(`Invalid padding: ${t}`);if(s<0)throw new Su(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Su(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Su(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Oo.fromNumber(this.fe)}pe(e,t,s){let a=e.add(t.multiply(Oo.fromNumber(s)));return a.compare(Mx)===1&&(a=new Oo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=wv(e),[s,a]=Ev(t);for(let c=0;c<this.hashCount;c++){const f=this.pe(s,a,c);if(!this.ye(f))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Bp(c,a,t);return s.forEach((_=>f.insert(_))),f}insert(e){if(this.fe===0)return;const t=wv(e),[s,a]=Ev(t);for(let c=0;c<this.hashCount;c++){const f=this.pe(s,a,c);this.we(f)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,rc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new nd(Be.min(),a,new Nt(Qe),Ss(),et())}}class rc{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new rc(s,t,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=a}}class Kw{constructor(e,t){this.targetId=e,this.De=t}}class Qw{constructor(e,t,s=yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Tv{constructor(){this.ve=0,this.Ce=Iv(),this.Fe=yn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=et(),t=et(),s=et();return this.Ce.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Fe(38017,{changeType:c})}})),new rc(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=Iv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Dx{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ss(),this.je=uh(),this.Je=uh(),this.He=new Nt(Qe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((s,a)=>{this.nt(a)&&t(a)}))}it(e){const t=e.targetId,s=e.De.count,a=this.st(t);if(a){const c=a.target;if(np(c))if(s===0){const f=new Le(c.path);this.Xe(t,f,Nn.newNoDocument(f,Be.min()))}else dt(s===1,20013,{expectedCount:s});else{const f=this.ot(t);if(f!==s){const _=this._t(e),v=_?this.ut(_,e,f):1;if(v!==0){this.rt(t);const T=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,T)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=t;let f,_;try{f=Uo(s).toUint8Array()}catch(v){if(v instanceof Ew)return Vo("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{_=new Bp(f,a,c)}catch(v){return Vo(v instanceof Su?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return _.fe===0?null:_}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let a=0;return s.forEach((c=>{const f=this.We.lt(),_=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(_)||(this.Xe(t,c,null),a++)})),a}Pt(e){const t=new Map;this.Ge.forEach(((c,f)=>{const _=this.st(f);if(_){if(c.current&&np(_.target)){const v=new Le(_.target.path);this.Tt(v).has(f)||this.It(f,v)||this.Xe(f,v,Nn.newNoDocument(v,e))}c.Ne&&(t.set(f,c.Le()),c.ke())}}));let s=et();this.Je.forEach(((c,f)=>{let _=!0;f.forEachWhile((v=>{const T=this.st(v);return!T||T.purpose==="TargetPurposeLimboResolution"||(_=!1,!1)})),_&&(s=s.add(c))})),this.ze.forEach(((c,f)=>f.setReadTime(e)));const a=new nd(e,t,this.He,this.ze,s);return this.ze=Ss(),this.je=uh(),this.Je=uh(),this.He=new Nt(Qe),a}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Tv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new nn(Qe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new nn(Qe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Tv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function uh(){return new Nt(Le.comparator)}function Iv(){return new Nt(Le.comparator)}const Vx={asc:"ASCENDING",desc:"DESCENDING"},Fx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zx={and:"AND",or:"OR"};class Ux{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sp(r,e){return r.useProto3Json||Kh(e)?e:{value:e}}function Dh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function jx(r,e){return Dh(r,e.toTimestamp())}function ki(r){return dt(!!r,49232),Be.fromTimestamp((function(t){const s=zo(t);return new Pt(s.seconds,s.nanos)})(r))}function Hp(r,e){return op(r,e).canonicalString()}function op(r,e){const t=(function(a){return new It(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Xw(r){const e=It.fromString(r);return dt(r0(e),10190,{key:e.toString()}),e}function ap(r,e){return Hp(r.databaseId,e.path)}function Df(r,e){const t=Xw(e);if(t.get(1)!==r.databaseId.projectId)throw new _e(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new _e(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Le(e0(t))}function Jw(r,e){return Hp(r.databaseId,e)}function Bx(r){const e=Xw(r);return e.length===4?It.emptyPath():e0(e)}function lp(r){return new It(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function e0(r){return dt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Sv(r,e,t){return{name:ap(r,e),fields:t.value.mapValue.fields}}function Hx(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:Fe(39313,{state:T})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(T,P){return T.useProto3Json?(dt(P===void 0||typeof P=="string",58123),yn.fromBase64String(P||"")):(dt(P===void 0||P instanceof Buffer||P instanceof Uint8Array,16193),yn.fromUint8Array(P||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,_=f&&(function(T){const P=T.code===void 0?ie.UNKNOWN:Gw(T.code);return new _e(P,T.message||"")})(f);t=new Qw(s,a,c,_||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Df(r,s.document.name),c=ki(s.document.updateTime),f=s.document.createTime?ki(s.document.createTime):Be.min(),_=new or({mapValue:{fields:s.document.fields}}),v=Nn.newFoundDocument(a,c,f,_),T=s.targetIds||[],P=s.removedTargetIds||[];t=new wh(T,P,v.key,v)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Df(r,s.document),c=s.readTime?ki(s.readTime):Be.min(),f=Nn.newNoDocument(a,c),_=s.removedTargetIds||[];t=new wh([],_,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Df(r,s.document),c=s.removedTargetIds||[];t=new wh([],c,a,null)}else{if(!("filter"in e))return Fe(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new bx(a,c),_=s.targetId;t=new Kw(_,f)}}return t}function Wx(r,e){let t;if(e instanceof nc)t={update:Sv(r,e.key,e.value)};else if(e instanceof Up)t={delete:ap(r,e.key)};else if(e instanceof Ko)t={update:Sv(r,e.key,e.data),updateMask:Jx(e.fieldMask)};else{if(!(e instanceof Rx))return Fe(16599,{Rt:e.type});t={verify:ap(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const _=f.transform;if(_ instanceof Hu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof Wu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof $u)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof Mh)return{fieldPath:f.field.canonicalString(),increment:_.Ee};throw Fe(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:jx(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Fe(27497)})(r,e.precondition)),t}function $x(r,e){return r&&r.length>0?(dt(e!==void 0,14353),r.map((t=>(function(a,c){let f=a.updateTime?ki(a.updateTime):ki(c);return f.isEqual(Be.min())&&(f=ki(c)),new Cx(f,a.transformResults||[])})(t,e)))):[]}function qx(r,e){return{documents:[Jw(r,e.path)]}}function Zx(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Jw(r,a);const c=(function(T){if(T.length!==0)return n0(li.create(T,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const f=(function(T){if(T.length!==0)return T.map((P=>(function(k){return{field:Tl(k.field),direction:Qx(k.dir)}})(P)))})(e.orderBy);f&&(t.structuredQuery.orderBy=f);const _=sp(r,e.limit);return _!==null&&(t.structuredQuery.limit=_),e.startAt&&(t.structuredQuery.startAt=(function(T){return{before:T.inclusive,values:T.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(T){return{before:!T.inclusive,values:T.position}})(e.endAt)),{Vt:t,parent:a}}function Gx(r){let e=Bx(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){dt(s===1,65062);const P=t.from[0];P.allDescendants?a=P.collectionId:e=e.child(P.collectionId)}let c=[];t.where&&(c=(function(C){const k=t0(C);return k instanceof li&&Lw(k)?k.getFilters():[k]})(t.where));let f=[];t.orderBy&&(f=(function(C){return C.map((k=>(function(W){return new Bu(Il(W.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(k)))})(t.orderBy));let _=null;t.limit&&(_=(function(C){let k;return k=typeof C=="object"?C.value:C,Kh(k)?null:k})(t.limit));let v=null;t.startAt&&(v=(function(C){const k=!!C.before,$=C.values||[];return new Oh($,k)})(t.startAt));let T=null;return t.endAt&&(T=(function(C){const k=!C.before,$=C.values||[];return new Oh($,k)})(t.endAt)),fx(e,a,f,c,_,"F",v,T)}function Kx(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function t0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Il(t.unaryFilter.field);return Kt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Il(t.unaryFilter.field);return Kt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Il(t.unaryFilter.field);return Kt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Il(t.unaryFilter.field);return Kt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Kt.create(Il(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return li.create(t.compositeFilter.filters.map((s=>t0(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(t.compositeFilter.op))})(r):Fe(30097,{filter:r})}function Qx(r){return Vx[r]}function Yx(r){return Fx[r]}function Xx(r){return zx[r]}function Tl(r){return{fieldPath:r.canonicalString()}}function Il(r){return vn.fromServerFormat(r.fieldPath)}function n0(r){return r instanceof Kt?(function(t){if(t.op==="=="){if(hv(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NAN"}};if(cv(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hv(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NAN"}};if(cv(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(t.field),op:Yx(t.op),value:t.value}}})(r):r instanceof li?(function(t){const s=t.getFilters().map((a=>n0(a)));return s.length===1?s[0]:{compositeFilter:{op:Xx(t.op),filters:s}}})(r):Fe(54877,{filter:r})}function Jx(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function r0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t,s,a,c=Be.min(),f=Be.min(),_=yn.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=_,this.expectedCount=v}withSequenceNumber(e){return new Ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.gt=e}}function tC(r){const e=Gx({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ip(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.Dn=new rC}addToCollectionParentIndex(e,t){return this.Dn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Fo.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Fo.min())}updateCollectionGroup(e,t,s){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class rC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new nn(It.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new nn(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},i0=41943040;class sr{static withCacheSize(e){return new sr(e,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr.DEFAULT_COLLECTION_PERCENTILE=10,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sr.DEFAULT=new sr(i0,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sr.DISABLED=new sr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ml(0)}static ur(){return new Ml(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="LruGarbageCollector",iC=1048576;function Cv([r,e],[t,s]){const a=Qe(r,t);return a===0?Qe(e,s):a}class sC{constructor(e){this.Tr=e,this.buffer=new nn(Cv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Cv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ee(xv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hl(t)?Ee(xv,"Ignoring IndexedDB error during garbage collection: ",t):await Bl(t)}await this.Rr(3e5)}))}}class aC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Gh.ue);const s=new sC(t);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(Pv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pv):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,a,c,f,_,v,T;const P=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),a=this.params.maximumSequenceNumbersToCollect):a=C,f=Date.now(),this.nthSequenceNumber(e,a)))).next((C=>(s=C,_=Date.now(),this.removeTargets(e,s,t)))).next((C=>(c=C,v=Date.now(),this.removeOrphanedDocuments(e,s)))).next((C=>(T=Date.now(),wl()<=Je.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-P}ms
	Determined least recently used ${a} in `+(_-f)+`ms
	Removed ${c} targets in `+(v-_)+`ms
	Removed ${C} documents in `+(T-v)+`ms
Total Duration: ${T-P}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:C}))))}}function lC(r,e){return new aC(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.changes=new Fa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?oe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&Nu(s.mutation,a,Er.empty(),Pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,et()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=et()){const a=xa();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((c=>{let f=Iu();return c.forEach(((_,v)=>{f=f.insert(_,v.overlayedDocument)})),f}))))}getOverlayedDocuments(e,t){const s=xa();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,et())))}populateOverlays(e,t,s){const a=[];return s.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((f,_)=>{t.set(f,_)}))}))}computeViews(e,t,s,a){let c=Ss();const f=Lu(),_=(function(){return Lu()})();return t.forEach(((v,T)=>{const P=s.get(T.key);a.has(T.key)&&(P===void 0||P.mutation instanceof Ko)?c=c.insert(T.key,T):P!==void 0?(f.set(T.key,P.mutation.getFieldMask()),Nu(P.mutation,T,P.mutation.getFieldMask(),Pt.now())):f.set(T.key,Er.empty())})),this.recalculateAndSaveOverlays(e,c).next((v=>(v.forEach(((T,P)=>f.set(T,P))),t.forEach(((T,P)=>{var C;return _.set(T,new cC(P,(C=f.get(T))!==null&&C!==void 0?C:null))})),_)))}recalculateAndSaveOverlays(e,t){const s=Lu();let a=new Nt(((f,_)=>f-_)),c=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((f=>{for(const _ of f)_.keys().forEach((v=>{const T=t.get(v);if(T===null)return;let P=s.get(v)||Er.empty();P=_.applyToLocalView(T,P),s.set(v,P);const C=(a.get(_.batchId)||et()).add(v);a=a.insert(_.batchId,C)}))})).next((()=>{const f=[],_=a.getReverseIterator();for(;_.hasNext();){const v=_.getNext(),T=v.key,P=v.value,C=Uw();P.forEach((k=>{if(!c.has(k)){const $=qw(t.get(k),s.get(k));$!==null&&C.set(k,$),c=c.add(k)}})),f.push(this.documentOverlayCache.saveOverlays(e,T,C))}return oe.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(f){return Le.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Mw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):oe.resolve(xa());let _=Fu,v=c;return f.next((T=>oe.forEach(T,((P,C)=>(_<C.largestBatchId&&(_=C.largestBatchId),c.get(P)?oe.resolve():this.remoteDocumentCache.getEntry(e,P).next((k=>{v=v.insert(P,k)}))))).next((()=>this.populateOverlays(e,T,c))).next((()=>this.computeViews(e,v,T,et()))).next((P=>({batchId:_,changes:zw(P)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((s=>{let a=Iu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const c=t.collectionGroup;let f=Iu();return this.indexManager.getCollectionParents(e,c).next((_=>oe.forEach(_,(v=>{const T=(function(C,k){return new Wl(k,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(t,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,T,s,a).next((P=>{P.forEach(((C,k)=>{f=f.insert(C,k)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,a)))).next((f=>{c.forEach(((v,T)=>{const P=T.getKey();f.get(P)===null&&(f=f.insert(P,Nn.newInvalidDocument(P)))}));let _=Iu();return f.forEach(((v,T)=>{const P=c.get(v);P!==void 0&&Nu(P.mutation,T,Er.empty(),Pt.now()),Jh(t,T)&&(_=_.insert(v,T))})),_}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:ki(a.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(a){return{name:a.name,query:tC(a.bundledQuery),readTime:ki(a.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.overlays=new Nt(Le.comparator),this.kr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=xa();return oe.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&s.set(a,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,c)=>{this.wt(e,t,c)})),oe.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.kr.get(s);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.kr.delete(s)),oe.resolve()}getOverlaysForCollection(e,t,s){const a=xa(),c=t.length+1,f=new Le(t.child("")),_=this.overlays.getIteratorFrom(f);for(;_.hasNext();){const v=_.getNext().value,T=v.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===c&&v.largestBatchId>s&&a.set(v.getKey(),v)}return oe.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new Nt(((T,P)=>T-P));const f=this.overlays.getIterator();for(;f.hasNext();){const T=f.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>s){let P=c.get(T.largestBatchId);P===null&&(P=xa(),c=c.insert(T.largestBatchId,P)),P.set(T.getKey(),T)}}const _=xa(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((T,P)=>_.set(T,P))),!(_.size()>=a)););return oe.resolve(_)}wt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.kr.get(a.largestBatchId).delete(s.key);this.kr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new Nx(t,s));let c=this.kr.get(t);c===void 0&&(c=et(),this.kr.set(t,c)),this.kr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.qr=new nn(dn.Qr),this.$r=new nn(dn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new dn(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new dn(e,t))}Gr(e,t){e.forEach((s=>this.removeReference(s,t)))}zr(e){const t=new Le(new It([])),s=new dn(t,e),a=new dn(t,e+1),c=[];return this.$r.forEachInRange([s,a],(f=>{this.Wr(f),c.push(f.key)})),c}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Le(new It([])),s=new dn(t,e),a=new dn(t,e+1);let c=et();return this.$r.forEachInRange([s,a],(f=>{c=c.add(f.key)})),c}containsKey(e){const t=new dn(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class dn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Le.comparator(e.key,t.key)||Qe(e.Hr,t.Hr)}static Ur(e,t){return Qe(e.Hr,t.Hr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new nn(dn.Qr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Lx(c,t,s,a);this.mutationQueue.push(f);for(const _ of a)this.Yr=this.Yr.add(new dn(_.key,c)),this.indexManager.addToCollectionParentIndex(e,_.key.path.popLast());return oe.resolve(f)}lookupMutationBatch(e,t){return oe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),c=a<0?0:a;return oe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Op:this.er-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new dn(t,0),a=new dn(t,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([s,a],(f=>{const _=this.Zr(f.Hr);c.push(_)})),oe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new nn(Qe);return t.forEach((a=>{const c=new dn(a,0),f=new dn(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,f],(_=>{s=s.add(_.Hr)}))})),oe.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;Le.isDocumentKey(c)||(c=c.child(""));const f=new dn(new Le(c),0);let _=new nn(Qe);return this.Yr.forEachWhile((v=>{const T=v.key.path;return!!s.isPrefixOf(T)&&(T.length===a&&(_=_.add(v.Hr)),!0)}),f),oe.resolve(this.ei(_))}ei(e){const t=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){dt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return oe.forEach(t.mutations,(a=>{const c=new dn(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,t){const s=new dn(t,0),a=this.Yr.firstAfterOrEqual(s);return oe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.ni=e,this.docs=(function(){return new Nt(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,f=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return oe.resolve(s?s.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let s=Ss();return t.forEach((a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Nn.newInvalidDocument(a))})),oe.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=Ss();const f=t.path,_=new Le(f.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(_);for(;v.hasNext();){const{key:T,value:{document:P}}=v.getNext();if(!f.isPrefixOf(T.path))break;T.path.length>f.length+1||$1(W1(P),s)<=0||(a.has(P.key)||Jh(t,P))&&(c=c.insert(P.key,P.mutableCopy()))}return oe.resolve(c)}getAllFromCollectionGroup(e,t,s,a){Fe(9500)}ri(e,t){return oe.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new _C(this)}getSize(e){return oe.resolve(this.size)}}class _C extends uC{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(s)})),oe.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.persistence=e,this.ii=new Fa((t=>Vp(t)),Fp),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.si=0,this.oi=new Wp,this.targetCount=0,this._i=Ml.ar()}forEachTarget(e,t){return this.ii.forEach(((s,a)=>t(a))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),oe.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ml(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.hr(t),oe.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.ii.forEach(((f,_)=>{_.sequenceNumber<=t&&s.get(_.targetId)===null&&(this.ii.delete(f),c.push(this.removeMatchingKeysForTargetId(e,_.targetId)),a++)})),oe.waitFor(c).next((()=>a))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return oe.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),oe.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((f=>{c.push(a.markPotentiallyOrphaned(e,f))})),oe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return oe.resolve(s)}containsKey(e,t){return oe.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,t){this.ai={},this.overlays={},this.ui=new Gh(0),this.ci=!1,this.ci=!0,this.li=new pC,this.referenceDelegate=e(this),this.hi=new vC(this),this.indexManager=new nC,this.remoteDocumentCache=(function(a){return new gC(a)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new eC(t),this.Ti=new dC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new mC(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){Ee("MemoryPersistence","Starting transaction:",e);const a=new yC(this.ui.next());return this.referenceDelegate.Ii(),s(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,t){return oe.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,t))))}}class yC extends Z1{constructor(e){super(),this.currentSequenceNumber=e}}class $p{constructor(e){this.persistence=e,this.Ai=new Wp,this.Ri=null}static Vi(e){return new $p(e)}get mi(){if(this.Ri)return this.Ri;throw Fe(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),oe.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((a=>this.mi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.mi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.mi,(s=>{const a=Le.fromPath(s);return this.fi(e,a).next((c=>{c||t.removeEntry(a,Be.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return oe.or([()=>oe.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Vh{constructor(e,t){this.persistence=e,this.gi=new Fa((s=>Q1(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=lC(this,t)}static Vi(e,t){return new Vh(e,t)}Ii(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}yr(e){let t=0;return this.gr(e,(s=>{t++})).next((()=>t))}gr(e,t){return oe.forEach(this.gi,((s,a)=>this.Sr(e,s,a).next((c=>c?oe.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ri(e,(f=>this.Sr(e,f,t).next((_=>{_||(s++,c.removeEntry(f,Be.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),oe.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_h(e.data.value)),t}Sr(e,t,s){return oe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return oe.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=a}static Es(e,t){let s=et(),a=et();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new qp(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return XT()?8:G1(bn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,a){const c={result:null};return this.ps(e,t).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ys(e,t,a,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new wC;return this.ws(e,t,f).next((_=>{if(c.result=_,this.Rs)return this.Ss(e,t,f,_.size)}))})).next((()=>c.result))}Ss(e,t,s,a){return s.documentReadCount<this.Vs?(wl()<=Je.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",El(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(wl()<=Je.DEBUG&&Ee("QueryEngine","Query:",El(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.fs*a?(wl()<=Je.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",El(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ai(t))):oe.resolve())}ps(e,t){if(mv(t))return oe.resolve(null);let s=Ai(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=ip(t,null,"F"),s=Ai(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=et(...c);return this.gs.getDocuments(e,f).next((_=>this.indexManager.getMinOffset(e,s).next((v=>{const T=this.bs(t,_);return this.Ds(t,T,f,v.readTime)?this.ps(e,ip(t,null,"F")):this.vs(e,T,t,v)}))))})))))}ys(e,t,s,a){return mv(t)||a.isEqual(Be.min())?oe.resolve(null):this.gs.getDocuments(e,s).next((c=>{const f=this.bs(t,c);return this.Ds(t,f,s,a)?oe.resolve(null):(wl()<=Je.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),El(t)),this.vs(e,f,t,H1(a,Fu)).next((_=>_)))}))}bs(e,t){let s=new nn(Vw(e));return t.forEach(((a,c)=>{Jh(e,c)&&(s=s.add(c))})),s}Ds(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ws(e,t,s){return wl()<=Je.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",El(t)),this.gs.getDocumentsMatchingQuery(e,t,Fo.min(),s)}vs(e,t,s,a){return this.gs.getDocumentsMatchingQuery(e,s,a).next((c=>(t.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="LocalStore",TC=3e8;class IC{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new Nt(Qe),this.Ms=new Fa((c=>Vp(c)),Fp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hC(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function SC(r,e,t,s){return new IC(r,e,t,s)}async function o0(r,e){const t=He(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((c=>(a=c,t.Ns(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],_=[];let v=et();for(const T of a){f.push(T.batchId);for(const P of T.mutations)v=v.add(P.key)}for(const T of c){_.push(T.batchId);for(const P of T.mutations)v=v.add(P.key)}return t.localDocuments.getDocuments(s,v).next((T=>({Bs:T,removedBatchIds:f,addedBatchIds:_})))}))}))}function PC(r,e){const t=He(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),c=t.Os.newChangeBuffer({trackRemovals:!0});return(function(_,v,T,P){const C=T.batch,k=C.keys();let $=oe.resolve();return k.forEach((W=>{$=$.next((()=>P.getEntry(v,W))).next((Q=>{const G=T.docVersions.get(W);dt(G!==null,48541),Q.version.compareTo(G)<0&&(C.applyToRemoteDocument(Q,T),Q.isValidDocument()&&(Q.setReadTime(T.commitVersion),P.addEntry(Q)))}))})),$.next((()=>_.mutationQueue.removeMutationBatch(v,C)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(_){let v=et();for(let T=0;T<_.mutationResults.length;++T)_.mutationResults[T].transformResults.length>0&&(v=v.add(_.batch.mutations[T].key));return v})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function a0(r){const e=He(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function xC(r,e){const t=He(r),s=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const _=[];e.targetChanges.forEach(((P,C)=>{const k=a.get(C);if(!k)return;_.push(t.hi.removeMatchingKeys(c,P.removedDocuments,C).next((()=>t.hi.addMatchingKeys(c,P.addedDocuments,C))));let $=k.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(C)!==null?$=$.withResumeToken(yn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):P.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(P.resumeToken,s)),a=a.insert(C,$),(function(Q,G,pe){return Q.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=TC?!0:pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0})(k,$,P)&&_.push(t.hi.updateTargetData(c,$))}));let v=Ss(),T=et();if(e.documentUpdates.forEach((P=>{e.resolvedLimboDocuments.has(P)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(c,P))})),_.push(CC(c,f,e.documentUpdates).next((P=>{v=P.Ls,T=P.ks}))),!s.isEqual(Be.min())){const P=t.hi.getLastRemoteSnapshotVersion(c).next((C=>t.hi.setTargetsMetadata(c,c.currentSequenceNumber,s)));_.push(P)}return oe.waitFor(_).next((()=>f.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,v,T))).next((()=>v))})).then((c=>(t.Fs=a,c)))}function CC(r,e,t){let s=et(),a=et();return t.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let f=Ss();return t.forEach(((_,v)=>{const T=c.get(_);v.isFoundDocument()!==T.isFoundDocument()&&(a=a.add(_)),v.isNoDocument()&&v.version.isEqual(Be.min())?(e.removeEntry(_,v.readTime),f=f.insert(_,v)):!T.isValidDocument()||v.version.compareTo(T.version)>0||v.version.compareTo(T.version)===0&&T.hasPendingWrites?(e.addEntry(v),f=f.insert(_,v)):Ee(Zp,"Ignoring outdated watch update for ",_,". Current version:",T.version," Watch version:",v.version)})),{Ls:f,ks:a}}))}function AC(r,e){const t=He(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Op),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function kC(r,e){const t=He(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.hi.getTargetData(s,e).next((c=>c?(a=c,oe.resolve(a)):t.hi.allocateTargetId(s).next((f=>(a=new Ro(e,f,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Fs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s}))}async function up(r,e,t){const s=He(r),a=s.Fs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!Hl(f))throw f;Ee(Zp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(a.target)}function Av(r,e,t){const s=He(r);let a=Be.min(),c=et();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(v,T,P){const C=He(v),k=C.Ms.get(P);return k!==void 0?oe.resolve(C.Fs.get(k)):C.hi.getTargetData(T,P)})(s,f,Ai(e)).next((_=>{if(_)return a=_.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(f,_.targetId).next((v=>{c=v}))})).next((()=>s.Cs.getDocumentsMatchingQuery(f,e,t?a:Be.min(),t?c:et()))).next((_=>(RC(s,mx(e),_),{documents:_,qs:c})))))}function RC(r,e,t){let s=r.xs.get(e)||Be.min();t.forEach(((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.xs.set(e,s)}class kv{constructor(){this.activeTargetIds=Ex()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LC{constructor(){this.Fo=new kv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new kv,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="ConnectivityMonitor";class Lv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ee(Rv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ee(Rv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function cp(){return ch===null?ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="RestConnection",bC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OC{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.Ko=this.databaseId.database===Nh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,c){const f=cp(),_=this.Go(e,t.toUriEncodedString());Ee(Vf,`Sending RPC '${e}' ${f}:`,_,s);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(v,a,c);const{host:T}=new URL(_),P=Fl(T);return this.jo(e,_,v,s,P).then((C=>(Ee(Vf,`Received RPC '${e}' ${f}: `,C),C)),(C=>{throw Vo(Vf,`RPC '${e}' ${f} failed with error: `,C,"url: ",_,"request:",s),C}))}Jo(e,t,s,a,c,f){return this.Wo(e,t,s,a,c)}zo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),s&&s.headers.forEach(((a,c)=>e[c]=a))}Go(e,t){const s=bC[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="WebChannelConnection";class DC extends OC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,a,c){const f=cp();return new Promise(((_,v)=>{const T=new uw;T.setWithCredentials(!0),T.listenOnce(cw.COMPLETE,(()=>{try{switch(T.getLastErrorCode()){case gh.NO_ERROR:const C=T.getResponseJson();Ee(Rn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(C)),_(C);break;case gh.TIMEOUT:Ee(Rn,`RPC '${e}' ${f} timed out`),v(new _e(ie.DEADLINE_EXCEEDED,"Request time out"));break;case gh.HTTP_ERROR:const k=T.getStatus();if(Ee(Rn,`RPC '${e}' ${f} failed with status:`,k,"response text:",T.getResponseText()),k>0){let $=T.getResponseJson();Array.isArray($)&&($=$[0]);const W=$==null?void 0:$.error;if(W&&W.status&&W.message){const Q=(function(pe){const de=pe.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(de)>=0?de:ie.UNKNOWN})(W.status);v(new _e(Q,W.message))}else v(new _e(ie.UNKNOWN,"Server responded with status "+T.getStatus()))}else v(new _e(ie.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{c_:e,streamId:f,l_:T.getLastErrorCode(),h_:T.getLastError()})}}finally{Ee(Rn,`RPC '${e}' ${f} completed.`)}}));const P=JSON.stringify(a);Ee(Rn,`RPC '${e}' ${f} sending request:`,a),T.send(t,"POST",P,s,15)}))}P_(e,t,s){const a=cp(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=fw(),_=dw(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},T=this.longPollingOptions.timeoutSeconds;T!==void 0&&(v.longPollingTimeout=Math.round(1e3*T)),this.useFetchStreams&&(v.useFetchStreams=!0),this.zo(v.initMessageHeaders,t,s),v.encodeInitMessageHeaders=!0;const P=c.join("");Ee(Rn,`Creating RPC '${e}' stream ${a}: ${P}`,v);const C=f.createWebChannel(P,v);this.T_(C);let k=!1,$=!1;const W=new MC({Ho:G=>{$?Ee(Rn,`Not sending because RPC '${e}' stream ${a} is closed:`,G):(k||(Ee(Rn,`Opening RPC '${e}' stream ${a} transport.`),C.open(),k=!0),Ee(Rn,`RPC '${e}' stream ${a} sending:`,G),C.send(G))},Yo:()=>C.close()}),Q=(G,pe,de)=>{G.listen(pe,(me=>{try{de(me)}catch(Me){setTimeout((()=>{throw Me}),0)}}))};return Q(C,Tu.EventType.OPEN,(()=>{$||(Ee(Rn,`RPC '${e}' stream ${a} transport opened.`),W.s_())})),Q(C,Tu.EventType.CLOSE,(()=>{$||($=!0,Ee(Rn,`RPC '${e}' stream ${a} transport closed`),W.__(),this.I_(C))})),Q(C,Tu.EventType.ERROR,(G=>{$||($=!0,Vo(Rn,`RPC '${e}' stream ${a} transport errored. Name:`,G.name,"Message:",G.message),W.__(new _e(ie.UNAVAILABLE,"The operation could not be completed")))})),Q(C,Tu.EventType.MESSAGE,(G=>{var pe;if(!$){const de=G.data[0];dt(!!de,16349);const me=de,Me=(me==null?void 0:me.error)||((pe=me[0])===null||pe===void 0?void 0:pe.error);if(Me){Ee(Rn,`RPC '${e}' stream ${a} received error:`,Me);const rt=Me.status;let $e=(function(D){const F=Gt[D];if(F!==void 0)return Gw(F)})(rt),B=Me.message;$e===void 0&&($e=ie.INTERNAL,B="Unknown error status: "+rt+" with message "+Me.message),$=!0,W.__(new _e($e,B)),C.close()}else Ee(Rn,`RPC '${e}' stream ${a} received:`,de),W.a_(de)}})),Q(_,hw.STAT_EVENT,(G=>{G.stat===Yf.PROXY?Ee(Rn,`RPC '${e}' stream ${a} detected buffering proxy`):G.stat===Yf.NOPROXY&&Ee(Rn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{W.o_()}),0),W}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(r){return new Ux(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,t,s=1e3,a=1.5,c=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=a,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-s);a>0&&Ee("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="PersistentStream";class u0{constructor(e,t,s,a,c,f,_,v){this.Fi=e,this.w_=s,this.S_=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=_,this.listener=v,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new l0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Is(t.toString()),Is("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.b_===t&&this.W_(s,a)}),(s=>{e((()=>{const a=new _e(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(a)}))}))}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{s((()=>this.G_(a)))})),this.stream.onMessage((a=>{s((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Ee(Nv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(Ee(Nv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class VC extends u0{constructor(e,t,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,f),this.serializer=c}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=Hx(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Be.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Be.min():f.readTime?ki(f.readTime):Be.min()})(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=lp(this.serializer),t.addTarget=(function(c,f){let _;const v=f.target;if(_=np(v)?{documents:qx(c,v)}:{query:Zx(c,v).Vt},_.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){_.resumeToken=Yw(c,f.resumeToken);const T=sp(c,f.expectedCount);T!==null&&(_.expectedCount=T)}else if(f.snapshotVersion.compareTo(Be.min())>0){_.readTime=Dh(c,f.snapshotVersion.toTimestamp());const T=sp(c,f.expectedCount);T!==null&&(_.expectedCount=T)}return _})(this.serializer,e);const s=Kx(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=lp(this.serializer),t.removeTarget=e,this.k_(t)}}class FC extends u0{constructor(e,t,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,f),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=$x(e.writeResults,e.commitTime),s=ki(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=lp(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Wx(this.serializer,s)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{}class UC extends zC{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new _e(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Wo(e,op(t,s),a,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(ie.UNKNOWN,c.toString())}))}Jo(e,t,s,a,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,_])=>this.connection.Jo(e,op(t,s),a,f,_,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new _e(ie.UNKNOWN,f.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class jC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Is(t),this._a=!1):Ee("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="RemoteStore";class BC{constructor(e,t,s,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo((f=>{s.enqueueAndForget((async()=>{za(this)&&(Ee(Da,"Restarting streams for network reachability change."),await(async function(v){const T=He(v);T.Ia.add(4),await ic(T),T.Aa.set("Unknown"),T.Ia.delete(4),await id(T)})(this))}))})),this.Aa=new jC(s,a)}}async function id(r){if(za(r))for(const e of r.da)await e(!0)}async function ic(r){for(const e of r.da)await e(!1)}function c0(r,e){const t=He(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Yp(t)?Qp(t):$l(t).x_()&&Kp(t,e))}function Gp(r,e){const t=He(r),s=$l(t);t.Ta.delete(e),s.x_()&&h0(t,e),t.Ta.size===0&&(s.x_()?s.B_():za(t)&&t.Aa.set("Unknown"))}function Kp(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$l(r).H_(e)}function h0(r,e){r.Ra.$e(e),$l(r).Y_(e)}function Qp(r){r.Ra=new Dx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),$l(r).start(),r.Aa.aa()}function Yp(r){return za(r)&&!$l(r).M_()&&r.Ta.size>0}function za(r){return He(r).Ia.size===0}function d0(r){r.Ra=void 0}async function HC(r){r.Aa.set("Online")}async function WC(r){r.Ta.forEach(((e,t)=>{Kp(r,e)}))}async function $C(r,e){d0(r),Yp(r)?(r.Aa.la(e),Qp(r)):r.Aa.set("Unknown")}async function qC(r,e,t){if(r.Aa.set("Online"),e instanceof Qw&&e.state===2&&e.cause)try{await(async function(a,c){const f=c.cause;for(const _ of c.targetIds)a.Ta.has(_)&&(await a.remoteSyncer.rejectListen(_,f),a.Ta.delete(_),a.Ra.removeTarget(_))})(r,e)}catch(s){Ee(Da,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fh(r,s)}else if(e instanceof wh?r.Ra.Ye(e):e instanceof Kw?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Be.min()))try{const s=await a0(r.localStore);t.compareTo(s)>=0&&await(function(c,f){const _=c.Ra.Pt(f);return _.targetChanges.forEach(((v,T)=>{if(v.resumeToken.approximateByteSize()>0){const P=c.Ta.get(T);P&&c.Ta.set(T,P.withResumeToken(v.resumeToken,f))}})),_.targetMismatches.forEach(((v,T)=>{const P=c.Ta.get(v);if(!P)return;c.Ta.set(v,P.withResumeToken(yn.EMPTY_BYTE_STRING,P.snapshotVersion)),h0(c,v);const C=new Ro(P.target,v,T,P.sequenceNumber);Kp(c,C)})),c.remoteSyncer.applyRemoteEvent(_)})(r,t)}catch(s){Ee(Da,"Failed to raise snapshot:",s),await Fh(r,s)}}async function Fh(r,e,t){if(!Hl(e))throw e;r.Ia.add(1),await ic(r),r.Aa.set("Offline"),t||(t=()=>a0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Ee(Da,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await id(r)}))}function f0(r,e){return e().catch((t=>Fh(r,t,e)))}async function sd(r){const e=He(r),t=Bo(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Op;for(;ZC(e);)try{const a=await AC(e.localStore,s);if(a===null){e.Pa.length===0&&t.B_();break}s=a.batchId,GC(e,a)}catch(a){await Fh(e,a)}p0(e)&&m0(e)}function ZC(r){return za(r)&&r.Pa.length<10}function GC(r,e){r.Pa.push(e);const t=Bo(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function p0(r){return za(r)&&!Bo(r).M_()&&r.Pa.length>0}function m0(r){Bo(r).start()}async function KC(r){Bo(r).na()}async function QC(r){const e=Bo(r);for(const t of r.Pa)e.X_(t.mutations)}async function YC(r,e,t){const s=r.Pa.shift(),a=jp.from(s,e,t);await f0(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await sd(r)}async function XC(r,e){e&&Bo(r).Z_&&await(async function(s,a){if((function(f){return Ox(f)&&f!==ie.ABORTED})(a.code)){const c=s.Pa.shift();Bo(s).N_(),await f0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a))),await sd(s)}})(r,e),p0(r)&&m0(r)}async function bv(r,e){const t=He(r);t.asyncQueue.verifyOperationInProgress(),Ee(Da,"RemoteStore received new credentials");const s=za(t);t.Ia.add(3),await ic(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await id(t)}async function JC(r,e){const t=He(r);e?(t.Ia.delete(2),await id(t)):e||(t.Ia.add(2),await ic(t),t.Aa.set("Unknown"))}function $l(r){return r.Va||(r.Va=(function(t,s,a){const c=He(t);return c.ia(),new VC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:HC.bind(null,r),e_:WC.bind(null,r),n_:$C.bind(null,r),J_:qC.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),Yp(r)?Qp(r):r.Aa.set("Unknown")):(await r.Va.stop(),d0(r))}))),r.Va}function Bo(r){return r.ma||(r.ma=(function(t,s,a){const c=He(t);return c.ia(),new FC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:KC.bind(null,r),n_:XC.bind(null,r),ea:QC.bind(null,r),ta:YC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await sd(r)):(await r.ma.stop(),r.Pa.length>0&&(Ee(Da,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,c){const f=Date.now()+s,_=new Xp(e,t,f,a,c);return _.start(s),_}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jp(r,e){if(Is("AsyncQueue",`${e}: ${r}`),Hl(r))return new _e(ie.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{static emptySet(e){return new kl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Le.comparator(t.key,s.key):(t,s)=>Le.comparator(t.key,s.key),this.keyedMap=Iu(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof kl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new kl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(){this.fa=new Nt(Le.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Fe(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Dl{constructor(e,t,s,a,c,f,_,v,T){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=_,this.excludesMetadataChanges=v,this.hasCachedResults=T}static fromInitialDocuments(e,t,s,a,c){const f=[];return t.forEach((_=>{f.push({type:0,doc:_})})),new Dl(e,t,kl.emptySet(t),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class tA{constructor(){this.queries=Mv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const a=He(t),c=a.queries;a.queries=Mv(),c.forEach(((f,_)=>{for(const v of _.wa)v.onError(s)}))})(this,new _e(ie.ABORTED,"Firestore shutting down"))}}function Mv(){return new Fa((r=>Dw(r)),Xh)}async function em(r,e){const t=He(r);let s=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.ba()&&(s=2):(c=new eA,s=e.ba()?0:1);try{switch(s){case 0:c.ya=await t.onListen(a,!0);break;case 1:c.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(f){const _=Jp(f,`Initialization of query '${El(e.query)}' failed`);return void e.onError(_)}t.queries.set(a,c),c.wa.push(e),e.va(t.onlineState),c.ya&&e.Ca(c.ya)&&nm(t)}async function tm(r,e){const t=He(r),s=e.query;let a=3;const c=t.queries.get(s);if(c){const f=c.wa.indexOf(e);f>=0&&(c.wa.splice(f,1),c.wa.length===0?a=e.ba()?0:1:!c.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function nA(r,e){const t=He(r);let s=!1;for(const a of e){const c=a.query,f=t.queries.get(c);if(f){for(const _ of f.wa)_.Ca(a)&&(s=!0);f.ya=a}}s&&nm(t)}function rA(r,e,t){const s=He(r),a=s.queries.get(e);if(a)for(const c of a.wa)c.onError(t);s.queries.delete(e)}function nm(r){r.Da.forEach((e=>{e.next()}))}var hp,Dv;(Dv=hp||(hp={})).Fa="default",Dv.Cache="cache";class rm{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Dl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==hp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e){this.key=e}}class _0{constructor(e){this.key=e}}class iA{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=et(),this.mutatedKeys=et(),this.Xa=Vw(e),this.eu=new kl(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new Ov,a=t?t.eu:this.eu;let c=t?t.mutatedKeys:this.mutatedKeys,f=a,_=!1;const v=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,T=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((P,C)=>{const k=a.get(P),$=Jh(this.query,C)?C:null,W=!!k&&this.mutatedKeys.has(k.key),Q=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let G=!1;k&&$?k.data.isEqual($.data)?W!==Q&&(s.track({type:3,doc:$}),G=!0):this.iu(k,$)||(s.track({type:2,doc:$}),G=!0,(v&&this.Xa($,v)>0||T&&this.Xa($,T)<0)&&(_=!0)):!k&&$?(s.track({type:0,doc:$}),G=!0):k&&!$&&(s.track({type:1,doc:k}),G=!0,(v||T)&&(_=!0)),G&&($?(f=f.add($),c=Q?c.add(P):c.delete(P)):(f=f.delete(P),c=c.delete(P)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const P=this.query.limitType==="F"?f.last():f.first();f=f.delete(P.key),c=c.delete(P.key),s.track({type:1,doc:P})}return{eu:f,ru:s,Ds:_,mutatedKeys:c}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const f=e.ru.pa();f.sort(((P,C)=>(function($,W){const Q=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{At:G})}};return Q($)-Q(W)})(P.type,C.type)||this.Xa(P.doc,C.doc))),this.su(s),a=a!=null&&a;const _=t&&!a?this.ou():[],v=this.Za.size===0&&this.current&&!a?1:0,T=v!==this.Ya;return this.Ya=v,f.length!==0||T?{snapshot:new Dl(this.query,e.eu,c,f,e.mutatedKeys,v===0,T,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:_}:{_u:_}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Ov,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=et(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const t=[];return e.forEach((s=>{this.Za.has(s)||t.push(new _0(s))})),this.Za.forEach((s=>{e.has(s)||t.push(new g0(s))})),t}uu(e){this.Ha=e.qs,this.Za=et();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Dl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const im="SyncEngine";class sA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class oA{constructor(e){this.key=e,this.lu=!1}}class aA{constructor(e,t,s,a,c,f){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.hu={},this.Pu=new Fa((_=>Dw(_)),Xh),this.Tu=new Map,this.Iu=new Set,this.du=new Nt(Le.comparator),this.Eu=new Map,this.Au=new Wp,this.Ru={},this.Vu=new Map,this.mu=Ml.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function lA(r,e,t=!0){const s=I0(r);let a;const c=s.Pu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.cu()):a=await v0(s,e,t,!0),a}async function uA(r,e){const t=I0(r);await v0(t,e,!0,!1)}async function v0(r,e,t,s){const a=await kC(r.localStore,Ai(e)),c=a.targetId,f=r.sharedClientState.addLocalQueryTarget(c,t);let _;return s&&(_=await cA(r,e,c,f==="current",a.resumeToken)),r.isPrimaryClient&&t&&c0(r.remoteStore,a),_}async function cA(r,e,t,s,a){r.gu=(C,k,$)=>(async function(Q,G,pe,de){let me=G.view.nu(pe);me.Ds&&(me=await Av(Q.localStore,G.query,!1).then((({documents:B})=>G.view.nu(B,me))));const Me=de&&de.targetChanges.get(G.targetId),rt=de&&de.targetMismatches.get(G.targetId)!=null,$e=G.view.applyChanges(me,Q.isPrimaryClient,Me,rt);return Fv(Q,G.targetId,$e._u),$e.snapshot})(r,C,k,$);const c=await Av(r.localStore,e,!0),f=new iA(e,c.qs),_=f.nu(c.documents),v=rc.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),T=f.applyChanges(_,r.isPrimaryClient,v);Fv(r,t,T._u);const P=new sA(e,t,f);return r.Pu.set(e,P),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),T.snapshot}async function hA(r,e,t){const s=He(r),a=s.Pu.get(e),c=s.Tu.get(a.targetId);if(c.length>1)return s.Tu.set(a.targetId,c.filter((f=>!Xh(f,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await up(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Gp(s.remoteStore,a.targetId),dp(s,a.targetId)})).catch(Bl)):(dp(s,a.targetId),await up(s.localStore,a.targetId,!0))}async function dA(r,e){const t=He(r),s=t.Pu.get(e),a=t.Tu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Gp(t.remoteStore,s.targetId))}async function fA(r,e,t){const s=wA(r);try{const a=await(function(f,_){const v=He(f),T=Pt.now(),P=_.reduce((($,W)=>$.add(W.key)),et());let C,k;return v.persistence.runTransaction("Locally write mutations","readwrite",($=>{let W=Ss(),Q=et();return v.Os.getEntries($,P).next((G=>{W=G,W.forEach(((pe,de)=>{de.isValidDocument()||(Q=Q.add(pe))}))})).next((()=>v.localDocuments.getOverlayedDocuments($,W))).next((G=>{C=G;const pe=[];for(const de of _){const me=kx(de,C.get(de.key).overlayedDocument);me!=null&&pe.push(new Ko(de.key,me,Aw(me.value.mapValue),oi.exists(!0)))}return v.mutationQueue.addMutationBatch($,T,pe,_)})).next((G=>{k=G;const pe=G.applyToLocalDocumentSet(C,Q);return v.documentOverlayCache.saveOverlays($,G.batchId,pe)}))})).then((()=>({batchId:k.batchId,changes:zw(C)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(f,_,v){let T=f.Ru[f.currentUser.toKey()];T||(T=new Nt(Qe)),T=T.insert(_,v),f.Ru[f.currentUser.toKey()]=T})(s,a.batchId,t),await sc(s,a.changes),await sd(s.remoteStore)}catch(a){const c=Jp(a,"Failed to persist write");t.reject(c)}}async function y0(r,e){const t=He(r);try{const s=await xC(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const f=t.Eu.get(c);f&&(dt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.lu=!0:a.modifiedDocuments.size>0?dt(f.lu,14607):a.removedDocuments.size>0&&(dt(f.lu,42227),f.lu=!1))})),await sc(t,s,e)}catch(s){await Bl(s)}}function Vv(r,e,t){const s=He(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Pu.forEach(((c,f)=>{const _=f.view.va(e);_.snapshot&&a.push(_.snapshot)})),(function(f,_){const v=He(f);v.onlineState=_;let T=!1;v.queries.forEach(((P,C)=>{for(const k of C.wa)k.va(_)&&(T=!0)})),T&&nm(v)})(s.eventManager,e),a.length&&s.hu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function pA(r,e,t){const s=He(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Eu.get(e),c=a&&a.key;if(c){let f=new Nt(Le.comparator);f=f.insert(c,Nn.newNoDocument(c,Be.min()));const _=et().add(c),v=new nd(Be.min(),new Map,new Nt(Qe),f,_);await y0(s,v),s.du=s.du.remove(c),s.Eu.delete(e),sm(s)}else await up(s.localStore,e,!1).then((()=>dp(s,e,t))).catch(Bl)}async function mA(r,e){const t=He(r),s=e.batch.batchId;try{const a=await PC(t.localStore,e);E0(t,s,null),w0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await sc(t,a)}catch(a){await Bl(a)}}async function gA(r,e,t){const s=He(r);try{const a=await(function(f,_){const v=He(f);return v.persistence.runTransaction("Reject batch","readwrite-primary",(T=>{let P;return v.mutationQueue.lookupMutationBatch(T,_).next((C=>(dt(C!==null,37113),P=C.keys(),v.mutationQueue.removeMutationBatch(T,C)))).next((()=>v.mutationQueue.performConsistencyCheck(T))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(T,P,_))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,P))).next((()=>v.localDocuments.getDocuments(T,P)))}))})(s.localStore,e);E0(s,e,t),w0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await sc(s,a)}catch(a){await Bl(a)}}function w0(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function E0(r,e,t){const s=He(r);let a=s.Ru[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.Ru[s.currentUser.toKey()]=a}}function dp(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Tu.get(e))r.Pu.delete(s),t&&r.hu.pu(s,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((s=>{r.Au.containsKey(s)||T0(r,s)}))}function T0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Gp(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),sm(r))}function Fv(r,e,t){for(const s of t)s instanceof g0?(r.Au.addReference(s.key,e),_A(r,s)):s instanceof _0?(Ee(im,"Document no longer in limbo: "+s.key),r.Au.removeReference(s.key,e),r.Au.containsKey(s.key)||T0(r,s.key)):Fe(19791,{yu:s})}function _A(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Iu.has(s)||(Ee(im,"New document in limbo: "+t),r.Iu.add(s),sm(r))}function sm(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Le(It.fromString(e)),s=r.mu.next();r.Eu.set(s,new oA(t)),r.du=r.du.insert(t,s),c0(r.remoteStore,new Ro(Ai(Yh(t.path)),s,"TargetPurposeLimboResolution",Gh.ue))}}async function sc(r,e,t){const s=He(r),a=[],c=[],f=[];s.Pu.isEmpty()||(s.Pu.forEach(((_,v)=>{f.push(s.gu(v,e,t).then((T=>{var P;if((T||t)&&s.isPrimaryClient){const C=T?!T.fromCache:(P=t==null?void 0:t.targetChanges.get(v.targetId))===null||P===void 0?void 0:P.current;s.sharedClientState.updateQueryState(v.targetId,C?"current":"not-current")}if(T){a.push(T);const C=qp.Es(v.targetId,T);c.push(C)}})))})),await Promise.all(f),s.hu.J_(a),await(async function(v,T){const P=He(v);try{await P.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>oe.forEach(T,(k=>oe.forEach(k.Is,($=>P.persistence.referenceDelegate.addReference(C,k.targetId,$))).next((()=>oe.forEach(k.ds,($=>P.persistence.referenceDelegate.removeReference(C,k.targetId,$)))))))))}catch(C){if(!Hl(C))throw C;Ee(Zp,"Failed to update sequence numbers: "+C)}for(const C of T){const k=C.targetId;if(!C.fromCache){const $=P.Fs.get(k),W=$.snapshotVersion,Q=$.withLastLimboFreeSnapshotVersion(W);P.Fs=P.Fs.insert(k,Q)}}})(s.localStore,c))}async function vA(r,e){const t=He(r);if(!t.currentUser.isEqual(e)){Ee(im,"User change. New user:",e.toKey());const s=await o0(t.localStore,e);t.currentUser=e,(function(c,f){c.Vu.forEach((_=>{_.forEach((v=>{v.reject(new _e(ie.CANCELLED,f))}))})),c.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await sc(t,s.Bs)}}function yA(r,e){const t=He(r),s=t.Eu.get(e);if(s&&s.lu)return et().add(s.key);{let a=et();const c=t.Tu.get(e);if(!c)return a;for(const f of c){const _=t.Pu.get(f);a=a.unionWith(_.view.tu)}return a}}function I0(r){const e=He(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=y0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pA.bind(null,e),e.hu.J_=nA.bind(null,e.eventManager),e.hu.pu=rA.bind(null,e.eventManager),e}function wA(r){const e=He(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gA.bind(null,e),e}class zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return SC(this.persistence,new EC,e.initialUser,this.serializer)}Du(e){return new s0($p.Vi,this.serializer)}bu(e){return new LC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zh.provider={build:()=>new zh};class EA extends zh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){dt(this.persistence.referenceDelegate instanceof Vh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new oC(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?sr.withCacheSize(this.cacheSizeBytes):sr.DEFAULT;return new s0((s=>Vh.Vi(s,t)),this.serializer)}}class fp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Vv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=vA.bind(null,this.syncEngine),await JC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new tA})()}createDatastore(e){const t=rd(e.databaseInfo.databaseId),s=(function(c){return new DC(c)})(e.databaseInfo);return(function(c,f,_,v){return new UC(c,f,_,v)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,c,f,_){return new BC(s,a,c,f,_)})(this.localStore,this.datastore,e.asyncQueue,(t=>Vv(this.syncEngine,t,0)),(function(){return Lv.C()?new Lv:new NC})())}createSyncEngine(e,t){return(function(a,c,f,_,v,T,P){const C=new aA(a,c,f,_,v,T);return P&&(C.fu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const c=He(a);Ee(Da,"RemoteStore shutting down."),c.Ia.add(5),await ic(c),c.Ea.shutdown(),c.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}fp.provider={build:()=>new fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Is("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="FirestoreClient";class TA{constructor(e,t,s,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Ln.UNAUTHENTICATED,this.clientId=bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{Ee(Ho,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(Ee(Ho,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Jp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function zf(r,e){r.asyncQueue.verifyOperationInProgress(),Ee(Ho,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async a=>{s.isEqual(a)||(await o0(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>{Vo("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{Ee("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{Vo("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),r._offlineComponents=e}async function zv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await IA(r);Ee(Ho,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>bv(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,a)=>bv(e.remoteStore,a))),r._onlineComponents=e}async function IA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ee(Ho,"Using user provided OfflineComponentProvider");try{await zf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Vo("Error using user provided cache. Falling back to memory cache: "+t),await zf(r,new zh)}}else Ee(Ho,"Using default OfflineComponentProvider"),await zf(r,new EA(void 0));return r._offlineComponents}async function S0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ee(Ho,"Using user provided OnlineComponentProvider"),await zv(r,r._uninitializedComponentsProvider._online)):(Ee(Ho,"Using default OnlineComponentProvider"),await zv(r,new fp))),r._onlineComponents}function SA(r){return S0(r).then((e=>e.syncEngine))}async function Uh(r){const e=await S0(r),t=e.eventManager;return t.onListen=lA.bind(null,e.syncEngine),t.onUnlisten=hA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dA.bind(null,e.syncEngine),t}function PA(r,e,t={}){const s=new ws;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,_,v,T){const P=new om({next:k=>{P.Ou(),f.enqueueAndForget((()=>tm(c,C)));const $=k.docs.has(_);!$&&k.fromCache?T.reject(new _e(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&k.fromCache&&v&&v.source==="server"?T.reject(new _e(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):T.resolve(k)},error:k=>T.reject(k)}),C=new rm(Yh(_.path),P,{includeMetadataChanges:!0,ka:!0});return em(c,C)})(await Uh(r),r.asyncQueue,e,t,s))),s.promise}function xA(r,e,t={}){const s=new ws;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,_,v,T){const P=new om({next:k=>{P.Ou(),f.enqueueAndForget((()=>tm(c,C))),k.fromCache&&v.source==="server"?T.reject(new _e(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):T.resolve(k)},error:k=>T.reject(k)}),C=new rm(_,P,{includeMetadataChanges:!0,ka:!0});return em(c,C)})(await Uh(r),r.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="firestore.googleapis.com",jv=!0;class Bv{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=x0,this.ssl=jv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:jv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=i0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iC)throw new _e(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}B1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=P0((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new _e(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new _e(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new _e(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new b1;switch(s.type){case"firstParty":return new V1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _e(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Uv.get(t);s&&(Ee("ComponentProvider","Removing Datastore"),Uv.delete(t),s.terminate())})(this),Promise.resolve()}}function CA(r,e,t,s={}){var a;r=Br(r,od);const c=Fl(e),f=r._getSettings(),_=Object.assign(Object.assign({},f),{emulatorOptions:r._getEmulatorOptions()}),v=`${e}:${t}`;c&&(wy(`https://${v}`),Ey("Firestore",!0)),f.host!==x0&&f.host!==v&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const T=Object.assign(Object.assign({},f),{host:v,ssl:c,emulatorOptions:s});if(!La(T,_)&&(r._setSettings(T),s.mockUserToken)){let P,C;if(typeof s.mockUserToken=="string")P=s.mockUserToken,C=Ln.MOCK_USER;else{P=HT(s.mockUserToken,(a=r._app)===null||a===void 0?void 0:a.options.projectId);const k=s.mockUserToken.sub||s.mockUserToken.user_id;if(!k)throw new _e(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new Ln(k)}r._authCredentials=new O1(new mw(P,C))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Qo(this.firestore,e,this._query)}}class Bt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(tc(t,Bt._jsonSchema))return new Bt(e,s||null,new Le(It.fromString(t.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:Qt("string",Bt._jsonSchemaVersion),referencePath:Qt("string")};class Mo extends Qo{constructor(e,t,s){super(e,t,Yh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Le(e))}withConverter(e){return new Mo(this.firestore,e,this._path)}}function Aa(r,e,...t){if(r=rn(r),_w("collection","path",e),r instanceof od){const s=It.fromString(e,...t);return tv(s),new Mo(r,null,s)}{if(!(r instanceof Bt||r instanceof Mo))throw new _e(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(It.fromString(e,...t));return tv(s),new Mo(r.firestore,null,s)}}function qu(r,e,...t){if(r=rn(r),arguments.length===1&&(e=bp.newId()),_w("doc","path",e),r instanceof od){const s=It.fromString(e,...t);return ev(s),new Bt(r,null,new Le(s))}{if(!(r instanceof Bt||r instanceof Mo))throw new _e(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(It.fromString(e,...t));return ev(s),new Bt(r.firestore,r instanceof Mo?r.converter:null,new Le(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="AsyncQueue";class Wv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new l0(this,"async_queue_retry"),this.oc=()=>{const s=Ff();s&&Ee(Hv,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=Ff();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ff();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new ws;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Hl(e))throw e;Ee(Hv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,Is("INTERNAL UNHANDLED ERROR: ",$v(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=Xp.createAndSchedule(this,e,t,s,(c=>this.lc(c)));return this.ec.push(a),a}ac(){this.tc&&Fe(47125,{hc:$v(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function $v(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Wo extends od{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Wv,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wv(e),this._firestoreClient=void 0,await e}}}function AA(r,e){const t=typeof r=="object"?r:Py(),s=typeof r=="string"?r:Nh,a=Tp(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=jT("firestore");c&&CA(a,...c)}return a}function ad(r){if(r._terminated)throw new _e(ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||kA(r),r._firestoreClient}function kA(r){var e,t,s;const a=r._freezeSettings(),c=(function(_,v,T,P){return new J1(_,v,T,P.host,P.ssl,P.experimentalForceLongPolling,P.experimentalAutoDetectLongPolling,P0(P.experimentalLongPollingOptions),P.useFetchStreams,P.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,a);r._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),r._firestoreClient=new TA(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&(function(_){const v=_==null?void 0:_._online.build();return{_offline:_==null?void 0:_._offline.build(v),_online:v}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jr(yn.fromBase64String(e))}catch(t){throw new _e(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jr(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tc(e,jr._jsonSchema))return jr.fromBase64String(e.bytes)}}jr._jsonSchemaVersion="firestore/bytes/1.0",jr._jsonSchema={type:Qt("string",jr._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ri._jsonSchemaVersion}}static fromJSON(e){if(tc(e,Ri._jsonSchema))return new Ri(e.latitude,e.longitude)}}Ri._jsonSchemaVersion="firestore/geoPoint/1.0",Ri._jsonSchema={type:Qt("string",Ri._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tc(e,Li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Li(e.vectorValues);throw new _e(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:Qt("string",Li._jsonSchemaVersion),vectorValues:Qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=/^__.*__$/;class LA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ko(e,this.data,this.fieldMask,t,this.fieldTransforms):new nc(e,this.data,t,this.fieldTransforms)}}class C0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ko(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function A0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ec:r})}}class am{constructor(e,t,s,a,c,f){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new am(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.fc(e),a}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return jh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(A0(this.Ec)&&RA.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class NA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||rd(e)}Dc(e,t,s,a=!1){return new am({Ec:e,methodName:t,bc:s,path:vn.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lm(r){const e=r._freezeSettings(),t=rd(r._databaseId);return new NA(r._databaseId,!!e.ignoreUndefinedProperties,t)}function bA(r,e,t,s,a,c={}){const f=r.Dc(c.merge||c.mergeFields?2:0,e,t,a);cm("Data must be an object, but it was:",f,s);const _=k0(s,f);let v,T;if(c.merge)v=new Er(f.fieldMask),T=f.fieldTransforms;else if(c.mergeFields){const P=[];for(const C of c.mergeFields){const k=pp(e,C,t);if(!f.contains(k))throw new _e(ie.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);L0(P,k)||P.push(k)}v=new Er(P),T=f.fieldTransforms.filter((C=>v.covers(C.field)))}else v=null,T=f.fieldTransforms;return new LA(new or(_),v,T)}class cd extends ud{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cd}}class um extends ud{_toFieldTransform(e){return new Px(e.path,new Hu)}isEqual(e){return e instanceof um}}function OA(r,e,t,s){const a=r.Dc(1,e,t);cm("Data must be an object, but it was:",a,s);const c=[],f=or.empty();Go(s,((v,T)=>{const P=hm(e,v,t);T=rn(T);const C=a.gc(P);if(T instanceof cd)c.push(P);else{const k=oc(T,C);k!=null&&(c.push(P),f.set(P,k))}}));const _=new Er(c);return new C0(f,_,a.fieldTransforms)}function MA(r,e,t,s,a,c){const f=r.Dc(1,e,t),_=[pp(e,s,t)],v=[a];if(c.length%2!=0)throw new _e(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<c.length;k+=2)_.push(pp(e,c[k])),v.push(c[k+1]);const T=[],P=or.empty();for(let k=_.length-1;k>=0;--k)if(!L0(T,_[k])){const $=_[k];let W=v[k];W=rn(W);const Q=f.gc($);if(W instanceof cd)T.push($);else{const G=oc(W,Q);G!=null&&(T.push($),P.set($,G))}}const C=new Er(T);return new C0(P,C,f.fieldTransforms)}function DA(r,e,t,s=!1){return oc(t,r.Dc(s?4:3,e))}function oc(r,e){if(R0(r=rn(r)))return cm("Unsupported field value:",e,r),k0(r,e);if(r instanceof ud)return(function(s,a){if(!A0(a.Ec))throw a.wc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(s,a){const c=[];let f=0;for(const _ of s){let v=oc(_,a.yc(f));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),f++}return{arrayValue:{values:c}}})(r,e)}return(function(s,a){if((s=rn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Tx(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Pt.fromDate(s);return{timestampValue:Dh(a.serializer,c)}}if(s instanceof Pt){const c=new Pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Dh(a.serializer,c)}}if(s instanceof Ri)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof jr)return{bytesValue:Yw(a.serializer,s._byteString)};if(s instanceof Bt){const c=a.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw a.wc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Hp(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Li)return(function(f,_){return{mapValue:{fields:{[xw]:{stringValue:Cw},[bh]:{arrayValue:{values:f.toArray().map((T=>{if(typeof T!="number")throw _.wc("VectorValues must only contain numeric values.");return zp(_.serializer,T)}))}}}}}})(s,a);throw a.wc(`Unsupported field value: ${Zh(s)}`)})(r,e)}function k0(r,e){const t={};return ww(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Go(r,((s,a)=>{const c=oc(a,e.Vc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function R0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Pt||r instanceof Ri||r instanceof jr||r instanceof Bt||r instanceof ud||r instanceof Li)}function cm(r,e,t){if(!R0(t)||!vw(t)){const s=Zh(t);throw s==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+s)}}function pp(r,e,t){if((e=rn(e))instanceof ld)return e._internalPath;if(typeof e=="string")return hm(r,e);throw jh("Field path arguments must be of type string or ",r,!1,void 0,t)}const VA=new RegExp("[~\\*/\\[\\]]");function hm(r,e,t){if(e.search(VA)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ld(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function jh(r,e,t,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let v="";return(c||f)&&(v+=" (found",c&&(v+=` in field ${s}`),f&&(v+=` in document ${a}`),v+=")"),new _e(ie.INVALID_ARGUMENT,_+r+v)}function L0(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class FA extends N0{data(){return super.data()}}function hd(r,e){return typeof e=="string"?hm(r,e):e instanceof ld?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new _e(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dm{}class O0 extends dm{}function M0(r,e,...t){let s=[];e instanceof dm&&s.push(e),s=s.concat(t),(function(c){const f=c.filter((v=>v instanceof fm)).length,_=c.filter((v=>v instanceof dd)).length;if(f>1||f>0&&_>0)throw new _e(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)r=a._apply(r);return r}class dd extends O0{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new dd(e,t,s)}_apply(e){const t=this._parse(e);return D0(e._query,t),new Qo(e.firestore,e.converter,rp(e._query,t))}_parse(e){const t=lm(e.firestore);return(function(c,f,_,v,T,P,C){let k;if(T.isKeyField()){if(P==="array-contains"||P==="array-contains-any")throw new _e(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${P}' queries on documentId().`);if(P==="in"||P==="not-in"){Gv(C,P);const W=[];for(const Q of C)W.push(Zv(v,c,Q));k={arrayValue:{values:W}}}else k=Zv(v,c,C)}else P!=="in"&&P!=="not-in"&&P!=="array-contains-any"||Gv(C,P),k=DA(_,f,C,P==="in"||P==="not-in");return Kt.create(T,P,k)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function zA(r,e,t){const s=e,a=hd("where",r);return dd._create(a,s,t)}class fm extends dm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fm(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:li.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let f=a;const _=c.getFlattenedFilters();for(const v of _)D0(f,v),f=rp(f,v)})(e._query,t),new Qo(e.firestore,e.converter,rp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pm extends O0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pm(e,t)}_apply(e){const t=(function(a,c,f){if(a.startAt!==null)throw new _e(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new _e(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bu(c,f)})(e._query,this._field,this._direction);return new Qo(e.firestore,e.converter,(function(a,c){const f=a.explicitOrderBy.concat([c]);return new Wl(a.path,a.collectionGroup,f,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function UA(r,e="asc"){const t=e,s=hd("orderBy",r);return pm._create(s,t)}function Zv(r,e,t){if(typeof(t=rn(t))=="string"){if(t==="")throw new _e(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mw(e)&&t.indexOf("/")!==-1)throw new _e(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(It.fromString(t));if(!Le.isDocumentKey(s))throw new _e(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return uv(r,new Le(s))}if(t instanceof Bt)return uv(r,t._key);throw new _e(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zh(t)}.`)}function Gv(r,e){if(!Array.isArray(r)||r.length===0)throw new _e(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function D0(r,e){const t=(function(a,c){for(const f of a)for(const _ of f.getFlattenedFilters())if(c.indexOf(_.op)>=0)return _.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new _e(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jA{convertValue(e,t="none"){switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Go(e,((a,c)=>{s[a]=this.convertValue(c,t)})),s}convertVectorValue(e){var t,s,a;const c=(a=(s=(t=e.fields)===null||t===void 0?void 0:t[bh].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map((f=>jt(f.doubleValue)));return new Li(c)}convertGeoPoint(e){return new Ri(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Qh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(zu(e));default:return null}}convertTimestamp(e){const t=zo(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=It.fromString(e);dt(r0(s),9688,{name:e});const a=new Uu(s.get(1),s.get(3)),c=new Le(s.popFirst(5));return a.isEqual(t)||Is(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(r,e,t){let s;return s=r?r.toFirestore(e):e,s}class Pu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ka extends N0{constructor(e,t,s,a,c,f){super(e,t,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(hd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ka._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",ka._jsonSchema={type:Qt("string",ka._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Eh extends ka{data(e={}){return super.data(e)}}class Ra{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Pu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Eh(this._firestore,this._userDataWriter,s.key,s,new Pu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map((_=>{const v=new Eh(a._firestore,a._userDataWriter,_.doc.key,_.doc,new Pu(a._snapshot.mutatedKeys.has(_.doc.key),a._snapshot.fromCache),a.query.converter);return _.doc,{type:"added",doc:v,oldIndex:-1,newIndex:f++}}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((_=>c||_.type!==3)).map((_=>{const v=new Eh(a._firestore,a._userDataWriter,_.doc.key,_.doc,new Pu(a._snapshot.mutatedKeys.has(_.doc.key),a._snapshot.fromCache),a.query.converter);let T=-1,P=-1;return _.type!==0&&(T=f.indexOf(_.doc.key),f=f.delete(_.doc.key)),_.type!==1&&(f=f.add(_.doc),P=f.indexOf(_.doc.key)),{type:HA(_.type),doc:v,oldIndex:T,newIndex:P}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(r){r=Br(r,Bt);const e=Br(r.firestore,Wo);return PA(ad(e),r._key).then((t=>z0(e,r,t)))}Ra._jsonSchemaVersion="firestore/querySnapshot/1.0",Ra._jsonSchema={type:Qt("string",Ra._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class mm extends jA{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}}function Kv(r){r=Br(r,Qo);const e=Br(r.firestore,Wo),t=ad(e),s=new mm(e);return b0(r._query),xA(t,r._query).then((a=>new Ra(e,s,r,a)))}function $A(r,e,t,...s){r=Br(r,Bt);const a=Br(r.firestore,Wo),c=lm(a);let f;return f=typeof(e=rn(e))=="string"||e instanceof ld?MA(c,"updateDoc",r._key,e,t,s):OA(c,"updateDoc",r._key,e),_m(a,[f.toMutation(r._key,oi.exists(!0))])}function V0(r){return _m(Br(r.firestore,Wo),[new Up(r._key,oi.none())])}function gm(r,e){const t=Br(r.firestore,Wo),s=qu(r),a=BA(r.converter,e);return _m(t,[bA(lm(r.firestore),"addDoc",s._key,a,r.converter!==null,{}).toMutation(s._key,oi.exists(!1))]).then((()=>s))}function F0(r,...e){var t,s,a;r=rn(r);let c={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||qv(e[f])||(c=e[f++]);const _={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(qv(e[f])){const C=e[f];e[f]=(t=C.next)===null||t===void 0?void 0:t.bind(C),e[f+1]=(s=C.error)===null||s===void 0?void 0:s.bind(C),e[f+2]=(a=C.complete)===null||a===void 0?void 0:a.bind(C)}let v,T,P;if(r instanceof Bt)T=Br(r.firestore,Wo),P=Yh(r._key.path),v={next:C=>{e[f]&&e[f](z0(T,r,C))},error:e[f+1],complete:e[f+2]};else{const C=Br(r,Qo);T=Br(C.firestore,Wo),P=C._query;const k=new mm(T);v={next:$=>{e[f]&&e[f](new Ra(T,k,C,$))},error:e[f+1],complete:e[f+2]},b0(r._query)}return(function(k,$,W,Q){const G=new om(Q),pe=new rm($,G,W);return k.asyncQueue.enqueueAndForget((async()=>em(await Uh(k),pe))),()=>{G.Ou(),k.asyncQueue.enqueueAndForget((async()=>tm(await Uh(k),pe)))}})(ad(T),P,_,v)}function _m(r,e){return(function(s,a){const c=new ws;return s.asyncQueue.enqueueAndForget((async()=>fA(await SA(s),a,c))),c.promise})(ad(r),e)}function z0(r,e,t){const s=t.docs.get(e._key),a=new mm(r);return new ka(r,a,e._key,s,new Pu(t.hasPendingWrites,t.fromCache),e.converter)}function vm(){return new um("serverTimestamp")}(function(e,t=!0){(function(a){jl=a})(zl),Ll(new Na("firestore",((s,{instanceIdentifier:a,options:c})=>{const f=s.getProvider("app").getImmediate(),_=new Wo(new M1(s.getProvider("auth-internal")),new F1(f,s.getProvider("app-check-internal")),(function(T,P){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new _e(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uu(T.options.projectId,P)})(f,a),f);return c=Object.assign({useFetchStreams:t},c),_._setSettings(c),_}),"PUBLIC").setMultipleInstances(!0)),bo(K_,Q_,e),bo(K_,Q_,"esm2017")})();const qA={apiKey:"AIzaSyD8T16MF6Tye3TcdgPwsds2AKlPKoEvLsU",authDomain:"pinplace-402a9.firebaseapp.com",projectId:"pinplace-402a9",storageBucket:"pinplace-402a9.firebasestorage.app",messagingSenderId:"1060464715553",appId:"1:1060464715553:web:c3c1494fdd08596115c060"};let hh=null,Pl=null,wr=null;try{hh=Sy(qA),Pl=k1(hh),wr=AA(hh)}catch(r){console.warn("Firebase initialization failed:",r),hh={name:"demo-app"},Pl={currentUser:null},wr={collection:()=>({addDoc:()=>Promise.resolve({id:"demo-id"})})}}const U0=te.createContext(void 0),Yo=()=>{const r=te.useContext(U0);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},ZA=({children:r})=>{const[e,t]=te.useState(null),[s,a]=te.useState(!0);te.useEffect(()=>_P(Pl,P=>{t(P),a(!1)}),[]);const v={user:e,loading:s,login:async(T,P)=>{await pP(Pl,T,P)},signup:async(T,P)=>{await fP(Pl,T,P)},logout:async()=>{await vP(Pl)}};return b.jsx(U0.Provider,{value:v,children:r})},Qv=({children:r})=>{const{user:e,loading:t}=Yo();return t?b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e?b.jsx(b.Fragment,{children:r}):b.jsx(fy,{to:"/",replace:!0})},GA=({onSwitchToSignup:r,onClose:e})=>{const[t,s]=te.useState(""),[a,c]=te.useState(""),[f,_]=te.useState(""),[v,T]=te.useState(!1),{login:P}=Yo(),C=async k=>{k.preventDefault(),_(""),T(!0);try{await P(t,a),e()}catch($){_($.message||"Failed to log in")}finally{T(!1)}};return b.jsxs("div",{className:"w-full max-w-md mx-auto",children:[b.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Sign In"}),b.jsxs("form",{onSubmit:C,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),b.jsx("input",{id:"email",type:"email",value:t,onChange:k=>s(k.target.value),className:"input-field",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),b.jsx("input",{id:"password",type:"password",value:a,onChange:k=>c(k.target.value),className:"input-field",required:!0})]}),f&&b.jsx("div",{className:"text-red-600 text-sm text-center",children:f}),b.jsx("button",{type:"submit",disabled:v,className:"btn-primary w-full",children:v?"Signing In...":"Sign In"})]}),b.jsxs("p",{className:"text-center text-sm text-gray-600 mt-4",children:["Don't have an account?"," ",b.jsx("button",{onClick:r,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign up"})]})]})},KA=({onSwitchToLogin:r,onClose:e})=>{const[t,s]=te.useState(""),[a,c]=te.useState(""),[f,_]=te.useState(""),[v,T]=te.useState(""),[P,C]=te.useState(!1),{signup:k}=Yo(),$=async W=>{if(W.preventDefault(),T(""),a!==f){T("Passwords do not match");return}if(a.length<6){T("Password must be at least 6 characters");return}C(!0);try{await k(t,a),e()}catch(Q){T(Q.message||"Failed to create account")}finally{C(!1)}};return b.jsxs("div",{className:"w-full max-w-md mx-auto",children:[b.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Sign Up"}),b.jsxs("form",{onSubmit:$,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),b.jsx("input",{id:"email",type:"email",value:t,onChange:W=>s(W.target.value),className:"input-field",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),b.jsx("input",{id:"password",type:"password",value:a,onChange:W=>c(W.target.value),className:"input-field",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),b.jsx("input",{id:"confirmPassword",type:"password",value:f,onChange:W=>_(W.target.value),className:"input-field",required:!0})]}),v&&b.jsx("div",{className:"text-red-600 text-sm text-center",children:v}),b.jsx("button",{type:"submit",disabled:P,className:"btn-primary w-full",children:P?"Creating Account...":"Sign Up"})]}),b.jsxs("p",{className:"text-center text-sm text-gray-600 mt-4",children:["Already have an account?"," ",b.jsx("button",{onClick:r,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in"})]})]})},QA=({isOpen:r,onClose:e,initialMode:t="login"})=>{const[s,a]=te.useState(t);return r?b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s==="login"?b.jsx(GA,{onSwitchToSignup:()=>a("signup"),onClose:e}):b.jsx(KA,{onSwitchToLogin:()=>a("login"),onClose:e})]})}):null},Ft=({variant:r="primary",size:e="md",children:t,className:s="",...a})=>{const c="font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",f={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 focus:ring-gray-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500"},_={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},v=`${c} ${f[r]} ${_[e]} ${s}`;return b.jsx("button",{className:v,...a,children:t})},YA=()=>{const{user:r,logout:e}=Yo(),[t,s]=Rl.useState(!1),[a,c]=Rl.useState("login"),f=()=>{c("login"),s(!0)},_=()=>{c("signup"),s(!0)},v=async()=>{try{await e()}catch(T){console.error("Failed to log out:",T)}};return b.jsxs(b.Fragment,{children:[b.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"flex justify-between items-center h-16",children:[b.jsx("div",{className:"flex items-center",children:b.jsx("h1",{className:"text-xl font-bold text-blue-600",children:"pinplace"})}),b.jsx("div",{className:"flex items-center space-x-4",children:r?b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"text-sm text-gray-600",children:r.email}),b.jsx(Ft,{variant:"secondary",size:"sm",onClick:v,children:"Sign Out"})]}):b.jsxs(b.Fragment,{children:[b.jsx(Ft,{variant:"secondary",size:"sm",onClick:f,children:"Sign In"}),b.jsx(Ft,{variant:"primary",size:"sm",onClick:_,children:"Sign Up"})]})})]})})}),b.jsx(QA,{isOpen:t,onClose:()=>s(!1),initialMode:a})]})},Do=({children:r,className:e="",padding:t="md"})=>{const s={sm:"p-4",md:"p-6",lg:"p-8"};return b.jsx("div",{className:`bg-white rounded-lg shadow-md border border-gray-200 ${s[t]} ${e}`,children:r})},XA=()=>{const{user:r}=Yo();return b.jsx("div",{className:"min-h-screen",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[b.jsxs("div",{className:"text-center",children:[b.jsxs("h1",{className:"text-4xl font-bold text-gray-900 sm:text-5xl md:text-6xl",children:["Create and share",b.jsx("span",{className:"text-blue-600",children:" collaborative maps"})]}),b.jsx("p",{className:"mt-3 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl",children:"Build maps for your class, club, team, reunion, or event. Share a link and let others add their location pins in real-time."}),b.jsx("div",{className:"mt-5 max-w-md mx-auto sm:flex sm:justify-center md:mt-8",children:r?b.jsx(Ft,{size:"lg",onClick:()=>window.location.href="/dashboard",children:"Go to Dashboard"}):b.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:space-x-3 sm:flex",children:[b.jsx(Ft,{size:"lg",onClick:()=>window.location.href="/dashboard",children:"Get Started"}),b.jsx(Ft,{variant:"secondary",size:"lg",onClick:()=>window.location.href="/dashboard",children:"Learn More"})]})})]}),b.jsx("div",{className:"mt-16",children:b.jsxs("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3",children:[b.jsx(Do,{children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-md bg-blue-500 text-white",children:b.jsxs("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),b.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Easy to Create"}),b.jsx("p",{className:"mt-2 text-base text-gray-500",children:"Create maps in seconds with just a name and optional expiration settings."})]})}),b.jsx(Do,{children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-md bg-blue-500 text-white",children:b.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})}),b.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Share Instantly"}),b.jsx("p",{className:"mt-2 text-base text-gray-500",children:"Generate shareable links that let anyone add pins without creating an account."})]})}),b.jsx(Do,{children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-md bg-blue-500 text-white",children:b.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),b.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Auto-Lock"}),b.jsx("p",{className:"mt-2 text-base text-gray-500",children:"Set expiration times or manually lock maps to preserve them permanently."})]})})]})})]})})},JA=r=>{const[e,t]=te.useState("open"),[s,a]=te.useState("");return te.useEffect(()=>{if(!r)return;const c=()=>{if(r.isLocked){t("locked"),a("");return}if(r.editableUntil){const _=new Date,T=r.editableUntil.toDate().getTime()-_.getTime();if(T<=0)t("locked"),a("");else{t("expiring");const P=Math.floor(T/(1e3*60*60)),C=Math.floor(T%(1e3*60*60)/(1e3*60));P>0?a(`${P}h ${C}m`):a(`${C}m`)}}else t("open"),a("")};c();const f=setInterval(c,6e4);return()=>clearInterval(f)},[r]),{lockStatus:e,timeRemaining:s}},ek=({map:r,className:e=""})=>{const{lockStatus:t,timeRemaining:s}=JA(r),c=(()=>{switch(t){case"locked":return{text:"Locked",className:"bg-red-100 text-red-800"};case"expiring":return{text:`Expires in ${s}`,className:"bg-yellow-100 text-yellow-800"};default:return{text:"Open",className:"bg-green-100 text-green-800"}}})();return b.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${c.className} ${e}`,children:c.text})},tk=(r,e)=>{const s=[["Name","Description","Latitude","Longitude","Created At"].join(","),...r.map(_=>[`"${_.name.replace(/"/g,'""')}"`,`"${(_.description||"").replace(/"/g,'""')}"`,_.lat,_.lng,_.createdAt.toDate().toISOString()].join(","))].join(`
`),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a"),f=URL.createObjectURL(a);c.setAttribute("href",f),c.setAttribute("download",`${e.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_pins.csv`),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)},nk=(r,e)=>{const t=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>${e}</name>
    <description>Collaborative map pins exported from pinplace</description>
    ${r.map(f=>`
    <Placemark>
      <name>${f.name.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}</name>
      ${f.description?`<description>${f.description.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}</description>`:""}
      <Point>
        <coordinates>${f.lng},${f.lat},0</coordinates>
      </Point>
    </Placemark>`).join("")}
  </Document>
</kml>`,s=new Blob([t],{type:"application/vnd.google-earth.kml+xml"}),a=document.createElement("a"),c=URL.createObjectURL(s);a.setAttribute("href",c),a.setAttribute("download",`${e.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_pins.kml`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},rk=()=>{const{user:r}=Yo(),e=yp(),[t,s]=te.useState([]),[a,c]=te.useState(!0),[f,_]=te.useState(null),[v,T]=te.useState(null);te.useEffect(()=>{if(!r)return;const W=Aa(wr,"maps"),Q=M0(W,zA("ownerId","==",r.uid)),G=F0(Q,pe=>{const de=pe.docs.map(me=>({id:me.id,...me.data()}));s(de),c(!1),_(null)},pe=>{console.error("Error fetching maps:",pe),_("Failed to load maps"),c(!1)});return()=>G()},[r]);const P=async(W,Q)=>{try{const G=qu(wr,"maps",W);await $A(G,{isLocked:!Q})}catch(G){console.error("Failed to toggle lock:",G)}},C=async W=>{if(confirm("Are you sure you want to delete this map? This action cannot be undone."))try{await V0(qu(wr,"maps",W))}catch(Q){console.error("Failed to delete map:",Q)}},k=async W=>{T(W.id);try{const Q=Aa(wr,"maps",W.id,"pins"),pe=(await Kv(Q)).docs.map(de=>({id:de.id,...de.data()}));tk(pe,W.name)}catch(Q){console.error("Failed to export CSV:",Q)}finally{T(null)}},$=async W=>{T(W.id);try{const Q=Aa(wr,"maps",W.id,"pins"),pe=(await Kv(Q)).docs.map(de=>({id:de.id,...de.data()}));nk(pe,W.name)}catch(Q){console.error("Failed to export KML:",Q)}finally{T(null)}};return a?b.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:b.jsxs("div",{className:"animate-pulse",children:[b.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(W=>b.jsx("div",{className:"h-48 bg-gray-200 rounded"},W))})]})}):b.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[b.jsxs("div",{className:"flex justify-between items-center mb-8",children:[b.jsxs("div",{children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Maps"}),b.jsx("p",{className:"text-gray-600",children:"Manage your collaborative maps"})]}),b.jsx(Ft,{onClick:()=>e("/create"),children:"Create New Map"})]}),f&&b.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:f}),t.length===0?b.jsxs(Do,{className:"text-center py-12",children:[b.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-md bg-gray-100 text-gray-400 mb-4",children:b.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),b.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No maps yet"}),b.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first collaborative map to get started."}),b.jsx(Ft,{onClick:()=>e("/create"),children:"Create Your First Map"})]}):b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(W=>b.jsxs(Do,{className:"hover:shadow-lg transition-shadow",children:[b.jsxs("div",{className:"flex justify-between items-start mb-3",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:W.name}),b.jsx(ek,{map:W})]}),b.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Created ",W.createdAt.toDate().toLocaleDateString()]}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex gap-2",children:[b.jsx(Ft,{size:"sm",variant:"secondary",onClick:()=>e(`/map/${W.id}`),className:"flex-1",children:"View"}),b.jsx(Ft,{size:"sm",variant:"secondary",onClick:()=>P(W.id,W.isLocked),children:W.isLocked?"Unlock":"Lock"}),b.jsx(Ft,{size:"sm",variant:"danger",onClick:()=>C(W.id),children:"Delete"})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx(Ft,{size:"sm",variant:"secondary",onClick:()=>k(W),disabled:v===W.id,className:"flex-1",children:v===W.id?"Exporting...":"Export CSV"}),b.jsx(Ft,{size:"sm",variant:"secondary",onClick:()=>$(W),disabled:v===W.id,className:"flex-1",children:v===W.id?"Exporting...":"Export KML"})]})]})]},W.id))})]})},ik=()=>{const[r,e]=te.useState(!1),[t,s]=te.useState(null),{user:a}=Yo();return{createMap:async f=>{if(!a)return s("You must be logged in to create a map"),null;e(!0),s(null);try{const _=Aa(wr,"maps");return(await gm(_,{name:f.name,ownerId:a.uid,lockType:f.lockType,isLocked:!1,createdAt:vm(),editableUntil:f.lockType==="manual"?null:f.lockType==="duration"&&f.duration?new Date(Date.now()+f.duration*60*60*1e3):f.lockDate||null})).id}catch(_){throw console.error("Error creating map:",_),s(_.message||"Failed to create map"),_}finally{e(!1)}},loading:r,error:t}},Th=({label:r,error:e,helperText:t,className:s="",...a})=>b.jsxs("div",{className:"w-full",children:[r&&b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),b.jsx("input",{className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${e?"border-red-300":"border-gray-300"} ${s}`,...a}),e&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:e}),t&&!e&&b.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t})]}),sk=()=>{const r=yp(),{createMap:e,loading:t,error:s}=ik(),[a,c]=te.useState({name:"",lockType:"manual",duration:24,lockDate:""}),f=async v=>{if(v.preventDefault(),!!a.name.trim())try{await e({name:a.name.trim(),lockType:a.lockType,duration:a.lockType==="duration"?a.duration:void 0,lockDate:a.lockType==="datetime"?new Date(a.lockDate):void 0}),r("/dashboard")}catch(T){console.error("Failed to create map:",T)}},_=(v,T)=>{c(P=>({...P,[v]:T}))};return b.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[b.jsxs("div",{className:"mb-8",children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Map"}),b.jsx("p",{className:"mt-2 text-gray-600",children:"Create a collaborative map that others can add pins to."})]}),b.jsx(Do,{children:b.jsxs("form",{onSubmit:f,className:"space-y-6",children:[b.jsx(Th,{label:"Map Name",value:a.name,onChange:v=>_("name",v.target.value),placeholder:"e.g., High School Friends, Company Offsite",required:!0}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Lock Settings"}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("label",{className:"flex items-center",children:[b.jsx("input",{type:"radio",name:"lockType",value:"manual",checked:a.lockType==="manual",onChange:v=>_("lockType",v.target.value),className:"mr-2"}),b.jsx("span",{children:"Manual lock only (you control when to lock)"})]}),b.jsxs("label",{className:"flex items-center",children:[b.jsx("input",{type:"radio",name:"lockType",value:"duration",checked:a.lockType==="duration",onChange:v=>_("lockType",v.target.value),className:"mr-2"}),b.jsx("span",{children:"Auto-lock after duration"})]}),a.lockType==="duration"&&b.jsx("div",{className:"ml-6",children:b.jsx(Th,{label:"Duration (hours)",type:"number",min:"1",max:"8760",value:a.duration,onChange:v=>_("duration",parseInt(v.target.value)||24)})}),b.jsxs("label",{className:"flex items-center",children:[b.jsx("input",{type:"radio",name:"lockType",value:"datetime",checked:a.lockType==="datetime",onChange:v=>_("lockType",v.target.value),className:"mr-2"}),b.jsx("span",{children:"Auto-lock at specific date/time"})]}),a.lockType==="datetime"&&b.jsx("div",{className:"ml-6",children:b.jsx(Th,{label:"Lock Date & Time",type:"datetime-local",value:a.lockDate,onChange:v=>_("lockDate",v.target.value),required:a.lockType==="datetime"})})]})]}),s&&b.jsx("div",{className:"text-red-600 text-sm",children:s}),b.jsxs("div",{className:"flex space-x-4",children:[b.jsx(Ft,{type:"submit",disabled:t||!a.name.trim(),className:"flex-1",children:t?"Creating...":"Create Map"}),b.jsx(Ft,{type:"button",variant:"secondary",onClick:()=>r("/dashboard"),className:"flex-1",children:"Cancel"})]})]})})]})};function j0(r,e){const t=te.useRef(e);te.useEffect(function(){e!==t.current&&r.attributionControl!=null&&(t.current!=null&&r.attributionControl.removeAttribution(t.current),e!=null&&r.attributionControl.addAttribution(e)),t.current=e},[r,e])}const ok=1;function ak(r){return Object.freeze({__version:ok,map:r})}function lk(r,e){return Object.freeze({...r,...e})}const B0=te.createContext(null),H0=B0.Provider;function ym(){const r=te.useContext(B0);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function uk(r){function e(t,s){const{instance:a,context:c}=r(t).current;return te.useImperativeHandle(s,()=>a),t.children==null?null:Rl.createElement(H0,{value:c},t.children)}return te.forwardRef(e)}function ck(r){function e(t,s){const[a,c]=te.useState(!1),{instance:f}=r(t,c).current;te.useImperativeHandle(s,()=>f),te.useEffect(function(){a&&f.update()},[f,a,t.children]);const _=f._contentNode;return _?FE.createPortal(t.children,_):null}return te.forwardRef(e)}function hk(r){function e(t,s){const{instance:a}=r(t).current;return te.useImperativeHandle(s,()=>a),null}return te.forwardRef(e)}function W0(r,e){const t=te.useRef();te.useEffect(function(){return e!=null&&r.instance.on(e),t.current=e,function(){t.current!=null&&r.instance.off(t.current),t.current=null}},[r,e])}function wm(r,e){const t=r.pane??e.pane;return t?{...r,pane:t}:r}function dk(r,e){return function(s,a){const c=ym(),f=r(wm(s,c),c);return j0(c.map,s.attribution),W0(f.current,s.eventHandlers),e(f.current,c,s,a),f}}var xu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var fk=xu.exports,Yv;function pk(){return Yv||(Yv=1,(function(r,e){(function(t,s){s(e)})(fk,(function(t){var s="1.9.4";function a(i){var l,d,m,E;for(d=1,m=arguments.length;d<m;d++){E=arguments[d];for(l in E)i[l]=E[l]}return i}var c=Object.create||(function(){function i(){}return function(l){return i.prototype=l,new i}})();function f(i,l){var d=Array.prototype.slice;if(i.bind)return i.bind.apply(i,d.call(arguments,1));var m=d.call(arguments,2);return function(){return i.apply(l,m.length?m.concat(d.call(arguments)):arguments)}}var _=0;function v(i){return"_leaflet_id"in i||(i._leaflet_id=++_),i._leaflet_id}function T(i,l,d){var m,E,x,M;return M=function(){m=!1,E&&(x.apply(d,E),E=!1)},x=function(){m?E=arguments:(i.apply(d,arguments),setTimeout(M,l),m=!0)},x}function P(i,l,d){var m=l[1],E=l[0],x=m-E;return i===m&&d?i:((i-E)%x+x)%x+E}function C(){return!1}function k(i,l){if(l===!1)return i;var d=Math.pow(10,l===void 0?6:l);return Math.round(i*d)/d}function $(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function W(i){return $(i).split(/\s+/)}function Q(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?c(i.options):{});for(var d in l)i.options[d]=l[d];return i.options}function G(i,l,d){var m=[];for(var E in i)m.push(encodeURIComponent(d?E.toUpperCase():E)+"="+encodeURIComponent(i[E]));return(!l||l.indexOf("?")===-1?"?":"&")+m.join("&")}var pe=/\{ *([\w_ -]+) *\}/g;function de(i,l){return i.replace(pe,function(d,m){var E=l[m];if(E===void 0)throw new Error("No value provided for variable "+d);return typeof E=="function"&&(E=E(l)),E})}var me=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function Me(i,l){for(var d=0;d<i.length;d++)if(i[d]===l)return d;return-1}var rt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $e(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var B=0;function N(i){var l=+new Date,d=Math.max(0,16-(l-B));return B=l+d,window.setTimeout(i,d)}var D=window.requestAnimationFrame||$e("RequestAnimationFrame")||N,F=window.cancelAnimationFrame||$e("CancelAnimationFrame")||$e("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function z(i,l,d){if(d&&D===N)i.call(l);else return D.call(window,f(i,l))}function H(i){i&&F.call(window,i)}var O={__proto__:null,extend:a,create:c,bind:f,get lastId(){return _},stamp:v,throttle:T,wrapNum:P,falseFn:C,formatNum:k,trim:$,splitWords:W,setOptions:Q,getParamString:G,template:de,isArray:me,indexOf:Me,emptyImageUrl:rt,requestFn:D,cancelFn:F,requestAnimFrame:z,cancelAnimFrame:H};function ot(){}ot.extend=function(i){var l=function(){Q(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,m=c(d);m.constructor=l,l.prototype=m;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(l[E]=this[E]);return i.statics&&a(l,i.statics),i.includes&&(sn(i.includes),a.apply(null,[m].concat(i.includes))),a(m,i),delete m.statics,delete m.includes,m.options&&(m.options=d.options?c(d.options):{},a(m.options,i.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var x=0,M=m._initHooks.length;x<M;x++)m._initHooks[x].call(this)}},l},ot.include=function(i){var l=this.prototype.options;return a(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},ot.mergeOptions=function(i){return a(this.prototype.options,i),this},ot.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),d=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function sn(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=me(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var lt={on:function(i,l,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],l);else{i=W(i);for(var E=0,x=i.length;E<x;E++)this._on(i[E],l,d)}return this},off:function(i,l,d){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var m in i)this._off(m,i[m],l);else{i=W(i);for(var E=arguments.length===1,x=0,M=i.length;x<M;x++)E?this._off(i[x]):this._off(i[x],l,d)}return this},_on:function(i,l,d,m){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,d)===!1){d===this&&(d=void 0);var E={fn:l,ctx:d};m&&(E.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(E)}},_off:function(i,l,d){var m,E,x;if(this._events&&(m=this._events[i],!!m)){if(arguments.length===1){if(this._firingCount)for(E=0,x=m.length;E<x;E++)m[E].fn=C;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var M=this._listens(i,l,d);if(M!==!1){var Z=m[M];this._firingCount&&(Z.fn=C,this._events[i]=m=m.slice()),m.splice(M,1)}}},fire:function(i,l,d){if(!this.listens(i,d))return this;var m=a({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var E=this._events[i];if(E){this._firingCount=this._firingCount+1||1;for(var x=0,M=E.length;x<M;x++){var Z=E[x],X=Z.fn;Z.once&&this.off(i,X,Z.ctx),X.call(Z.ctx||this,m)}this._firingCount--}}return d&&this._propagateEvent(m),this},listens:function(i,l,d,m){typeof i!="string"&&console.warn('"string" type argument expected');var E=l;typeof l!="function"&&(m=!!l,E=void 0,d=void 0);var x=this._events&&this._events[i];if(x&&x.length&&this._listens(i,E,d)!==!1)return!0;if(m){for(var M in this._eventParents)if(this._eventParents[M].listens(i,l,d,m))return!0}return!1},_listens:function(i,l,d){if(!this._events)return!1;var m=this._events[i]||[];if(!l)return!!m.length;d===this&&(d=void 0);for(var E=0,x=m.length;E<x;E++)if(m[E].fn===l&&m[E].ctx===d)return E;return!1},once:function(i,l,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],l,!0);else{i=W(i);for(var E=0,x=i.length;E<x;E++)this._on(i[E],l,d,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[v(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[v(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,a({layer:i.target,propagatedFrom:i.target},i),!0)}};lt.addEventListener=lt.on,lt.removeEventListener=lt.clearAllEventListeners=lt.off,lt.addOneTimeEventListener=lt.once,lt.fireEvent=lt.fire,lt.hasEventListeners=lt.listens;var tt=ot.extend(lt);function re(i,l,d){this.x=d?Math.round(i):i,this.y=d?Math.round(l):l}var ke=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};re.prototype={clone:function(){return new re(this.x,this.y)},add:function(i){return this.clone()._add(se(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(se(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new re(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new re(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ke(this.x),this.y=ke(this.y),this},distanceTo:function(i){i=se(i);var l=i.x-this.x,d=i.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(i){return i=se(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=se(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+k(this.x)+", "+k(this.y)+")"}};function se(i,l,d){return i instanceof re?i:me(i)?new re(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new re(i.x,i.y):new re(i,l,d)}function U(i,l){if(i)for(var d=l?[i,l]:i,m=0,E=d.length;m<E;m++)this.extend(d[m])}U.prototype={extend:function(i){var l,d;if(!i)return this;if(i instanceof re||typeof i[0]=="number"||"x"in i)l=d=se(i);else if(i=ne(i),l=i.min,d=i.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(i){return se((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return se(this.min.x,this.max.y)},getTopRight:function(){return se(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,d;return typeof i[0]=="number"||i instanceof re?i=se(i):i=ne(i),i instanceof U?(l=i.min,d=i.max):l=d=i,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(i){i=ne(i);var l=this.min,d=this.max,m=i.min,E=i.max,x=E.x>=l.x&&m.x<=d.x,M=E.y>=l.y&&m.y<=d.y;return x&&M},overlaps:function(i){i=ne(i);var l=this.min,d=this.max,m=i.min,E=i.max,x=E.x>l.x&&m.x<d.x,M=E.y>l.y&&m.y<d.y;return x&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,d=this.max,m=Math.abs(l.x-d.x)*i,E=Math.abs(l.y-d.y)*i;return ne(se(l.x-m,l.y-E),se(d.x+m,d.y+E))},equals:function(i){return i?(i=ne(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function ne(i,l){return!i||i instanceof U?i:new U(i,l)}function ve(i,l){if(i)for(var d=l?[i,l]:i,m=0,E=d.length;m<E;m++)this.extend(d[m])}ve.prototype={extend:function(i){var l=this._southWest,d=this._northEast,m,E;if(i instanceof Te)m=i,E=i;else if(i instanceof ve){if(m=i._southWest,E=i._northEast,!m||!E)return this}else return i?this.extend(we(i)||Ce(i)):this;return!l&&!d?(this._southWest=new Te(m.lat,m.lng),this._northEast=new Te(E.lat,E.lng)):(l.lat=Math.min(m.lat,l.lat),l.lng=Math.min(m.lng,l.lng),d.lat=Math.max(E.lat,d.lat),d.lng=Math.max(E.lng,d.lng)),this},pad:function(i){var l=this._southWest,d=this._northEast,m=Math.abs(l.lat-d.lat)*i,E=Math.abs(l.lng-d.lng)*i;return new ve(new Te(l.lat-m,l.lng-E),new Te(d.lat+m,d.lng+E))},getCenter:function(){return new Te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Te(this.getNorth(),this.getWest())},getSouthEast:function(){return new Te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Te||"lat"in i?i=we(i):i=Ce(i);var l=this._southWest,d=this._northEast,m,E;return i instanceof ve?(m=i.getSouthWest(),E=i.getNorthEast()):m=E=i,m.lat>=l.lat&&E.lat<=d.lat&&m.lng>=l.lng&&E.lng<=d.lng},intersects:function(i){i=Ce(i);var l=this._southWest,d=this._northEast,m=i.getSouthWest(),E=i.getNorthEast(),x=E.lat>=l.lat&&m.lat<=d.lat,M=E.lng>=l.lng&&m.lng<=d.lng;return x&&M},overlaps:function(i){i=Ce(i);var l=this._southWest,d=this._northEast,m=i.getSouthWest(),E=i.getNorthEast(),x=E.lat>l.lat&&m.lat<d.lat,M=E.lng>l.lng&&m.lng<d.lng;return x&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=Ce(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ce(i,l){return i instanceof ve?i:new ve(i,l)}function Te(i,l,d){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,d!==void 0&&(this.alt=+d)}Te.prototype={equals:function(i,l){if(!i)return!1;i=we(i);var d=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return d<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+k(this.lat,i)+", "+k(this.lng,i)+")"},distanceTo:function(i){return Ge.distance(this,we(i))},wrap:function(){return Ge.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Ce([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Te(this.lat,this.lng,this.alt)}};function we(i,l,d){return i instanceof Te?i:me(i)&&typeof i[0]!="object"?i.length===3?new Te(i[0],i[1],i[2]):i.length===2?new Te(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Te(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new Te(i,l,d)}var qe={latLngToPoint:function(i,l){var d=this.projection.project(i),m=this.scale(l);return this.transformation._transform(d,m)},pointToLatLng:function(i,l){var d=this.scale(l),m=this.transformation.untransform(i,d);return this.projection.unproject(m)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(i),m=this.transformation.transform(l.min,d),E=this.transformation.transform(l.max,d);return new U(m,E)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?P(i.lng,this.wrapLng,!0):i.lng,d=this.wrapLat?P(i.lat,this.wrapLat,!0):i.lat,m=i.alt;return new Te(d,l,m)},wrapLatLngBounds:function(i){var l=i.getCenter(),d=this.wrapLatLng(l),m=l.lat-d.lat,E=l.lng-d.lng;if(m===0&&E===0)return i;var x=i.getSouthWest(),M=i.getNorthEast(),Z=new Te(x.lat-m,x.lng-E),X=new Te(M.lat-m,M.lng-E);return new ve(Z,X)}},Ge=a({},qe,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var d=Math.PI/180,m=i.lat*d,E=l.lat*d,x=Math.sin((l.lat-i.lat)*d/2),M=Math.sin((l.lng-i.lng)*d/2),Z=x*x+Math.cos(m)*Math.cos(E)*M*M,X=2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z));return this.R*X}}),ft=6378137,bt={R:ft,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,d=this.MAX_LATITUDE,m=Math.max(Math.min(d,i.lat),-d),E=Math.sin(m*l);return new re(this.R*i.lng*l,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(i){var l=180/Math.PI;return new Te((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:(function(){var i=ft*Math.PI;return new U([-i,-i],[i,i])})()};function ar(i,l,d,m){if(me(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=d,this._d=m}ar.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new re((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function Tr(i,l,d,m){return new ar(i,l,d,m)}var Ir=a({},Ge,{code:"EPSG:3857",projection:bt,transformation:(function(){var i=.5/(Math.PI*bt.R);return Tr(i,.5,-i,.5)})()}),bi=a({},Ir,{code:"EPSG:900913"});function Oi(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function xs(i,l){var d="",m,E,x,M,Z,X;for(m=0,x=i.length;m<x;m++){for(Z=i[m],E=0,M=Z.length;E<M;E++)X=Z[E],d+=(E?"L":"M")+X.x+" "+X.y;d+=l?Pe.svg?"z":"x":""}return d||"M0 0"}var Mi=document.documentElement.style,Di="ActiveXObject"in window,Cs=Di&&!document.addEventListener,Sr="msLaunchUri"in navigator&&!("documentMode"in document),lr=on("webkit"),As=on("android"),Vi=on("android 2")||on("android 3"),ks=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Xo=As&&on("Google")&&ks<537&&!("AudioNode"in window),Ct=!!window.opera,Ot=!Sr&&on("chrome"),Pr=on("gecko")&&!lr&&!Ct&&!Di,Jo=!Ot&&on("safari"),Hr=on("phantom"),ui="OTransition"in Mi,Fi=navigator.platform.indexOf("Win")===0,Rs=Di&&"transition"in Mi,zi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Vi,Ls="MozPerspective"in Mi,ea=!window.L_DISABLE_3D&&(Rs||zi||Ls)&&!ui&&!Hr,Wr=typeof orientation<"u"||on("mobile"),Ui=Wr&&lr,Ns=Wr&&zi,ji=!window.PointerEvent&&window.MSPointerEvent,On=!!(window.PointerEvent||ji),ur="ontouchstart"in window||!!window.TouchEvent,bs=!window.L_NO_TOUCH&&(ur||On),xr=Wr&&Ct,ta=Wr&&Pr,Bi=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,na=(function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",C,l),window.removeEventListener("testPassiveEventSupport",C,l)}catch{}return i})(),$r=(function(){return!!document.createElement("canvas").getContext})(),Hi=!!(document.createElementNS&&Oi("svg").createSVGRect),At=!!Hi&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Os=!Hi&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),cr=navigator.platform.indexOf("Mac")===0,Wi=navigator.platform.indexOf("Linux")===0;function on(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Pe={ie:Di,ielt9:Cs,edge:Sr,webkit:lr,android:As,android23:Vi,androidStock:Xo,opera:Ct,chrome:Ot,gecko:Pr,safari:Jo,phantom:Hr,opera12:ui,win:Fi,ie3d:Rs,webkit3d:zi,gecko3d:Ls,any3d:ea,mobile:Wr,mobileWebkit:Ui,mobileWebkit3d:Ns,msPointer:ji,pointer:On,touch:bs,touchNative:ur,mobileOpera:xr,mobileGecko:ta,retina:Bi,passiveEvents:na,canvas:$r,svg:Hi,vml:Os,inlineSvg:At,mac:cr,linux:Wi},jn=Pe.msPointer?"MSPointerDown":"pointerdown",Ms=Pe.msPointer?"MSPointerMove":"pointermove",Ua=Pe.msPointer?"MSPointerUp":"pointerup",$i=Pe.msPointer?"MSPointerCancel":"pointercancel",Ds={touchstart:jn,touchmove:Ms,touchend:Ua,touchcancel:$i},Bn={touchstart:_t,touchmove:Us,touchend:Us,touchcancel:Us},Hn={},Wn=!1;function ja(i,l,d){return l==="touchstart"&&Ba(),Bn[l]?(d=Bn[l].bind(this,d),i.addEventListener(Ds[l],d,!1),d):(console.warn("wrong event specified:",l),C)}function ra(i,l,d){if(!Ds[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(Ds[l],d,!1)}function Vs(i){Hn[i.pointerId]=i}function Fs(i){Hn[i.pointerId]&&(Hn[i.pointerId]=i)}function zs(i){delete Hn[i.pointerId]}function Ba(){Wn||(document.addEventListener(jn,Vs,!0),document.addEventListener(Ms,Fs,!0),document.addEventListener(Ua,zs,!0),document.addEventListener($i,zs,!0),Wn=!0)}function Us(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Hn)l.touches.push(Hn[d]);l.changedTouches=[l],i(l)}}function _t(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&gt(l),Us(i,l)}function Ha(i){var l={},d,m;for(m in i)d=i[m],l[m]=d&&d.bind?d.bind(i):d;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var qi=200;function ci(i,l){i.addEventListener("dblclick",l);var d=0,m;function E(x){if(x.detail!==1){m=x.detail;return}if(!(x.pointerType==="mouse"||x.sourceCapabilities&&!x.sourceCapabilities.firesTouchEvents)){var M=Ar(x);if(!(M.some(function(X){return X instanceof HTMLLabelElement&&X.attributes.for})&&!M.some(function(X){return X instanceof HTMLInputElement||X instanceof HTMLSelectElement}))){var Z=Date.now();Z-d<=qi?(m++,m===2&&l(Ha(x))):m=1,d=Z}}}return i.addEventListener("click",E),{dblclick:l,simDblclick:E}}function $n(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var Zi=dr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),hi=dr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),di=hi==="webkitTransition"||hi==="OTransition"?hi+"End":"transitionend";function wn(i){return typeof i=="string"?document.getElementById(i):i}function fi(i,l){var d=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(i,null);d=m?m[l]:null}return d==="auto"?null:d}function ze(i,l,d){var m=document.createElement(i);return m.className=l||"",d&&d.appendChild(m),m}function pt(i){var l=i.parentNode;l&&l.removeChild(i)}function Gi(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function qr(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function hr(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function pi(i,l){if(i.classList!==void 0)return i.classList.contains(l);var d=qn(i);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function De(i,l){if(i.classList!==void 0)for(var d=W(l),m=0,E=d.length;m<E;m++)i.classList.add(d[m]);else if(!pi(i,l)){var x=qn(i);ia(i,(x?x+" ":"")+l)}}function mt(i,l){i.classList!==void 0?i.classList.remove(l):ia(i,$((" "+qn(i)+" ").replace(" "+l+" "," ")))}function ia(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function qn(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function wt(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&Ki(i,l)}function Ki(i,l){var d=!1,m="DXImageTransform.Microsoft.Alpha";try{d=i.filters.item(m)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):i.style.filter+=" progid:"+m+"(opacity="+l+")"}function dr(i){for(var l=document.documentElement.style,d=0;d<i.length;d++)if(i[d]in l)return i[d];return!1}function En(i,l,d){var m=l||new re(0,0);i.style[Zi]=(Pe.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(d?" scale("+d+")":"")}function Ue(i,l){i._leaflet_pos=l,Pe.any3d?En(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function Tn(i){return i._leaflet_pos||new re(0,0)}var Ze,Zn,js;if("onselectstart"in document)Ze=function(){Re(window,"selectstart",gt)},Zn=function(){ut(window,"selectstart",gt)};else{var Cr=dr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ze=function(){if(Cr){var i=document.documentElement.style;js=i[Cr],i[Cr]="none"}},Zn=function(){Cr&&(document.documentElement.style[Cr]=js,js=void 0)}}function Bs(){Re(window,"dragstart",gt)}function Hs(){ut(window,"dragstart",gt)}var Qi,Yi;function Gn(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Mt(),Qi=i,Yi=i.style.outlineStyle,i.style.outlineStyle="none",Re(window,"keydown",Mt))}function Mt(){Qi&&(Qi.style.outlineStyle=Yi,Qi=void 0,Yi=void 0,ut(window,"keydown",Mt))}function Kn(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Mn(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var mi={__proto__:null,TRANSFORM:Zi,TRANSITION:hi,TRANSITION_END:di,get:wn,getStyle:fi,create:ze,remove:pt,empty:Gi,toFront:qr,toBack:hr,hasClass:pi,addClass:De,removeClass:mt,setClass:ia,getClass:qn,setOpacity:wt,testProp:dr,setTransform:En,setPosition:Ue,getPosition:Tn,get disableTextSelection(){return Ze},get enableTextSelection(){return Zn},disableImageDrag:Bs,enableImageDrag:Hs,preventOutline:Gn,restoreOutline:Mt,getSizedParentNode:Kn,getScale:Mn};function Re(i,l,d,m){if(l&&typeof l=="object")for(var E in l)oa(i,E,l[E],d);else{l=W(l);for(var x=0,M=l.length;x<M;x++)oa(i,l[x],d,m)}return this}var zt="_leaflet_events";function ut(i,l,d,m){if(arguments.length===1)sa(i),delete i[zt];else if(l&&typeof l=="object")for(var E in l)Ws(i,E,l[E],d);else if(l=W(l),arguments.length===2)sa(i,function(Z){return Me(l,Z)!==-1});else for(var x=0,M=l.length;x<M;x++)Ws(i,l[x],d,m);return this}function sa(i,l){for(var d in i[zt]){var m=d.split(/\d/)[0];(!l||l(m))&&Ws(i,m,null,null,d)}}var an={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function oa(i,l,d,m){var E=l+v(d)+(m?"_"+v(m):"");if(i[zt]&&i[zt][E])return this;var x=function(Z){return d.call(m||i,Z||window.event)},M=x;!Pe.touchNative&&Pe.pointer&&l.indexOf("touch")===0?x=ja(i,l,x):Pe.touch&&l==="dblclick"?x=ci(i,x):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(an[l]||l,x,Pe.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(x=function(Z){Z=Z||window.event,Xi(i,Z)&&M(Z)},i.addEventListener(an[l],x,!1)):i.addEventListener(l,M,!1):i.attachEvent("on"+l,x),i[zt]=i[zt]||{},i[zt][E]=x}function Ws(i,l,d,m,E){E=E||l+v(d)+(m?"_"+v(m):"");var x=i[zt]&&i[zt][E];if(!x)return this;!Pe.touchNative&&Pe.pointer&&l.indexOf("touch")===0?ra(i,l,x):Pe.touch&&l==="dblclick"?$n(i,x):"removeEventListener"in i?i.removeEventListener(an[l]||l,x,!1):i.detachEvent("on"+l,x),i[zt][E]=null}function fn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Zr(i){return oa(i,"wheel",fn),this}function gi(i){return Re(i,"mousedown touchstart dblclick contextmenu",fn),i._leaflet_disable_click=!0,this}function gt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Xt(i){return gt(i),fn(i),this}function Ar(i){if(i.composedPath)return i.composedPath();for(var l=[],d=i.target;d;)l.push(d),d=d.parentNode;return l}function Gr(i,l){if(!l)return new re(i.clientX,i.clientY);var d=Mn(l),m=d.boundingClientRect;return new re((i.clientX-m.left)/d.x-l.clientLeft,(i.clientY-m.top)/d.y-l.clientTop)}var Et=Pe.linux&&Pe.chrome?window.devicePixelRatio:Pe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Wa(i){return Pe.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Et:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Xi(i,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==i;)d=d.parentNode}catch{return!1}return d!==i}var Ji={__proto__:null,on:Re,off:ut,stopPropagation:fn,disableScrollPropagation:Zr,disableClickPropagation:gi,preventDefault:gt,stop:Xt,getPropagationPath:Ar,getMousePosition:Gr,getWheelDelta:Wa,isExternalTarget:Xi,addListener:Re,removeListener:ut},es=tt.extend({run:function(i,l,d,m){this.stop(),this._el=i,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=Tn(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=z(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var d=this._startPos.add(this._offset.multiplyBy(i));l&&d._round(),Ue(this._el,d),this.fire("step")},_complete:function(){H(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Ke=tt.extend({options:{crs:Ir,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=Q(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(we(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=hi&&Pe.any3d&&!Pe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Re(this._proxy,di,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(we(i),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=a({animate:d.animate},d.zoom),d.pan=a({animate:d.animate,duration:d.duration},d.pan));var m=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,d.zoom):this._tryAnimatedPan(i,d.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(Pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(Pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,d){var m=this.getZoomScale(l),E=this.getSize().divideBy(2),x=i instanceof re?i:this.latLngToContainerPoint(i),M=x.subtract(E).multiplyBy(1-1/m),Z=this.containerPointToLatLng(E.add(M));return this.setView(Z,l,{zoom:d})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():Ce(i);var d=se(l.paddingTopLeft||l.padding||[0,0]),m=se(l.paddingBottomRight||l.padding||[0,0]),E=this.getBoundsZoom(i,!1,d.add(m));if(E=typeof l.maxZoom=="number"?Math.min(l.maxZoom,E):E,E===1/0)return{center:i.getCenter(),zoom:E};var x=m.subtract(d).divideBy(2),M=this.project(i.getSouthWest(),E),Z=this.project(i.getNorthEast(),E),X=this.unproject(M.add(Z).divideBy(2).add(x),E);return{center:X,zoom:E}},fitBounds:function(i,l){if(i=Ce(i),!i.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(i,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=se(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new es,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){De(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,d){if(d=d||{},d.animate===!1||!Pe.any3d)return this.setView(i,l,d);this._stop();var m=this.project(this.getCenter()),E=this.project(i),x=this.getSize(),M=this._zoom;i=we(i),l=l===void 0?M:l;var Z=Math.max(x.x,x.y),X=Z*this.getZoomScale(M,l),ae=E.distanceTo(m)||1,ge=1.42,Ne=ge*ge;function We(ht){var co=ht?-1:1,_d=ht?X:Z,vd=X*X-Z*Z+co*Ne*Ne*ae*ae,as=2*_d*Ne*ae,ls=vd/as,us=Math.sqrt(ls*ls+1)-ls,il=us<1e-9?-18:Math.log(us);return il}function Jt(ht){return(Math.exp(ht)-Math.exp(-ht))/2}function qt(ht){return(Math.exp(ht)+Math.exp(-ht))/2}function Fn(ht){return Jt(ht)/qt(ht)}var Pn=We(0);function lo(ht){return Z*(qt(Pn)/qt(Pn+ge*ht))}function iu(ht){return Z*(qt(Pn)*Fn(Pn+ge*ht)-Jt(Pn))/Ne}function Ei(ht){return 1-Math.pow(1-ht,1.5)}var yc=Date.now(),os=(We(1)-Pn)/ge,br=d.duration?1e3*d.duration:1e3*os*.8;function uo(){var ht=(Date.now()-yc)/br,co=Ei(ht)*os;ht<=1?(this._flyToFrame=z(uo,this),this._move(this.unproject(m.add(E.subtract(m).multiplyBy(iu(co)/ae)),M),this.getScaleZoom(Z/lo(co),M),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),uo.call(this),this},flyToBounds:function(i,l){var d=this._getBoundsCenterZoom(i,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(i){return i=Ce(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var d=this.getCenter(),m=this._limitCenter(d,this._zoom,Ce(i));return d.equals(m)||this.panTo(m,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var d=se(l.paddingTopLeft||l.padding||[0,0]),m=se(l.paddingBottomRight||l.padding||[0,0]),E=this.project(this.getCenter()),x=this.project(i),M=this.getPixelBounds(),Z=ne([M.min.add(d),M.max.subtract(m)]),X=Z.getSize();if(!Z.contains(x)){this._enforcingBounds=!0;var ae=x.subtract(Z.getCenter()),ge=Z.extend(x).getSize().subtract(X);E.x+=ae.x<0?-ge.x:ge.x,E.y+=ae.y<0?-ge.y:ge.y,this.panTo(this.unproject(E),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=a({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),m=l.divideBy(2).round(),E=d.divideBy(2).round(),x=m.subtract(E);return!x.x&&!x.y?this:(i.animate&&i.pan?this.panBy(x):(i.pan&&this._rawPanBy(x),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=a({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=f(this._handleGeolocationResponse,this),d=f(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,i):navigator.geolocation.getCurrentPosition(l,d,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,d=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,d=i.coords.longitude,m=new Te(l,d),E=m.toBounds(i.coords.accuracy*2),x=this._locateOptions;if(x.setView){var M=this.getBoundsZoom(E);this.setView(m,x.maxZoom?Math.min(M,x.maxZoom):M)}var Z={latlng:m,bounds:E,timestamp:i.timestamp};for(var X in i.coords)typeof i.coords[X]=="number"&&(Z[X]=i.coords[X]);this.fire("locationfound",Z)}},addHandler:function(i,l){if(!l)return this;var d=this[i]=new l(this);return this._handlers.push(d),this.options[i]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(H(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)pt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var d="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),m=ze("div",d,l||this._mapPane);return i&&(this._panes[i]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),d=this.unproject(i.getTopRight());return new ve(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,d){i=Ce(i),d=se(d||[0,0]);var m=this.getZoom()||0,E=this.getMinZoom(),x=this.getMaxZoom(),M=i.getNorthWest(),Z=i.getSouthEast(),X=this.getSize().subtract(d),ae=ne(this.project(Z,m),this.project(M,m)).getSize(),ge=Pe.any3d?this.options.zoomSnap:1,Ne=X.x/ae.x,We=X.y/ae.y,Jt=l?Math.max(Ne,We):Math.min(Ne,We);return m=this.getScaleZoom(Jt,m),ge&&(m=Math.round(m/(ge/100))*(ge/100),m=l?Math.ceil(m/ge)*ge:Math.floor(m/ge)*ge),Math.max(E,Math.min(x,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new re(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var d=this._getTopLeftPoint(i,l);return new U(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(i)/d.scale(l)},getScaleZoom:function(i,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var m=d.zoom(i*d.scale(l));return isNaN(m)?1/0:m},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(we(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(se(i),l)},layerPointToLatLng:function(i){var l=se(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(we(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(we(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Ce(i))},distance:function(i,l){return this.options.crs.distance(we(i),we(l))},containerPointToLayerPoint:function(i){return se(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return se(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(se(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(we(i)))},mouseEventToContainerPoint:function(i){return Gr(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=wn(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Re(l,"scroll",this._onScroll,this),this._containerId=v(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Pe.any3d,De(i,"leaflet-container"+(Pe.touch?" leaflet-touch":"")+(Pe.retina?" leaflet-retina":"")+(Pe.ielt9?" leaflet-oldie":"")+(Pe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=fi(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ue(this._mapPane,new re(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(De(i.markerPane,"leaflet-zoom-hide"),De(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,d){Ue(this._mapPane,new re(0,0));var m=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var E=this._zoom!==l;this._moveStart(E,d)._move(i,l)._moveEnd(E),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,d,m){l===void 0&&(l=this._zoom);var E=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),m?d&&d.pinch&&this.fire("zoom",d):((E||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return H(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Ue(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[v(this._container)]=this;var l=i?ut:Re;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Pe.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){H(this._resizeRequest),this._resizeRequest=z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var d=[],m,E=l==="mouseout"||l==="mouseover",x=i.target||i.srcElement,M=!1;x;){if(m=this._targets[v(x)],m&&(l==="click"||l==="preclick")&&this._draggableMoved(m)){M=!0;break}if(m&&m.listens(l,!0)&&(E&&!Xi(x,i)||(d.push(m),E))||x===this._container)break;x=x.parentNode}return!d.length&&!M&&!E&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var d=i.type;d==="mousedown"&&Gn(l),this._fireDOMEvent(i,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,d){if(i.type==="click"){var m=a({},i);m.type="preclick",this._fireDOMEvent(m,m.type,d)}var E=this._findEventTargets(i,l);if(d){for(var x=[],M=0;M<d.length;M++)d[M].listens(l,!0)&&x.push(d[M]);E=x.concat(E)}if(E.length){l==="contextmenu"&&gt(i);var Z=E[0],X={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var ae=Z.getLatLng&&(!Z._radius||Z._radius<=10);X.containerPoint=ae?this.latLngToContainerPoint(Z.getLatLng()):this.mouseEventToContainerPoint(i),X.layerPoint=this.containerPointToLayerPoint(X.containerPoint),X.latlng=ae?Z.getLatLng():this.layerPointToLatLng(X.layerPoint)}for(M=0;M<E.length;M++)if(E[M].fire(l,X,!0),X.originalEvent._stopped||E[M].options.bubblingMouseEvents===!1&&Me(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return Tn(this._mapPane)||new re(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var d=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var d=this.getSize()._divideBy(2);return this.project(i,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,d){var m=this._getNewPixelOrigin(d,l);return this.project(i,l)._subtract(m)},_latLngBoundsToNewLayerBounds:function(i,l,d){var m=this._getNewPixelOrigin(d,l);return ne([this.project(i.getSouthWest(),l)._subtract(m),this.project(i.getNorthWest(),l)._subtract(m),this.project(i.getSouthEast(),l)._subtract(m),this.project(i.getNorthEast(),l)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,d){if(!d)return i;var m=this.project(i,l),E=this.getSize().divideBy(2),x=new U(m.subtract(E),m.add(E)),M=this._getBoundsOffset(x,d,l);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?i:this.unproject(m.add(M),l)},_limitOffset:function(i,l){if(!l)return i;var d=this.getPixelBounds(),m=new U(d.min.add(i),d.max.add(i));return i.add(this._getBoundsOffset(m,l))},_getBoundsOffset:function(i,l,d){var m=ne(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),E=m.min.subtract(i.min),x=m.max.subtract(i.max),M=this._rebound(E.x,-x.x),Z=this._rebound(E.y,-x.y);return new re(M,Z)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),d=this.getMaxZoom(),m=Pe.any3d?this.options.zoomSnap:1;return m&&(i=Math.round(i/m)*m),Math.max(l,Math.min(d,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var d=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var i=this._proxy=ze("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var d=Zi,m=this._proxy.style[d];En(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),m===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();En(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(l),E=this._getCenterOffset(i)._divideBy(1-1/m);return d.animate!==!0&&!this.getSize().contains(E)?!1:(z(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,d,m){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,De(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Dn(i,l){return new Ke(i,l)}var ln=ot.extend({options:{position:"topright"},initialize:function(i){Q(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),d=this.getPosition(),m=i._controlCorners[d];return De(l,"leaflet-control"),d.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Ht=function(i){return new ln(i)};Ke.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",d=this._controlContainer=ze("div",l+"control-container",this._container);function m(E,x){var M=l+E+" "+l+x;i[E+x]=ze("div",M,d)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)pt(this._controlCorners[i]);pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $s=ln.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,d,m){return d<m?-1:m<d?1:0}},initialize:function(i,l,d){Q(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in i)this._addLayer(i[m],m);for(m in l)this._addLayer(l[m],m,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return ln.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(v(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){De(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(De(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):mt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=ze("div",i),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),gi(l),Zr(l);var m=this._section=ze("section",i+"-list");d&&(this._map.on("click",this.collapse,this),Re(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=ze("a",i+"-toggle",l);E.href="#",E.title="Layers",E.setAttribute("role","button"),Re(E,{keydown:function(x){x.keyCode===13&&this._expandSafely()},click:function(x){gt(x),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=ze("div",i+"-base",m),this._separator=ze("div",i+"-separator",m),this._overlaysList=ze("div",i+"-overlays",m),l.appendChild(m)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&v(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,d){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(f(function(m,E){return this.options.sortFunction(m.layer,E.layer,m.name,E.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Gi(this._baseLayersList),Gi(this._overlaysList),this._layerControlInputs=[];var i,l,d,m,E=0;for(d=0;d<this._layers.length;d++)m=this._layers[d],this._addItem(m),l=l||m.overlay,i=i||!m.overlay,E+=m.overlay?0:1;return this.options.hideSingleBase&&(i=i&&E>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(v(i.target)),d=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(i,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=d,m.firstChild},_addItem:function(i){var l=document.createElement("label"),d=this._map.hasLayer(i.layer),m;i.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=d):m=this._createRadioElement("leaflet-base-layers_"+v(this),d),this._layerControlInputs.push(m),m.layerId=v(i.layer),Re(m,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+i.name;var x=document.createElement("span");l.appendChild(x),x.appendChild(m),x.appendChild(E);var M=i.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,d,m=[],E=[];this._handlingClick=!0;for(var x=i.length-1;x>=0;x--)l=i[x],d=this._getLayer(l.layerId).layer,l.checked?m.push(d):l.checked||E.push(d);for(x=0;x<E.length;x++)this._map.hasLayer(E[x])&&this._map.removeLayer(E[x]);for(x=0;x<m.length;x++)this._map.hasLayer(m[x])||this._map.addLayer(m[x]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,d,m=this._map.getZoom(),E=i.length-1;E>=0;E--)l=i[E],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&m<d.options.minZoom||d.options.maxZoom!==void 0&&m>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Re(i,"click",gt),this.expand();var l=this;setTimeout(function(){ut(i,"click",gt),l._preventClick=!1})}}),qs=function(i,l,d){return new $s(i,l,d)},Qn=ln.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",d=ze("div",l+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,d,m,E){var x=ze("a",d,m);return x.innerHTML=i,x.href="#",x.title=l,x.setAttribute("role","button"),x.setAttribute("aria-label",l),gi(x),Re(x,"click",Xt),Re(x,"click",E,this),Re(x,"click",this._refocusOnMap,this),x},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";mt(this._zoomInButton,l),mt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(De(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(De(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ke.mergeOptions({zoomControl:!0}),Ke.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qn,this.addControl(this.zoomControl))});var aa=function(i){return new Qn(i)},Wt=ln.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",d=ze("div",l),m=this.options;return this._addScales(m,l+"-line",d),i.on(m.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),d},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,d){i.metric&&(this._mScale=ze("div",l,d)),i.imperial&&(this._iScale=ze("div",l,d))},_update:function(){var i=this._map,l=i.getSize().y/2,d=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/i)},_updateImperial:function(i){var l=i*3.2808399,d,m,E;l>5280?(d=l/5280,m=this._getRoundNum(d),this._updateScale(this._iScale,m+" mi",m/d)):(E=this._getRoundNum(l),this._updateScale(this._iScale,E+" ft",E/l))},_updateScale:function(i,l,d){i.style.width=Math.round(this.options.maxWidth*d)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),d=i/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),fr=function(i){return new Wt(i)},Zs='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Yn=ln.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Pe.inlineSvg?Zs+" ":"")+"Leaflet</a>"},initialize:function(i){Q(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=ze("div","leaflet-control-attribution"),gi(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),i.length&&d.push(i.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Ke.mergeOptions({attributionControl:!0}),Ke.addInitHook(function(){this.options.attributionControl&&new Yn().addTo(this)});var ql=function(i){return new Yn(i)};ln.Layers=$s,ln.Zoom=Qn,ln.Scale=Wt,ln.Attribution=Yn,Ht.layers=qs,Ht.zoom=aa,Ht.scale=fr,Ht.attribution=ql;var pn=ot.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});pn.addTo=function(i,l){return i.addHandler(l,this),this};var Kr={Events:lt},Qr=Pe.touch?"touchstart mousedown":"mousedown",In=tt.extend({options:{clickTolerance:3},initialize:function(i,l,d,m){Q(this,m),this._element=i,this._dragStartTarget=l||i,this._preventOutline=d},enable:function(){this._enabled||(Re(this._dragStartTarget,Qr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(In._dragging===this&&this.finishDrag(!0),ut(this._dragStartTarget,Qr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!pi(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){In._dragging===this&&this.finishDrag();return}if(!(In._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(In._dragging=this,this._preventOutline&&Gn(this._element),Bs(),Ze(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,d=Kn(this._element);this._startPoint=new re(l.clientX,l.clientY),this._startPos=Tn(this._element),this._parentScale=Mn(d);var m=i.type==="mousedown";Re(document,m?"mousemove":"touchmove",this._onMove,this),Re(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,d=new re(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,gt(i),this._moved||(this.fire("dragstart"),this._moved=!0,De(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),De(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Ue(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ut(document,"mousemove touchmove",this._onMove,this),ut(document,"mouseup touchend touchcancel",this._onUp,this),Hs(),Zn();var l=this._moved&&this._moving;this._moving=!1,In._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function ts(i,l,d){var m,E=[1,4,2,8],x,M,Z,X,ae,ge,Ne,We;for(x=0,ge=i.length;x<ge;x++)i[x]._code=kr(i[x],l);for(Z=0;Z<4;Z++){for(Ne=E[Z],m=[],x=0,ge=i.length,M=ge-1;x<ge;M=x++)X=i[x],ae=i[M],X._code&Ne?ae._code&Ne||(We=$t(ae,X,Ne,l,d),We._code=kr(We,l),m.push(We)):(ae._code&Ne&&(We=$t(ae,X,Ne,l,d),We._code=kr(We,l),m.push(We)),m.push(X));i=m}return i}function Gs(i,l){var d,m,E,x,M,Z,X,ae,ge;if(!i||i.length===0)throw new Error("latlngs not passed");h(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Ne=we([0,0]),We=Ce(i),Jt=We.getNorthWest().distanceTo(We.getSouthWest())*We.getNorthEast().distanceTo(We.getNorthWest());Jt<1700&&(Ne=Ks(i));var qt=i.length,Fn=[];for(d=0;d<qt;d++){var Pn=we(i[d]);Fn.push(l.project(we([Pn.lat-Ne.lat,Pn.lng-Ne.lng])))}for(Z=X=ae=0,d=0,m=qt-1;d<qt;m=d++)E=Fn[d],x=Fn[m],M=E.y*x.x-x.y*E.x,X+=(E.x+x.x)*M,ae+=(E.y+x.y)*M,Z+=M*3;Z===0?ge=Fn[0]:ge=[X/Z,ae/Z];var lo=l.unproject(se(ge));return we([lo.lat+Ne.lat,lo.lng+Ne.lng])}function Ks(i){for(var l=0,d=0,m=0,E=0;E<i.length;E++){var x=we(i[E]);l+=x.lat,d+=x.lng,m++}return we([l/m,d/m])}var Qs={__proto__:null,clipPolygon:ts,polygonCenter:Gs,centroid:Ks};function ns(i,l){if(!l||!i.length)return i.slice();var d=l*l;return i=qa(i,d),i=$a(i,d),i}function la(i,l,d){return Math.sqrt(Sn(i,l,d,!0))}function Yr(i,l,d){return Sn(i,l,d)}function $a(i,l){var d=i.length,m=typeof Uint8Array<"u"?Uint8Array:Array,E=new m(d);E[0]=E[d-1]=1,Ys(i,E,l,0,d-1);var x,M=[];for(x=0;x<d;x++)E[x]&&M.push(i[x]);return M}function Ys(i,l,d,m,E){var x=0,M,Z,X;for(Z=m+1;Z<=E-1;Z++)X=Sn(i[Z],i[m],i[E],!0),X>x&&(M=Z,x=X);x>d&&(l[M]=1,Ys(i,l,d,m,M),Ys(i,l,d,M,E))}function qa(i,l){for(var d=[i[0]],m=1,E=0,x=i.length;m<x;m++)Za(i[m],i[E])>l&&(d.push(i[m]),E=m);return E<x-1&&d.push(i[x-1]),d}var Xs;function rs(i,l,d,m,E){var x=m?Xs:kr(i,d),M=kr(l,d),Z,X,ae;for(Xs=M;;){if(!(x|M))return[i,l];if(x&M)return!1;Z=x||M,X=$t(i,l,Z,d,E),ae=kr(X,d),Z===x?(i=X,x=ae):(l=X,M=ae)}}function $t(i,l,d,m,E){var x=l.x-i.x,M=l.y-i.y,Z=m.min,X=m.max,ae,ge;return d&8?(ae=i.x+x*(X.y-i.y)/M,ge=X.y):d&4?(ae=i.x+x*(Z.y-i.y)/M,ge=Z.y):d&2?(ae=X.x,ge=i.y+M*(X.x-i.x)/x):d&1&&(ae=Z.x,ge=i.y+M*(Z.x-i.x)/x),new re(ae,ge,E)}function kr(i,l){var d=0;return i.x<l.min.x?d|=1:i.x>l.max.x&&(d|=2),i.y<l.min.y?d|=4:i.y>l.max.y&&(d|=8),d}function Za(i,l){var d=l.x-i.x,m=l.y-i.y;return d*d+m*m}function Sn(i,l,d,m){var E=l.x,x=l.y,M=d.x-E,Z=d.y-x,X=M*M+Z*Z,ae;return X>0&&(ae=((i.x-E)*M+(i.y-x)*Z)/X,ae>1?(E=d.x,x=d.y):ae>0&&(E+=M*ae,x+=Z*ae)),M=i.x-E,Z=i.y-x,m?M*M+Z*Z:new re(E,x)}function h(i){return!me(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function y(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),h(i)}function I(i,l){var d,m,E,x,M,Z,X,ae;if(!i||i.length===0)throw new Error("latlngs not passed");h(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ge=we([0,0]),Ne=Ce(i),We=Ne.getNorthWest().distanceTo(Ne.getSouthWest())*Ne.getNorthEast().distanceTo(Ne.getNorthWest());We<1700&&(ge=Ks(i));var Jt=i.length,qt=[];for(d=0;d<Jt;d++){var Fn=we(i[d]);qt.push(l.project(we([Fn.lat-ge.lat,Fn.lng-ge.lng])))}for(d=0,m=0;d<Jt-1;d++)m+=qt[d].distanceTo(qt[d+1])/2;if(m===0)ae=qt[0];else for(d=0,x=0;d<Jt-1;d++)if(M=qt[d],Z=qt[d+1],E=M.distanceTo(Z),x+=E,x>m){X=(x-m)/E,ae=[Z.x-X*(Z.x-M.x),Z.y-X*(Z.y-M.y)];break}var Pn=l.unproject(se(ae));return we([Pn.lat+ge.lat,Pn.lng+ge.lng])}var A={__proto__:null,simplify:ns,pointToSegmentDistance:la,closestPointOnSegment:Yr,clipSegment:rs,_getEdgeIntersection:$t,_getBitCode:kr,_sqClosestPointOnSegment:Sn,isFlat:h,_flat:y,polylineCenter:I},q={project:function(i){return new re(i.lng,i.lat)},unproject:function(i){return new Te(i.y,i.x)},bounds:new U([-180,-90],[180,90])},ee={R:6378137,R_MINOR:6356752314245179e-9,bounds:new U([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,d=this.R,m=i.lat*l,E=this.R_MINOR/d,x=Math.sqrt(1-E*E),M=x*Math.sin(m),Z=Math.tan(Math.PI/4-m/2)/Math.pow((1-M)/(1+M),x/2);return m=-d*Math.log(Math.max(Z,1e-10)),new re(i.lng*l*d,m)},unproject:function(i){for(var l=180/Math.PI,d=this.R,m=this.R_MINOR/d,E=Math.sqrt(1-m*m),x=Math.exp(-i.y/d),M=Math.PI/2-2*Math.atan(x),Z=0,X=.1,ae;Z<15&&Math.abs(X)>1e-7;Z++)ae=E*Math.sin(M),ae=Math.pow((1-ae)/(1+ae),E/2),X=Math.PI/2-2*Math.atan(x*ae)-M,M+=X;return new Te(M*l,i.x*l/d)}},fe={__proto__:null,LonLat:q,Mercator:ee,SphericalMercator:bt},at=a({},Ge,{code:"EPSG:3395",projection:ee,transformation:(function(){var i=.5/(Math.PI*ee.R);return Tr(i,.5,-i,.5)})()}),Dt=a({},Ge,{code:"EPSG:4326",projection:q,transformation:Tr(1/180,1,-1/180,.5)}),Xe=a({},qe,{projection:q,transformation:Tr(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var d=l.lng-i.lng,m=l.lat-i.lat;return Math.sqrt(d*d+m*m)},infinite:!0});qe.Earth=Ge,qe.EPSG3395=at,qe.EPSG3857=Ir,qe.EPSG900913=bi,qe.EPSG4326=Dt,qe.Simple=Xe;var ct=tt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[v(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[v(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ke.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=v(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=v(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return v(i)in this._layers},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},_addLayers:function(i){i=i?me(i)?i:[i]:[];for(var l=0,d=i.length;l<d;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[v(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=v(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,d=this._getZoomSpan();for(var m in this._zoomBoundLayers){var E=this._zoomBoundLayers[m].options;i=E.minZoom===void 0?i:Math.min(i,E.minZoom),l=E.maxZoom===void 0?l:Math.max(l,E.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var yt=ct.extend({initialize:function(i,l){Q(this,l),this._layers={};var d,m;if(i)for(d=0,m=i.length;d<m;d++)this.addLayer(i[d])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),d,m;for(d in this._layers)m=this._layers[d],m[i]&&m[i].apply(m,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return v(i)}}),Xn=function(i,l){return new yt(i,l)},kt=yt.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),yt.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),yt.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new ve;for(var l in this._layers){var d=this._layers[l];i.extend(d.getBounds?d.getBounds():d.getLatLng())}return i}}),is=function(i,l){return new kt(i,l)},pr=ot.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){Q(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var d=this._getIconUrl(i);if(!d){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(m,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(i,l){var d=this.options,m=d[l+"Size"];typeof m=="number"&&(m=[m,m]);var E=se(m),x=se(l==="shadow"&&d.shadowAnchor||d.iconAnchor||E&&E.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(d.className||""),x&&(i.style.marginLeft=-x.x+"px",i.style.marginTop=-x.y+"px"),E&&(i.style.width=E.x+"px",i.style.height=E.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return Pe.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function lc(i){return new pr(i)}var Js=pr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Js.imagePath!="string"&&(Js.imagePath=this._detectIconPath()),(this.options.imagePath||Js.imagePath)+pr.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(d,m,E){var x=m.exec(d);return x&&x[E]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=ze("div","leaflet-default-icon-path",document.body),l=fi(i,"background-image")||fi(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Zl=pn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new In(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),De(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,d=l._map,m=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,x=Tn(l._icon),M=d.getPixelBounds(),Z=d.getPixelOrigin(),X=ne(M.min._subtract(Z).add(E),M.max._subtract(Z).subtract(E));if(!X.contains(x)){var ae=se((Math.max(X.max.x,x.x)-X.max.x)/(M.max.x-X.max.x)-(Math.min(X.min.x,x.x)-X.min.x)/(M.min.x-X.min.x),(Math.max(X.max.y,x.y)-X.max.y)/(M.max.y-X.max.y)-(Math.min(X.min.y,x.y)-X.min.y)/(M.min.y-X.min.y)).multiplyBy(m);d.panBy(ae,{animate:!1}),this._draggable._newPos._add(ae),this._draggable._startPos._add(ae),Ue(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=z(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(H(this._panRequest),this._panRequest=z(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,d=l._shadow,m=Tn(l._icon),E=l._map.layerPointToLatLng(m);d&&Ue(d,m),l._latlng=E,i.latlng=E,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){H(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Xr=ct.extend({options:{icon:new Js,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){Q(this,l),this._latlng=we(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=we(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=i.icon.createIcon(this._icon),m=!1;d!==this._icon&&(this._icon&&this._removeIcon(),m=!0,i.title&&(d.title=i.title),d.tagName==="IMG"&&(d.alt=i.alt||"")),De(d,l),i.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Re(d,"focus",this._panOnFocus,this);var E=i.icon.createShadow(this._shadow),x=!1;E!==this._shadow&&(this._removeShadow(),x=!0),E&&(De(E,l),E.alt=""),this._shadow=E,i.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&x&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ut(this._icon,"focus",this._panOnFocus,this),pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Ue(this._icon,i),this._shadow&&Ue(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(De(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Zl)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Zl(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&wt(this._icon,i),this._shadow&&wt(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,d=l.iconSize?se(l.iconSize):se(0,0),m=l.iconAnchor?se(l.iconAnchor):se(0,0);i.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:d.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fd(i,l){return new Xr(i,l)}var _i=ct.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return Q(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ga=_i.extend({options:{fill:!0,radius:10},initialize:function(i,l){Q(this,l),this._latlng=we(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=we(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return _i.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,d=this._clickTolerance(),m=[i+d,l+d];this._pxBounds=new U(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function uc(i,l){return new Ga(i,l)}var Ka=Ga.extend({initialize:function(i,l,d){if(typeof l=="number"&&(l=a({},d,{radius:l})),Q(this,l),this._latlng=we(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new ve(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:_i.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,d=this._map,m=d.options.crs;if(m.distance===Ge.distance){var E=Math.PI/180,x=this._mRadius/Ge.R/E,M=d.project([l+x,i]),Z=d.project([l-x,i]),X=M.add(Z).divideBy(2),ae=d.unproject(X).lat,ge=Math.acos((Math.cos(x*E)-Math.sin(l*E)*Math.sin(ae*E))/(Math.cos(l*E)*Math.cos(ae*E)))/E;(isNaN(ge)||ge===0)&&(ge=x/Math.cos(Math.PI/180*l)),this._point=X.subtract(d.getPixelOrigin()),this._radius=isNaN(ge)?0:X.x-d.project([ae,i-ge]).x,this._radiusY=X.y-M.y}else{var Ne=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(Ne).x}this._updateBounds()}});function ua(i,l,d){return new Ka(i,l,d)}var Vn=_i.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){Q(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,d=null,m=Sn,E,x,M=0,Z=this._parts.length;M<Z;M++)for(var X=this._parts[M],ae=1,ge=X.length;ae<ge;ae++){E=X[ae-1],x=X[ae];var Ne=m(i,E,x,!0);Ne<l&&(l=Ne,d=m(i,E,x))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return I(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=we(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new ve,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return h(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],d=h(i),m=0,E=i.length;m<E;m++)d?(l[m]=we(i[m]),this._bounds.extend(l[m])):l[m]=this._convertLatLngs(i[m]);return l},_project:function(){var i=new U;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new re(i,i);this._rawPxBounds&&(this._pxBounds=new U([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,d){var m=i[0]instanceof Te,E=i.length,x,M;if(m){for(M=[],x=0;x<E;x++)M[x]=this._map.latLngToLayerPoint(i[x]),d.extend(M[x]);l.push(M)}else for(x=0;x<E;x++)this._projectLatlngs(i[x],l,d)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,m,E,x,M,Z,X;for(d=0,E=0,x=this._rings.length;d<x;d++)for(X=this._rings[d],m=0,M=X.length;m<M-1;m++)Z=rs(X[m],X[m+1],i,m,!0),Z&&(l[E]=l[E]||[],l[E].push(Z[0]),(Z[1]!==X[m+1]||m===M-2)&&(l[E].push(Z[1]),E++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,d=0,m=i.length;d<m;d++)i[d]=ns(i[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var d,m,E,x,M,Z,X=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(d=0,x=this._parts.length;d<x;d++)for(Z=this._parts[d],m=0,M=Z.length,E=M-1;m<M;E=m++)if(!(!l&&m===0)&&la(i,Z[E],Z[m])<=X)return!0;return!1}});function pd(i,l){return new Vn(i,l)}Vn._flat=y;var Jr=Vn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Gs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=Vn.prototype._convertLatLngs.call(this,i),d=l.length;return d>=2&&l[0]instanceof Te&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(i){Vn.prototype._setLatLngs.call(this,i),h(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return h(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,d=new re(l,l);if(i=new U(i.min.subtract(d),i.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,E=this._rings.length,x;m<E;m++)x=ts(this._rings[m],i,!0),x.length&&this._parts.push(x)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,d,m,E,x,M,Z,X,ae;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(x=0,X=this._parts.length;x<X;x++)for(d=this._parts[x],M=0,ae=d.length,Z=ae-1;M<ae;Z=M++)m=d[M],E=d[Z],m.y>i.y!=E.y>i.y&&i.x<(E.x-m.x)*(i.y-m.y)/(E.y-m.y)+m.x&&(l=!l);return l||Vn.prototype._containsPoint.call(this,i,!0)}});function md(i,l){return new Jr(i,l)}var Rr=kt.extend({initialize:function(i,l){Q(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=me(i)?i:i.features,d,m,E;if(l){for(d=0,m=l.length;d<m;d++)E=l[d],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var x=this.options;if(x.filter&&!x.filter(i))return this;var M=eo(i,x);return M?(M.feature=el(i),M.defaultOptions=M.options,this.resetStyle(M),x.onEachFeature&&x.onEachFeature(i,M),this.addLayer(M)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=a({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function eo(i,l){var d=i.type==="Feature"?i.geometry:i,m=d?d.coordinates:null,E=[],x=l&&l.pointToLayer,M=l&&l.coordsToLatLng||Ya,Z,X,ae,ge;if(!m&&!d)return null;switch(d.type){case"Point":return Z=M(m),Qa(x,i,Z,l);case"MultiPoint":for(ae=0,ge=m.length;ae<ge;ae++)Z=M(m[ae]),E.push(Qa(x,i,Z,l));return new kt(E);case"LineString":case"MultiLineString":return X=ca(m,d.type==="LineString"?0:1,M),new Vn(X,l);case"Polygon":case"MultiPolygon":return X=ca(m,d.type==="Polygon"?1:2,M),new Jr(X,l);case"GeometryCollection":for(ae=0,ge=d.geometries.length;ae<ge;ae++){var Ne=eo({geometry:d.geometries[ae],type:"Feature",properties:i.properties},l);Ne&&E.push(Ne)}return new kt(E);case"FeatureCollection":for(ae=0,ge=d.features.length;ae<ge;ae++){var We=eo(d.features[ae],l);We&&E.push(We)}return new kt(E);default:throw new Error("Invalid GeoJSON object.")}}function Qa(i,l,d,m){return i?i(l,d):new Xr(d,m&&m.markersInheritOptions&&m)}function Ya(i){return new Te(i[1],i[0],i[2])}function ca(i,l,d){for(var m=[],E=0,x=i.length,M;E<x;E++)M=l?ca(i[E],l-1,d):(d||Ya)(i[E]),m.push(M);return m}function Xa(i,l){return i=we(i),i.alt!==void 0?[k(i.lng,l),k(i.lat,l),k(i.alt,l)]:[k(i.lng,l),k(i.lat,l)]}function Ja(i,l,d,m){for(var E=[],x=0,M=i.length;x<M;x++)E.push(l?Ja(i[x],h(i[x])?0:l-1,d,m):Xa(i[x],m));return!l&&d&&E.length>0&&E.push(E[0].slice()),E}function to(i,l){return i.feature?a({},i.feature,{geometry:l}):el(l)}function el(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Gl={toGeoJSON:function(i){return to(this,{type:"Point",coordinates:Xa(this.getLatLng(),i)})}};Xr.include(Gl),Ka.include(Gl),Ga.include(Gl),Vn.include({toGeoJSON:function(i){var l=!h(this._latlngs),d=Ja(this._latlngs,l?1:0,!1,i);return to(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Jr.include({toGeoJSON:function(i){var l=!h(this._latlngs),d=l&&!h(this._latlngs[0]),m=Ja(this._latlngs,d?2:l?1:0,!0,i);return l||(m=[m]),to(this,{type:(d?"Multi":"")+"Polygon",coordinates:m})}}),yt.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(i).geometry.coordinates)}),to(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var d=l==="GeometryCollection",m=[];return this.eachLayer(function(E){if(E.toGeoJSON){var x=E.toGeoJSON(i);if(d)m.push(x.geometry);else{var M=el(x);M.type==="FeatureCollection"?m.push.apply(m,M.features):m.push(M)}}}),d?to(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function cc(i,l){return new Rr(i,l)}var mr=cc,vi=ct.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,d){this._url=i,this._bounds=Ce(l),Q(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(De(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&qr(this._image),this},bringToBack:function(){return this._map&&hr(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Ce(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:ze("img");if(De(l,"leaflet-image-layer"),this._zoomAnimated&&De(l,"leaflet-zoom-animated"),this.options.className&&De(l,this.options.className),l.onselectstart=C,l.onmousemove=C,l.onload=f(this.fire,this,"load"),l.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;En(this._image,d,l)},_reset:function(){var i=this._image,l=new U(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();Ue(i,l.min),i.style.width=d.x+"px",i.style.height=d.y+"px"},_updateOpacity:function(){wt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),hc=function(i,l,d){return new vi(i,l,d)},Kl=vi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:ze("video");if(De(l,"leaflet-image-layer"),this._zoomAnimated&&De(l,"leaflet-zoom-animated"),this.options.className&&De(l,this.options.className),l.onselectstart=C,l.onmousemove=C,l.onloadeddata=f(this.fire,this,"load"),i){for(var d=l.getElementsByTagName("source"),m=[],E=0;E<d.length;E++)m.push(d[E].src);this._url=d.length>0?m:[l.src];return}me(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var x=0;x<this._url.length;x++){var M=ze("source");M.src=this._url[x],l.appendChild(M)}}});function dc(i,l,d){return new Kl(i,l,d)}var Ql=vi.extend({_initImage:function(){var i=this._image=this._url;De(i,"leaflet-image-layer"),this._zoomAnimated&&De(i,"leaflet-zoom-animated"),this.options.className&&De(i,this.options.className),i.onselectstart=C,i.onmousemove=C}});function Yl(i,l,d){return new Ql(i,l,d)}var Lr=ct.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof Te||me(i))?(this._latlng=we(i),Q(this,l)):(Q(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&wt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&wt(this._container,1),this.bringToFront(),this.options.interactive&&(De(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(wt(this._container,0),this._removeTimeout=setTimeout(f(pt,void 0,this._container),200)):pt(this._container),this.options.interactive&&(mt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=we(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&qr(this._container),this},bringToBack:function(){return this._map&&hr(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof kt){l=null;var d=this._source._layers;for(var m in d)if(d[m]._map){l=d[m];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=se(this.options.offset),d=this._getAnchor();this._zoomAnimated?Ue(this._container,i.add(d)):l=l.add(i).add(d);var m=this._containerBottom=-l.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=m+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});Ke.include({_initOverlay:function(i,l,d,m){var E=l;return E instanceof i||(E=new i(m).setContent(l)),d&&E.setLatLng(d),E}}),ct.include({_initOverlay:function(i,l,d,m){var E=d;return E instanceof i?(Q(E,m),E._source=this):(E=l&&!m?l:new i(m,this),E.setContent(d)),E}});var tl=Lr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Lr.prototype.openOn.call(this,i)},onAdd:function(i){Lr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof _i||this._source.on("preclick",fn))},onRemove:function(i){Lr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof _i||this._source.off("preclick",fn))},getEvents:function(){var i=Lr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=ze("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=ze("div",i+"-content-wrapper",l);if(this._contentNode=ze("div",i+"-content",d),gi(l),Zr(this._contentNode),Re(l,"contextmenu",fn),this._tipContainer=ze("div",i+"-tip-container",l),this._tip=ze("div",i+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=ze("a",i+"-close-button",l);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',Re(m,"click",function(E){gt(E),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var d=i.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var m=i.offsetHeight,E=this.options.maxHeight,x="leaflet-popup-scrolled";E&&m>E?(l.height=E+"px",De(i,x)):mt(i,x),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),d=this._getAnchor();Ue(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(fi(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,m=this._containerWidth,E=new re(this._containerLeft,-d-this._containerBottom);E._add(Tn(this._container));var x=i.layerPointToContainerPoint(E),M=se(this.options.autoPanPadding),Z=se(this.options.autoPanPaddingTopLeft||M),X=se(this.options.autoPanPaddingBottomRight||M),ae=i.getSize(),ge=0,Ne=0;x.x+m+X.x>ae.x&&(ge=x.x+m-ae.x+X.x),x.x-ge-Z.x<0&&(ge=x.x-Z.x),x.y+d+X.y>ae.y&&(Ne=x.y+d-ae.y+X.y),x.y-Ne-Z.y<0&&(Ne=x.y-Z.y),(ge||Ne)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([ge,Ne]))}},_getAnchor:function(){return se(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),no=function(i,l){return new tl(i,l)};Ke.mergeOptions({closePopupOnClick:!0}),Ke.include({openPopup:function(i,l,d){return this._initOverlay(tl,i,l,d).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),ct.include({bindPopup:function(i,l){return this._popup=this._initOverlay(tl,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof kt||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Xt(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof _i)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var ro=Lr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Lr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Lr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Lr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ze("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,d,m=this._map,E=this._container,x=m.latLngToContainerPoint(m.getCenter()),M=m.layerPointToContainerPoint(i),Z=this.options.direction,X=E.offsetWidth,ae=E.offsetHeight,ge=se(this.options.offset),Ne=this._getAnchor();Z==="top"?(l=X/2,d=ae):Z==="bottom"?(l=X/2,d=0):Z==="center"?(l=X/2,d=ae/2):Z==="right"?(l=0,d=ae/2):Z==="left"?(l=X,d=ae/2):M.x<x.x?(Z="right",l=0,d=ae/2):(Z="left",l=X+(ge.x+Ne.x)*2,d=ae/2),i=i.subtract(se(l,d,!0)).add(ge).add(Ne),mt(E,"leaflet-tooltip-right"),mt(E,"leaflet-tooltip-left"),mt(E,"leaflet-tooltip-top"),mt(E,"leaflet-tooltip-bottom"),De(E,"leaflet-tooltip-"+Z),Ue(E,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&wt(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return se(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ha=function(i,l){return new ro(i,l)};Ke.include({openTooltip:function(i,l,d){return this._initOverlay(ro,i,l,d).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),ct.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ro,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof kt||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(Re(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Re(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,d,m;this._tooltip.options.sticky&&i.originalEvent&&(d=this._map.mouseEventToContainerPoint(i.originalEvent),m=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(l)}});var nl=pr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Gi(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var m=se(d.bgPos);l.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function fc(i){return new nl(i)}pr.Default=Js;var yi=ct.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Pe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){Q(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),pt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(qr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(hr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=T(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof re?i:new re(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,d=-i(-1/0,1/0),m=0,E=l.length,x;m<E;m++)x=l[m].style.zIndex,l[m]!==this._container&&x&&(d=i(d,+x));isFinite(d)&&(this.options.zIndex=d+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Pe.ielt9){wt(this._container,this.options.opacity);var i=+new Date,l=!1,d=!1;for(var m in this._tiles){var E=this._tiles[m];if(!(!E.current||!E.loaded)){var x=Math.min(1,(i-E.loaded)/200);wt(E.el,x),x<1?l=!0:(E.active?d=!0:this._onOpaqueTile(E),E.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(H(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this))}},_onOpaqueTile:C,_initContainer:function(){this._container||(this._container=ze("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===i?(this._levels[d].el.style.zIndex=l-Math.abs(i-d),this._onUpdateLevel(d)):(pt(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var m=this._levels[i],E=this._map;return m||(m=this._levels[i]={},m.el=ze("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=l,m.origin=E.project(E.unproject(E.getPixelOrigin()),i).round(),m.zoom=i,this._setZoomTransform(m,E.getCenter(),E.getZoom()),C(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:C,_onRemoveLevel:C,_onCreateLevel:C,_pruneTiles:function(){if(this._map){var i,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var m=l.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)pt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,d,m){var E=Math.floor(i/2),x=Math.floor(l/2),M=d-1,Z=new re(+E,+x);Z.z=+M;var X=this._tileCoordsToKey(Z),ae=this._tiles[X];return ae&&ae.active?(ae.retain=!0,!0):(ae&&ae.loaded&&(ae.retain=!0),M>m?this._retainParent(E,x,M,m):!1)},_retainChildren:function(i,l,d,m){for(var E=2*i;E<2*i+2;E++)for(var x=2*l;x<2*l+2;x++){var M=new re(E,x);M.z=d+1;var Z=this._tileCoordsToKey(M),X=this._tiles[Z];if(X&&X.active){X.retain=!0;continue}else X&&X.loaded&&(X.retain=!0);d+1<m&&this._retainChildren(E,x,d+1,m)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,d,m){var E=Math.round(l);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var x=this.options.updateWhenZooming&&E!==this._tileZoom;(!m||x)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(i),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],i,l)},_setZoomTransform:function(i,l,d){var m=this._map.getZoomScale(d,i.zoom),E=i.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(l,d)).round();Pe.any3d?En(i.el,E,m):Ue(i.el,E)},_resetGrid:function(){var i=this._map,l=i.options.crs,d=this._tileSize=this.getTileSize(),m=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],m).x/d.x),Math.ceil(i.project([0,l.wrapLng[1]],m).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],m).y/d.x),Math.ceil(i.project([l.wrapLat[1],0],m).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),m=l.getZoomScale(d,this._tileZoom),E=l.project(i,this._tileZoom).floor(),x=l.getSize().divideBy(m*2);return new U(E.subtract(x),E.add(x))},_update:function(i){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(i),E=this._pxBoundsToTileRange(m),x=E.getCenter(),M=[],Z=this.options.keepBuffer,X=new U(E.getBottomLeft().subtract([Z,-Z]),E.getTopRight().add([Z,-Z]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ae in this._tiles){var ge=this._tiles[ae].coords;(ge.z!==this._tileZoom||!X.contains(new re(ge.x,ge.y)))&&(this._tiles[ae].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(i,d);return}for(var Ne=E.min.y;Ne<=E.max.y;Ne++)for(var We=E.min.x;We<=E.max.x;We++){var Jt=new re(We,Ne);if(Jt.z=this._tileZoom,!!this._isValidTile(Jt)){var qt=this._tiles[this._tileCoordsToKey(Jt)];qt?qt.current=!0:M.push(Jt)}}if(M.sort(function(Pn,lo){return Pn.distanceTo(x)-lo.distanceTo(x)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Fn=document.createDocumentFragment();for(We=0;We<M.length;We++)this._addTile(M[We],Fn);this._level.el.appendChild(Fn)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(i.x<d.min.x||i.x>d.max.x)||!l.wrapLat&&(i.y<d.min.y||i.y>d.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(i);return Ce(this.options.bounds).overlaps(m)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,d=this.getTileSize(),m=i.scaleBy(d),E=m.add(d),x=l.unproject(m,i.z),M=l.unproject(E,i.z);return[x,M]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),d=new ve(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),d=new re(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(i){var l=this._tiles[i];l&&(pt(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){De(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=C,i.onmousemove=C,Pe.ielt9&&this.options.opacity<1&&wt(i,this.options.opacity)},_addTile:function(i,l){var d=this._getTilePos(i),m=this._tileCoordsToKey(i),E=this.createTile(this._wrapCoords(i),f(this._tileReady,this,i));this._initTile(E),this.createTile.length<2&&z(f(this._tileReady,this,i,null,E)),Ue(E,d),this._tiles[m]={el:E,coords:i,current:!0},l.appendChild(E),this.fire("tileloadstart",{tile:E,coords:i})},_tileReady:function(i,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:i});var m=this._tileCoordsToKey(i);d=this._tiles[m],d&&(d.loaded=+new Date,this._map._fadeAnimated?(wt(d.el,0),H(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(De(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Pe.ielt9||!this._map._fadeAnimated?z(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new re(this._wrapX?P(i.x,this._wrapX):i.x,this._wrapY?P(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new U(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function io(i){return new yi(i)}var wi=yi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=Q(this,l),l.detectRetina&&Pe.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var d=document.createElement("img");return Re(d,"load",f(this._tileOnLoad,this,l,d)),Re(d,"error",f(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(i),d},getTileUrl:function(i){var l={r:Pe.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=d),l["-y"]=d}return de(this._url,a(l,this.options))},_tileOnLoad:function(i,l){Pe.ielt9?setTimeout(f(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,d){var m=this.options.errorTileUrl;m&&l.getAttribute("src")!==m&&(l.src=m),i(d,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,m=this.options.zoomOffset;return d&&(i=l-i),i+m},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=C,l.onerror=C,!l.complete)){l.src=rt;var d=this._tiles[i].coords;pt(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",rt),yi.prototype._removeTile.call(this,i)},_tileReady:function(i,l,d){if(!(!this._map||d&&d.getAttribute("src")===rt))return yi.prototype._tileReady.call(this,i,l,d)}});function Xl(i,l){return new wi(i,l)}var da=wi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var d=a({},this.defaultWmsParams);for(var m in l)m in this.options||(d[m]=l[m]);l=Q(this,l);var E=l.detectRetina&&Pe.retina?2:1,x=this.getTileSize();d.width=x.x*E,d.height=x.y*E,this.wmsParams=d},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,wi.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),d=this._crs,m=ne(d.project(l[0]),d.project(l[1])),E=m.min,x=m.max,M=(this._wmsVersion>=1.3&&this._crs===Dt?[E.y,E.x,x.y,x.x]:[E.x,E.y,x.x,x.y]).join(","),Z=wi.prototype.getTileUrl.call(this,i);return Z+G(this.wmsParams,Z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(i,l){return a(this.wmsParams,i),l||this.redraw(),this}});function pc(i,l){return new da(i,l)}wi.WMS=da,Xl.wms=pc;var Nr=ct.extend({options:{padding:.1},initialize:function(i){Q(this,i),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),De(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var d=this._map.getZoomScale(l,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,l),x=m.multiplyBy(-d).add(E).subtract(this._map._getNewPixelOrigin(i,l));Pe.any3d?En(this._container,x,d):Ue(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new U(d,d.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jl=Nr.extend({options:{tolerance:0},getEvents:function(){var i=Nr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Nr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Re(i,"mousemove",this._onMouseMove,this),Re(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Re(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){H(this._redrawRequest),delete this._ctx,pt(this._container),ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nr.prototype._update.call(this);var i=this._bounds,l=this._container,d=i.getSize(),m=Pe.retina?2:1;Ue(l,i.min),l.width=m*d.x,l.height=m*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",Pe.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Nr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[v(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,d=l.next,m=l.prev;d?d.prev=m:this._drawLast=m,m?m.next=d:this._drawFirst=d,delete i._order,delete this._layers[v(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),d=[],m,E;for(E=0;E<l.length;E++){if(m=Number(l[E]),isNaN(m))return;d.push(m)}i.options._dashArray=d}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||z(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new U,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)i=m.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var d,m,E,x,M=i._parts,Z=M.length,X=this._ctx;if(Z){for(X.beginPath(),d=0;d<Z;d++){for(m=0,E=M[d].length;m<E;m++)x=M[d][m],X[m?"lineTo":"moveTo"](x.x,x.y);l&&X.closePath()}this._fillStroke(X,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,d=this._ctx,m=Math.max(Math.round(i._radius),1),E=(Math.max(Math.round(i._radiusY),1)||m)/m;E!==1&&(d.save(),d.scale(1,E)),d.beginPath(),d.arc(l.x,l.y/E,m,0,Math.PI*2,!1),E!==1&&d.restore(),this._fillStroke(d,i)}},_fillStroke:function(i,l){var d=l.options;d.fill&&(i.globalAlpha=d.fillOpacity,i.fillStyle=d.fillColor||d.color,i.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=d.opacity,i.lineWidth=d.weight,i.strokeStyle=d.color,i.lineCap=d.lineCap,i.lineJoin=d.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),d,m,E=this._drawFirst;E;E=E.next)d=E.layer,d.options.interactive&&d._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);this._fireEvent(m?[m]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(mt(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var d,m,E=this._drawFirst;E;E=E.next)d=E.layer,d.options.interactive&&d._containsPoint(l)&&(m=d);m!==this._hoveredLayer&&(this._handleMouseOut(i),m&&(De(this._container,"leaflet-interactive"),this._fireEvent([m],i,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,d){this._map._fireDOMEvent(l,d||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var d=l.next,m=l.prev;if(d)d.prev=m;else return;m?m.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var d=l.next,m=l.prev;if(m)m.next=d;else return;d?d.prev=m:m&&(this._drawLast=m),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function eu(i){return Pe.canvas?new Jl(i):null}var so=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),mc={_initContainer:function(){this._container=ze("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Nr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=so("shape");De(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=so("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[v(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;pt(l),i.removeInteractiveTarget(l),delete this._layers[v(i)]},_updateStyle:function(i){var l=i._stroke,d=i._fill,m=i.options,E=i._container;E.stroked=!!m.stroke,E.filled=!!m.fill,m.stroke?(l||(l=i._stroke=so("stroke")),E.appendChild(l),l.weight=m.weight+"px",l.color=m.color,l.opacity=m.opacity,m.dashArray?l.dashStyle=me(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=m.lineCap.replace("butt","flat"),l.joinstyle=m.lineJoin):l&&(E.removeChild(l),i._stroke=null),m.fill?(d||(d=i._fill=so("fill")),E.appendChild(d),d.color=m.fillColor||m.color,d.opacity=m.fillOpacity):d&&(E.removeChild(d),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),d=Math.round(i._radius),m=Math.round(i._radiusY||d);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+m+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){qr(i._container)},_bringToBack:function(i){hr(i._container)}},gr=Pe.vml?so:Oi,ss=Nr.extend({_initContainer:function(){this._container=gr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=gr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pt(this._container),ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nr.prototype._update.call(this);var i=this._bounds,l=i.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),Ue(d,i.min),d.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=gr("path");i.options.className&&De(l,i.options.className),i.options.interactive&&De(l,"leaflet-interactive"),this._updateStyle(i),this._layers[v(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){pt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[v(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,d=i.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,xs(i._parts,l))},_updateCircle:function(i){var l=i._point,d=Math.max(Math.round(i._radius),1),m=Math.max(Math.round(i._radiusY),1)||d,E="a"+d+","+m+" 0 1,0 ",x=i._empty()?"M0 0":"M"+(l.x-d)+","+l.y+E+d*2+",0 "+E+-d*2+",0 ";this._setPath(i,x)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){qr(i._path)},_bringToBack:function(i){hr(i._path)}});Pe.vml&&ss.include(mc);function rl(i){return Pe.svg||Pe.vml?new ss(i):null}Ke.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&eu(i)||rl(i)}});var gc=Jr.extend({initialize:function(i,l){Jr.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Ce(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function gd(i,l){return new gc(i,l)}ss.create=gr,ss.pointsToPath=xs,Rr.geometryToLayer=eo,Rr.coordsToLatLng=Ya,Rr.coordsToLatLngs=ca,Rr.latLngToCoords=Xa,Rr.latLngsToCoords=Ja,Rr.getFeature=to,Rr.asFeature=el,Ke.mergeOptions({boxZoom:!0});var oo=pn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Re(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ze(),Bs(),this._startPoint=this._map.mouseEventToContainerPoint(i),Re(document,{contextmenu:Xt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=ze("div","leaflet-zoom-box",this._container),De(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new U(this._point,this._startPoint),d=l.getSize();Ue(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(pt(this._box),mt(this._container,"leaflet-crosshair")),Zn(),Hs(),ut(document,{contextmenu:Xt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var l=new ve(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ke.addInitHook("addHandler","boxZoom",oo),Ke.mergeOptions({doubleClickZoom:!0});var _c=pn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,d=l.getZoom(),m=l.options.zoomDelta,E=i.originalEvent.shiftKey?d-m:d+m;l.options.doubleClickZoom==="center"?l.setZoom(E):l.setZoomAround(i.containerPoint,E)}});Ke.addInitHook("addHandler","doubleClickZoom",_c),Ke.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var tu=pn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new In(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}De(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ce(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),d=this._initialWorldOffset,m=this._draggable._newPos.x,E=(m-l+d)%i+l-d,x=(m+l+d)%i-l-d,M=Math.abs(E+d)<Math.abs(x+d)?E:x;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(i){var l=this._map,d=l.options,m=!d.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),m)l.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),x=(this._lastTime-this._times[0])/1e3,M=d.easeLinearity,Z=E.multiplyBy(M/x),X=Z.distanceTo([0,0]),ae=Math.min(d.inertiaMaxSpeed,X),ge=Z.multiplyBy(ae/X),Ne=ae/(d.inertiaDeceleration*M),We=ge.multiplyBy(-Ne/2).round();!We.x&&!We.y?l.fire("moveend"):(We=l._limitOffset(We,l.options.maxBounds),z(function(){l.panBy(We,{duration:Ne,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});Ke.addInitHook("addHandler","dragging",tu),Ke.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nu=pn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Re(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,d=i.scrollTop||l.scrollTop,m=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(m,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},d=this.keyCodes,m,E;for(m=0,E=d.left.length;m<E;m++)l[d.left[m]]=[-1*i,0];for(m=0,E=d.right.length;m<E;m++)l[d.right[m]]=[i,0];for(m=0,E=d.down.length;m<E;m++)l[d.down[m]]=[0,i];for(m=0,E=d.up.length;m<E;m++)l[d.up[m]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},d=this.keyCodes,m,E;for(m=0,E=d.zoomIn.length;m<E;m++)l[d.zoomIn[m]]=i;for(m=0,E=d.zoomOut.length;m<E;m++)l[d.zoomOut[m]]=-i},_addHooks:function(){Re(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,d=this._map,m;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(m=this._panKeys[l],i.shiftKey&&(m=se(m).multiplyBy(3)),d.options.maxBounds&&(m=d._limitOffset(se(m),d.options.maxBounds)),d.options.worldCopyJump){var E=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(m)));d.panTo(E)}else d.panBy(m)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Xt(i)}}});Ke.addInitHook("addHandler","keyboard",nu),Ke.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vt=pn.extend({addHooks:function(){Re(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ut(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=Wa(i),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var m=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),m),Xt(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),d=this._map.options.zoomSnap||0;i._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,x=d?Math.ceil(E/d)*d:E,M=i._limitZoom(l+(this._delta>0?x:-x))-l;this._delta=0,this._startTime=null,M&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+M):i.setZoomAround(this._lastMousePos,l+M))}});Ke.addInitHook("addHandler","scrollWheelZoom",vt);var ru=600;Ke.mergeOptions({tapHold:Pe.touchNative&&Pe.safari&&Pe.mobile,tapTolerance:15});var fa=pn.extend({addHooks:function(){Re(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new re(l.clientX,l.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(Re(document,"touchend",gt),Re(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),ru),Re(document,"touchend touchcancel contextmenu",this._cancel,this),Re(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){ut(document,"touchend",gt),ut(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),ut(document,"touchend touchcancel contextmenu",this._cancel,this),ut(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new re(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var d=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Ke.addInitHook("addHandler","tapHold",fa),Ke.mergeOptions({touchZoom:Pe.touch,bounceAtZoomLimits:!0});var ao=pn.extend({addHooks:function(){De(this._map._container,"leaflet-touch-zoom"),Re(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(m)._divideBy(2))),this._startDist=d.distanceTo(m),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Re(document,"touchmove",this._onTouchMove,this),Re(document,"touchend touchcancel",this._onTouchEnd,this),gt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]),E=d.distanceTo(m)/this._startDist;if(this._zoom=l.getScaleZoom(E,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&E<1||this._zoom>l.getMaxZoom()&&E>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var x=d._add(m)._divideBy(2)._subtract(this._centerPoint);if(E===1&&x.x===0&&x.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(x),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),H(this._animRequest);var M=f(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=z(M,this,!0),gt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,H(this._animRequest),ut(document,"touchmove",this._onTouchMove,this),ut(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ke.addInitHook("addHandler","touchZoom",ao),Ke.BoxZoom=oo,Ke.DoubleClickZoom=_c,Ke.Drag=tu,Ke.Keyboard=nu,Ke.ScrollWheelZoom=vt,Ke.TapHold=fa,Ke.TouchZoom=ao,t.Bounds=U,t.Browser=Pe,t.CRS=qe,t.Canvas=Jl,t.Circle=Ka,t.CircleMarker=Ga,t.Class=ot,t.Control=ln,t.DivIcon=nl,t.DivOverlay=Lr,t.DomEvent=Ji,t.DomUtil=mi,t.Draggable=In,t.Evented=tt,t.FeatureGroup=kt,t.GeoJSON=Rr,t.GridLayer=yi,t.Handler=pn,t.Icon=pr,t.ImageOverlay=vi,t.LatLng=Te,t.LatLngBounds=ve,t.Layer=ct,t.LayerGroup=yt,t.LineUtil=A,t.Map=Ke,t.Marker=Xr,t.Mixin=Kr,t.Path=_i,t.Point=re,t.PolyUtil=Qs,t.Polygon=Jr,t.Polyline=Vn,t.Popup=tl,t.PosAnimation=es,t.Projection=fe,t.Rectangle=gc,t.Renderer=Nr,t.SVG=ss,t.SVGOverlay=Ql,t.TileLayer=wi,t.Tooltip=ro,t.Transformation=ar,t.Util=O,t.VideoOverlay=Kl,t.bind=f,t.bounds=ne,t.canvas=eu,t.circle=ua,t.circleMarker=uc,t.control=Ht,t.divIcon=fc,t.extend=a,t.featureGroup=is,t.geoJSON=cc,t.geoJson=mr,t.gridLayer=io,t.icon=lc,t.imageOverlay=hc,t.latLng=we,t.latLngBounds=Ce,t.layerGroup=Xn,t.map=Dn,t.marker=fd,t.point=se,t.polygon=md,t.polyline=pd,t.popup=no,t.rectangle=gd,t.setOptions=Q,t.stamp=v,t.svg=rl,t.svgOverlay=Yl,t.tileLayer=Xl,t.tooltip=ha,t.transformation=Tr,t.version=s,t.videoOverlay=dc;var vc=window.L;t.noConflict=function(){return window.L=vc,this},window.L=t}))})(xu,xu.exports)),xu.exports}var ac=pk();const mk=Xv(ac);function Em(r,e,t){return Object.freeze({instance:r,context:e,container:t})}function Tm(r,e){return e==null?function(s,a){const c=te.useRef();return c.current||(c.current=r(s,a)),c}:function(s,a){const c=te.useRef();c.current||(c.current=r(s,a));const f=te.useRef(s),{instance:_}=c.current;return te.useEffect(function(){f.current!==s&&(e(_,s,f.current),f.current=s)},[_,s,a]),c}}function gk(r,e){te.useEffect(function(){return(e.layerContainer??e.map).addLayer(r.instance),function(){var c;(c=e.layerContainer)==null||c.removeLayer(r.instance),e.map.removeLayer(r.instance)}},[e,r])}function $0(r){return function(t){const s=ym(),a=r(wm(t,s),s);return j0(s.map,t.attribution),W0(a.current,t.eventHandlers),gk(a.current,s),a}}function _k(r,e){const t=Tm(r,e),s=$0(t);return uk(s)}function vk(r,e){const t=Tm(r),s=dk(t,e);return ck(s)}function yk(r,e){const t=Tm(r,e),s=$0(t);return hk(s)}function wk(r,e,t){const{opacity:s,zIndex:a}=e;s!=null&&s!==t.opacity&&r.setOpacity(s),a!=null&&a!==t.zIndex&&r.setZIndex(a)}function Ek(){return ym().map}function Tk(r){const e=Ek();return te.useEffect(function(){return e.on(r),function(){e.off(r)}},[e,r]),e}function mp(){return mp=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},mp.apply(this,arguments)}function Ik({bounds:r,boundsOptions:e,center:t,children:s,className:a,id:c,placeholder:f,style:_,whenReady:v,zoom:T,...P},C){const[k]=te.useState({className:a,id:c,style:_}),[$,W]=te.useState(null);te.useImperativeHandle(C,()=>($==null?void 0:$.map)??null,[$]);const Q=te.useCallback(pe=>{if(pe!==null&&$===null){const de=new ac.Map(pe,P);t!=null&&T!=null?de.setView(t,T):r!=null&&de.fitBounds(r,e),v!=null&&de.whenReady(v),W(ak(de))}},[]);te.useEffect(()=>()=>{$==null||$.map.remove()},[$]);const G=$?Rl.createElement(H0,{value:$},s):f??null;return Rl.createElement("div",mp({},k,{ref:Q}),G)}const Sk=te.forwardRef(Ik),Pk=_k(function({position:e,...t},s){const a=new ac.Marker(e,t);return Em(a,lk(s,{overlayContainer:a}))},function(e,t,s){t.position!==s.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==s.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==s.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==s.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==s.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),xk=vk(function(e,t){const s=new ac.Popup(e,t.overlayContainer);return Em(s,t)},function(e,t,{position:s},a){te.useEffect(function(){const{instance:f}=e;function _(T){T.popup===f&&(f.update(),a(!0))}function v(T){T.popup===f&&a(!1)}return t.map.on({popupopen:_,popupclose:v}),t.overlayContainer==null?(s!=null&&f.setLatLng(s),f.openOn(t.map)):t.overlayContainer.bindPopup(f),function(){var P;t.map.off({popupopen:_,popupclose:v}),(P=t.overlayContainer)==null||P.unbindPopup(),t.map.removeLayer(f)}},[e,t,a,s])}),Ck=yk(function({url:e,...t},s){const a=new ac.TileLayer(e,wm(t,s));return Em(a,s)},function(e,t,s){wk(e,t,s);const{url:a}=t;a!=null&&a!==s.url&&e.setUrl(a)}),Ak=mk.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),kk=({pin:r,canDelete:e=!1,onDelete:t})=>{const s=()=>{e&&t&&confirm("Are you sure you want to delete this pin?")&&t(r.id)};return b.jsx(Pk,{position:[r.lat,r.lng],icon:Ak,children:b.jsx(xk,{children:b.jsxs("div",{className:"p-2",children:[b.jsx("h3",{className:"font-semibold text-gray-900",children:r.name}),r.description&&b.jsx("p",{className:"text-gray-600 mt-1",children:r.description}),b.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Added ",r.createdAt?r.createdAt.toDate().toLocaleDateString():"Recently"]}),e&&b.jsx("button",{onClick:s,className:"mt-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Delete Pin"})]})})})},Rk=({position:r,onSubmit:e,onCancel:t})=>{const[s,a]=te.useState(""),[c,f]=te.useState(""),[_,v]=te.useState(!1),T=async P=>{if(P.preventDefault(),!!s.trim()){v(!0);try{await e({name:s.trim(),description:c.trim()||void 0})}finally{v(!1)}}};return b.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg border border-gray-200 p-4 w-80 z-10",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Add Pin"}),b.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Location: ",r.lat.toFixed(6),", ",r.lng.toFixed(6)]}),b.jsxs("form",{onSubmit:T,className:"space-y-3",children:[b.jsx(Th,{label:"Name",value:s,onChange:P=>a(P.target.value),placeholder:"Enter pin name",required:!0}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),b.jsx("textarea",{value:c,onChange:P=>f(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Enter description"})]}),b.jsxs("div",{className:"flex space-x-2",children:[b.jsx(Ft,{type:"submit",disabled:_||!s.trim(),className:"flex-1",children:_?"Adding...":"Add Pin"}),b.jsx(Ft,{type:"button",variant:"secondary",onClick:t,className:"flex-1",children:"Cancel"})]})]})]})},Lk=({onMapClick:r})=>(Tk({click:e=>{r(e.latlng.lat,e.latlng.lng)}}),null),Nk=({pins:r,onAddPin:e,onDeletePin:t,isLocked:s,canDeletePins:a=!1,center:c=[40.7128,-74.006],zoom:f=13})=>{const[_,v]=te.useState(!1),[T,P]=te.useState(null),C=(W,Q)=>{s||(P({lat:W,lng:Q}),v(!0))},k=async W=>{T&&(await e({...T,...W}),v(!1),P(null))},$=async W=>{t&&await t(W)};return b.jsxs("div",{className:"h-full w-full relative",children:[b.jsxs(Sk,{center:c,zoom:f,style:{height:"100%",width:"100%"},className:"z-0",children:[b.jsx(Ck,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),b.jsx(Lk,{onMapClick:C}),r.map(W=>b.jsx(kk,{pin:W,canDelete:a,onDelete:$},W.id))]}),_&&T&&b.jsx(Rk,{position:T,onSubmit:k,onCancel:()=>{v(!1),P(null)}}),s&&b.jsx("div",{className:"absolute top-4 left-4 bg-red-100 border border-red-300 text-red-700 px-3 py-2 rounded-lg shadow-sm",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:b.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Map is locked - no new pins can be added"]})})]})},bk=r=>{const[e,t]=te.useState(null),[s,a]=te.useState(!0),[c,f]=te.useState(null);return te.useEffect(()=>{if(!r)return;const _=setTimeout(()=>{f("Map not found"),a(!1)},2e3);try{const v=qu(wr,"maps",r);WA(v).then(T=>{clearTimeout(_),T.exists()?t({id:T.id,...T.data()}):f("Map not found"),a(!1)}).catch(T=>{clearTimeout(_),console.error("Error fetching map:",T),f("Map not found"),a(!1)})}catch(v){clearTimeout(_),console.error("Error fetching map:",v),f("Map not found"),a(!1)}return()=>clearTimeout(_)},[r]),{map:e,loading:s,error:c}},Ok=r=>{const[e,t]=te.useState(!1),[s,a]=te.useState(null);return{generateShareLink:async()=>{t(!0),a(null);try{const f=Aa(wr,"maps",r,"shareLinks"),_=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return await gm(f,{token:_,createdAt:vm(),expiresAt:null}),`${window.location.origin}/map/${r}?token=${_}`}catch(f){throw console.error("Error generating share link:",f),a(f.message||"Failed to generate share link"),f}finally{t(!1)}},loading:e,error:s}},Mk=r=>{const[e,t]=te.useState([]),[s,a]=te.useState(!0),[c,f]=te.useState(null);return te.useEffect(()=>{if(!r)return;const _=Aa(wr,"maps",r,"pins"),v=M0(_,UA("createdAt","desc")),T=F0(v,P=>{const C=P.docs.map(k=>({id:k.id,...k.data()}));t(C),a(!1),f(null)},P=>{console.error("Error fetching pins:",P),f("Failed to load pins"),a(!1)});return()=>T()},[r]),{pins:e,loading:s,error:c}},Dk=r=>{const[e,t]=te.useState(!1),[s,a]=te.useState(null);return{addPin:async f=>{t(!0),a(null);try{const _=Aa(wr,"maps",r,"pins");await gm(_,{...f,createdAt:vm()})}catch(_){throw console.error("Error adding pin:",_),a(_.message||"Failed to add pin"),_}finally{t(!1)}},loading:e,error:s}},Vk=r=>({deletePin:async t=>{try{const s=qu(wr,"maps",r,"pins",t);await V0(s)}catch(s){throw console.error("Error deleting pin:",s),s}}}),Fk=()=>{const{mapId:r}=fT(),{user:e}=Yo(),{map:t,loading:s,error:a}=bk(r||""),{pins:c}=Mk(r||""),{addPin:f}=Dk(r||""),{deletePin:_}=Vk(r||""),{generateShareLink:v,loading:T}=Ok(r||""),[P,C]=te.useState(""),[k,$]=te.useState(!1);te.useEffect(()=>{r&&C(`${window.location.origin}/map/${r}`)},[r]);const W=async()=>{try{const de=await v();C(de),$(!0)}catch(de){console.error("Failed to generate share link:",de)}},Q=async()=>{try{await navigator.clipboard.writeText(P)}catch(de){console.error("Failed to copy link:",de)}},G=(t==null?void 0:t.isLocked)||(t!=null&&t.editableUntil?t.editableUntil.toDate()<=new Date:!1),pe=e&&t&&e.uid===t.ownerId;return s?b.jsx("div",{className:"h-screen flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):a||!t?b.jsx("div",{className:"h-screen flex items-center justify-center",children:b.jsxs(Do,{className:"text-center py-12",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Map Not Found"}),b.jsx("p",{className:"text-gray-600 mb-6",children:"The map you're looking for doesn't exist or has been deleted."}),b.jsx(Ft,{onClick:()=>window.location.href="/",children:"Go Home"})]})}):b.jsxs("div",{className:"h-screen flex flex-col",children:[b.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3",children:b.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[b.jsxs("div",{children:[b.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:t.name}),b.jsxs("p",{className:"text-sm text-gray-500",children:[c.length," pin",c.length!==1?"s":""," ",G?" Locked":" Open for pins",pe&&"  You are the map creator"]})]}),b.jsxs("div",{className:"flex space-x-2",children:[b.jsx(Ft,{variant:"secondary",size:"sm",onClick:W,disabled:T,children:T?"Generating...":"Share Link"}),b.jsx(Ft,{size:"sm",onClick:()=>window.location.href="/",children:"Home"})]})]})}),b.jsx("div",{className:"flex-1 relative",children:b.jsx(Nk,{mapId:r||"",pins:c,onAddPin:f,onDeletePin:pe?_:void 0,isLocked:G,canDeletePins:!!pe})}),k&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs(Do,{className:"max-w-md w-full mx-4",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Share Map"}),b.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Share this link with others so they can add pins to your map:"}),b.jsxs("div",{className:"flex space-x-2 mb-4",children:[b.jsx("input",{type:"text",value:P,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"}),b.jsx(Ft,{size:"sm",onClick:Q,children:"Copy"})]}),b.jsx(Ft,{variant:"secondary",onClick:()=>$(!1),className:"w-full",children:"Close"})]})})]})},zk=()=>b.jsx(ZA,{children:b.jsx(NT,{children:b.jsxs("div",{className:"min-h-screen bg-gray-50",children:[b.jsx(YA,{}),b.jsxs(kT,{children:[b.jsx(yl,{path:"/",element:b.jsx(XA,{})}),b.jsx(yl,{path:"/dashboard",element:b.jsx(Qv,{children:b.jsx(rk,{})})}),b.jsx(yl,{path:"/create",element:b.jsx(Qv,{children:b.jsx(sk,{})})}),b.jsx(yl,{path:"/map/:mapId",element:b.jsx(Fk,{})}),b.jsx(yl,{path:"*",element:b.jsx(fy,{to:"/",replace:!0})})]})]})})}),q0=document.getElementById("root");if(!q0)throw new Error("Failed to find the root element");const Uk=DE.createRoot(q0);Uk.render(b.jsx(zk,{}));
