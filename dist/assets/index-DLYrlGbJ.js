function kE(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in r)){const c=Object.getOwnPropertyDescriptor(s,a);c&&Object.defineProperty(r,a,c.get?c:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function Jv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var If={exports:{}},wu={},Sf={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function RE(){if(r_)return Xe;r_=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.iterator;function k(U){return U===null||typeof U!="object"?null:(U=C&&U[C]||U["@@iterator"],typeof U=="function"?U:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,Q={};function Z(U,ne,ye){this.props=U,this.context=ne,this.refs=Q,this.updater=ye||H}Z.prototype.isReactComponent={},Z.prototype.setState=function(U,ne){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ne,"setState")},Z.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function he(){}he.prototype=Z.prototype;function de(U,ne,ye){this.props=U,this.context=ne,this.refs=Q,this.updater=ye||H}var me=de.prototype=new he;me.constructor=de,W(me,Z.prototype),me.isPureReactComponent=!0;var ge=Array.isArray,be=Object.prototype.hasOwnProperty,Oe={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function N(U,ne,ye){var Ae,Ie={},Ee=null,Ze=null;if(ne!=null)for(Ae in ne.ref!==void 0&&(Ze=ne.ref),ne.key!==void 0&&(Ee=""+ne.key),ne)be.call(ne,Ae)&&!V.hasOwnProperty(Ae)&&(Ie[Ae]=ne[Ae]);var Ke=arguments.length-2;if(Ke===1)Ie.children=ye;else if(1<Ke){for(var ft=Array(Ke),Ot=0;Ot<Ke;Ot++)ft[Ot]=arguments[Ot+2];Ie.children=ft}if(U&&U.defaultProps)for(Ae in Ke=U.defaultProps,Ke)Ie[Ae]===void 0&&(Ie[Ae]=Ke[Ae]);return{$$typeof:r,type:U,key:Ee,ref:Ze,props:Ie,_owner:Oe.current}}function M(U,ne){return{$$typeof:r,type:U.type,key:ne,ref:U.ref,props:U.props,_owner:U._owner}}function z(U){return typeof U=="object"&&U!==null&&U.$$typeof===r}function j(U){var ne={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ye){return ne[ye]})}var $=/\/+/g;function O(U,ne){return typeof U=="object"&&U!==null&&U.key!=null?j(""+U.key):ne.toString(36)}function ot(U,ne,ye,Ae,Ie){var Ee=typeof U;(Ee==="undefined"||Ee==="boolean")&&(U=null);var Ze=!1;if(U===null)Ze=!0;else switch(Ee){case"string":case"number":Ze=!0;break;case"object":switch(U.$$typeof){case r:case e:Ze=!0}}if(Ze)return Ze=U,Ie=Ie(Ze),U=Ae===""?"."+O(Ze,0):Ae,ge(Ie)?(ye="",U!=null&&(ye=U.replace($,"$&/")+"/"),ot(Ie,ne,ye,"",function(Ot){return Ot})):Ie!=null&&(z(Ie)&&(Ie=M(Ie,ye+(!Ie.key||Ze&&Ze.key===Ie.key?"":(""+Ie.key).replace($,"$&/")+"/")+U)),ne.push(Ie)),1;if(Ze=0,Ae=Ae===""?".":Ae+":",ge(U))for(var Ke=0;Ke<U.length;Ke++){Ee=U[Ke];var ft=Ae+O(Ee,Ke);Ze+=ot(Ee,ne,ye,ft,Ie)}else if(ft=k(U),typeof ft=="function")for(U=ft.call(U),Ke=0;!(Ee=U.next()).done;)Ee=Ee.value,ft=Ae+O(Ee,Ke++),Ze+=ot(Ee,ne,ye,ft,Ie);else if(Ee==="object")throw ne=String(U),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return Ze}function sn(U,ne,ye){if(U==null)return U;var Ae=[],Ie=0;return ot(U,Ae,"","",function(Ee){return ne.call(ye,Ee,Ie++)}),Ae}function lt(U){if(U._status===-1){var ne=U._result;ne=ne(),ne.then(function(ye){(U._status===0||U._status===-1)&&(U._status=1,U._result=ye)},function(ye){(U._status===0||U._status===-1)&&(U._status=2,U._result=ye)}),U._status===-1&&(U._status=0,U._result=ne)}if(U._status===1)return U._result.default;throw U._result}var nt={current:null},re={transition:null},Re={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:re,ReactCurrentOwner:Oe};function se(){throw Error("act(...) is not supported in production builds of React.")}return Xe.Children={map:sn,forEach:function(U,ne,ye){sn(U,function(){ne.apply(this,arguments)},ye)},count:function(U){var ne=0;return sn(U,function(){ne++}),ne},toArray:function(U){return sn(U,function(ne){return ne})||[]},only:function(U){if(!z(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Xe.Component=Z,Xe.Fragment=t,Xe.Profiler=a,Xe.PureComponent=de,Xe.StrictMode=s,Xe.Suspense=v,Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Re,Xe.act=se,Xe.cloneElement=function(U,ne,ye){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Ae=W({},U.props),Ie=U.key,Ee=U.ref,Ze=U._owner;if(ne!=null){if(ne.ref!==void 0&&(Ee=ne.ref,Ze=Oe.current),ne.key!==void 0&&(Ie=""+ne.key),U.type&&U.type.defaultProps)var Ke=U.type.defaultProps;for(ft in ne)be.call(ne,ft)&&!V.hasOwnProperty(ft)&&(Ae[ft]=ne[ft]===void 0&&Ke!==void 0?Ke[ft]:ne[ft])}var ft=arguments.length-2;if(ft===1)Ae.children=ye;else if(1<ft){Ke=Array(ft);for(var Ot=0;Ot<ft;Ot++)Ke[Ot]=arguments[Ot+2];Ae.children=Ke}return{$$typeof:r,type:U.type,key:Ie,ref:Ee,props:Ae,_owner:Ze}},Xe.createContext=function(U){return U={$$typeof:f,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:c,_context:U},U.Consumer=U},Xe.createElement=N,Xe.createFactory=function(U){var ne=N.bind(null,U);return ne.type=U,ne},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(U){return{$$typeof:_,render:U}},Xe.isValidElement=z,Xe.lazy=function(U){return{$$typeof:S,_payload:{_status:-1,_result:U},_init:lt}},Xe.memo=function(U,ne){return{$$typeof:T,type:U,compare:ne===void 0?null:ne}},Xe.startTransition=function(U){var ne=re.transition;re.transition={};try{U()}finally{re.transition=ne}},Xe.unstable_act=se,Xe.useCallback=function(U,ne){return nt.current.useCallback(U,ne)},Xe.useContext=function(U){return nt.current.useContext(U)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(U){return nt.current.useDeferredValue(U)},Xe.useEffect=function(U,ne){return nt.current.useEffect(U,ne)},Xe.useId=function(){return nt.current.useId()},Xe.useImperativeHandle=function(U,ne,ye){return nt.current.useImperativeHandle(U,ne,ye)},Xe.useInsertionEffect=function(U,ne){return nt.current.useInsertionEffect(U,ne)},Xe.useLayoutEffect=function(U,ne){return nt.current.useLayoutEffect(U,ne)},Xe.useMemo=function(U,ne){return nt.current.useMemo(U,ne)},Xe.useReducer=function(U,ne,ye){return nt.current.useReducer(U,ne,ye)},Xe.useRef=function(U){return nt.current.useRef(U)},Xe.useState=function(U){return nt.current.useState(U)},Xe.useSyncExternalStore=function(U,ne,ye){return nt.current.useSyncExternalStore(U,ne,ye)},Xe.useTransition=function(){return nt.current.useTransition()},Xe.version="18.3.1",Xe}var i_;function _p(){return i_||(i_=1,Sf.exports=RE()),Sf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function LE(){if(s_)return wu;s_=1;var r=_p(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(_,v,T){var S,C={},k=null,H=null;T!==void 0&&(k=""+T),v.key!==void 0&&(k=""+v.key),v.ref!==void 0&&(H=v.ref);for(S in v)s.call(v,S)&&!c.hasOwnProperty(S)&&(C[S]=v[S]);if(_&&_.defaultProps)for(S in v=_.defaultProps,v)C[S]===void 0&&(C[S]=v[S]);return{$$typeof:e,type:_,key:k,ref:H,props:C,_owner:a.current}}return wu.Fragment=t,wu.jsx=f,wu.jsxs=f,wu}var o_;function NE(){return o_||(o_=1,If.exports=LE()),If.exports}var R=NE(),sh={},Pf={exports:{}},ir={},xf={exports:{}},Cf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function bE(){return a_||(a_=1,(function(r){function e(re,Re){var se=re.length;re.push(Re);e:for(;0<se;){var U=se-1>>>1,ne=re[U];if(0<a(ne,Re))re[U]=Re,re[se]=ne,se=U;else break e}}function t(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var Re=re[0],se=re.pop();if(se!==Re){re[0]=se;e:for(var U=0,ne=re.length,ye=ne>>>1;U<ye;){var Ae=2*(U+1)-1,Ie=re[Ae],Ee=Ae+1,Ze=re[Ee];if(0>a(Ie,se))Ee<ne&&0>a(Ze,Ie)?(re[U]=Ze,re[Ee]=se,U=Ee):(re[U]=Ie,re[Ae]=se,U=Ae);else if(Ee<ne&&0>a(Ze,se))re[U]=Ze,re[Ee]=se,U=Ee;else break e}}return Re}function a(re,Re){var se=re.sortIndex-Re.sortIndex;return se!==0?se:re.id-Re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,_=f.now();r.unstable_now=function(){return f.now()-_}}var v=[],T=[],S=1,C=null,k=3,H=!1,W=!1,Q=!1,Z=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,de=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function me(re){for(var Re=t(T);Re!==null;){if(Re.callback===null)s(T);else if(Re.startTime<=re)s(T),Re.sortIndex=Re.expirationTime,e(v,Re);else break;Re=t(T)}}function ge(re){if(Q=!1,me(re),!W)if(t(v)!==null)W=!0,lt(be);else{var Re=t(T);Re!==null&&nt(ge,Re.startTime-re)}}function be(re,Re){W=!1,Q&&(Q=!1,he(N),N=-1),H=!0;var se=k;try{for(me(Re),C=t(v);C!==null&&(!(C.expirationTime>Re)||re&&!j());){var U=C.callback;if(typeof U=="function"){C.callback=null,k=C.priorityLevel;var ne=U(C.expirationTime<=Re);Re=r.unstable_now(),typeof ne=="function"?C.callback=ne:C===t(v)&&s(v),me(Re)}else s(v);C=t(v)}if(C!==null)var ye=!0;else{var Ae=t(T);Ae!==null&&nt(ge,Ae.startTime-Re),ye=!1}return ye}finally{C=null,k=se,H=!1}}var Oe=!1,V=null,N=-1,M=5,z=-1;function j(){return!(r.unstable_now()-z<M)}function $(){if(V!==null){var re=r.unstable_now();z=re;var Re=!0;try{Re=V(!0,re)}finally{Re?O():(Oe=!1,V=null)}}else Oe=!1}var O;if(typeof de=="function")O=function(){de($)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,sn=ot.port2;ot.port1.onmessage=$,O=function(){sn.postMessage(null)}}else O=function(){Z($,0)};function lt(re){V=re,Oe||(Oe=!0,O())}function nt(re,Re){N=Z(function(){re(r.unstable_now())},Re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){W||H||(W=!0,lt(be))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_getFirstCallbackNode=function(){return t(v)},r.unstable_next=function(re){switch(k){case 1:case 2:case 3:var Re=3;break;default:Re=k}var se=k;k=Re;try{return re()}finally{k=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,Re){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var se=k;k=re;try{return Re()}finally{k=se}},r.unstable_scheduleCallback=function(re,Re,se){var U=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?U+se:U):se=U,re){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=se+ne,re={id:S++,callback:Re,priorityLevel:re,startTime:se,expirationTime:ne,sortIndex:-1},se>U?(re.sortIndex=se,e(T,re),t(v)===null&&re===t(T)&&(Q?(he(N),N=-1):Q=!0,nt(ge,se-U))):(re.sortIndex=ne,e(v,re),W||H||(W=!0,lt(be))),re},r.unstable_shouldYield=j,r.unstable_wrapCallback=function(re){var Re=k;return function(){var se=k;k=Re;try{return re.apply(this,arguments)}finally{k=se}}}})(Cf)),Cf}var l_;function OE(){return l_||(l_=1,xf.exports=bE()),xf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function ME(){if(u_)return ir;u_=1;var r=_p(),e=OE();function t(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(n,o){f(n,o),f(n+"Capture",o)}function f(n,o){for(a[n]=o,n=0;n<o.length;n++)s.add(o[n])}var _=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},C={};function k(n){return v.call(C,n)?!0:v.call(S,n)?!1:T.test(n)?C[n]=!0:(S[n]=!0,!1)}function H(n,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W(n,o,u,p){if(o===null||typeof o>"u"||H(n,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function Q(n,o,u,p,g,w,P){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=n,this.type=o,this.sanitizeURL=w,this.removeEmptyString=P}var Z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Z[n]=new Q(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];Z[o]=new Q(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){Z[n]=new Q(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Z[n]=new Q(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Z[n]=new Q(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){Z[n]=new Q(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){Z[n]=new Q(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){Z[n]=new Q(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){Z[n]=new Q(n,5,!1,n.toLowerCase(),null,!1,!1)});var he=/[\-:]([a-z])/g;function de(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(he,de);Z[o]=new Q(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(he,de);Z[o]=new Q(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(he,de);Z[o]=new Q(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){Z[n]=new Q(n,1,!1,n.toLowerCase(),null,!1,!1)}),Z.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){Z[n]=new Q(n,1,!1,n.toLowerCase(),null,!0,!0)});function me(n,o,u,p){var g=Z.hasOwnProperty(o)?Z[o]:null;(g!==null?g.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(W(o,u,g,p)&&(u=null),p||g===null?k(o)&&(u===null?n.removeAttribute(o):n.setAttribute(o,""+u)):g.mustUseProperty?n[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,p=g.attributeNamespace,u===null?n.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,p?n.setAttributeNS(p,o,u):n.setAttribute(o,u))))}var ge=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,be=Symbol.for("react.element"),Oe=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),j=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),sn=Symbol.for("react.memo"),lt=Symbol.for("react.lazy"),nt=Symbol.for("react.offscreen"),re=Symbol.iterator;function Re(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,U;function ne(n){if(U===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+n}var ye=!1;function Ae(n,o){if(!n||ye)return"";ye=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(ee){var p=ee}Reflect.construct(n,[],o)}else{try{o.call()}catch(ee){p=ee}n.call(o.prototype)}else{try{throw Error()}catch(ee){p=ee}n()}}catch(ee){if(ee&&p&&typeof ee.stack=="string"){for(var g=ee.stack.split(`
`),w=p.stack.split(`
`),P=g.length-1,b=w.length-1;1<=P&&0<=b&&g[P]!==w[b];)b--;for(;1<=P&&0<=b;P--,b--)if(g[P]!==w[b]){if(P!==1||b!==1)do if(P--,b--,0>b||g[P]!==w[b]){var F=`
`+g[P].replace(" at new "," at ");return n.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",n.displayName)),F}while(1<=P&&0<=b);break}}}finally{ye=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?ne(n):""}function Ie(n){switch(n.tag){case 5:return ne(n.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function Ee(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case Oe:return"Portal";case M:return"Profiler";case N:return"StrictMode";case O:return"Suspense";case ot:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case j:return(n.displayName||"Context")+".Consumer";case z:return(n._context.displayName||"Context")+".Provider";case $:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case sn:return o=n.displayName||null,o!==null?o:Ee(n.type)||"Memo";case lt:o=n._payload,n=n._init;try{return Ee(n(o))}catch{}}return null}function Ze(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(o);case 8:return o===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ke(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ft(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ot(n){var o=ft(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),p=""+n[o];if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,w=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(P){p=""+P,w.call(this,P)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(P){p=""+P},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function lr(n){n._valueTracker||(n._valueTracker=Ot(n))}function Tr(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return n&&(p=ft(n)?n.checked?"true":"false":n.value),n=p,n!==u?(o.setValue(n),!0):!1}function Ir(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function bi(n,o){var u=o.checked;return se({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function Oi(n,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=Ke(o.value!=null?o.value:u),n._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function xs(n,o){o=o.checked,o!=null&&me(n,"checked",o,!1)}function Mi(n,o){xs(n,o);var u=Ke(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(p==="submit"||p==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?Cs(n,o.type,u):o.hasOwnProperty("defaultValue")&&Cs(n,o.type,Ke(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function Di(n,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,u||o===n.value||(n.value=o),n.defaultValue=o}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function Cs(n,o,u){(o!=="number"||Ir(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var Sr=Array.isArray;function ur(n,o,u,p){if(n=n.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<n.length;u++)g=o.hasOwnProperty("$"+n[u].value),n[u].selected!==g&&(n[u].selected=g),g&&p&&(n[u].defaultSelected=!0)}else{for(u=""+Ke(u),o=null,g=0;g<n.length;g++){if(n[g].value===u){n[g].selected=!0,p&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function As(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Vi(n,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Sr(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}n._wrapperState={initialValue:Ke(u)}}function ks(n,o){var u=Ke(o.value),p=Ke(o.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),o.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),p!=null&&(n.defaultValue=""+p)}function Jo(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function Ct(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mt(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?Ct(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Pr,ea=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,g){MSApp.execUnsafeLocalFunction(function(){return n(o,u,p,g)})}:n})(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(Pr=Pr||document.createElement("div"),Pr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Pr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function $r(n,o){if(o){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=o;return}}n.textContent=o}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fi=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(n){Fi.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),ui[o]=ui[n]})});function Rs(n,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||ui.hasOwnProperty(n)&&ui[n]?(""+o).trim():o+"px"}function zi(n,o){n=n.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,g=Rs(u,o[u],p);u==="float"&&(u="cssFloat"),p?n.setProperty(u,g):n[u]=g}}var Ls=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ta(n,o){if(o){if(Ls[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Hr(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ji=null;function Ns(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ui=null,On=null,cr=null;function bs(n){if(n=ls(n)){if(typeof Ui!="function")throw Error(t(280));var o=n.stateNode;o&&(o=il(o),Ui(n.stateNode,n.type,o))}}function xr(n){On?cr?cr.push(n):cr=[n]:On=n}function na(){if(On){var n=On,o=cr;if(cr=On=null,bs(n),o)for(n=0;n<o.length;n++)bs(o[n])}}function Bi(n,o){return n(o)}function ra(){}var Wr=!1;function $i(n,o,u){if(Wr)return n(o,u);Wr=!0;try{return Bi(n,o,u)}finally{Wr=!1,(On!==null||cr!==null)&&(ra(),na())}}function At(n,o){var u=n.stateNode;if(u===null)return null;var p=il(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(n=n.type,p=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!p;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Os=!1;if(_)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){Os=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch{Os=!1}function Hi(n,o,u,p,g,w,P,b,F){var ee=Array.prototype.slice.call(arguments,3);try{o.apply(u,ee)}catch(ue){this.onError(ue)}}var on=!1,xe=null,Un=!1,Ms=null,ja={onError:function(n){on=!0,xe=n}};function Wi(n,o,u,p,g,w,P,b,F){on=!1,xe=null,Hi.apply(ja,arguments)}function Ds(n,o,u,p,g,w,P,b,F){if(Wi.apply(this,arguments),on){if(on){var ee=xe;on=!1,xe=null}else throw Error(t(198));Un||(Un=!0,Ms=ee)}}function Bn(n){var o=n,u=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(u=o.return),n=o.return;while(n)}return o.tag===3?u:null}function $n(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function Hn(n){if(Bn(n)!==n)throw Error(t(188))}function Ua(n){var o=n.alternate;if(!o){if(o=Bn(n),o===null)throw Error(t(188));return o!==n?null:n}for(var u=n,p=o;;){var g=u.return;if(g===null)break;var w=g.alternate;if(w===null){if(p=g.return,p!==null){u=p;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===u)return Hn(g),n;if(w===p)return Hn(g),o;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=g,p=w;else{for(var P=!1,b=g.child;b;){if(b===u){P=!0,u=g,p=w;break}if(b===p){P=!0,p=g,u=w;break}b=b.sibling}if(!P){for(b=w.child;b;){if(b===u){P=!0,u=w,p=g;break}if(b===p){P=!0,p=w,u=g;break}b=b.sibling}if(!P)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?n:o}function ia(n){return n=Ua(n),n!==null?Vs(n):null}function Vs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=Vs(n);if(o!==null)return o;n=n.sibling}return null}var Fs=e.unstable_scheduleCallback,zs=e.unstable_cancelCallback,Ba=e.unstable_shouldYield,js=e.unstable_requestPaint,_t=e.unstable_now,$a=e.unstable_getCurrentPriorityLevel,qi=e.unstable_ImmediatePriority,ci=e.unstable_UserBlockingPriority,Wn=e.unstable_NormalPriority,Zi=e.unstable_LowPriority,hi=e.unstable_IdlePriority,di=null,wn=null;function fi(n){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(di,n,void 0,(n.current.flags&128)===128)}catch{}}var Ue=Math.clz32?Math.clz32:qr,pt=Math.log,Gi=Math.LN2;function qr(n){return n>>>=0,n===0?32:31-(pt(n)/Gi|0)|0}var dr=64,pi=4194304;function Fe(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function mt(n,o){var u=n.pendingLanes;if(u===0)return 0;var p=0,g=n.suspendedLanes,w=n.pingedLanes,P=u&268435455;if(P!==0){var b=P&~g;b!==0?p=Fe(b):(w&=P,w!==0&&(p=Fe(w)))}else P=u&~g,P!==0?p=Fe(P):w!==0&&(p=Fe(w));if(p===0)return 0;if(o!==0&&o!==p&&(o&g)===0&&(g=p&-p,w=o&-o,g>=w||g===16&&(w&4194240)!==0))return o;if((p&4)!==0&&(p|=u&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=p;0<o;)u=31-Ue(o),g=1<<u,p|=n[u],o&=~g;return p}function sa(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qn(n,o){for(var u=n.suspendedLanes,p=n.pingedLanes,g=n.expirationTimes,w=n.pendingLanes;0<w;){var P=31-Ue(w),b=1<<P,F=g[P];F===-1?((b&u)===0||(b&p)!==0)&&(g[P]=sa(b,o)):F<=o&&(n.expiredLanes|=b),w&=~b}}function wt(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ki(){var n=dr;return dr<<=1,(dr&4194240)===0&&(dr=64),n}function fr(n){for(var o=[],u=0;31>u;u++)o.push(n);return o}function En(n,o,u){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-Ue(o),n[o]=u}function Be(n,o){var u=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var p=n.eventTimes;for(n=n.expirationTimes;0<u;){var g=31-Ue(u),w=1<<g;o[g]=0,p[g]=-1,n[g]=-1,u&=~w}}function Tn(n,o){var u=n.entangledLanes|=o;for(n=n.entanglements;u;){var p=31-Ue(u),g=1<<p;g&o|n[p]&o&&(n[p]|=o),u&=~g}}var Ge=0;function Zn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Us,Cr,Bs,$s,Qi,Yi=!1,Gn=[],Dt=null,Kn=null,Mn=null,mi=new Map,Le=new Map,zt=[],ut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oa(n,o){switch(n){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":mi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Le.delete(o.pointerId)}}function an(n,o,u,p,g,w){return n===null||n.nativeEvent!==w?(n={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[g]},o!==null&&(o=ls(o),o!==null&&Cr(o)),n):(n.eventSystemFlags|=p,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function aa(n,o,u,p,g){switch(o){case"focusin":return Dt=an(Dt,n,o,u,p,g),!0;case"dragenter":return Kn=an(Kn,n,o,u,p,g),!0;case"mouseover":return Mn=an(Mn,n,o,u,p,g),!0;case"pointerover":var w=g.pointerId;return mi.set(w,an(mi.get(w)||null,n,o,u,p,g)),!0;case"gotpointercapture":return w=g.pointerId,Le.set(w,an(Le.get(w)||null,n,o,u,p,g)),!0}return!1}function Hs(n){var o=as(n.target);if(o!==null){var u=Bn(o);if(u!==null){if(o=u.tag,o===13){if(o=$n(u),o!==null){n.blockedOn=o,Qi(n.priority,function(){Bs(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fn(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var u=es(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var p=new u.constructor(u.type,u);ji=p,u.target.dispatchEvent(p),ji=null}else return o=ls(u),o!==null&&Cr(o),n.blockedOn=u,!1;o.shift()}return!0}function Zr(n,o,u){fn(n)&&u.delete(o)}function gi(){Yi=!1,Dt!==null&&fn(Dt)&&(Dt=null),Kn!==null&&fn(Kn)&&(Kn=null),Mn!==null&&fn(Mn)&&(Mn=null),mi.forEach(Zr),Le.forEach(Zr)}function gt(n,o){n.blockedOn===o&&(n.blockedOn=null,Yi||(Yi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gi)))}function Xt(n){function o(g){return gt(g,n)}if(0<Gn.length){gt(Gn[0],n);for(var u=1;u<Gn.length;u++){var p=Gn[u];p.blockedOn===n&&(p.blockedOn=null)}}for(Dt!==null&&gt(Dt,n),Kn!==null&&gt(Kn,n),Mn!==null&&gt(Mn,n),mi.forEach(o),Le.forEach(o),u=0;u<zt.length;u++)p=zt[u],p.blockedOn===n&&(p.blockedOn=null);for(;0<zt.length&&(u=zt[0],u.blockedOn===null);)Hs(u),u.blockedOn===null&&zt.shift()}var Ar=ge.ReactCurrentBatchConfig,Gr=!0;function Et(n,o,u,p){var g=Ge,w=Ar.transition;Ar.transition=null;try{Ge=1,Xi(n,o,u,p)}finally{Ge=g,Ar.transition=w}}function Ha(n,o,u,p){var g=Ge,w=Ar.transition;Ar.transition=null;try{Ge=4,Xi(n,o,u,p)}finally{Ge=g,Ar.transition=w}}function Xi(n,o,u,p){if(Gr){var g=es(n,o,u,p);if(g===null)i(n,o,p,Ji,u),oa(n,p);else if(aa(g,n,o,u,p))p.stopPropagation();else if(oa(n,p),o&4&&-1<ut.indexOf(n)){for(;g!==null;){var w=ls(g);if(w!==null&&Us(w),w=es(n,o,u,p),w===null&&i(n,o,p,Ji,u),w===g)break;g=w}g!==null&&p.stopPropagation()}else i(n,o,p,null,u)}}var Ji=null;function es(n,o,u,p){if(Ji=null,n=Ns(p),n=as(n),n!==null)if(o=Bn(n),o===null)n=null;else if(u=o.tag,u===13){if(n=$n(o),n!==null)return n;n=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return Ji=n,null}function Qe(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($a()){case qi:return 1;case ci:return 4;case Wn:case Zi:return 16;case hi:return 536870912;default:return 16}default:return 16}}var Dn=null,ln=null,$t=null;function Ws(){if($t)return $t;var n,o=ln,u=o.length,p,g="value"in Dn?Dn.value:Dn.textContent,w=g.length;for(n=0;n<u&&o[n]===g[n];n++);var P=u-n;for(p=1;p<=P&&o[u-p]===g[w-p];p++);return $t=g.slice(n,1<p?1-p:void 0)}function qs(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Qn(){return!0}function la(){return!1}function Ht(n){function o(u,p,g,w,P){this._reactName=u,this._targetInst=g,this.type=p,this.nativeEvent=w,this.target=P,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(u=n[b],this[b]=u?u(w):w[b]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Qn:la,this.isPropagationStopped=la,this}return se(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){},isPersistent:Qn}),o}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=Ht(pr),Yn=se({},pr,{view:0,detail:0}),Zl=Ht(Yn),pn,Kr,Qr,In=se({},Yn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Qr&&(Qr&&n.type==="mousemove"?(pn=n.screenX-Qr.screenX,Kr=n.screenY-Qr.screenY):Kr=pn=0,Qr=n),pn)},movementY:function(n){return"movementY"in n?n.movementY:Kr}}),ts=Ht(In),Gs=se({},In,{dataTransfer:0}),Ks=Ht(Gs),Qs=se({},Yn,{relatedTarget:0}),ns=Ht(Qs),ua=se({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Yr=Ht(ua),Wa=se({},pr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ys=Ht(Wa),qa=se({},pr,{data:0}),Xs=Ht(qa),rs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Za(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=kr[n])?!!o[n]:!1}function Sn(){return Za}var h=se({},Yn,{key:function(n){if(n.key){var o=rs[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=qs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Wt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(n){return n.type==="keypress"?qs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),y=Ht(h),I=se({},In,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A=Ht(I),q=se({},Yn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn}),te=Ht(q),pe=se({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),at=Ht(pe),Vt=se({},In,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Je=Ht(Vt),ct=[9,13,27,32],yt=_&&"CompositionEvent"in window,Xn=null;_&&"documentMode"in document&&(Xn=document.documentMode);var kt=_&&"TextEvent"in window&&!Xn,is=_&&(!yt||Xn&&8<Xn&&11>=Xn),mr=" ",uc=!1;function Js(n,o){switch(n){case"keyup":return ct.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xr=!1;function fd(n,o){switch(n){case"compositionend":return Gl(o);case"keypress":return o.which!==32?null:(uc=!0,mr);case"textInput":return n=o.data,n===mr&&uc?null:n;default:return null}}function _i(n,o){if(Xr)return n==="compositionend"||!yt&&Js(n,o)?(n=Ws(),$t=ln=Dn=null,Xr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return is&&o.locale!=="ko"?null:o.data;default:return null}}var Ga={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cc(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Ga[n.type]:o==="textarea"}function Ka(n,o,u,p){xr(p),o=d(o,"onChange"),0<o.length&&(u=new Zs("onChange","change",null,u,p),n.push({event:u,listeners:o}))}var ca=null,Vn=null;function pd(n){ru(n,0)}function Jr(n){var o=us(n);if(Tr(o))return n}function md(n,o){if(n==="change")return o}var Rr=!1;if(_){var eo;if(_){var Qa="oninput"in document;if(!Qa){var Ya=document.createElement("div");Ya.setAttribute("oninput","return;"),Qa=typeof Ya.oninput=="function"}eo=Qa}else eo=!1;Rr=eo&&(!document.documentMode||9<document.documentMode)}function ha(){ca&&(ca.detachEvent("onpropertychange",Xa),Vn=ca=null)}function Xa(n){if(n.propertyName==="value"&&Jr(Vn)){var o=[];Ka(o,Vn,n,Ns(n)),$i(pd,o)}}function Ja(n,o,u){n==="focusin"?(ha(),ca=o,Vn=u,ca.attachEvent("onpropertychange",Xa)):n==="focusout"&&ha()}function to(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Jr(Vn)}function el(n,o){if(n==="click")return Jr(o)}function Kl(n,o){if(n==="input"||n==="change")return Jr(o)}function hc(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var gr=typeof Object.is=="function"?Object.is:hc;function vi(n,o){if(gr(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var u=Object.keys(n),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var g=u[p];if(!v.call(o,g)||!gr(n[g],o[g]))return!1}return!0}function dc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ql(n,o){var u=dc(n);n=0;for(var p;u;){if(u.nodeType===3){if(p=n+u.textContent.length,n<=o&&p>=o)return{node:u,offset:o-n};n=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=dc(u)}}function fc(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?fc(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Yl(){for(var n=window,o=Ir();o instanceof n.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)n=o.contentWindow;else break;o=Ir(n.document)}return o}function Xl(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function Lr(n){var o=Yl(),u=n.focusedElem,p=n.selectionRange;if(o!==u&&u&&u.ownerDocument&&fc(u.ownerDocument.documentElement,u)){if(p!==null&&Xl(u)){if(o=p.start,n=p.end,n===void 0&&(n=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(n,u.value.length);else if(n=(o=u.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var g=u.textContent.length,w=Math.min(p.start,g);p=p.end===void 0?w:Math.min(p.end,g),!n.extend&&w>p&&(g=p,p=w,w=g),g=Ql(u,w);var P=Ql(u,p);g&&P&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==P.node||n.focusOffset!==P.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),n.removeAllRanges(),w>p?(n.addRange(o),n.extend(P.node,P.offset)):(o.setEnd(P.node,P.offset),n.addRange(o)))}}for(o=[],n=u;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)n=o[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var tl=_&&"documentMode"in document&&11>=document.documentMode,no=null,ro=null,da=null,nl=!1;function pc(n,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;nl||no==null||no!==Ir(p)||(p=no,"selectionStart"in p&&Xl(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),da&&vi(da,p)||(da=p,p=d(ro,"onSelect"),0<p.length&&(o=new Zs("onSelect","select",null,o,u),n.push({event:o,listeners:p}),o.target=no)))}function yi(n,o){var u={};return u[n.toLowerCase()]=o.toLowerCase(),u["Webkit"+n]="webkit"+o,u["Moz"+n]="moz"+o,u}var io={animationend:yi("Animation","AnimationEnd"),animationiteration:yi("Animation","AnimationIteration"),animationstart:yi("Animation","AnimationStart"),transitionend:yi("Transition","TransitionEnd")},wi={},Jl={};_&&(Jl=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function fa(n){if(wi[n])return wi[n];if(!io[n])return n;var o=io[n],u;for(u in o)if(o.hasOwnProperty(u)&&u in Jl)return wi[n]=o[u];return n}var mc=fa("animationend"),Nr=fa("animationiteration"),eu=fa("animationstart"),tu=fa("transitionend"),so=new Map,gc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(n,o){so.set(n,o),c(o,[n])}for(var ss=0;ss<gc.length;ss++){var rl=gc[ss],_c=rl.toLowerCase(),gd=rl[0].toUpperCase()+rl.slice(1);_r(_c,"on"+gd)}_r(mc,"onAnimationEnd"),_r(Nr,"onAnimationIteration"),_r(eu,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(tu,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vc=new Set("cancel close invalid load scroll toggle".split(" ").concat(oo));function nu(n,o,u){var p=n.type||"unknown-event";n.currentTarget=u,Ds(p,o,void 0,n),n.currentTarget=null}function ru(n,o){o=(o&4)!==0;for(var u=0;u<n.length;u++){var p=n[u],g=p.event;p=p.listeners;e:{var w=void 0;if(o)for(var P=p.length-1;0<=P;P--){var b=p[P],F=b.instance,ee=b.currentTarget;if(b=b.listener,F!==w&&g.isPropagationStopped())break e;nu(g,b,ee),w=F}else for(P=0;P<p.length;P++){if(b=p[P],F=b.instance,ee=b.currentTarget,b=b.listener,F!==w&&g.isPropagationStopped())break e;nu(g,b,ee),w=F}}}if(Un)throw n=Ms,Un=!1,Ms=null,n}function vt(n,o){var u=o[co];u===void 0&&(u=o[co]=new Set);var p=n+"__bubble";u.has(p)||(yc(o,n,2,!1),u.add(p))}function iu(n,o,u){var p=0;o&&(p|=4),yc(u,n,p,o)}var pa="_reactListening"+Math.random().toString(36).slice(2);function ao(n){if(!n[pa]){n[pa]=!0,s.forEach(function(u){u!=="selectionchange"&&(vc.has(u)||iu(u,!1,n),iu(u,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[pa]||(o[pa]=!0,iu("selectionchange",!1,o))}}function yc(n,o,u,p){switch(Qe(o)){case 1:var g=Et;break;case 4:g=Ha;break;default:g=Xi}u=g.bind(null,o,u,n),g=void 0,!Os||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),p?g!==void 0?n.addEventListener(o,u,{capture:!0,passive:g}):n.addEventListener(o,u,!0):g!==void 0?n.addEventListener(o,u,{passive:g}):n.addEventListener(o,u,!1)}function i(n,o,u,p,g){var w=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var P=p.tag;if(P===3||P===4){var b=p.stateNode.containerInfo;if(b===g||b.nodeType===8&&b.parentNode===g)break;if(P===4)for(P=p.return;P!==null;){var F=P.tag;if((F===3||F===4)&&(F=P.stateNode.containerInfo,F===g||F.nodeType===8&&F.parentNode===g))return;P=P.return}for(;b!==null;){if(P=as(b),P===null)return;if(F=P.tag,F===5||F===6){p=w=P;continue e}b=b.parentNode}}p=p.return}$i(function(){var ee=w,ue=Ns(u),ce=[];e:{var le=so.get(n);if(le!==void 0){var we=Zs,Pe=n;switch(n){case"keypress":if(qs(u)===0)break e;case"keydown":case"keyup":we=y;break;case"focusin":Pe="focus",we=ns;break;case"focusout":Pe="blur",we=ns;break;case"beforeblur":case"afterblur":we=ns;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=ts;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Ks;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=te;break;case mc:case Nr:case eu:we=Yr;break;case tu:we=at;break;case"scroll":we=Zl;break;case"wheel":we=Je;break;case"copy":case"cut":case"paste":we=Ys;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=A}var Ce=(o&4)!==0,jt=!Ce&&n==="scroll",K=Ce?le!==null?le+"Capture":null:le;Ce=[];for(var B=ee,Y;B!==null;){Y=B;var fe=Y.stateNode;if(Y.tag===5&&fe!==null&&(Y=fe,K!==null&&(fe=At(B,K),fe!=null&&Ce.push(l(B,fe,Y)))),jt)break;B=B.return}0<Ce.length&&(le=new we(le,Pe,null,u,ue),ce.push({event:le,listeners:Ce}))}}if((o&7)===0){e:{if(le=n==="mouseover"||n==="pointerover",we=n==="mouseout"||n==="pointerout",le&&u!==ji&&(Pe=u.relatedTarget||u.fromElement)&&(as(Pe)||Pe[ht]))break e;if((we||le)&&(le=ue.window===ue?ue:(le=ue.ownerDocument)?le.defaultView||le.parentWindow:window,we?(Pe=u.relatedTarget||u.toElement,we=ee,Pe=Pe?as(Pe):null,Pe!==null&&(jt=Bn(Pe),Pe!==jt||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(we=null,Pe=ee),we!==Pe)){if(Ce=ts,fe="onMouseLeave",K="onMouseEnter",B="mouse",(n==="pointerout"||n==="pointerover")&&(Ce=A,fe="onPointerLeave",K="onPointerEnter",B="pointer"),jt=we==null?le:us(we),Y=Pe==null?le:us(Pe),le=new Ce(fe,B+"leave",we,u,ue),le.target=jt,le.relatedTarget=Y,fe=null,as(ue)===ee&&(Ce=new Ce(K,B+"enter",Pe,u,ue),Ce.target=Y,Ce.relatedTarget=jt,fe=Ce),jt=fe,we&&Pe)t:{for(Ce=we,K=Pe,B=0,Y=Ce;Y;Y=m(Y))B++;for(Y=0,fe=K;fe;fe=m(fe))Y++;for(;0<B-Y;)Ce=m(Ce),B--;for(;0<Y-B;)K=m(K),Y--;for(;B--;){if(Ce===K||K!==null&&Ce===K.alternate)break t;Ce=m(Ce),K=m(K)}Ce=null}else Ce=null;we!==null&&E(ce,le,we,Ce,!1),Pe!==null&&jt!==null&&E(ce,jt,Pe,Ce,!0)}}e:{if(le=ee?us(ee):window,we=le.nodeName&&le.nodeName.toLowerCase(),we==="select"||we==="input"&&le.type==="file")var ke=md;else if(cc(le))if(Rr)ke=Kl;else{ke=to;var De=Ja}else(we=le.nodeName)&&we.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(ke=el);if(ke&&(ke=ke(n,ee))){Ka(ce,ke,u,ue);break e}De&&De(n,le,ee),n==="focusout"&&(De=le._wrapperState)&&De.controlled&&le.type==="number"&&Cs(le,"number",le.value)}switch(De=ee?us(ee):window,n){case"focusin":(cc(De)||De.contentEditable==="true")&&(no=De,ro=ee,da=null);break;case"focusout":da=ro=no=null;break;case"mousedown":nl=!0;break;case"contextmenu":case"mouseup":case"dragend":nl=!1,pc(ce,u,ue);break;case"selectionchange":if(tl)break;case"keydown":case"keyup":pc(ce,u,ue)}var Ve;if(yt)e:{switch(n){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Xr?Js(n,u)&&($e="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&($e="onCompositionStart");$e&&(is&&u.locale!=="ko"&&(Xr||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Xr&&(Ve=Ws()):(Dn=ue,ln="value"in Dn?Dn.value:Dn.textContent,Xr=!0)),De=d(ee,$e),0<De.length&&($e=new Xs($e,n,null,u,ue),ce.push({event:$e,listeners:De}),Ve?$e.data=Ve:(Ve=Gl(u),Ve!==null&&($e.data=Ve)))),(Ve=kt?fd(n,u):_i(n,u))&&(ee=d(ee,"onBeforeInput"),0<ee.length&&(ue=new Xs("onBeforeInput","beforeinput",null,u,ue),ce.push({event:ue,listeners:ee}),ue.data=Ve))}ru(ce,o)})}function l(n,o,u){return{instance:n,listener:o,currentTarget:u}}function d(n,o){for(var u=o+"Capture",p=[];n!==null;){var g=n,w=g.stateNode;g.tag===5&&w!==null&&(g=w,w=At(n,u),w!=null&&p.unshift(l(n,w,g)),w=At(n,o),w!=null&&p.push(l(n,w,g))),n=n.return}return p}function m(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function E(n,o,u,p,g){for(var w=o._reactName,P=[];u!==null&&u!==p;){var b=u,F=b.alternate,ee=b.stateNode;if(F!==null&&F===p)break;b.tag===5&&ee!==null&&(b=ee,g?(F=At(u,w),F!=null&&P.unshift(l(u,F,b))):g||(F=At(u,w),F!=null&&P.push(l(u,F,b)))),u=u.return}P.length!==0&&n.push({event:o,listeners:P})}var x=/\r\n?/g,D=/\u0000|\uFFFD/g;function G(n){return(typeof n=="string"?n:""+n).replace(x,`
`).replace(D,"")}function J(n,o,u){if(o=G(o),G(n)!==o&&u)throw Error(t(425))}function ae(){}var _e=null,Me=null;function qe(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Jt=typeof setTimeout=="function"?setTimeout:void 0,qt=typeof clearTimeout=="function"?clearTimeout:void 0,Fn=typeof Promise=="function"?Promise:void 0,Pn=typeof queueMicrotask=="function"?queueMicrotask:typeof Fn<"u"?function(n){return Fn.resolve(null).then(n).catch(lo)}:Jt;function lo(n){setTimeout(function(){throw n})}function su(n,o){var u=o,p=0;do{var g=u.nextSibling;if(n.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(p===0){n.removeChild(g),Xt(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=g}while(u);Xt(o)}function Ei(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function wc(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return n;o--}else u==="/$"&&o++}n=n.previousSibling}return null}var os=Math.random().toString(36).slice(2),br="__reactFiber$"+os,uo="__reactProps$"+os,ht="__reactContainer$"+os,co="__reactEvents$"+os,_d="__reactListeners$"+os,vd="__reactHandles$"+os;function as(n){var o=n[br];if(o)return o;for(var u=n.parentNode;u;){if(o=u[ht]||u[br]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(n=wc(n);n!==null;){if(u=n[br])return u;n=wc(n)}return o}n=u,u=n.parentNode}return null}function ls(n){return n=n[br]||n[ht],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function us(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function il(n){return n[uo]||null}var yd=[],sl=-1;function ho(n){return{current:n}}function St(n){0>sl||(n.current=yd[sl],yd[sl]=null,sl--)}function Tt(n,o){sl++,yd[sl]=n.current,n.current=o}var fo={},xn=ho(fo),Jn=ho(!1),ma=fo;function ol(n,o){var u=n.type.contextTypes;if(!u)return fo;var p=n.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var g={},w;for(w in u)g[w]=o[w];return p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=g),g}function er(n){return n=n.childContextTypes,n!=null}function Ec(){St(Jn),St(xn)}function Pm(n,o,u){if(xn.current!==fo)throw Error(t(168));Tt(xn,o),Tt(Jn,u)}function xm(n,o,u){var p=n.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var g in p)if(!(g in o))throw Error(t(108,Ze(n)||"Unknown",g));return se({},u,p)}function Tc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fo,ma=xn.current,Tt(xn,n),Tt(Jn,Jn.current),!0}function Cm(n,o,u){var p=n.stateNode;if(!p)throw Error(t(169));u?(n=xm(n,o,ma),p.__reactInternalMemoizedMergedChildContext=n,St(Jn),St(xn),Tt(xn,n)):St(Jn),Tt(Jn,u)}var cs=null,Ic=!1,wd=!1;function Am(n){cs===null?cs=[n]:cs.push(n)}function G0(n){Ic=!0,Am(n)}function po(){if(!wd&&cs!==null){wd=!0;var n=0,o=Ge;try{var u=cs;for(Ge=1;n<u.length;n++){var p=u[n];do p=p(!0);while(p!==null)}cs=null,Ic=!1}catch(g){throw cs!==null&&(cs=cs.slice(n+1)),Fs(qi,po),g}finally{Ge=o,wd=!1}}return null}var al=[],ll=0,Sc=null,Pc=0,Or=[],Mr=0,ga=null,hs=1,ds="";function _a(n,o){al[ll++]=Pc,al[ll++]=Sc,Sc=n,Pc=o}function km(n,o,u){Or[Mr++]=hs,Or[Mr++]=ds,Or[Mr++]=ga,ga=n;var p=hs;n=ds;var g=32-Ue(p)-1;p&=~(1<<g),u+=1;var w=32-Ue(o)+g;if(30<w){var P=g-g%5;w=(p&(1<<P)-1).toString(32),p>>=P,g-=P,hs=1<<32-Ue(o)+g|u<<g|p,ds=w+n}else hs=1<<w|u<<g|p,ds=n}function Ed(n){n.return!==null&&(_a(n,1),km(n,1,0))}function Td(n){for(;n===Sc;)Sc=al[--ll],al[ll]=null,Pc=al[--ll],al[ll]=null;for(;n===ga;)ga=Or[--Mr],Or[Mr]=null,ds=Or[--Mr],Or[Mr]=null,hs=Or[--Mr],Or[Mr]=null}var vr=null,yr=null,xt=!1,ei=null;function Rm(n,o){var u=zr(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=n,o=n.deletions,o===null?(n.deletions=[u],n.flags|=16):o.push(u)}function Lm(n,o){switch(n.tag){case 5:var u=n.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,vr=n,yr=Ei(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,vr=n,yr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=ga!==null?{id:hs,overflow:ds}:null,n.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=zr(18,null,null,0),u.stateNode=o,u.return=n,n.child=u,vr=n,yr=null,!0):!1;default:return!1}}function Id(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Sd(n){if(xt){var o=yr;if(o){var u=o;if(!Lm(n,o)){if(Id(n))throw Error(t(418));o=Ei(u.nextSibling);var p=vr;o&&Lm(n,o)?Rm(p,u):(n.flags=n.flags&-4097|2,xt=!1,vr=n)}}else{if(Id(n))throw Error(t(418));n.flags=n.flags&-4097|2,xt=!1,vr=n}}}function Nm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vr=n}function xc(n){if(n!==vr)return!1;if(!xt)return Nm(n),xt=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!qe(n.type,n.memoizedProps)),o&&(o=yr)){if(Id(n))throw bm(),Error(t(418));for(;o;)Rm(n,o),o=Ei(o.nextSibling)}if(Nm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(o===0){yr=Ei(n.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}n=n.nextSibling}yr=null}}else yr=vr?Ei(n.stateNode.nextSibling):null;return!0}function bm(){for(var n=yr;n;)n=Ei(n.nextSibling)}function ul(){yr=vr=null,xt=!1}function Pd(n){ei===null?ei=[n]:ei.push(n)}var K0=ge.ReactCurrentBatchConfig;function ou(n,o,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,n));var g=p,w=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(P){var b=g.refs;P===null?delete b[w]:b[w]=P},o._stringRef=w,o)}if(typeof n!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,n))}return n}function Cc(n,o){throw n=Object.prototype.toString.call(o),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function Om(n){var o=n._init;return o(n._payload)}function Mm(n){function o(K,B){if(n){var Y=K.deletions;Y===null?(K.deletions=[B],K.flags|=16):Y.push(B)}}function u(K,B){if(!n)return null;for(;B!==null;)o(K,B),B=B.sibling;return null}function p(K,B){for(K=new Map;B!==null;)B.key!==null?K.set(B.key,B):K.set(B.index,B),B=B.sibling;return K}function g(K,B){return K=To(K,B),K.index=0,K.sibling=null,K}function w(K,B,Y){return K.index=Y,n?(Y=K.alternate,Y!==null?(Y=Y.index,Y<B?(K.flags|=2,B):Y):(K.flags|=2,B)):(K.flags|=1048576,B)}function P(K){return n&&K.alternate===null&&(K.flags|=2),K}function b(K,B,Y,fe){return B===null||B.tag!==6?(B=_f(Y,K.mode,fe),B.return=K,B):(B=g(B,Y),B.return=K,B)}function F(K,B,Y,fe){var ke=Y.type;return ke===V?ue(K,B,Y.props.children,fe,Y.key):B!==null&&(B.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===lt&&Om(ke)===B.type)?(fe=g(B,Y.props),fe.ref=ou(K,B,Y),fe.return=K,fe):(fe=Yc(Y.type,Y.key,Y.props,null,K.mode,fe),fe.ref=ou(K,B,Y),fe.return=K,fe)}function ee(K,B,Y,fe){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=vf(Y,K.mode,fe),B.return=K,B):(B=g(B,Y.children||[]),B.return=K,B)}function ue(K,B,Y,fe,ke){return B===null||B.tag!==7?(B=Pa(Y,K.mode,fe,ke),B.return=K,B):(B=g(B,Y),B.return=K,B)}function ce(K,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number")return B=_f(""+B,K.mode,Y),B.return=K,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case be:return Y=Yc(B.type,B.key,B.props,null,K.mode,Y),Y.ref=ou(K,null,B),Y.return=K,Y;case Oe:return B=vf(B,K.mode,Y),B.return=K,B;case lt:var fe=B._init;return ce(K,fe(B._payload),Y)}if(Sr(B)||Re(B))return B=Pa(B,K.mode,Y,null),B.return=K,B;Cc(K,B)}return null}function le(K,B,Y,fe){var ke=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return ke!==null?null:b(K,B,""+Y,fe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case be:return Y.key===ke?F(K,B,Y,fe):null;case Oe:return Y.key===ke?ee(K,B,Y,fe):null;case lt:return ke=Y._init,le(K,B,ke(Y._payload),fe)}if(Sr(Y)||Re(Y))return ke!==null?null:ue(K,B,Y,fe,null);Cc(K,Y)}return null}function we(K,B,Y,fe,ke){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return K=K.get(Y)||null,b(B,K,""+fe,ke);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case be:return K=K.get(fe.key===null?Y:fe.key)||null,F(B,K,fe,ke);case Oe:return K=K.get(fe.key===null?Y:fe.key)||null,ee(B,K,fe,ke);case lt:var De=fe._init;return we(K,B,Y,De(fe._payload),ke)}if(Sr(fe)||Re(fe))return K=K.get(Y)||null,ue(B,K,fe,ke,null);Cc(B,fe)}return null}function Pe(K,B,Y,fe){for(var ke=null,De=null,Ve=B,$e=B=0,hn=null;Ve!==null&&$e<Y.length;$e++){Ve.index>$e?(hn=Ve,Ve=null):hn=Ve.sibling;var st=le(K,Ve,Y[$e],fe);if(st===null){Ve===null&&(Ve=hn);break}n&&Ve&&st.alternate===null&&o(K,Ve),B=w(st,B,$e),De===null?ke=st:De.sibling=st,De=st,Ve=hn}if($e===Y.length)return u(K,Ve),xt&&_a(K,$e),ke;if(Ve===null){for(;$e<Y.length;$e++)Ve=ce(K,Y[$e],fe),Ve!==null&&(B=w(Ve,B,$e),De===null?ke=Ve:De.sibling=Ve,De=Ve);return xt&&_a(K,$e),ke}for(Ve=p(K,Ve);$e<Y.length;$e++)hn=we(Ve,K,$e,Y[$e],fe),hn!==null&&(n&&hn.alternate!==null&&Ve.delete(hn.key===null?$e:hn.key),B=w(hn,B,$e),De===null?ke=hn:De.sibling=hn,De=hn);return n&&Ve.forEach(function(Io){return o(K,Io)}),xt&&_a(K,$e),ke}function Ce(K,B,Y,fe){var ke=Re(Y);if(typeof ke!="function")throw Error(t(150));if(Y=ke.call(Y),Y==null)throw Error(t(151));for(var De=ke=null,Ve=B,$e=B=0,hn=null,st=Y.next();Ve!==null&&!st.done;$e++,st=Y.next()){Ve.index>$e?(hn=Ve,Ve=null):hn=Ve.sibling;var Io=le(K,Ve,st.value,fe);if(Io===null){Ve===null&&(Ve=hn);break}n&&Ve&&Io.alternate===null&&o(K,Ve),B=w(Io,B,$e),De===null?ke=Io:De.sibling=Io,De=Io,Ve=hn}if(st.done)return u(K,Ve),xt&&_a(K,$e),ke;if(Ve===null){for(;!st.done;$e++,st=Y.next())st=ce(K,st.value,fe),st!==null&&(B=w(st,B,$e),De===null?ke=st:De.sibling=st,De=st);return xt&&_a(K,$e),ke}for(Ve=p(K,Ve);!st.done;$e++,st=Y.next())st=we(Ve,K,$e,st.value,fe),st!==null&&(n&&st.alternate!==null&&Ve.delete(st.key===null?$e:st.key),B=w(st,B,$e),De===null?ke=st:De.sibling=st,De=st);return n&&Ve.forEach(function(AE){return o(K,AE)}),xt&&_a(K,$e),ke}function jt(K,B,Y,fe){if(typeof Y=="object"&&Y!==null&&Y.type===V&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case be:e:{for(var ke=Y.key,De=B;De!==null;){if(De.key===ke){if(ke=Y.type,ke===V){if(De.tag===7){u(K,De.sibling),B=g(De,Y.props.children),B.return=K,K=B;break e}}else if(De.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===lt&&Om(ke)===De.type){u(K,De.sibling),B=g(De,Y.props),B.ref=ou(K,De,Y),B.return=K,K=B;break e}u(K,De);break}else o(K,De);De=De.sibling}Y.type===V?(B=Pa(Y.props.children,K.mode,fe,Y.key),B.return=K,K=B):(fe=Yc(Y.type,Y.key,Y.props,null,K.mode,fe),fe.ref=ou(K,B,Y),fe.return=K,K=fe)}return P(K);case Oe:e:{for(De=Y.key;B!==null;){if(B.key===De)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){u(K,B.sibling),B=g(B,Y.children||[]),B.return=K,K=B;break e}else{u(K,B);break}else o(K,B);B=B.sibling}B=vf(Y,K.mode,fe),B.return=K,K=B}return P(K);case lt:return De=Y._init,jt(K,B,De(Y._payload),fe)}if(Sr(Y))return Pe(K,B,Y,fe);if(Re(Y))return Ce(K,B,Y,fe);Cc(K,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,B!==null&&B.tag===6?(u(K,B.sibling),B=g(B,Y),B.return=K,K=B):(u(K,B),B=_f(Y,K.mode,fe),B.return=K,K=B),P(K)):u(K,B)}return jt}var cl=Mm(!0),Dm=Mm(!1),Ac=ho(null),kc=null,hl=null,xd=null;function Cd(){xd=hl=kc=null}function Ad(n){var o=Ac.current;St(Ac),n._currentValue=o}function kd(n,o,u){for(;n!==null;){var p=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),n===u)break;n=n.return}}function dl(n,o){kc=n,xd=hl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&o)!==0&&(tr=!0),n.firstContext=null)}function Dr(n){var o=n._currentValue;if(xd!==n)if(n={context:n,memoizedValue:o,next:null},hl===null){if(kc===null)throw Error(t(308));hl=n,kc.dependencies={lanes:0,firstContext:n}}else hl=hl.next=n;return o}var va=null;function Rd(n){va===null?va=[n]:va.push(n)}function Vm(n,o,u,p){var g=o.interleaved;return g===null?(u.next=u,Rd(o)):(u.next=g.next,g.next=u),o.interleaved=u,fs(n,p)}function fs(n,o){n.lanes|=o;var u=n.alternate;for(u!==null&&(u.lanes|=o),u=n,n=n.return;n!==null;)n.childLanes|=o,u=n.alternate,u!==null&&(u.childLanes|=o),u=n,n=n.return;return u.tag===3?u.stateNode:null}var mo=!1;function Ld(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fm(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ps(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function go(n,o,u){var p=n.updateQueue;if(p===null)return null;if(p=p.shared,(it&2)!==0){var g=p.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),p.pending=o,fs(n,u)}return g=p.interleaved,g===null?(o.next=o,Rd(p)):(o.next=g.next,g.next=o),p.interleaved=o,fs(n,u)}function Rc(n,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=n.pendingLanes,u|=p,o.lanes=u,Tn(n,u)}}function zm(n,o){var u=n.updateQueue,p=n.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var g=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var P={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?g=w=P:w=w.next=P,u=u.next}while(u!==null);w===null?g=w=o:w=w.next=o}else g=w=o;u={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:p.shared,effects:p.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=o:n.next=o,u.lastBaseUpdate=o}function Lc(n,o,u,p){var g=n.updateQueue;mo=!1;var w=g.firstBaseUpdate,P=g.lastBaseUpdate,b=g.shared.pending;if(b!==null){g.shared.pending=null;var F=b,ee=F.next;F.next=null,P===null?w=ee:P.next=ee,P=F;var ue=n.alternate;ue!==null&&(ue=ue.updateQueue,b=ue.lastBaseUpdate,b!==P&&(b===null?ue.firstBaseUpdate=ee:b.next=ee,ue.lastBaseUpdate=F))}if(w!==null){var ce=g.baseState;P=0,ue=ee=F=null,b=w;do{var le=b.lane,we=b.eventTime;if((p&le)===le){ue!==null&&(ue=ue.next={eventTime:we,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var Pe=n,Ce=b;switch(le=o,we=u,Ce.tag){case 1:if(Pe=Ce.payload,typeof Pe=="function"){ce=Pe.call(we,ce,le);break e}ce=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ce.payload,le=typeof Pe=="function"?Pe.call(we,ce,le):Pe,le==null)break e;ce=se({},ce,le);break e;case 2:mo=!0}}b.callback!==null&&b.lane!==0&&(n.flags|=64,le=g.effects,le===null?g.effects=[b]:le.push(b))}else we={eventTime:we,lane:le,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ue===null?(ee=ue=we,F=ce):ue=ue.next=we,P|=le;if(b=b.next,b===null){if(b=g.shared.pending,b===null)break;le=b,b=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);if(ue===null&&(F=ce),g.baseState=F,g.firstBaseUpdate=ee,g.lastBaseUpdate=ue,o=g.shared.interleaved,o!==null){g=o;do P|=g.lane,g=g.next;while(g!==o)}else w===null&&(g.shared.lanes=0);Ea|=P,n.lanes=P,n.memoizedState=ce}}function jm(n,o,u){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var p=n[o],g=p.callback;if(g!==null){if(p.callback=null,p=u,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var au={},Ti=ho(au),lu=ho(au),uu=ho(au);function ya(n){if(n===au)throw Error(t(174));return n}function Nd(n,o){switch(Tt(uu,o),Tt(lu,n),Tt(Ti,au),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Mt(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=Mt(o,n)}St(Ti),Tt(Ti,o)}function fl(){St(Ti),St(lu),St(uu)}function Um(n){ya(uu.current);var o=ya(Ti.current),u=Mt(o,n.type);o!==u&&(Tt(lu,n),Tt(Ti,u))}function bd(n){lu.current===n&&(St(Ti),St(lu))}var Rt=ho(0);function Nc(n){for(var o=n;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Od=[];function Md(){for(var n=0;n<Od.length;n++)Od[n]._workInProgressVersionPrimary=null;Od.length=0}var bc=ge.ReactCurrentDispatcher,Dd=ge.ReactCurrentBatchConfig,wa=0,Lt=null,en=null,un=null,Oc=!1,cu=!1,hu=0,Q0=0;function Cn(){throw Error(t(321))}function Vd(n,o){if(o===null)return!1;for(var u=0;u<o.length&&u<n.length;u++)if(!gr(n[u],o[u]))return!1;return!0}function Fd(n,o,u,p,g,w){if(wa=w,Lt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,bc.current=n===null||n.memoizedState===null?eE:tE,n=u(p,g),cu){w=0;do{if(cu=!1,hu=0,25<=w)throw Error(t(301));w+=1,un=en=null,o.updateQueue=null,bc.current=nE,n=u(p,g)}while(cu)}if(bc.current=Vc,o=en!==null&&en.next!==null,wa=0,un=en=Lt=null,Oc=!1,o)throw Error(t(300));return n}function zd(){var n=hu!==0;return hu=0,n}function Ii(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Lt.memoizedState=un=n:un=un.next=n,un}function Vr(){if(en===null){var n=Lt.alternate;n=n!==null?n.memoizedState:null}else n=en.next;var o=un===null?Lt.memoizedState:un.next;if(o!==null)un=o,en=n;else{if(n===null)throw Error(t(310));en=n,n={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},un===null?Lt.memoizedState=un=n:un=un.next=n}return un}function du(n,o){return typeof o=="function"?o(n):o}function jd(n){var o=Vr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var p=en,g=p.baseQueue,w=u.pending;if(w!==null){if(g!==null){var P=g.next;g.next=w.next,w.next=P}p.baseQueue=g=w,u.pending=null}if(g!==null){w=g.next,p=p.baseState;var b=P=null,F=null,ee=w;do{var ue=ee.lane;if((wa&ue)===ue)F!==null&&(F=F.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),p=ee.hasEagerState?ee.eagerState:n(p,ee.action);else{var ce={lane:ue,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};F===null?(b=F=ce,P=p):F=F.next=ce,Lt.lanes|=ue,Ea|=ue}ee=ee.next}while(ee!==null&&ee!==w);F===null?P=p:F.next=b,gr(p,o.memoizedState)||(tr=!0),o.memoizedState=p,o.baseState=P,o.baseQueue=F,u.lastRenderedState=p}if(n=u.interleaved,n!==null){g=n;do w=g.lane,Lt.lanes|=w,Ea|=w,g=g.next;while(g!==n)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Ud(n){var o=Vr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var p=u.dispatch,g=u.pending,w=o.memoizedState;if(g!==null){u.pending=null;var P=g=g.next;do w=n(w,P.action),P=P.next;while(P!==g);gr(w,o.memoizedState)||(tr=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,p]}function Bm(){}function $m(n,o){var u=Lt,p=Vr(),g=o(),w=!gr(p.memoizedState,g);if(w&&(p.memoizedState=g,tr=!0),p=p.queue,Bd(qm.bind(null,u,p,n),[n]),p.getSnapshot!==o||w||un!==null&&un.memoizedState.tag&1){if(u.flags|=2048,fu(9,Wm.bind(null,u,p,g,o),void 0,null),cn===null)throw Error(t(349));(wa&30)!==0||Hm(u,o,g)}return g}function Hm(n,o,u){n.flags|=16384,n={getSnapshot:o,value:u},o=Lt.updateQueue,o===null?(o={lastEffect:null,stores:null},Lt.updateQueue=o,o.stores=[n]):(u=o.stores,u===null?o.stores=[n]:u.push(n))}function Wm(n,o,u,p){o.value=u,o.getSnapshot=p,Zm(o)&&Gm(n)}function qm(n,o,u){return u(function(){Zm(o)&&Gm(n)})}function Zm(n){var o=n.getSnapshot;n=n.value;try{var u=o();return!gr(n,u)}catch{return!0}}function Gm(n){var o=fs(n,1);o!==null&&ii(o,n,1,-1)}function Km(n){var o=Ii();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:du,lastRenderedState:n},o.queue=n,n=n.dispatch=J0.bind(null,Lt,n),[o.memoizedState,n]}function fu(n,o,u,p){return n={tag:n,create:o,destroy:u,deps:p,next:null},o=Lt.updateQueue,o===null?(o={lastEffect:null,stores:null},Lt.updateQueue=o,o.lastEffect=n.next=n):(u=o.lastEffect,u===null?o.lastEffect=n.next=n:(p=u.next,u.next=n,n.next=p,o.lastEffect=n)),n}function Qm(){return Vr().memoizedState}function Mc(n,o,u,p){var g=Ii();Lt.flags|=n,g.memoizedState=fu(1|o,u,void 0,p===void 0?null:p)}function Dc(n,o,u,p){var g=Vr();p=p===void 0?null:p;var w=void 0;if(en!==null){var P=en.memoizedState;if(w=P.destroy,p!==null&&Vd(p,P.deps)){g.memoizedState=fu(o,u,w,p);return}}Lt.flags|=n,g.memoizedState=fu(1|o,u,w,p)}function Ym(n,o){return Mc(8390656,8,n,o)}function Bd(n,o){return Dc(2048,8,n,o)}function Xm(n,o){return Dc(4,2,n,o)}function Jm(n,o){return Dc(4,4,n,o)}function eg(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function tg(n,o,u){return u=u!=null?u.concat([n]):null,Dc(4,4,eg.bind(null,o,n),u)}function $d(){}function ng(n,o){var u=Vr();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&Vd(o,p[1])?p[0]:(u.memoizedState=[n,o],n)}function rg(n,o){var u=Vr();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&Vd(o,p[1])?p[0]:(n=n(),u.memoizedState=[n,o],n)}function ig(n,o,u){return(wa&21)===0?(n.baseState&&(n.baseState=!1,tr=!0),n.memoizedState=u):(gr(u,o)||(u=Ki(),Lt.lanes|=u,Ea|=u,n.baseState=!0),o)}function Y0(n,o){var u=Ge;Ge=u!==0&&4>u?u:4,n(!0);var p=Dd.transition;Dd.transition={};try{n(!1),o()}finally{Ge=u,Dd.transition=p}}function sg(){return Vr().memoizedState}function X0(n,o,u){var p=wo(n);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},og(n))ag(o,u);else if(u=Vm(n,o,u,p),u!==null){var g=jn();ii(u,n,p,g),lg(u,o,p)}}function J0(n,o,u){var p=wo(n),g={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(og(n))ag(o,g);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var P=o.lastRenderedState,b=w(P,u);if(g.hasEagerState=!0,g.eagerState=b,gr(b,P)){var F=o.interleaved;F===null?(g.next=g,Rd(o)):(g.next=F.next,F.next=g),o.interleaved=g;return}}catch{}finally{}u=Vm(n,o,g,p),u!==null&&(g=jn(),ii(u,n,p,g),lg(u,o,p))}}function og(n){var o=n.alternate;return n===Lt||o!==null&&o===Lt}function ag(n,o){cu=Oc=!0;var u=n.pending;u===null?o.next=o:(o.next=u.next,u.next=o),n.pending=o}function lg(n,o,u){if((u&4194240)!==0){var p=o.lanes;p&=n.pendingLanes,u|=p,o.lanes=u,Tn(n,u)}}var Vc={readContext:Dr,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},eE={readContext:Dr,useCallback:function(n,o){return Ii().memoizedState=[n,o===void 0?null:o],n},useContext:Dr,useEffect:Ym,useImperativeHandle:function(n,o,u){return u=u!=null?u.concat([n]):null,Mc(4194308,4,eg.bind(null,o,n),u)},useLayoutEffect:function(n,o){return Mc(4194308,4,n,o)},useInsertionEffect:function(n,o){return Mc(4,2,n,o)},useMemo:function(n,o){var u=Ii();return o=o===void 0?null:o,n=n(),u.memoizedState=[n,o],n},useReducer:function(n,o,u){var p=Ii();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},p.queue=n,n=n.dispatch=X0.bind(null,Lt,n),[p.memoizedState,n]},useRef:function(n){var o=Ii();return n={current:n},o.memoizedState=n},useState:Km,useDebugValue:$d,useDeferredValue:function(n){return Ii().memoizedState=n},useTransition:function(){var n=Km(!1),o=n[0];return n=Y0.bind(null,n[1]),Ii().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,u){var p=Lt,g=Ii();if(xt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),cn===null)throw Error(t(349));(wa&30)!==0||Hm(p,o,u)}g.memoizedState=u;var w={value:u,getSnapshot:o};return g.queue=w,Ym(qm.bind(null,p,w,n),[n]),p.flags|=2048,fu(9,Wm.bind(null,p,w,u,o),void 0,null),u},useId:function(){var n=Ii(),o=cn.identifierPrefix;if(xt){var u=ds,p=hs;u=(p&~(1<<32-Ue(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=hu++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=Q0++,o=":"+o+"r"+u.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},tE={readContext:Dr,useCallback:ng,useContext:Dr,useEffect:Bd,useImperativeHandle:tg,useInsertionEffect:Xm,useLayoutEffect:Jm,useMemo:rg,useReducer:jd,useRef:Qm,useState:function(){return jd(du)},useDebugValue:$d,useDeferredValue:function(n){var o=Vr();return ig(o,en.memoizedState,n)},useTransition:function(){var n=jd(du)[0],o=Vr().memoizedState;return[n,o]},useMutableSource:Bm,useSyncExternalStore:$m,useId:sg,unstable_isNewReconciler:!1},nE={readContext:Dr,useCallback:ng,useContext:Dr,useEffect:Bd,useImperativeHandle:tg,useInsertionEffect:Xm,useLayoutEffect:Jm,useMemo:rg,useReducer:Ud,useRef:Qm,useState:function(){return Ud(du)},useDebugValue:$d,useDeferredValue:function(n){var o=Vr();return en===null?o.memoizedState=n:ig(o,en.memoizedState,n)},useTransition:function(){var n=Ud(du)[0],o=Vr().memoizedState;return[n,o]},useMutableSource:Bm,useSyncExternalStore:$m,useId:sg,unstable_isNewReconciler:!1};function ti(n,o){if(n&&n.defaultProps){o=se({},o),n=n.defaultProps;for(var u in n)o[u]===void 0&&(o[u]=n[u]);return o}return o}function Hd(n,o,u,p){o=n.memoizedState,u=u(p,o),u=u==null?o:se({},o,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Fc={isMounted:function(n){return(n=n._reactInternals)?Bn(n)===n:!1},enqueueSetState:function(n,o,u){n=n._reactInternals;var p=jn(),g=wo(n),w=ps(p,g);w.payload=o,u!=null&&(w.callback=u),o=go(n,w,g),o!==null&&(ii(o,n,g,p),Rc(o,n,g))},enqueueReplaceState:function(n,o,u){n=n._reactInternals;var p=jn(),g=wo(n),w=ps(p,g);w.tag=1,w.payload=o,u!=null&&(w.callback=u),o=go(n,w,g),o!==null&&(ii(o,n,g,p),Rc(o,n,g))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var u=jn(),p=wo(n),g=ps(u,p);g.tag=2,o!=null&&(g.callback=o),o=go(n,g,p),o!==null&&(ii(o,n,p,u),Rc(o,n,p))}};function ug(n,o,u,p,g,w,P){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(p,w,P):o.prototype&&o.prototype.isPureReactComponent?!vi(u,p)||!vi(g,w):!0}function cg(n,o,u){var p=!1,g=fo,w=o.contextType;return typeof w=="object"&&w!==null?w=Dr(w):(g=er(o)?ma:xn.current,p=o.contextTypes,w=(p=p!=null)?ol(n,g):fo),o=new o(u,w),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Fc,n.stateNode=o,o._reactInternals=n,p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=w),o}function hg(n,o,u,p){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==n&&Fc.enqueueReplaceState(o,o.state,null)}function Wd(n,o,u,p){var g=n.stateNode;g.props=u,g.state=n.memoizedState,g.refs={},Ld(n);var w=o.contextType;typeof w=="object"&&w!==null?g.context=Dr(w):(w=er(o)?ma:xn.current,g.context=ol(n,w)),g.state=n.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Hd(n,o,w,u),g.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Fc.enqueueReplaceState(g,g.state,null),Lc(n,u,g,p),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function pl(n,o){try{var u="",p=o;do u+=Ie(p),p=p.return;while(p);var g=u}catch(w){g=`
Error generating stack: `+w.message+`
`+w.stack}return{value:n,source:o,stack:g,digest:null}}function qd(n,o,u){return{value:n,source:null,stack:u??null,digest:o??null}}function Zd(n,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var rE=typeof WeakMap=="function"?WeakMap:Map;function dg(n,o,u){u=ps(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){Wc||(Wc=!0,uf=p),Zd(n,o)},u}function fg(n,o,u){u=ps(-1,u),u.tag=3;var p=n.type.getDerivedStateFromError;if(typeof p=="function"){var g=o.value;u.payload=function(){return p(g)},u.callback=function(){Zd(n,o)}}var w=n.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){Zd(n,o),typeof p!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var P=o.stack;this.componentDidCatch(o.value,{componentStack:P!==null?P:""})}),u}function pg(n,o,u){var p=n.pingCache;if(p===null){p=n.pingCache=new rE;var g=new Set;p.set(o,g)}else g=p.get(o),g===void 0&&(g=new Set,p.set(o,g));g.has(u)||(g.add(u),n=_E.bind(null,n,o,u),o.then(n,n))}function mg(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function gg(n,o,u,p,g){return(n.mode&1)===0?(n===o?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ps(-1,1),o.tag=2,go(u,o,1))),u.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var iE=ge.ReactCurrentOwner,tr=!1;function zn(n,o,u,p){o.child=n===null?Dm(o,null,u,p):cl(o,n.child,u,p)}function _g(n,o,u,p,g){u=u.render;var w=o.ref;return dl(o,g),p=Fd(n,o,u,p,w,g),u=zd(),n!==null&&!tr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,ms(n,o,g)):(xt&&u&&Ed(o),o.flags|=1,zn(n,o,p,g),o.child)}function vg(n,o,u,p,g){if(n===null){var w=u.type;return typeof w=="function"&&!gf(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=w,yg(n,o,w,p,g)):(n=Yc(u.type,null,p,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(w=n.child,(n.lanes&g)===0){var P=w.memoizedProps;if(u=u.compare,u=u!==null?u:vi,u(P,p)&&n.ref===o.ref)return ms(n,o,g)}return o.flags|=1,n=To(w,p),n.ref=o.ref,n.return=o,o.child=n}function yg(n,o,u,p,g){if(n!==null){var w=n.memoizedProps;if(vi(w,p)&&n.ref===o.ref)if(tr=!1,o.pendingProps=p=w,(n.lanes&g)!==0)(n.flags&131072)!==0&&(tr=!0);else return o.lanes=n.lanes,ms(n,o,g)}return Gd(n,o,u,p,g)}function wg(n,o,u){var p=o.pendingProps,g=p.children,w=n!==null?n.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(gl,wr),wr|=u;else{if((u&1073741824)===0)return n=w!==null?w.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,Tt(gl,wr),wr|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,Tt(gl,wr),wr|=p}else w!==null?(p=w.baseLanes|u,o.memoizedState=null):p=u,Tt(gl,wr),wr|=p;return zn(n,o,g,u),o.child}function Eg(n,o){var u=o.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Gd(n,o,u,p,g){var w=er(u)?ma:xn.current;return w=ol(o,w),dl(o,g),u=Fd(n,o,u,p,w,g),p=zd(),n!==null&&!tr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,ms(n,o,g)):(xt&&p&&Ed(o),o.flags|=1,zn(n,o,u,g),o.child)}function Tg(n,o,u,p,g){if(er(u)){var w=!0;Tc(o)}else w=!1;if(dl(o,g),o.stateNode===null)jc(n,o),cg(o,u,p),Wd(o,u,p,g),p=!0;else if(n===null){var P=o.stateNode,b=o.memoizedProps;P.props=b;var F=P.context,ee=u.contextType;typeof ee=="object"&&ee!==null?ee=Dr(ee):(ee=er(u)?ma:xn.current,ee=ol(o,ee));var ue=u.getDerivedStateFromProps,ce=typeof ue=="function"||typeof P.getSnapshotBeforeUpdate=="function";ce||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(b!==p||F!==ee)&&hg(o,P,p,ee),mo=!1;var le=o.memoizedState;P.state=le,Lc(o,p,P,g),F=o.memoizedState,b!==p||le!==F||Jn.current||mo?(typeof ue=="function"&&(Hd(o,u,ue,p),F=o.memoizedState),(b=mo||ug(o,u,b,p,le,F,ee))?(ce||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(o.flags|=4194308)):(typeof P.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=F),P.props=p,P.state=F,P.context=ee,p=b):(typeof P.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{P=o.stateNode,Fm(n,o),b=o.memoizedProps,ee=o.type===o.elementType?b:ti(o.type,b),P.props=ee,ce=o.pendingProps,le=P.context,F=u.contextType,typeof F=="object"&&F!==null?F=Dr(F):(F=er(u)?ma:xn.current,F=ol(o,F));var we=u.getDerivedStateFromProps;(ue=typeof we=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(b!==ce||le!==F)&&hg(o,P,p,F),mo=!1,le=o.memoizedState,P.state=le,Lc(o,p,P,g);var Pe=o.memoizedState;b!==ce||le!==Pe||Jn.current||mo?(typeof we=="function"&&(Hd(o,u,we,p),Pe=o.memoizedState),(ee=mo||ug(o,u,ee,p,le,Pe,F)||!1)?(ue||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(p,Pe,F),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(p,Pe,F)),typeof P.componentDidUpdate=="function"&&(o.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof P.componentDidUpdate!="function"||b===n.memoizedProps&&le===n.memoizedState||(o.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&le===n.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=Pe),P.props=p,P.state=Pe,P.context=F,p=ee):(typeof P.componentDidUpdate!="function"||b===n.memoizedProps&&le===n.memoizedState||(o.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&le===n.memoizedState||(o.flags|=1024),p=!1)}return Kd(n,o,u,p,w,g)}function Kd(n,o,u,p,g,w){Eg(n,o);var P=(o.flags&128)!==0;if(!p&&!P)return g&&Cm(o,u,!1),ms(n,o,w);p=o.stateNode,iE.current=o;var b=P&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,n!==null&&P?(o.child=cl(o,n.child,null,w),o.child=cl(o,null,b,w)):zn(n,o,b,w),o.memoizedState=p.state,g&&Cm(o,u,!0),o.child}function Ig(n){var o=n.stateNode;o.pendingContext?Pm(n,o.pendingContext,o.pendingContext!==o.context):o.context&&Pm(n,o.context,!1),Nd(n,o.containerInfo)}function Sg(n,o,u,p,g){return ul(),Pd(g),o.flags|=256,zn(n,o,u,p),o.child}var Qd={dehydrated:null,treeContext:null,retryLane:0};function Yd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Pg(n,o,u){var p=o.pendingProps,g=Rt.current,w=!1,P=(o.flags&128)!==0,b;if((b=P)||(b=n!==null&&n.memoizedState===null?!1:(g&2)!==0),b?(w=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Tt(Rt,g&1),n===null)return Sd(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((o.mode&1)===0?o.lanes=1:n.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(P=p.children,n=p.fallback,w?(p=o.mode,w=o.child,P={mode:"hidden",children:P},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=P):w=Xc(P,p,0,null),n=Pa(n,p,u,null),w.return=o,n.return=o,w.sibling=n,o.child=w,o.child.memoizedState=Yd(u),o.memoizedState=Qd,n):Xd(o,P));if(g=n.memoizedState,g!==null&&(b=g.dehydrated,b!==null))return sE(n,o,P,p,b,g,u);if(w){w=p.fallback,P=o.mode,g=n.child,b=g.sibling;var F={mode:"hidden",children:p.children};return(P&1)===0&&o.child!==g?(p=o.child,p.childLanes=0,p.pendingProps=F,o.deletions=null):(p=To(g,F),p.subtreeFlags=g.subtreeFlags&14680064),b!==null?w=To(b,w):(w=Pa(w,P,u,null),w.flags|=2),w.return=o,p.return=o,p.sibling=w,o.child=p,p=w,w=o.child,P=n.child.memoizedState,P=P===null?Yd(u):{baseLanes:P.baseLanes|u,cachePool:null,transitions:P.transitions},w.memoizedState=P,w.childLanes=n.childLanes&~u,o.memoizedState=Qd,p}return w=n.child,n=w.sibling,p=To(w,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=u),p.return=o,p.sibling=null,n!==null&&(u=o.deletions,u===null?(o.deletions=[n],o.flags|=16):u.push(n)),o.child=p,o.memoizedState=null,p}function Xd(n,o){return o=Xc({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function zc(n,o,u,p){return p!==null&&Pd(p),cl(o,n.child,null,u),n=Xd(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function sE(n,o,u,p,g,w,P){if(u)return o.flags&256?(o.flags&=-257,p=qd(Error(t(422))),zc(n,o,P,p)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(w=p.fallback,g=o.mode,p=Xc({mode:"visible",children:p.children},g,0,null),w=Pa(w,g,P,null),w.flags|=2,p.return=o,w.return=o,p.sibling=w,o.child=p,(o.mode&1)!==0&&cl(o,n.child,null,P),o.child.memoizedState=Yd(P),o.memoizedState=Qd,w);if((o.mode&1)===0)return zc(n,o,P,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var b=p.dgst;return p=b,w=Error(t(419)),p=qd(w,p,void 0),zc(n,o,P,p)}if(b=(P&n.childLanes)!==0,tr||b){if(p=cn,p!==null){switch(P&-P){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|P))!==0?0:g,g!==0&&g!==w.retryLane&&(w.retryLane=g,fs(n,g),ii(p,n,g,-1))}return mf(),p=qd(Error(t(421))),zc(n,o,P,p)}return g.data==="$?"?(o.flags|=128,o.child=n.child,o=vE.bind(null,n),g._reactRetry=o,null):(n=w.treeContext,yr=Ei(g.nextSibling),vr=o,xt=!0,ei=null,n!==null&&(Or[Mr++]=hs,Or[Mr++]=ds,Or[Mr++]=ga,hs=n.id,ds=n.overflow,ga=o),o=Xd(o,p.children),o.flags|=4096,o)}function xg(n,o,u){n.lanes|=o;var p=n.alternate;p!==null&&(p.lanes|=o),kd(n.return,o,u)}function Jd(n,o,u,p,g){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:g}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=g)}function Cg(n,o,u){var p=o.pendingProps,g=p.revealOrder,w=p.tail;if(zn(n,o,p.children,u),p=Rt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&xg(n,u,o);else if(n.tag===19)xg(n,u,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}p&=1}if(Tt(Rt,p),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)n=u.alternate,n!==null&&Nc(n)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Jd(o,!1,g,u,w);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&Nc(n)===null){o.child=g;break}n=g.sibling,g.sibling=u,u=g,g=n}Jd(o,!0,u,null,w);break;case"together":Jd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function jc(n,o){(o.mode&1)===0&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function ms(n,o,u){if(n!==null&&(o.dependencies=n.dependencies),Ea|=o.lanes,(u&o.childLanes)===0)return null;if(n!==null&&o.child!==n.child)throw Error(t(153));if(o.child!==null){for(n=o.child,u=To(n,n.pendingProps),o.child=u,u.return=o;n.sibling!==null;)n=n.sibling,u=u.sibling=To(n,n.pendingProps),u.return=o;u.sibling=null}return o.child}function oE(n,o,u){switch(o.tag){case 3:Ig(o),ul();break;case 5:Um(o);break;case 1:er(o.type)&&Tc(o);break;case 4:Nd(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,g=o.memoizedProps.value;Tt(Ac,p._currentValue),p._currentValue=g;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Tt(Rt,Rt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Pg(n,o,u):(Tt(Rt,Rt.current&1),n=ms(n,o,u),n!==null?n.sibling:null);Tt(Rt,Rt.current&1);break;case 19:if(p=(u&o.childLanes)!==0,(n.flags&128)!==0){if(p)return Cg(n,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Tt(Rt,Rt.current),p)break;return null;case 22:case 23:return o.lanes=0,wg(n,o,u)}return ms(n,o,u)}var Ag,ef,kg,Rg;Ag=function(n,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},ef=function(){},kg=function(n,o,u,p){var g=n.memoizedProps;if(g!==p){n=o.stateNode,ya(Ti.current);var w=null;switch(u){case"input":g=bi(n,g),p=bi(n,p),w=[];break;case"select":g=se({},g,{value:void 0}),p=se({},p,{value:void 0}),w=[];break;case"textarea":g=As(n,g),p=As(n,p),w=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(n.onclick=ae)}ta(u,p);var P;u=null;for(ee in g)if(!p.hasOwnProperty(ee)&&g.hasOwnProperty(ee)&&g[ee]!=null)if(ee==="style"){var b=g[ee];for(P in b)b.hasOwnProperty(P)&&(u||(u={}),u[P]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(a.hasOwnProperty(ee)?w||(w=[]):(w=w||[]).push(ee,null));for(ee in p){var F=p[ee];if(b=g!=null?g[ee]:void 0,p.hasOwnProperty(ee)&&F!==b&&(F!=null||b!=null))if(ee==="style")if(b){for(P in b)!b.hasOwnProperty(P)||F&&F.hasOwnProperty(P)||(u||(u={}),u[P]="");for(P in F)F.hasOwnProperty(P)&&b[P]!==F[P]&&(u||(u={}),u[P]=F[P])}else u||(w||(w=[]),w.push(ee,u)),u=F;else ee==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,b=b?b.__html:void 0,F!=null&&b!==F&&(w=w||[]).push(ee,F)):ee==="children"?typeof F!="string"&&typeof F!="number"||(w=w||[]).push(ee,""+F):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(a.hasOwnProperty(ee)?(F!=null&&ee==="onScroll"&&vt("scroll",n),w||b===F||(w=[])):(w=w||[]).push(ee,F))}u&&(w=w||[]).push("style",u);var ee=w;(o.updateQueue=ee)&&(o.flags|=4)}},Rg=function(n,o,u,p){u!==p&&(o.flags|=4)};function pu(n,o){if(!xt)switch(n.tailMode){case"hidden":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:p.sibling=null}}function An(n){var o=n.alternate!==null&&n.alternate.child===n.child,u=0,p=0;if(o)for(var g=n.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=p,n.childLanes=u,o}function aE(n,o,u){var p=o.pendingProps;switch(Td(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(o),null;case 1:return er(o.type)&&Ec(),An(o),null;case 3:return p=o.stateNode,fl(),St(Jn),St(xn),Md(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(n===null||n.child===null)&&(xc(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ei!==null&&(df(ei),ei=null))),ef(n,o),An(o),null;case 5:bd(o);var g=ya(uu.current);if(u=o.type,n!==null&&o.stateNode!=null)kg(n,o,u,p,g),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return An(o),null}if(n=ya(Ti.current),xc(o)){p=o.stateNode,u=o.type;var w=o.memoizedProps;switch(p[br]=o,p[uo]=w,n=(o.mode&1)!==0,u){case"dialog":vt("cancel",p),vt("close",p);break;case"iframe":case"object":case"embed":vt("load",p);break;case"video":case"audio":for(g=0;g<oo.length;g++)vt(oo[g],p);break;case"source":vt("error",p);break;case"img":case"image":case"link":vt("error",p),vt("load",p);break;case"details":vt("toggle",p);break;case"input":Oi(p,w),vt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},vt("invalid",p);break;case"textarea":Vi(p,w),vt("invalid",p)}ta(u,w),g=null;for(var P in w)if(w.hasOwnProperty(P)){var b=w[P];P==="children"?typeof b=="string"?p.textContent!==b&&(w.suppressHydrationWarning!==!0&&J(p.textContent,b,n),g=["children",b]):typeof b=="number"&&p.textContent!==""+b&&(w.suppressHydrationWarning!==!0&&J(p.textContent,b,n),g=["children",""+b]):a.hasOwnProperty(P)&&b!=null&&P==="onScroll"&&vt("scroll",p)}switch(u){case"input":lr(p),Di(p,w,!0);break;case"textarea":lr(p),Jo(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=ae)}p=g,o.updateQueue=p,p!==null&&(o.flags|=4)}else{P=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ct(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=P.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof p.is=="string"?n=P.createElement(u,{is:p.is}):(n=P.createElement(u),u==="select"&&(P=n,p.multiple?P.multiple=!0:p.size&&(P.size=p.size))):n=P.createElementNS(n,u),n[br]=o,n[uo]=p,Ag(n,o,!1,!1),o.stateNode=n;e:{switch(P=Hr(u,p),u){case"dialog":vt("cancel",n),vt("close",n),g=p;break;case"iframe":case"object":case"embed":vt("load",n),g=p;break;case"video":case"audio":for(g=0;g<oo.length;g++)vt(oo[g],n);g=p;break;case"source":vt("error",n),g=p;break;case"img":case"image":case"link":vt("error",n),vt("load",n),g=p;break;case"details":vt("toggle",n),g=p;break;case"input":Oi(n,p),g=bi(n,p),vt("invalid",n);break;case"option":g=p;break;case"select":n._wrapperState={wasMultiple:!!p.multiple},g=se({},p,{value:void 0}),vt("invalid",n);break;case"textarea":Vi(n,p),g=As(n,p),vt("invalid",n);break;default:g=p}ta(u,g),b=g;for(w in b)if(b.hasOwnProperty(w)){var F=b[w];w==="style"?zi(n,F):w==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&ea(n,F)):w==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&$r(n,F):typeof F=="number"&&$r(n,""+F):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(a.hasOwnProperty(w)?F!=null&&w==="onScroll"&&vt("scroll",n):F!=null&&me(n,w,F,P))}switch(u){case"input":lr(n),Di(n,p,!1);break;case"textarea":lr(n),Jo(n);break;case"option":p.value!=null&&n.setAttribute("value",""+Ke(p.value));break;case"select":n.multiple=!!p.multiple,w=p.value,w!=null?ur(n,!!p.multiple,w,!1):p.defaultValue!=null&&ur(n,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=ae)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return An(o),null;case 6:if(n&&o.stateNode!=null)Rg(n,o,n.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(u=ya(uu.current),ya(Ti.current),xc(o)){if(p=o.stateNode,u=o.memoizedProps,p[br]=o,(w=p.nodeValue!==u)&&(n=vr,n!==null))switch(n.tag){case 3:J(p.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&J(p.nodeValue,u,(n.mode&1)!==0)}w&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[br]=o,o.stateNode=p}return An(o),null;case 13:if(St(Rt),p=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(xt&&yr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)bm(),ul(),o.flags|=98560,w=!1;else if(w=xc(o),p!==null&&p.dehydrated!==null){if(n===null){if(!w)throw Error(t(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[br]=o}else ul(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;An(o),w=!1}else ei!==null&&(df(ei),ei=null),w=!0;if(!w)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(p=p!==null,p!==(n!==null&&n.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(n===null||(Rt.current&1)!==0?tn===0&&(tn=3):mf())),o.updateQueue!==null&&(o.flags|=4),An(o),null);case 4:return fl(),ef(n,o),n===null&&ao(o.stateNode.containerInfo),An(o),null;case 10:return Ad(o.type._context),An(o),null;case 17:return er(o.type)&&Ec(),An(o),null;case 19:if(St(Rt),w=o.memoizedState,w===null)return An(o),null;if(p=(o.flags&128)!==0,P=w.rendering,P===null)if(p)pu(w,!1);else{if(tn!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(P=Nc(n),P!==null){for(o.flags|=128,pu(w,!1),p=P.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)w=u,n=p,w.flags&=14680066,P=w.alternate,P===null?(w.childLanes=0,w.lanes=n,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=P.childLanes,w.lanes=P.lanes,w.child=P.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=P.memoizedProps,w.memoizedState=P.memoizedState,w.updateQueue=P.updateQueue,w.type=P.type,n=P.dependencies,w.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return Tt(Rt,Rt.current&1|2),o.child}n=n.sibling}w.tail!==null&&_t()>_l&&(o.flags|=128,p=!0,pu(w,!1),o.lanes=4194304)}else{if(!p)if(n=Nc(P),n!==null){if(o.flags|=128,p=!0,u=n.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),pu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!P.alternate&&!xt)return An(o),null}else 2*_t()-w.renderingStartTime>_l&&u!==1073741824&&(o.flags|=128,p=!0,pu(w,!1),o.lanes=4194304);w.isBackwards?(P.sibling=o.child,o.child=P):(u=w.last,u!==null?u.sibling=P:o.child=P,w.last=P)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=_t(),o.sibling=null,u=Rt.current,Tt(Rt,p?u&1|2:u&1),o):(An(o),null);case 22:case 23:return pf(),p=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(wr&1073741824)!==0&&(An(o),o.subtreeFlags&6&&(o.flags|=8192)):An(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function lE(n,o){switch(Td(o),o.tag){case 1:return er(o.type)&&Ec(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return fl(),St(Jn),St(xn),Md(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 5:return bd(o),null;case 13:if(St(Rt),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ul()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return St(Rt),null;case 4:return fl(),null;case 10:return Ad(o.type._context),null;case 22:case 23:return pf(),null;case 24:return null;default:return null}}var Uc=!1,kn=!1,uE=typeof WeakSet=="function"?WeakSet:Set,Se=null;function ml(n,o){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){Ft(n,o,p)}else u.current=null}function tf(n,o,u){try{u()}catch(p){Ft(n,o,p)}}var Lg=!1;function cE(n,o){if(_e=Gr,n=Yl(),Xl(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var g=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var P=0,b=-1,F=-1,ee=0,ue=0,ce=n,le=null;t:for(;;){for(var we;ce!==u||g!==0&&ce.nodeType!==3||(b=P+g),ce!==w||p!==0&&ce.nodeType!==3||(F=P+p),ce.nodeType===3&&(P+=ce.nodeValue.length),(we=ce.firstChild)!==null;)le=ce,ce=we;for(;;){if(ce===n)break t;if(le===u&&++ee===g&&(b=P),le===w&&++ue===p&&(F=P),(we=ce.nextSibling)!==null)break;ce=le,le=ce.parentNode}ce=we}u=b===-1||F===-1?null:{start:b,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(Me={focusedElem:n,selectionRange:u},Gr=!1,Se=o;Se!==null;)if(o=Se,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Se=n;else for(;Se!==null;){o=Se;try{var Pe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Ce=Pe.memoizedProps,jt=Pe.memoizedState,K=o.stateNode,B=K.getSnapshotBeforeUpdate(o.elementType===o.type?Ce:ti(o.type,Ce),jt);K.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var Y=o.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){Ft(o,o.return,fe)}if(n=o.sibling,n!==null){n.return=o.return,Se=n;break}Se=o.return}return Pe=Lg,Lg=!1,Pe}function mu(n,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&n)===n){var w=g.destroy;g.destroy=void 0,w!==void 0&&tf(o,u,w)}g=g.next}while(g!==p)}}function Bc(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&n)===n){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function nf(n){var o=n.ref;if(o!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof o=="function"?o(n):o.current=n}}function Ng(n){var o=n.alternate;o!==null&&(n.alternate=null,Ng(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[br],delete o[uo],delete o[co],delete o[_d],delete o[vd])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function bg(n){return n.tag===5||n.tag===3||n.tag===4}function Og(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||bg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rf(n,o,u){var p=n.tag;if(p===5||p===6)n=n.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(n,o):u.insertBefore(n,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(n,u)):(o=u,o.appendChild(n)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ae));else if(p!==4&&(n=n.child,n!==null))for(rf(n,o,u),n=n.sibling;n!==null;)rf(n,o,u),n=n.sibling}function sf(n,o,u){var p=n.tag;if(p===5||p===6)n=n.stateNode,o?u.insertBefore(n,o):u.appendChild(n);else if(p!==4&&(n=n.child,n!==null))for(sf(n,o,u),n=n.sibling;n!==null;)sf(n,o,u),n=n.sibling}var mn=null,ni=!1;function _o(n,o,u){for(u=u.child;u!==null;)Mg(n,o,u),u=u.sibling}function Mg(n,o,u){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(di,u)}catch{}switch(u.tag){case 5:kn||ml(u,o);case 6:var p=mn,g=ni;mn=null,_o(n,o,u),mn=p,ni=g,mn!==null&&(ni?(n=mn,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):mn.removeChild(u.stateNode));break;case 18:mn!==null&&(ni?(n=mn,u=u.stateNode,n.nodeType===8?su(n.parentNode,u):n.nodeType===1&&su(n,u),Xt(n)):su(mn,u.stateNode));break;case 4:p=mn,g=ni,mn=u.stateNode.containerInfo,ni=!0,_o(n,o,u),mn=p,ni=g;break;case 0:case 11:case 14:case 15:if(!kn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var w=g,P=w.destroy;w=w.tag,P!==void 0&&((w&2)!==0||(w&4)!==0)&&tf(u,o,P),g=g.next}while(g!==p)}_o(n,o,u);break;case 1:if(!kn&&(ml(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(b){Ft(u,o,b)}_o(n,o,u);break;case 21:_o(n,o,u);break;case 22:u.mode&1?(kn=(p=kn)||u.memoizedState!==null,_o(n,o,u),kn=p):_o(n,o,u);break;default:_o(n,o,u)}}function Dg(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new uE),o.forEach(function(p){var g=yE.bind(null,n,p);u.has(p)||(u.add(p),p.then(g,g))})}}function ri(n,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];try{var w=n,P=o,b=P;e:for(;b!==null;){switch(b.tag){case 5:mn=b.stateNode,ni=!1;break e;case 3:mn=b.stateNode.containerInfo,ni=!0;break e;case 4:mn=b.stateNode.containerInfo,ni=!0;break e}b=b.return}if(mn===null)throw Error(t(160));Mg(w,P,g),mn=null,ni=!1;var F=g.alternate;F!==null&&(F.return=null),g.return=null}catch(ee){Ft(g,o,ee)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Vg(o,n),o=o.sibling}function Vg(n,o){var u=n.alternate,p=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ri(o,n),Si(n),p&4){try{mu(3,n,n.return),Bc(3,n)}catch(Ce){Ft(n,n.return,Ce)}try{mu(5,n,n.return)}catch(Ce){Ft(n,n.return,Ce)}}break;case 1:ri(o,n),Si(n),p&512&&u!==null&&ml(u,u.return);break;case 5:if(ri(o,n),Si(n),p&512&&u!==null&&ml(u,u.return),n.flags&32){var g=n.stateNode;try{$r(g,"")}catch(Ce){Ft(n,n.return,Ce)}}if(p&4&&(g=n.stateNode,g!=null)){var w=n.memoizedProps,P=u!==null?u.memoizedProps:w,b=n.type,F=n.updateQueue;if(n.updateQueue=null,F!==null)try{b==="input"&&w.type==="radio"&&w.name!=null&&xs(g,w),Hr(b,P);var ee=Hr(b,w);for(P=0;P<F.length;P+=2){var ue=F[P],ce=F[P+1];ue==="style"?zi(g,ce):ue==="dangerouslySetInnerHTML"?ea(g,ce):ue==="children"?$r(g,ce):me(g,ue,ce,ee)}switch(b){case"input":Mi(g,w);break;case"textarea":ks(g,w);break;case"select":var le=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!w.multiple;var we=w.value;we!=null?ur(g,!!w.multiple,we,!1):le!==!!w.multiple&&(w.defaultValue!=null?ur(g,!!w.multiple,w.defaultValue,!0):ur(g,!!w.multiple,w.multiple?[]:"",!1))}g[uo]=w}catch(Ce){Ft(n,n.return,Ce)}}break;case 6:if(ri(o,n),Si(n),p&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,w=n.memoizedProps;try{g.nodeValue=w}catch(Ce){Ft(n,n.return,Ce)}}break;case 3:if(ri(o,n),Si(n),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Xt(o.containerInfo)}catch(Ce){Ft(n,n.return,Ce)}break;case 4:ri(o,n),Si(n);break;case 13:ri(o,n),Si(n),g=n.child,g.flags&8192&&(w=g.memoizedState!==null,g.stateNode.isHidden=w,!w||g.alternate!==null&&g.alternate.memoizedState!==null||(lf=_t())),p&4&&Dg(n);break;case 22:if(ue=u!==null&&u.memoizedState!==null,n.mode&1?(kn=(ee=kn)||ue,ri(o,n),kn=ee):ri(o,n),Si(n),p&8192){if(ee=n.memoizedState!==null,(n.stateNode.isHidden=ee)&&!ue&&(n.mode&1)!==0)for(Se=n,ue=n.child;ue!==null;){for(ce=Se=ue;Se!==null;){switch(le=Se,we=le.child,le.tag){case 0:case 11:case 14:case 15:mu(4,le,le.return);break;case 1:ml(le,le.return);var Pe=le.stateNode;if(typeof Pe.componentWillUnmount=="function"){p=le,u=le.return;try{o=p,Pe.props=o.memoizedProps,Pe.state=o.memoizedState,Pe.componentWillUnmount()}catch(Ce){Ft(p,u,Ce)}}break;case 5:ml(le,le.return);break;case 22:if(le.memoizedState!==null){jg(ce);continue}}we!==null?(we.return=le,Se=we):jg(ce)}ue=ue.sibling}e:for(ue=null,ce=n;;){if(ce.tag===5){if(ue===null){ue=ce;try{g=ce.stateNode,ee?(w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(b=ce.stateNode,F=ce.memoizedProps.style,P=F!=null&&F.hasOwnProperty("display")?F.display:null,b.style.display=Rs("display",P))}catch(Ce){Ft(n,n.return,Ce)}}}else if(ce.tag===6){if(ue===null)try{ce.stateNode.nodeValue=ee?"":ce.memoizedProps}catch(Ce){Ft(n,n.return,Ce)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===n)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===n)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===n)break e;ue===ce&&(ue=null),ce=ce.return}ue===ce&&(ue=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:ri(o,n),Si(n),p&4&&Dg(n);break;case 21:break;default:ri(o,n),Si(n)}}function Si(n){var o=n.flags;if(o&2){try{e:{for(var u=n.return;u!==null;){if(bg(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&($r(g,""),p.flags&=-33);var w=Og(n);sf(n,w,g);break;case 3:case 4:var P=p.stateNode.containerInfo,b=Og(n);rf(n,b,P);break;default:throw Error(t(161))}}catch(F){Ft(n,n.return,F)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function hE(n,o,u){Se=n,Fg(n)}function Fg(n,o,u){for(var p=(n.mode&1)!==0;Se!==null;){var g=Se,w=g.child;if(g.tag===22&&p){var P=g.memoizedState!==null||Uc;if(!P){var b=g.alternate,F=b!==null&&b.memoizedState!==null||kn;b=Uc;var ee=kn;if(Uc=P,(kn=F)&&!ee)for(Se=g;Se!==null;)P=Se,F=P.child,P.tag===22&&P.memoizedState!==null?Ug(g):F!==null?(F.return=P,Se=F):Ug(g);for(;w!==null;)Se=w,Fg(w),w=w.sibling;Se=g,Uc=b,kn=ee}zg(n)}else(g.subtreeFlags&8772)!==0&&w!==null?(w.return=g,Se=w):zg(n)}}function zg(n){for(;Se!==null;){var o=Se;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:kn||Bc(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!kn)if(u===null)p.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:ti(o.type,u.memoizedProps);p.componentDidUpdate(g,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&jm(o,w,p);break;case 3:var P=o.updateQueue;if(P!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}jm(o,P,u)}break;case 5:var b=o.stateNode;if(u===null&&o.flags&4){u=b;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var ee=o.alternate;if(ee!==null){var ue=ee.memoizedState;if(ue!==null){var ce=ue.dehydrated;ce!==null&&Xt(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}kn||o.flags&512&&nf(o)}catch(le){Ft(o,o.return,le)}}if(o===n){Se=null;break}if(u=o.sibling,u!==null){u.return=o.return,Se=u;break}Se=o.return}}function jg(n){for(;Se!==null;){var o=Se;if(o===n){Se=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Se=u;break}Se=o.return}}function Ug(n){for(;Se!==null;){var o=Se;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Bc(4,o)}catch(F){Ft(o,u,F)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var g=o.return;try{p.componentDidMount()}catch(F){Ft(o,g,F)}}var w=o.return;try{nf(o)}catch(F){Ft(o,w,F)}break;case 5:var P=o.return;try{nf(o)}catch(F){Ft(o,P,F)}}}catch(F){Ft(o,o.return,F)}if(o===n){Se=null;break}var b=o.sibling;if(b!==null){b.return=o.return,Se=b;break}Se=o.return}}var dE=Math.ceil,$c=ge.ReactCurrentDispatcher,of=ge.ReactCurrentOwner,Fr=ge.ReactCurrentBatchConfig,it=0,cn=null,Zt=null,gn=0,wr=0,gl=ho(0),tn=0,gu=null,Ea=0,Hc=0,af=0,_u=null,nr=null,lf=0,_l=1/0,gs=null,Wc=!1,uf=null,vo=null,qc=!1,yo=null,Zc=0,vu=0,cf=null,Gc=-1,Kc=0;function jn(){return(it&6)!==0?_t():Gc!==-1?Gc:Gc=_t()}function wo(n){return(n.mode&1)===0?1:(it&2)!==0&&gn!==0?gn&-gn:K0.transition!==null?(Kc===0&&(Kc=Ki()),Kc):(n=Ge,n!==0||(n=window.event,n=n===void 0?16:Qe(n.type)),n)}function ii(n,o,u,p){if(50<vu)throw vu=0,cf=null,Error(t(185));En(n,u,p),((it&2)===0||n!==cn)&&(n===cn&&((it&2)===0&&(Hc|=u),tn===4&&Eo(n,gn)),rr(n,p),u===1&&it===0&&(o.mode&1)===0&&(_l=_t()+500,Ic&&po()))}function rr(n,o){var u=n.callbackNode;qn(n,o);var p=mt(n,n===cn?gn:0);if(p===0)u!==null&&zs(u),n.callbackNode=null,n.callbackPriority=0;else if(o=p&-p,n.callbackPriority!==o){if(u!=null&&zs(u),o===1)n.tag===0?G0($g.bind(null,n)):Am($g.bind(null,n)),Pn(function(){(it&6)===0&&po()}),u=null;else{switch(Zn(p)){case 1:u=qi;break;case 4:u=ci;break;case 16:u=Wn;break;case 536870912:u=hi;break;default:u=Wn}u=Yg(u,Bg.bind(null,n))}n.callbackPriority=o,n.callbackNode=u}}function Bg(n,o){if(Gc=-1,Kc=0,(it&6)!==0)throw Error(t(327));var u=n.callbackNode;if(vl()&&n.callbackNode!==u)return null;var p=mt(n,n===cn?gn:0);if(p===0)return null;if((p&30)!==0||(p&n.expiredLanes)!==0||o)o=Qc(n,p);else{o=p;var g=it;it|=2;var w=Wg();(cn!==n||gn!==o)&&(gs=null,_l=_t()+500,Ia(n,o));do try{mE();break}catch(b){Hg(n,b)}while(!0);Cd(),$c.current=w,it=g,Zt!==null?o=0:(cn=null,gn=0,o=tn)}if(o!==0){if(o===2&&(g=wt(n),g!==0&&(p=g,o=hf(n,g))),o===1)throw u=gu,Ia(n,0),Eo(n,p),rr(n,_t()),u;if(o===6)Eo(n,p);else{if(g=n.current.alternate,(p&30)===0&&!fE(g)&&(o=Qc(n,p),o===2&&(w=wt(n),w!==0&&(p=w,o=hf(n,w))),o===1))throw u=gu,Ia(n,0),Eo(n,p),rr(n,_t()),u;switch(n.finishedWork=g,n.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:Sa(n,nr,gs);break;case 3:if(Eo(n,p),(p&130023424)===p&&(o=lf+500-_t(),10<o)){if(mt(n,0)!==0)break;if(g=n.suspendedLanes,(g&p)!==p){jn(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=Jt(Sa.bind(null,n,nr,gs),o);break}Sa(n,nr,gs);break;case 4:if(Eo(n,p),(p&4194240)===p)break;for(o=n.eventTimes,g=-1;0<p;){var P=31-Ue(p);w=1<<P,P=o[P],P>g&&(g=P),p&=~w}if(p=g,p=_t()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*dE(p/1960))-p,10<p){n.timeoutHandle=Jt(Sa.bind(null,n,nr,gs),p);break}Sa(n,nr,gs);break;case 5:Sa(n,nr,gs);break;default:throw Error(t(329))}}}return rr(n,_t()),n.callbackNode===u?Bg.bind(null,n):null}function hf(n,o){var u=_u;return n.current.memoizedState.isDehydrated&&(Ia(n,o).flags|=256),n=Qc(n,o),n!==2&&(o=nr,nr=u,o!==null&&df(o)),n}function df(n){nr===null?nr=n:nr.push.apply(nr,n)}function fE(n){for(var o=n;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var g=u[p],w=g.getSnapshot;g=g.value;try{if(!gr(w(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Eo(n,o){for(o&=~af,o&=~Hc,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var u=31-Ue(o),p=1<<u;n[u]=-1,o&=~p}}function $g(n){if((it&6)!==0)throw Error(t(327));vl();var o=mt(n,0);if((o&1)===0)return rr(n,_t()),null;var u=Qc(n,o);if(n.tag!==0&&u===2){var p=wt(n);p!==0&&(o=p,u=hf(n,p))}if(u===1)throw u=gu,Ia(n,0),Eo(n,o),rr(n,_t()),u;if(u===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,Sa(n,nr,gs),rr(n,_t()),null}function ff(n,o){var u=it;it|=1;try{return n(o)}finally{it=u,it===0&&(_l=_t()+500,Ic&&po())}}function Ta(n){yo!==null&&yo.tag===0&&(it&6)===0&&vl();var o=it;it|=1;var u=Fr.transition,p=Ge;try{if(Fr.transition=null,Ge=1,n)return n()}finally{Ge=p,Fr.transition=u,it=o,(it&6)===0&&po()}}function pf(){wr=gl.current,St(gl)}function Ia(n,o){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,qt(u)),Zt!==null)for(u=Zt.return;u!==null;){var p=u;switch(Td(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Ec();break;case 3:fl(),St(Jn),St(xn),Md();break;case 5:bd(p);break;case 4:fl();break;case 13:St(Rt);break;case 19:St(Rt);break;case 10:Ad(p.type._context);break;case 22:case 23:pf()}u=u.return}if(cn=n,Zt=n=To(n.current,null),gn=wr=o,tn=0,gu=null,af=Hc=Ea=0,nr=_u=null,va!==null){for(o=0;o<va.length;o++)if(u=va[o],p=u.interleaved,p!==null){u.interleaved=null;var g=p.next,w=u.pending;if(w!==null){var P=w.next;w.next=g,p.next=P}u.pending=p}va=null}return n}function Hg(n,o){do{var u=Zt;try{if(Cd(),bc.current=Vc,Oc){for(var p=Lt.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}Oc=!1}if(wa=0,un=en=Lt=null,cu=!1,hu=0,of.current=null,u===null||u.return===null){tn=1,gu=o,Zt=null;break}e:{var w=n,P=u.return,b=u,F=o;if(o=gn,b.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var ee=F,ue=b,ce=ue.tag;if((ue.mode&1)===0&&(ce===0||ce===11||ce===15)){var le=ue.alternate;le?(ue.updateQueue=le.updateQueue,ue.memoizedState=le.memoizedState,ue.lanes=le.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var we=mg(P);if(we!==null){we.flags&=-257,gg(we,P,b,w,o),we.mode&1&&pg(w,ee,o),o=we,F=ee;var Pe=o.updateQueue;if(Pe===null){var Ce=new Set;Ce.add(F),o.updateQueue=Ce}else Pe.add(F);break e}else{if((o&1)===0){pg(w,ee,o),mf();break e}F=Error(t(426))}}else if(xt&&b.mode&1){var jt=mg(P);if(jt!==null){(jt.flags&65536)===0&&(jt.flags|=256),gg(jt,P,b,w,o),Pd(pl(F,b));break e}}w=F=pl(F,b),tn!==4&&(tn=2),_u===null?_u=[w]:_u.push(w),w=P;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var K=dg(w,F,o);zm(w,K);break e;case 1:b=F;var B=w.type,Y=w.stateNode;if((w.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(vo===null||!vo.has(Y)))){w.flags|=65536,o&=-o,w.lanes|=o;var fe=fg(w,b,o);zm(w,fe);break e}}w=w.return}while(w!==null)}Zg(u)}catch(ke){o=ke,Zt===u&&u!==null&&(Zt=u=u.return);continue}break}while(!0)}function Wg(){var n=$c.current;return $c.current=Vc,n===null?Vc:n}function mf(){(tn===0||tn===3||tn===2)&&(tn=4),cn===null||(Ea&268435455)===0&&(Hc&268435455)===0||Eo(cn,gn)}function Qc(n,o){var u=it;it|=2;var p=Wg();(cn!==n||gn!==o)&&(gs=null,Ia(n,o));do try{pE();break}catch(g){Hg(n,g)}while(!0);if(Cd(),it=u,$c.current=p,Zt!==null)throw Error(t(261));return cn=null,gn=0,tn}function pE(){for(;Zt!==null;)qg(Zt)}function mE(){for(;Zt!==null&&!Ba();)qg(Zt)}function qg(n){var o=Qg(n.alternate,n,wr);n.memoizedProps=n.pendingProps,o===null?Zg(n):Zt=o,of.current=null}function Zg(n){var o=n;do{var u=o.alternate;if(n=o.return,(o.flags&32768)===0){if(u=aE(u,o,wr),u!==null){Zt=u;return}}else{if(u=lE(u,o),u!==null){u.flags&=32767,Zt=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{tn=6,Zt=null;return}}if(o=o.sibling,o!==null){Zt=o;return}Zt=o=n}while(o!==null);tn===0&&(tn=5)}function Sa(n,o,u){var p=Ge,g=Fr.transition;try{Fr.transition=null,Ge=1,gE(n,o,u,p)}finally{Fr.transition=g,Ge=p}return null}function gE(n,o,u,p){do vl();while(yo!==null);if((it&6)!==0)throw Error(t(327));u=n.finishedWork;var g=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var w=u.lanes|u.childLanes;if(Be(n,w),n===cn&&(Zt=cn=null,gn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||qc||(qc=!0,Yg(Wn,function(){return vl(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=Fr.transition,Fr.transition=null;var P=Ge;Ge=1;var b=it;it|=4,of.current=null,cE(n,u),Vg(u,n),Lr(Me),Gr=!!_e,Me=_e=null,n.current=u,hE(u),js(),it=b,Ge=P,Fr.transition=w}else n.current=u;if(qc&&(qc=!1,yo=n,Zc=g),w=n.pendingLanes,w===0&&(vo=null),fi(u.stateNode),rr(n,_t()),o!==null)for(p=n.onRecoverableError,u=0;u<o.length;u++)g=o[u],p(g.value,{componentStack:g.stack,digest:g.digest});if(Wc)throw Wc=!1,n=uf,uf=null,n;return(Zc&1)!==0&&n.tag!==0&&vl(),w=n.pendingLanes,(w&1)!==0?n===cf?vu++:(vu=0,cf=n):vu=0,po(),null}function vl(){if(yo!==null){var n=Zn(Zc),o=Fr.transition,u=Ge;try{if(Fr.transition=null,Ge=16>n?16:n,yo===null)var p=!1;else{if(n=yo,yo=null,Zc=0,(it&6)!==0)throw Error(t(331));var g=it;for(it|=4,Se=n.current;Se!==null;){var w=Se,P=w.child;if((Se.flags&16)!==0){var b=w.deletions;if(b!==null){for(var F=0;F<b.length;F++){var ee=b[F];for(Se=ee;Se!==null;){var ue=Se;switch(ue.tag){case 0:case 11:case 15:mu(8,ue,w)}var ce=ue.child;if(ce!==null)ce.return=ue,Se=ce;else for(;Se!==null;){ue=Se;var le=ue.sibling,we=ue.return;if(Ng(ue),ue===ee){Se=null;break}if(le!==null){le.return=we,Se=le;break}Se=we}}}var Pe=w.alternate;if(Pe!==null){var Ce=Pe.child;if(Ce!==null){Pe.child=null;do{var jt=Ce.sibling;Ce.sibling=null,Ce=jt}while(Ce!==null)}}Se=w}}if((w.subtreeFlags&2064)!==0&&P!==null)P.return=w,Se=P;else e:for(;Se!==null;){if(w=Se,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:mu(9,w,w.return)}var K=w.sibling;if(K!==null){K.return=w.return,Se=K;break e}Se=w.return}}var B=n.current;for(Se=B;Se!==null;){P=Se;var Y=P.child;if((P.subtreeFlags&2064)!==0&&Y!==null)Y.return=P,Se=Y;else e:for(P=B;Se!==null;){if(b=Se,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Bc(9,b)}}catch(ke){Ft(b,b.return,ke)}if(b===P){Se=null;break e}var fe=b.sibling;if(fe!==null){fe.return=b.return,Se=fe;break e}Se=b.return}}if(it=g,po(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(di,n)}catch{}p=!0}return p}finally{Ge=u,Fr.transition=o}}return!1}function Gg(n,o,u){o=pl(u,o),o=dg(n,o,1),n=go(n,o,1),o=jn(),n!==null&&(En(n,1,o),rr(n,o))}function Ft(n,o,u){if(n.tag===3)Gg(n,n,u);else for(;o!==null;){if(o.tag===3){Gg(o,n,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(vo===null||!vo.has(p))){n=pl(u,n),n=fg(o,n,1),o=go(o,n,1),n=jn(),o!==null&&(En(o,1,n),rr(o,n));break}}o=o.return}}function _E(n,o,u){var p=n.pingCache;p!==null&&p.delete(o),o=jn(),n.pingedLanes|=n.suspendedLanes&u,cn===n&&(gn&u)===u&&(tn===4||tn===3&&(gn&130023424)===gn&&500>_t()-lf?Ia(n,0):af|=u),rr(n,o)}function Kg(n,o){o===0&&((n.mode&1)===0?o=1:(o=pi,pi<<=1,(pi&130023424)===0&&(pi=4194304)));var u=jn();n=fs(n,o),n!==null&&(En(n,o,u),rr(n,u))}function vE(n){var o=n.memoizedState,u=0;o!==null&&(u=o.retryLane),Kg(n,u)}function yE(n,o){var u=0;switch(n.tag){case 13:var p=n.stateNode,g=n.memoizedState;g!==null&&(u=g.retryLane);break;case 19:p=n.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),Kg(n,u)}var Qg;Qg=function(n,o,u){if(n!==null)if(n.memoizedProps!==o.pendingProps||Jn.current)tr=!0;else{if((n.lanes&u)===0&&(o.flags&128)===0)return tr=!1,oE(n,o,u);tr=(n.flags&131072)!==0}else tr=!1,xt&&(o.flags&1048576)!==0&&km(o,Pc,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;jc(n,o),n=o.pendingProps;var g=ol(o,xn.current);dl(o,u),g=Fd(null,o,p,n,g,u);var w=zd();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,er(p)?(w=!0,Tc(o)):w=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Ld(o),g.updater=Fc,o.stateNode=g,g._reactInternals=o,Wd(o,p,n,u),o=Kd(null,o,p,!0,w,u)):(o.tag=0,xt&&w&&Ed(o),zn(null,o,g,u),o=o.child),o;case 16:p=o.elementType;e:{switch(jc(n,o),n=o.pendingProps,g=p._init,p=g(p._payload),o.type=p,g=o.tag=EE(p),n=ti(p,n),g){case 0:o=Gd(null,o,p,n,u);break e;case 1:o=Tg(null,o,p,n,u);break e;case 11:o=_g(null,o,p,n,u);break e;case 14:o=vg(null,o,p,ti(p.type,n),u);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:ti(p,g),Gd(n,o,p,g,u);case 1:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:ti(p,g),Tg(n,o,p,g,u);case 3:e:{if(Ig(o),n===null)throw Error(t(387));p=o.pendingProps,w=o.memoizedState,g=w.element,Fm(n,o),Lc(o,p,null,u);var P=o.memoizedState;if(p=P.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){g=pl(Error(t(423)),o),o=Sg(n,o,p,u,g);break e}else if(p!==g){g=pl(Error(t(424)),o),o=Sg(n,o,p,u,g);break e}else for(yr=Ei(o.stateNode.containerInfo.firstChild),vr=o,xt=!0,ei=null,u=Dm(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ul(),p===g){o=ms(n,o,u);break e}zn(n,o,p,u)}o=o.child}return o;case 5:return Um(o),n===null&&Sd(o),p=o.type,g=o.pendingProps,w=n!==null?n.memoizedProps:null,P=g.children,qe(p,g)?P=null:w!==null&&qe(p,w)&&(o.flags|=32),Eg(n,o),zn(n,o,P,u),o.child;case 6:return n===null&&Sd(o),null;case 13:return Pg(n,o,u);case 4:return Nd(o,o.stateNode.containerInfo),p=o.pendingProps,n===null?o.child=cl(o,null,p,u):zn(n,o,p,u),o.child;case 11:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:ti(p,g),_g(n,o,p,g,u);case 7:return zn(n,o,o.pendingProps,u),o.child;case 8:return zn(n,o,o.pendingProps.children,u),o.child;case 12:return zn(n,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,g=o.pendingProps,w=o.memoizedProps,P=g.value,Tt(Ac,p._currentValue),p._currentValue=P,w!==null)if(gr(w.value,P)){if(w.children===g.children&&!Jn.current){o=ms(n,o,u);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var b=w.dependencies;if(b!==null){P=w.child;for(var F=b.firstContext;F!==null;){if(F.context===p){if(w.tag===1){F=ps(-1,u&-u),F.tag=2;var ee=w.updateQueue;if(ee!==null){ee=ee.shared;var ue=ee.pending;ue===null?F.next=F:(F.next=ue.next,ue.next=F),ee.pending=F}}w.lanes|=u,F=w.alternate,F!==null&&(F.lanes|=u),kd(w.return,u,o),b.lanes|=u;break}F=F.next}}else if(w.tag===10)P=w.type===o.type?null:w.child;else if(w.tag===18){if(P=w.return,P===null)throw Error(t(341));P.lanes|=u,b=P.alternate,b!==null&&(b.lanes|=u),kd(P,u,o),P=w.sibling}else P=w.child;if(P!==null)P.return=w;else for(P=w;P!==null;){if(P===o){P=null;break}if(w=P.sibling,w!==null){w.return=P.return,P=w;break}P=P.return}w=P}zn(n,o,g.children,u),o=o.child}return o;case 9:return g=o.type,p=o.pendingProps.children,dl(o,u),g=Dr(g),p=p(g),o.flags|=1,zn(n,o,p,u),o.child;case 14:return p=o.type,g=ti(p,o.pendingProps),g=ti(p.type,g),vg(n,o,p,g,u);case 15:return yg(n,o,o.type,o.pendingProps,u);case 17:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:ti(p,g),jc(n,o),o.tag=1,er(p)?(n=!0,Tc(o)):n=!1,dl(o,u),cg(o,p,g),Wd(o,p,g,u),Kd(null,o,p,!0,n,u);case 19:return Cg(n,o,u);case 22:return wg(n,o,u)}throw Error(t(156,o.tag))};function Yg(n,o){return Fs(n,o)}function wE(n,o,u,p){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(n,o,u,p){return new wE(n,o,u,p)}function gf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function EE(n){if(typeof n=="function")return gf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===$)return 11;if(n===sn)return 14}return 2}function To(n,o){var u=n.alternate;return u===null?(u=zr(n.tag,o,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=o,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,o=n.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function Yc(n,o,u,p,g,w){var P=2;if(p=n,typeof n=="function")gf(n)&&(P=1);else if(typeof n=="string")P=5;else e:switch(n){case V:return Pa(u.children,g,w,o);case N:P=8,g|=8;break;case M:return n=zr(12,u,o,g|2),n.elementType=M,n.lanes=w,n;case O:return n=zr(13,u,o,g),n.elementType=O,n.lanes=w,n;case ot:return n=zr(19,u,o,g),n.elementType=ot,n.lanes=w,n;case nt:return Xc(u,g,w,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case z:P=10;break e;case j:P=9;break e;case $:P=11;break e;case sn:P=14;break e;case lt:P=16,p=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return o=zr(P,u,o,g),o.elementType=n,o.type=p,o.lanes=w,o}function Pa(n,o,u,p){return n=zr(7,n,p,o),n.lanes=u,n}function Xc(n,o,u,p){return n=zr(22,n,p,o),n.elementType=nt,n.lanes=u,n.stateNode={isHidden:!1},n}function _f(n,o,u){return n=zr(6,n,null,o),n.lanes=u,n}function vf(n,o,u){return o=zr(4,n.children!==null?n.children:[],n.key,o),o.lanes=u,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function TE(n,o,u,p,g){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fr(0),this.expirationTimes=fr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fr(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function yf(n,o,u,p,g,w,P,b,F){return n=new TE(n,o,u,b,F),o===1?(o=1,w===!0&&(o|=8)):o=0,w=zr(3,null,null,o),n.current=w,w.stateNode=n,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ld(w),n}function IE(n,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oe,key:p==null?null:""+p,children:n,containerInfo:o,implementation:u}}function Xg(n){if(!n)return fo;n=n._reactInternals;e:{if(Bn(n)!==n||n.tag!==1)throw Error(t(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(er(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(n.tag===1){var u=n.type;if(er(u))return xm(n,u,o)}return o}function Jg(n,o,u,p,g,w,P,b,F){return n=yf(u,p,!0,n,g,w,P,b,F),n.context=Xg(null),u=n.current,p=jn(),g=wo(u),w=ps(p,g),w.callback=o??null,go(u,w,g),n.current.lanes=g,En(n,g,p),rr(n,p),n}function Jc(n,o,u,p){var g=o.current,w=jn(),P=wo(g);return u=Xg(u),o.context===null?o.context=u:o.pendingContext=u,o=ps(w,P),o.payload={element:n},p=p===void 0?null:p,p!==null&&(o.callback=p),n=go(g,o,P),n!==null&&(ii(n,g,P,w),Rc(n,g,P)),P}function eh(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function e_(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<o?u:o}}function wf(n,o){e_(n,o),(n=n.alternate)&&e_(n,o)}function SE(){return null}var t_=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ef(n){this._internalRoot=n}th.prototype.render=Ef.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(t(409));Jc(n,o,null,null)},th.prototype.unmount=Ef.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;Ta(function(){Jc(null,n,null,null)}),o[ht]=null}};function th(n){this._internalRoot=n}th.prototype.unstable_scheduleHydration=function(n){if(n){var o=$s();n={blockedOn:null,target:n,priority:o};for(var u=0;u<zt.length&&o!==0&&o<zt[u].priority;u++);zt.splice(u,0,n),u===0&&Hs(n)}};function Tf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function nh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function n_(){}function PE(n,o,u,p,g){if(g){if(typeof p=="function"){var w=p;p=function(){var ee=eh(P);w.call(ee)}}var P=Jg(o,p,n,0,null,!1,!1,"",n_);return n._reactRootContainer=P,n[ht]=P.current,ao(n.nodeType===8?n.parentNode:n),Ta(),P}for(;g=n.lastChild;)n.removeChild(g);if(typeof p=="function"){var b=p;p=function(){var ee=eh(F);b.call(ee)}}var F=yf(n,0,!1,null,null,!1,!1,"",n_);return n._reactRootContainer=F,n[ht]=F.current,ao(n.nodeType===8?n.parentNode:n),Ta(function(){Jc(o,F,u,p)}),F}function rh(n,o,u,p,g){var w=u._reactRootContainer;if(w){var P=w;if(typeof g=="function"){var b=g;g=function(){var F=eh(P);b.call(F)}}Jc(o,P,n,g)}else P=PE(u,o,n,g,p);return eh(P)}Us=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var u=Fe(o.pendingLanes);u!==0&&(Tn(o,u|1),rr(o,_t()),(it&6)===0&&(_l=_t()+500,po()))}break;case 13:Ta(function(){var p=fs(n,1);if(p!==null){var g=jn();ii(p,n,1,g)}}),wf(n,1)}},Cr=function(n){if(n.tag===13){var o=fs(n,134217728);if(o!==null){var u=jn();ii(o,n,134217728,u)}wf(n,134217728)}},Bs=function(n){if(n.tag===13){var o=wo(n),u=fs(n,o);if(u!==null){var p=jn();ii(u,n,o,p)}wf(n,o)}},$s=function(){return Ge},Qi=function(n,o){var u=Ge;try{return Ge=n,o()}finally{Ge=u}},Ui=function(n,o,u){switch(o){case"input":if(Mi(n,u),o=u.name,u.type==="radio"&&o!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==n&&p.form===n.form){var g=il(p);if(!g)throw Error(t(90));Tr(p),Mi(p,g)}}}break;case"textarea":ks(n,u);break;case"select":o=u.value,o!=null&&ur(n,!!u.multiple,o,!1)}},Bi=ff,ra=Ta;var xE={usingClientEntryPoint:!1,Events:[ls,us,il,xr,na,ff]},yu={findFiberByHostInstance:as,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CE={bundleType:yu.bundleType,version:yu.version,rendererPackageName:yu.rendererPackageName,rendererConfig:yu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ge.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ia(n),n===null?null:n.stateNode},findFiberByHostInstance:yu.findFiberByHostInstance||SE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{di=ih.inject(CE),wn=ih}catch{}}return ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xE,ir.createPortal=function(n,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tf(o))throw Error(t(200));return IE(n,o,null,u)},ir.createRoot=function(n,o){if(!Tf(n))throw Error(t(299));var u=!1,p="",g=t_;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=yf(n,1,!1,null,null,u,!1,p,g),n[ht]=o.current,ao(n.nodeType===8?n.parentNode:n),new Ef(o)},ir.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ia(o),n=n===null?null:n.stateNode,n},ir.flushSync=function(n){return Ta(n)},ir.hydrate=function(n,o,u){if(!nh(o))throw Error(t(200));return rh(null,n,o,!0,u)},ir.hydrateRoot=function(n,o,u){if(!Tf(n))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,g=!1,w="",P=t_;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(P=u.onRecoverableError)),o=Jg(o,null,n,1,u??null,g,!1,w,P),n[ht]=o.current,ao(n),p)for(n=0;n<p.length;n++)u=p[n],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new th(o)},ir.render=function(n,o,u){if(!nh(o))throw Error(t(200));return rh(null,n,o,!1,u)},ir.unmountComponentAtNode=function(n){if(!nh(n))throw Error(t(40));return n._reactRootContainer?(Ta(function(){rh(null,null,n,!1,function(){n._reactRootContainer=null,n[ht]=null})}),!0):!1},ir.unstable_batchedUpdates=ff,ir.unstable_renderSubtreeIntoContainer=function(n,o,u,p){if(!nh(u))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return rh(n,o,u,!1,p)},ir.version="18.3.1-next-f1338f8080-20240426",ir}var c_;function ey(){if(c_)return Pf.exports;c_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Pf.exports=ME(),Pf.exports}var h_;function DE(){if(h_)return sh;h_=1;var r=ey();return sh.createRoot=r.createRoot,sh.hydrateRoot=r.hydrateRoot,sh}var VE=DE(),X=_p();const Ll=Jv(X),FE=kE({__proto__:null,default:Ll},[X]);var zE=ey();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Ou.apply(this,arguments)}var ko;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ko||(ko={}));const d_="popstate";function jE(r){r===void 0&&(r={});function e(s,a){let{pathname:c,search:f,hash:_}=s.location;return jf("",{pathname:c,search:f,hash:_},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:ny(a)}return BE(e,t,null,r)}function Yt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ty(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function UE(){return Math.random().toString(36).substr(2,8)}function f_(r,e){return{usr:r.state,key:r.key,idx:e}}function jf(r,e,t,s){return t===void 0&&(t=null),Ou({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Fl(e):e,{state:t,key:e&&e.key||s||UE()})}function ny(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Fl(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function BE(r,e,t,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:c=!1}=s,f=a.history,_=ko.Pop,v=null,T=S();T==null&&(T=0,f.replaceState(Ou({},f.state,{idx:T}),""));function S(){return(f.state||{idx:null}).idx}function C(){_=ko.Pop;let Z=S(),he=Z==null?null:Z-T;T=Z,v&&v({action:_,location:Q.location,delta:he})}function k(Z,he){_=ko.Push;let de=jf(Q.location,Z,he);T=S()+1;let me=f_(de,T),ge=Q.createHref(de);try{f.pushState(me,"",ge)}catch(be){if(be instanceof DOMException&&be.name==="DataCloneError")throw be;a.location.assign(ge)}c&&v&&v({action:_,location:Q.location,delta:1})}function H(Z,he){_=ko.Replace;let de=jf(Q.location,Z,he);T=S();let me=f_(de,T),ge=Q.createHref(de);f.replaceState(me,"",ge),c&&v&&v({action:_,location:Q.location,delta:0})}function W(Z){let he=a.location.origin!=="null"?a.location.origin:a.location.href,de=typeof Z=="string"?Z:ny(Z);return de=de.replace(/ $/,"%20"),Yt(he,"No window.location.(origin|href) available to create URL for href: "+de),new URL(de,he)}let Q={get action(){return _},get location(){return r(a,f)},listen(Z){if(v)throw new Error("A history only accepts one active listener");return a.addEventListener(d_,C),v=Z,()=>{a.removeEventListener(d_,C),v=null}},createHref(Z){return e(a,Z)},createURL:W,encodeLocation(Z){let he=W(Z);return{pathname:he.pathname,search:he.search,hash:he.hash}},push:k,replace:H,go(Z){return f.go(Z)}};return Q}var p_;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(p_||(p_={}));function $E(r,e,t){return t===void 0&&(t="/"),HE(r,e,t)}function HE(r,e,t,s){let a=typeof e=="string"?Fl(e):e,c=sy(a.pathname||"/",t);if(c==null)return null;let f=ry(r);WE(f);let _=null;for(let v=0;_==null&&v<f.length;++v){let T=rT(c);_=eT(f[v],T)}return _}function ry(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let a=(c,f,_)=>{let v={relativePath:_===void 0?c.path||"":_,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};v.relativePath.startsWith("/")&&(Yt(v.relativePath.startsWith(s),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(s.length));let T=Aa([s,v.relativePath]),S=t.concat(v);c.children&&c.children.length>0&&(Yt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+T+'".')),ry(c.children,e,S,T)),!(c.path==null&&!c.index)&&e.push({path:T,score:XE(T,c.index),routesMeta:S})};return r.forEach((c,f)=>{var _;if(c.path===""||!((_=c.path)!=null&&_.includes("?")))a(c,f);else for(let v of iy(c.path))a(c,f,v)}),e}function iy(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),c=t.replace(/\?$/,"");if(s.length===0)return a?[c,""]:[c];let f=iy(s.join("/")),_=[];return _.push(...f.map(v=>v===""?c:[c,v].join("/"))),a&&_.push(...f),_.map(v=>r.startsWith("/")&&v===""?"/":v)}function WE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:JE(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const qE=/^:[\w-]+$/,ZE=3,GE=2,KE=1,QE=10,YE=-2,m_=r=>r==="*";function XE(r,e){let t=r.split("/"),s=t.length;return t.some(m_)&&(s+=YE),e&&(s+=GE),t.filter(a=>!m_(a)).reduce((a,c)=>a+(qE.test(c)?ZE:c===""?KE:QE),s)}function JE(r,e){return r.length===e.length&&r.slice(0,-1).every((s,a)=>s===e[a])?r[r.length-1]-e[e.length-1]:0}function eT(r,e,t){let{routesMeta:s}=r,a={},c="/",f=[];for(let _=0;_<s.length;++_){let v=s[_],T=_===s.length-1,S=c==="/"?e:e.slice(c.length)||"/",C=tT({path:v.relativePath,caseSensitive:v.caseSensitive,end:T},S),k=v.route;if(!C)return null;Object.assign(a,C.params),f.push({params:a,pathname:Aa([c,C.pathname]),pathnameBase:aT(Aa([c,C.pathnameBase])),route:k}),C.pathnameBase!=="/"&&(c=Aa([c,C.pathnameBase]))}return f}function tT(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=nT(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let c=a[0],f=c.replace(/(.)\/+$/,"$1"),_=a.slice(1);return{params:s.reduce((T,S,C)=>{let{paramName:k,isOptional:H}=S;if(k==="*"){let Q=_[C]||"";f=c.slice(0,c.length-Q.length).replace(/(.)\/+$/,"$1")}const W=_[C];return H&&!W?T[k]=void 0:T[k]=(W||"").replace(/%2F/g,"/"),T},{}),pathname:c,pathnameBase:f,pattern:r}}function nT(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),ty(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,_,v)=>(s.push({paramName:_,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function rT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ty(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function sy(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function iT(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:a=""}=typeof r=="string"?Fl(r):r;return{pathname:t?t.startsWith("/")?t:sT(t,e):e,search:lT(s),hash:uT(a)}}function sT(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Af(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oT(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function oy(r,e){let t=oT(r);return e?t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function ay(r,e,t,s){s===void 0&&(s=!1);let a;typeof r=="string"?a=Fl(r):(a=Ou({},r),Yt(!a.pathname||!a.pathname.includes("?"),Af("?","pathname","search",a)),Yt(!a.pathname||!a.pathname.includes("#"),Af("#","pathname","hash",a)),Yt(!a.search||!a.search.includes("#"),Af("#","search","hash",a)));let c=r===""||a.pathname==="",f=c?"/":a.pathname,_;if(f==null)_=t;else{let C=e.length-1;if(!s&&f.startsWith("..")){let k=f.split("/");for(;k[0]==="..";)k.shift(),C-=1;a.pathname=k.join("/")}_=C>=0?e[C]:"/"}let v=iT(a,_),T=f&&f!=="/"&&f.endsWith("/"),S=(c||f===".")&&t.endsWith("/");return!v.pathname.endsWith("/")&&(T||S)&&(v.pathname+="/"),v}const Aa=r=>r.join("/").replace(/\/\/+/g,"/"),aT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),lT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,uT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function cT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const ly=["post","put","patch","delete"];new Set(ly);const hT=["get",...ly];new Set(hT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Mu.apply(this,arguments)}const vp=X.createContext(null),dT=X.createContext(null),Gu=X.createContext(null),Bh=X.createContext(null),qo=X.createContext({outlet:null,matches:[],isDataRoute:!1}),uy=X.createContext(null);function Ku(){return X.useContext(Bh)!=null}function yp(){return Ku()||Yt(!1),X.useContext(Bh).location}function cy(r){X.useContext(Gu).static||X.useLayoutEffect(r)}function wp(){let{isDataRoute:r}=X.useContext(qo);return r?xT():fT()}function fT(){Ku()||Yt(!1);let r=X.useContext(vp),{basename:e,future:t,navigator:s}=X.useContext(Gu),{matches:a}=X.useContext(qo),{pathname:c}=yp(),f=JSON.stringify(oy(a,t.v7_relativeSplatPath)),_=X.useRef(!1);return cy(()=>{_.current=!0}),X.useCallback(function(T,S){if(S===void 0&&(S={}),!_.current)return;if(typeof T=="number"){s.go(T);return}let C=ay(T,JSON.parse(f),c,S.relative==="path");r==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:Aa([e,C.pathname])),(S.replace?s.replace:s.push)(C,S.state,S)},[e,s,f,c,r])}function pT(){let{matches:r}=X.useContext(qo),e=r[r.length-1];return e?e.params:{}}function mT(r,e){return gT(r,e)}function gT(r,e,t,s){Ku()||Yt(!1);let{navigator:a}=X.useContext(Gu),{matches:c}=X.useContext(qo),f=c[c.length-1],_=f?f.params:{};f&&f.pathname;let v=f?f.pathnameBase:"/";f&&f.route;let T=yp(),S;if(e){var C;let Z=typeof e=="string"?Fl(e):e;v==="/"||(C=Z.pathname)!=null&&C.startsWith(v)||Yt(!1),S=Z}else S=T;let k=S.pathname||"/",H=k;if(v!=="/"){let Z=v.replace(/^\//,"").split("/");H="/"+k.replace(/^\//,"").split("/").slice(Z.length).join("/")}let W=$E(r,{pathname:H}),Q=ET(W&&W.map(Z=>Object.assign({},Z,{params:Object.assign({},_,Z.params),pathname:Aa([v,a.encodeLocation?a.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?v:Aa([v,a.encodeLocation?a.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),c,t,s);return e&&Q?X.createElement(Bh.Provider,{value:{location:Mu({pathname:"/",search:"",hash:"",state:null,key:"default"},S),navigationType:ko.Pop}},Q):Q}function _T(){let r=PT(),e=cT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),t?X.createElement("pre",{style:a},t):null,null)}const vT=X.createElement(_T,null);class yT extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?X.createElement(qo.Provider,{value:this.props.routeContext},X.createElement(uy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wT(r){let{routeContext:e,match:t,children:s}=r,a=X.useContext(vp);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),X.createElement(qo.Provider,{value:e},s)}function ET(r,e,t,s){var a;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var c;if(!t)return null;if(t.errors)r=t.matches;else if((c=s)!=null&&c.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let f=r,_=(a=t)==null?void 0:a.errors;if(_!=null){let S=f.findIndex(C=>C.route.id&&(_==null?void 0:_[C.route.id])!==void 0);S>=0||Yt(!1),f=f.slice(0,Math.min(f.length,S+1))}let v=!1,T=-1;if(t&&s&&s.v7_partialHydration)for(let S=0;S<f.length;S++){let C=f[S];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(T=S),C.route.id){let{loaderData:k,errors:H}=t,W=C.route.loader&&k[C.route.id]===void 0&&(!H||H[C.route.id]===void 0);if(C.route.lazy||W){v=!0,T>=0?f=f.slice(0,T+1):f=[f[0]];break}}}return f.reduceRight((S,C,k)=>{let H,W=!1,Q=null,Z=null;t&&(H=_&&C.route.id?_[C.route.id]:void 0,Q=C.route.errorElement||vT,v&&(T<0&&k===0?(CT("route-fallback"),W=!0,Z=null):T===k&&(W=!0,Z=C.route.hydrateFallbackElement||null)));let he=e.concat(f.slice(0,k+1)),de=()=>{let me;return H?me=Q:W?me=Z:C.route.Component?me=X.createElement(C.route.Component,null):C.route.element?me=C.route.element:me=S,X.createElement(wT,{match:C,routeContext:{outlet:S,matches:he,isDataRoute:t!=null},children:me})};return t&&(C.route.ErrorBoundary||C.route.errorElement||k===0)?X.createElement(yT,{location:t.location,revalidation:t.revalidation,component:Q,error:H,children:de(),routeContext:{outlet:null,matches:he,isDataRoute:!0}}):de()},null)}var hy=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(hy||{}),dy=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(dy||{});function TT(r){let e=X.useContext(vp);return e||Yt(!1),e}function IT(r){let e=X.useContext(dT);return e||Yt(!1),e}function ST(r){let e=X.useContext(qo);return e||Yt(!1),e}function fy(r){let e=ST(),t=e.matches[e.matches.length-1];return t.route.id||Yt(!1),t.route.id}function PT(){var r;let e=X.useContext(uy),t=IT(),s=fy();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function xT(){let{router:r}=TT(hy.UseNavigateStable),e=fy(dy.UseNavigateStable),t=X.useRef(!1);return cy(()=>{t.current=!0}),X.useCallback(function(a,c){c===void 0&&(c={}),t.current&&(typeof a=="number"?r.navigate(a):r.navigate(a,Mu({fromRouteId:e},c)))},[r,e])}const g_={};function CT(r,e,t){g_[r]||(g_[r]=!0)}function AT(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function py(r){let{to:e,replace:t,state:s,relative:a}=r;Ku()||Yt(!1);let{future:c,static:f}=X.useContext(Gu),{matches:_}=X.useContext(qo),{pathname:v}=yp(),T=wp(),S=ay(e,oy(_,c.v7_relativeSplatPath),v,a==="path"),C=JSON.stringify(S);return X.useEffect(()=>T(JSON.parse(C),{replace:t,state:s,relative:a}),[T,C,a,t,s]),null}function yl(r){Yt(!1)}function kT(r){let{basename:e="/",children:t=null,location:s,navigationType:a=ko.Pop,navigator:c,static:f=!1,future:_}=r;Ku()&&Yt(!1);let v=e.replace(/^\/*/,"/"),T=X.useMemo(()=>({basename:v,navigator:c,static:f,future:Mu({v7_relativeSplatPath:!1},_)}),[v,_,c,f]);typeof s=="string"&&(s=Fl(s));let{pathname:S="/",search:C="",hash:k="",state:H=null,key:W="default"}=s,Q=X.useMemo(()=>{let Z=sy(S,v);return Z==null?null:{location:{pathname:Z,search:C,hash:k,state:H,key:W},navigationType:a}},[v,S,C,k,H,W,a]);return Q==null?null:X.createElement(Gu.Provider,{value:T},X.createElement(Bh.Provider,{children:t,value:Q}))}function RT(r){let{children:e,location:t}=r;return mT(Uf(e),t)}new Promise(()=>{});function Uf(r,e){e===void 0&&(e=[]);let t=[];return X.Children.forEach(r,(s,a)=>{if(!X.isValidElement(s))return;let c=[...e,a];if(s.type===X.Fragment){t.push.apply(t,Uf(s.props.children,c));return}s.type!==yl&&Yt(!1),!s.props.index||!s.props.children||Yt(!1);let f={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Uf(s.props.children,c)),t.push(f)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const LT="6";try{window.__reactRouterVersion=LT}catch{}const NT="startTransition",__=FE[NT];function bT(r){let{basename:e,children:t,future:s,window:a}=r,c=X.useRef();c.current==null&&(c.current=jE({window:a,v5Compat:!0}));let f=c.current,[_,v]=X.useState({action:f.action,location:f.location}),{v7_startTransition:T}=s||{},S=X.useCallback(C=>{T&&__?__(()=>v(C)):v(C)},[v,T]);return X.useLayoutEffect(()=>f.listen(S),[f,S]),X.useEffect(()=>AT(s),[s]),X.createElement(kT,{basename:e,children:t,location:_.location,navigationType:_.action,navigator:f,future:s})}var v_;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(v_||(v_={}));var y_;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(y_||(y_={}));const OT=()=>{};var w_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},MT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=r[t++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=r[t++],f=r[t++],_=r[t++],v=((a&7)<<18|(c&63)<<12|(f&63)<<6|_&63)-65536;e[s++]=String.fromCharCode(55296+(v>>10)),e[s++]=String.fromCharCode(56320+(v&1023))}else{const c=r[t++],f=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},gy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const c=r[a],f=a+1<r.length,_=f?r[a+1]:0,v=a+2<r.length,T=v?r[a+2]:0,S=c>>2,C=(c&3)<<4|_>>4;let k=(_&15)<<2|T>>6,H=T&63;v||(H=64,f||(k=64)),s.push(t[S],t[C],t[k],t[H])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(my(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):MT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const c=t[r.charAt(a++)],_=a<r.length?t[r.charAt(a)]:0;++a;const T=a<r.length?t[r.charAt(a)]:64;++a;const C=a<r.length?t[r.charAt(a)]:64;if(++a,c==null||_==null||T==null||C==null)throw new DT;const k=c<<2|_>>4;if(s.push(k),T!==64){const H=_<<4&240|T>>2;if(s.push(H),C!==64){const W=T<<6&192|C;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class DT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VT=function(r){const e=my(r);return gy.encodeByteArray(e,!0)},Ih=function(r){return VT(r).replace(/\./g,"")},_y=function(r){try{return gy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=()=>FT().__FIREBASE_DEFAULTS__,jT=()=>{if(typeof process>"u"||typeof w_>"u")return;const r=w_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},UT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&_y(r[1]);return e&&JSON.parse(e)},$h=()=>{try{return OT()||zT()||jT()||UT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},vy=r=>{var e,t;return(t=(e=$h())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},BT=r=>{const e=vy(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},yy=()=>{var r;return(r=$h())===null||r===void 0?void 0:r.config},wy=r=>{var e;return(e=$h())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ey(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ih(JSON.stringify(t)),Ih(JSON.stringify(f)),""].join(".")}const Au={};function WT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Au))Au[e]?r.emulator.push(e):r.prod.push(e);return r}function qT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let E_=!1;function Ty(r,e){if(typeof window>"u"||typeof document>"u"||!zl(window.location.host)||Au[r]===e||Au[r]||E_)return;Au[r]=e;function t(k){return`__firebase__banner__${k}`}const s="__firebase__banner",c=WT().prod.length>0;function f(){const k=document.getElementById(s);k&&k.remove()}function _(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function v(k,H){k.setAttribute("width","24"),k.setAttribute("id",H),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function T(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{E_=!0,f()},k}function S(k,H){k.setAttribute("id",H),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function C(){const k=qT(s),H=t("text"),W=document.getElementById(H)||document.createElement("span"),Q=t("learnmore"),Z=document.getElementById(Q)||document.createElement("a"),he=t("preprendIcon"),de=document.getElementById(he)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const me=k.element;_(me),S(Z,Q);const ge=T();v(de,he),me.append(de,W,Z,ge),document.body.appendChild(me)}c?(W.innerText="Preview backend disconnected.",de.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(de.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function GT(){var r;const e=(r=$h())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function YT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XT(){const r=bn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function JT(){return!GT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eI(){try{return typeof indexedDB=="object"}catch{return!1}}function tI(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="FirebaseError";class Ps extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=nI,Object.setPrototypeOf(this,Ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qu.prototype.create)}}class Qu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?rI(c,s):"Error",_=`${this.serviceName}: ${f} (${a}).`;return new Ps(a,_,s)}}function rI(r,e){return r.replace(iI,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const iI=/\{\$([^}]+)}/g;function sI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function La(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const c=r[a],f=e[a];if(T_(c)&&T_(f)){if(!La(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function T_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Eu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,c]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function Tu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function oI(r,e){const t=new aI(r,e);return t.subscribe.bind(t)}class aI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");lI(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=kf),a.error===void 0&&(a.error=kf),a.complete===void 0&&(a.complete=kf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function kf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(r){return r&&r._delegate?r._delegate:r}class Na{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new $T;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hI(e))try{this.getOrInitializeService({instanceIdentifier:xa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xa){return this.instances.has(e)}getOptions(e=xa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,f]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(c);s===_&&f.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const f=this.instances.get(a);return f&&e(f,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=xa){return this.component?this.component.multipleInstances?e:xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cI(r){return r===xa?void 0:r}function hI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(et||(et={}));const fI={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},pI=et.INFO,mI={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},gI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=mI[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=pI,this._logHandler=gI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const _I=(r,e)=>e.some(t=>r instanceof t);let I_,S_;function vI(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yI(){return S_||(S_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Iy=new WeakMap,Bf=new WeakMap,Sy=new WeakMap,Rf=new WeakMap,Tp=new WeakMap;function wI(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{t(Lo(r.result)),a()},f=()=>{s(r.error),a()};r.addEventListener("success",c),r.addEventListener("error",f)});return e.then(t=>{t instanceof IDBCursor&&Iy.set(t,r)}).catch(()=>{}),Tp.set(e,r),e}function EI(r){if(Bf.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{t(),a()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});Bf.set(r,e)}let $f={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Bf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Sy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Lo(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function TI(r){$f=r($f)}function II(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Lf(this),e,...t);return Sy.set(s,e.sort?e.sort():[e]),Lo(s)}:yI().includes(r)?function(...e){return r.apply(Lf(this),e),Lo(Iy.get(this))}:function(...e){return Lo(r.apply(Lf(this),e))}}function SI(r){return typeof r=="function"?II(r):(r instanceof IDBTransaction&&EI(r),_I(r,vI())?new Proxy(r,$f):r)}function Lo(r){if(r instanceof IDBRequest)return wI(r);if(Rf.has(r))return Rf.get(r);const e=SI(r);return e!==r&&(Rf.set(r,e),Tp.set(e,r)),e}const Lf=r=>Tp.get(r);function PI(r,e,{blocked:t,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(r,e),_=Lo(f);return s&&f.addEventListener("upgradeneeded",v=>{s(Lo(f.result),v.oldVersion,v.newVersion,Lo(f.transaction),v)}),t&&f.addEventListener("blocked",v=>t(v.oldVersion,v.newVersion,v)),_.then(v=>{c&&v.addEventListener("close",()=>c()),a&&v.addEventListener("versionchange",T=>a(T.oldVersion,T.newVersion,T))}).catch(()=>{}),_}const xI=["get","getKey","getAll","getAllKeys","count"],CI=["put","add","delete","clear"],Nf=new Map;function P_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=CI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||xI.includes(t)))return;const c=async function(f,..._){const v=this.transaction(f,a?"readwrite":"readonly");let T=v.store;return s&&(T=T.index(_.shift())),(await Promise.all([T[t](..._),a&&v.done]))[0]};return Nf.set(e,c),c}TI(r=>({...r,get:(e,t,s)=>P_(e,t)||r.get(e,t,s),has:(e,t)=>!!P_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function kI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hf="@firebase/app",x_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Ep("@firebase/app"),RI="@firebase/app-compat",LI="@firebase/analytics-compat",NI="@firebase/analytics",bI="@firebase/app-check-compat",OI="@firebase/app-check",MI="@firebase/auth",DI="@firebase/auth-compat",VI="@firebase/database",FI="@firebase/data-connect",zI="@firebase/database-compat",jI="@firebase/functions",UI="@firebase/functions-compat",BI="@firebase/installations",$I="@firebase/installations-compat",HI="@firebase/messaging",WI="@firebase/messaging-compat",qI="@firebase/performance",ZI="@firebase/performance-compat",GI="@firebase/remote-config",KI="@firebase/remote-config-compat",QI="@firebase/storage",YI="@firebase/storage-compat",XI="@firebase/firestore",JI="@firebase/ai",e1="@firebase/firestore-compat",t1="firebase",n1="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="[DEFAULT]",r1={[Hf]:"fire-core",[RI]:"fire-core-compat",[NI]:"fire-analytics",[LI]:"fire-analytics-compat",[OI]:"fire-app-check",[bI]:"fire-app-check-compat",[MI]:"fire-auth",[DI]:"fire-auth-compat",[VI]:"fire-rtdb",[FI]:"fire-data-connect",[zI]:"fire-rtdb-compat",[jI]:"fire-fn",[UI]:"fire-fn-compat",[BI]:"fire-iid",[$I]:"fire-iid-compat",[HI]:"fire-fcm",[WI]:"fire-fcm-compat",[qI]:"fire-perf",[ZI]:"fire-perf-compat",[GI]:"fire-rc",[KI]:"fire-rc-compat",[QI]:"fire-gcs",[YI]:"fire-gcs-compat",[XI]:"fire-fst",[e1]:"fire-fst-compat",[JI]:"fire-vertex","fire-js":"fire-js",[t1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Map,i1=new Map,qf=new Map;function C_(r,e){try{r.container.addComponent(e)}catch(t){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Nl(r){const e=r.name;if(qf.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;qf.set(e,r);for(const t of Sh.values())C_(t,r);for(const t of i1.values())C_(t,r);return!0}function Ip(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function jr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},No=new Qu("app","Firebase",s1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw No.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=n1;function Py(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Wf,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw No.create("bad-app-name",{appName:String(a)});if(t||(t=yy()),!t)throw No.create("no-options");const c=Sh.get(a);if(c){if(La(t,c.options)&&La(s,c.config))return c;throw No.create("duplicate-app",{appName:a})}const f=new dI(a);for(const v of qf.values())f.addComponent(v);const _=new o1(t,s,f);return Sh.set(a,_),_}function xy(r=Wf){const e=Sh.get(r);if(!e&&r===Wf&&yy())return Py();if(!e)throw No.create("no-app",{appName:r});return e}function bo(r,e,t){var s;let a=(s=r1[r])!==null&&s!==void 0?s:r;t&&(a+=`-${t}`);const c=a.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const _=[`Unable to register library "${a}" with version "${e}":`];c&&_.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&f&&_.push("and"),f&&_.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(_.join(" "));return}Nl(new Na(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="firebase-heartbeat-database",l1=1,Du="firebase-heartbeat-store";let bf=null;function Cy(){return bf||(bf=PI(a1,l1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Du)}catch(t){console.warn(t)}}}}).catch(r=>{throw No.create("idb-open",{originalErrorMessage:r.message})})),bf}async function u1(r){try{const t=(await Cy()).transaction(Du),s=await t.objectStore(Du).get(Ay(r));return await t.done,s}catch(e){if(e instanceof Ps)Es.warn(e.message);else{const t=No.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Es.warn(t.message)}}}async function A_(r,e){try{const s=(await Cy()).transaction(Du,"readwrite");await s.objectStore(Du).put(e,Ay(r)),await s.done}catch(t){if(t instanceof Ps)Es.warn(t.message);else{const s=No.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Es.warn(s.message)}}}function Ay(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=1024,h1=30;class d1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new p1(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=k_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>h1){const f=m1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Es.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=k_(),{heartbeatsToSend:s,unsentEntries:a}=f1(this._heartbeatsCache.heartbeats),c=Ih(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Es.warn(t),""}}}function k_(){return new Date().toISOString().substring(0,10)}function f1(r,e=c1){const t=[];let s=r.slice();for(const a of r){const c=t.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),R_(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),R_(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class p1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eI()?tI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await u1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return A_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return A_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function R_(r){return Ih(JSON.stringify({version:2,heartbeats:r})).length}function m1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(r){Nl(new Na("platform-logger",e=>new AI(e),"PRIVATE")),Nl(new Na("heartbeat",e=>new d1(e),"PRIVATE")),bo(Hf,x_,r),bo(Hf,x_,"esm2017"),bo("fire-js","")}g1("");function Sp(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t}function ky(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _1=ky,Ry=new Qu("auth","Firebase",ky());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new Ep("@firebase/auth");function v1(r,...e){Ph.logLevel<=et.WARN&&Ph.warn(`Auth (${jl}): ${r}`,...e)}function fh(r,...e){Ph.logLevel<=et.ERROR&&Ph.error(`Auth (${jl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(r,...e){throw Pp(r,...e)}function xi(r,...e){return Pp(r,...e)}function Ly(r,e,t){const s=Object.assign(Object.assign({},_1()),{[e]:t});return new Qu("auth","Firebase",s).create(e,{appName:r.name})}function ys(r){return Ly(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Ry.create(r,...e)}function ze(r,e,...t){if(!r)throw Pp(e,...t)}function _s(r){const e="INTERNAL ASSERTION FAILED: "+r;throw fh(e),new Error(e)}function Ts(r,e){r||_s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function y1(){return L_()==="http:"||L_()==="https:"}function L_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y1()||QT()||"connection"in navigator)?navigator.onLine:!0}function E1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ts(t>e,"Short delay should be less than long delay!"),this.isMobile=ZT()||YT()}get(){return w1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(r,e){Ts(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],S1=new Xu(3e4,6e4);function Zo(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Go(r,e,t,s,a={}){return by(r,a,async()=>{let c={},f={};s&&(e==="GET"?f=s:c={body:JSON.stringify(s)});const _=Yu(Object.assign({key:r.config.apiKey},f)).slice(1),v=await r._getAdditionalHeaders();v["Content-Type"]="application/json",r.languageCode&&(v["X-Firebase-Locale"]=r.languageCode);const T=Object.assign({method:e,headers:v},c);return KT()||(T.referrerPolicy="no-referrer"),r.emulatorConfig&&zl(r.emulatorConfig.host)&&(T.credentials="include"),Ny.fetch()(await Oy(r,r.config.apiHost,t,_),T)})}async function by(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},T1),e);try{const a=new x1(r),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw oh(r,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const _=c.ok?f.errorMessage:f.error.message,[v,T]=_.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw oh(r,"credential-already-in-use",f);if(v==="EMAIL_EXISTS")throw oh(r,"email-already-in-use",f);if(v==="USER_DISABLED")throw oh(r,"user-disabled",f);const S=s[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw Ly(r,S,T);ai(r,S)}}catch(a){if(a instanceof Ps)throw a;ai(r,"network-request-failed",{message:String(a)})}}async function Ju(r,e,t,s,a={}){const c=await Go(r,e,t,s,a);return"mfaPendingCredential"in c&&ai(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function Oy(r,e,t,s){const a=`${e}${t}?${s}`,c=r,f=c.config.emulator?xp(r.config,a):`${r.config.apiScheme}://${a}`;return I1.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function P1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class x1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(xi(this.auth,"network-request-failed")),S1.get())})}}function oh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=xi(r,e,s);return a.customData._tokenResponse=t,a}function N_(r){return r!==void 0&&r.enterprise!==void 0}class C1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return P1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function A1(r,e){return Go(r,"GET","/v2/recaptchaConfig",Zo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(r,e){return Go(r,"POST","/v1/accounts:delete",e)}async function xh(r,e){return Go(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function R1(r,e=!1){const t=rn(r),s=await t.getIdToken(e),a=Cp(s);ze(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,f=c==null?void 0:c.sign_in_provider;return{claims:a,token:s,authTime:ku(Of(a.auth_time)),issuedAtTime:ku(Of(a.iat)),expirationTime:ku(Of(a.exp)),signInProvider:f||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Of(r){return Number(r)*1e3}function Cp(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return fh("JWT malformed, contained fewer than 3 sections"),null;try{const a=_y(t);return a?JSON.parse(a):(fh("Failed to decode base64 JWT payload"),null)}catch(a){return fh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function b_(r){const e=Cp(r);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ps&&L1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function L1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ku(this.lastLoginAt),this.creationTime=ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(r){var e;const t=r.auth,s=await r.getIdToken(),a=await Vu(r,xh(t,{idToken:s}));ze(a==null?void 0:a.users.length,t,"internal-error");const c=a.users[0];r._notifyReloadListener(c);const f=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?My(c.providerUserInfo):[],_=O1(r.providerData,f),v=r.isAnonymous,T=!(r.email&&c.passwordHash)&&!(_!=null&&_.length),S=v?T:!1,C={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:_,metadata:new Gf(c.createdAt,c.lastLoginAt),isAnonymous:S};Object.assign(r,C)}async function b1(r){const e=rn(r);await Ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O1(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function My(r){return r.map(e=>{var{providerId:t}=e,s=Sp(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(r,e){const t=await by(r,{},async()=>{const s=Yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=r.config,f=await Oy(r,a,"/v1/token",`key=${c}`),_=await r._getAdditionalHeaders();_["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:_,body:s};return r.emulatorConfig&&zl(r.emulatorConfig.host)&&(v.credentials="include"),Ny.fetch()(f,v)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function D1(r,e){return Go(r,"POST","/v2/accounts:revokeToken",Zo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):b_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const t=b_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:c}=await M1(e,t);this.updateTokensAndExpiration(s,a,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:c}=t,f=new xl;return s&&(ze(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),a&&(ze(typeof a=="string","internal-error",{appName:e}),f.accessToken=a),c&&(ze(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(r,e){ze(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class si{constructor(e){var{uid:t,auth:s,stsTokenManager:a}=e,c=Sp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new N1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Gf(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await Vu(this,this.stsTokenManager.getToken(this.auth,e));return ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return R1(this,e)}reload(){return b1(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Ch(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(ys(this.auth));const e=await this.getIdToken();return await Vu(this,k1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,a,c,f,_,v,T,S;const C=(s=t.displayName)!==null&&s!==void 0?s:void 0,k=(a=t.email)!==null&&a!==void 0?a:void 0,H=(c=t.phoneNumber)!==null&&c!==void 0?c:void 0,W=(f=t.photoURL)!==null&&f!==void 0?f:void 0,Q=(_=t.tenantId)!==null&&_!==void 0?_:void 0,Z=(v=t._redirectEventId)!==null&&v!==void 0?v:void 0,he=(T=t.createdAt)!==null&&T!==void 0?T:void 0,de=(S=t.lastLoginAt)!==null&&S!==void 0?S:void 0,{uid:me,emailVerified:ge,isAnonymous:be,providerData:Oe,stsTokenManager:V}=t;ze(me&&V,e,"internal-error");const N=xl.fromJSON(this.name,V);ze(typeof me=="string",e,"internal-error"),So(C,e.name),So(k,e.name),ze(typeof ge=="boolean",e,"internal-error"),ze(typeof be=="boolean",e,"internal-error"),So(H,e.name),So(W,e.name),So(Q,e.name),So(Z,e.name),So(he,e.name),So(de,e.name);const M=new si({uid:me,auth:e,email:k,emailVerified:ge,displayName:C,isAnonymous:be,photoURL:W,phoneNumber:H,tenantId:Q,stsTokenManager:N,createdAt:he,lastLoginAt:de});return Oe&&Array.isArray(Oe)&&(M.providerData=Oe.map(z=>Object.assign({},z))),Z&&(M._redirectEventId=Z),M}static async _fromIdTokenResponse(e,t,s=!1){const a=new xl;a.updateFromServerResponse(t);const c=new si({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Ch(c),c}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];ze(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?My(a.providerUserInfo):[],f=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),_=new xl;_.updateFromIdToken(s);const v=new si({uid:a.localId,auth:e,stsTokenManager:_,isAnonymous:f}),T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Gf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(v,T),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=new Map;function vs(r){Ts(r instanceof Function,"Expected a class definition");let e=O_.get(r);return e?(Ts(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,O_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Dy.type="NONE";const M_=Dy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(r,e,t){return`firebase:${r}:${e}:${t}`}class Cl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:c}=this.auth;this.fullUserKey=ph(this.userKey,a.apiKey,c),this.fullPersistenceKey=ph("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xh(this.auth,{idToken:e}).catch(()=>{});return t?si._fromGetAccountInfoResponse(this.auth,t,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Cl(vs(M_),e,s);const a=(await Promise.all(t.map(async T=>{if(await T._isAvailable())return T}))).filter(T=>T);let c=a[0]||vs(M_);const f=ph(s,e.config.apiKey,e.name);let _=null;for(const T of t)try{const S=await T._get(f);if(S){let C;if(typeof S=="string"){const k=await xh(e,{idToken:S}).catch(()=>{});if(!k)break;C=await si._fromGetAccountInfoResponse(e,k,S)}else C=si._fromJSON(e,S);T!==c&&(_=C),c=T;break}}catch{}const v=a.filter(T=>T._shouldAllowMigration);return!c._shouldAllowMigration||!v.length?new Cl(c,e,s):(c=v[0],_&&await c._set(f,_.toJSON()),await Promise.all(t.map(async T=>{if(T!==c)try{await T._remove(f)}catch{}})),new Cl(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(By(e))return"Blackberry";if($y(e))return"Webos";if(Fy(e))return"Safari";if((e.includes("chrome/")||zy(e))&&!e.includes("edge/"))return"Chrome";if(Uy(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Vy(r=bn()){return/firefox\//i.test(r)}function Fy(r=bn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zy(r=bn()){return/crios\//i.test(r)}function jy(r=bn()){return/iemobile/i.test(r)}function Uy(r=bn()){return/android/i.test(r)}function By(r=bn()){return/blackberry/i.test(r)}function $y(r=bn()){return/webos/i.test(r)}function Ap(r=bn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function V1(r=bn()){var e;return Ap(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function F1(){return XT()&&document.documentMode===10}function Hy(r=bn()){return Ap(r)||Uy(r)||$y(r)||By(r)||/windows phone/i.test(r)||jy(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(r,e=[]){let t;switch(r){case"Browser":t=D_(bn());break;case"Worker":t=`${D_(bn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${jl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((f,_)=>{try{const v=e(c);f(v)}catch(v){_(v)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(r,e={}){return Go(r,"GET","/v2/passwordPolicy",Zo(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=6;class B1{constructor(e){var t,s,a,c;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=f.minPasswordLength)!==null&&t!==void 0?t:U1,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,a,c,f,_;const v={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,v),this.validatePasswordCharacterOptions(e,v),v.isValid&&(v.isValid=(t=v.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),v.isValid&&(v.isValid=(s=v.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),v.isValid&&(v.isValid=(a=v.containsLowercaseLetter)!==null&&a!==void 0?a:!0),v.isValid&&(v.isValid=(c=v.containsUppercaseLetter)!==null&&c!==void 0?c:!0),v.isValid&&(v.isValid=(f=v.containsNumericCharacter)!==null&&f!==void 0?f:!0),v.isValid&&(v.isValid=(_=v.containsNonAlphanumericCharacter)!==null&&_!==void 0?_:!0),v}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new V_(this),this.idTokenSubscription=new V_(this),this.beforeStateQueue=new z1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ry,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vs(t)),this._initializationPromise=this.queue(async()=>{var s,a,c;if(!this._deleted&&(this.persistenceManager=await Cl.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xh(this,{idToken:e}),s=await si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(jr(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(_=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(_,_))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,_=a==null?void 0:a._redirectEventId,v=await this.tryRedirectSignIn(e);(!f||f===_)&&(v!=null&&v.user)&&(a=v.user,c=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(a)}catch(f){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ch(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=E1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jr(this.app))return Promise.reject(ys(this));const t=e?rn(e):null;return t&&ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jr(this.app)?Promise.reject(ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await j1(this),t=new B1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await D1(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vs(e)||this._popupRedirectResolver;ze(t,this,"argument-error"),this.redirectPersistenceManager=await Cl.create(this,[vs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let f=!1;const _=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(_,this,"internal-error"),_.then(()=>{f||c(this.currentUser)}),typeof t=="function"){const v=e.addObserver(t,s,a);return()=>{f=!0,v()}}else{const v=e.addObserver(t);return()=>{f=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&v1(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Va(r){return rn(r)}class V_{constructor(e){this.auth=e,this.observer=null,this.addObserver=oI(t=>this.observer=t)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H1(r){Hh=r}function qy(r){return Hh.loadJS(r)}function W1(){return Hh.recaptchaEnterpriseScript}function q1(){return Hh.gapiScript}function Z1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class G1{constructor(){this.enterprise=new K1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class K1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Q1="recaptcha-enterprise",Zy="NO_RECAPTCHA";class Y1{constructor(e){this.type=Q1,this.auth=Va(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,_)=>{A1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)_(new Error("recaptcha Enterprise site key undefined"));else{const T=new C1(v);return c.tenantId==null?c._agentRecaptchaConfig=T:c._tenantRecaptchaConfigs[c.tenantId]=T,f(T.siteKey)}}).catch(v=>{_(v)})})}function a(c,f,_){const v=window.grecaptcha;N_(v)?v.enterprise.ready(()=>{v.enterprise.execute(c,{action:e}).then(T=>{f(T)}).catch(()=>{f(Zy)})}):_(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new G1().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{s(this.auth).then(_=>{if(!t&&N_(window.grecaptcha))a(_,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let v=W1();v.length!==0&&(v+=_),qy(v).then(()=>{a(_,c,f)}).catch(T=>{f(T)})}}).catch(_=>{f(_)})})}}async function F_(r,e,t,s=!1,a=!1){const c=new Y1(r);let f;if(a)f=Zy;else try{f=await c.verify(t)}catch{f=await c.verify(t,!0)}const _=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in _){const v=_.phoneEnrollmentInfo.phoneNumber,T=_.phoneEnrollmentInfo.recaptchaToken;Object.assign(_,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:T,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in _){const v=_.phoneSignInInfo.recaptchaToken;Object.assign(_,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return _}return s?Object.assign(_,{captchaResp:f}):Object.assign(_,{captchaResponse:f}),Object.assign(_,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(_,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),_}async function Kf(r,e,t,s,a){var c;if(!((c=r._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await F_(r,e,t,t==="getOobCode");return s(r,f)}else return s(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const _=await F_(r,e,t,t==="getOobCode");return s(r,_)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(r,e){const t=Ip(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(La(c,e??{}))return a;ai(a,"already-initialized")}return t.initialize({options:e})}function J1(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(vs);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function eS(r,e,t){const s=Va(r);ze(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,c=Gy(e),{host:f,port:_}=tS(e),v=_===null?"":`:${_}`,T={url:`${c}//${f}${v}/`},S=Object.freeze({host:f,port:_,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){ze(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ze(La(T,s.config.emulator)&&La(S,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=T,s.emulatorConfig=S,s.settings.appVerificationDisabledForTesting=!0,zl(f)?(Ey(`${c}//${f}${v}`),Ty("Auth",!0)):nS()}function Gy(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function tS(r){const e=Gy(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const c=a[1];return{host:c,port:z_(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:z_(f)}}}function z_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function nS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _s("not implemented")}_getIdTokenResponse(e){return _s("not implemented")}_linkToIdToken(e,t){return _s("not implemented")}_getReauthenticationResolver(e){return _s("not implemented")}}async function rS(r,e){return Go(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(r,e){return Ju(r,"POST","/v1/accounts:signInWithPassword",Zo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(r,e){return Ju(r,"POST","/v1/accounts:signInWithEmailLink",Zo(r,e))}async function oS(r,e){return Ju(r,"POST","/v1/accounts:signInWithEmailLink",Zo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends kp{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Fu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Fu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kf(e,t,"signInWithPassword",iS);case"emailLink":return sS(e,{email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kf(e,s,"signUpPassword",rS);case"emailLink":return oS(e,{idToken:t,email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(r,e){return Ju(r,"POST","/v1/accounts:signInWithIdp",Zo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="http://localhost";class ba extends kp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ai("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=t,c=Sp(t,["providerId","signInMethod"]);if(!s||!a)return null;const f=new ba(s,a);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const t=this.buildRequest();return Al(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Al(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Al(e,t)}buildRequest(){const e={requestUri:aS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uS(r){const e=Eu(Tu(r)).link,t=e?Eu(Tu(e)).deep_link_id:null,s=Eu(Tu(r)).deep_link_id;return(s?Eu(Tu(s)).link:null)||s||t||e||r}class Rp{constructor(e){var t,s,a,c,f,_;const v=Eu(Tu(e)),T=(t=v.apiKey)!==null&&t!==void 0?t:null,S=(s=v.oobCode)!==null&&s!==void 0?s:null,C=lS((a=v.mode)!==null&&a!==void 0?a:null);ze(T&&S&&C,"argument-error"),this.apiKey=T,this.operation=C,this.code=S,this.continueUrl=(c=v.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(f=v.lang)!==null&&f!==void 0?f:null,this.tenantId=(_=v.tenantId)!==null&&_!==void 0?_:null}static parseLink(e){const t=uS(e);try{return new Rp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this.providerId=Ul.PROVIDER_ID}static credential(e,t){return Fu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Rp.parseLink(t);return ze(s,"argument-error"),Fu._fromEmailAndCode(e,s.code,s.tenantId)}}Ul.PROVIDER_ID="password";Ul.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ul.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends Ky{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends ec{constructor(){super("facebook.com")}static credential(e){return ba._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Po.credential(e.oauthAccessToken)}catch{return null}}}Po.FACEBOOK_SIGN_IN_METHOD="facebook.com";Po.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ba._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return xo.credential(t,s)}catch{return null}}}xo.GOOGLE_SIGN_IN_METHOD="google.com";xo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends ec{constructor(){super("github.com")}static credential(e){return ba._fromParams({providerId:Co.PROVIDER_ID,signInMethod:Co.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Co.credentialFromTaggedObject(e)}static credentialFromError(e){return Co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Co.credential(e.oauthAccessToken)}catch{return null}}}Co.GITHUB_SIGN_IN_METHOD="github.com";Co.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends ec{constructor(){super("twitter.com")}static credential(e,t){return ba._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ao.credential(t,s)}catch{return null}}}Ao.TWITTER_SIGN_IN_METHOD="twitter.com";Ao.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cS(r,e){return Ju(r,"POST","/v1/accounts:signUp",Zo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const c=await si._fromIdTokenResponse(e,s,a),f=j_(s);return new Oa({user:c,providerId:f,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=j_(s);return new Oa({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function j_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends Ps{constructor(e,t,s,a){var c;super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Ah(e,t,s,a)}}function Qy(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(r,c,e,s):c})}async function hS(r,e,t=!1){const s=await Vu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Oa._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(r,e,t=!1){const{auth:s}=r;if(jr(s.app))return Promise.reject(ys(s));const a="reauthenticate";try{const c=await Vu(r,Qy(s,a,e,r),t);ze(c.idToken,s,"internal-error");const f=Cp(c.idToken);ze(f,s,"internal-error");const{sub:_}=f;return ze(r.uid===_,s,"user-mismatch"),Oa._forOperation(r,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&ai(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yy(r,e,t=!1){if(jr(r.app))return Promise.reject(ys(r));const s="signIn",a=await Qy(r,s,e),c=await Oa._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(c.user),c}async function fS(r,e){return Yy(Va(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xy(r){const e=Va(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pS(r,e,t){if(jr(r.app))return Promise.reject(ys(r));const s=Va(r),f=await Kf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cS).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&Xy(r),v}),_=await Oa._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(_.user),_}function mS(r,e,t){return jr(r.app)?Promise.reject(ys(r)):fS(rn(r),Ul.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Xy(r),s})}function gS(r,e,t,s){return rn(r).onIdTokenChanged(e,t,s)}function _S(r,e,t){return rn(r).beforeAuthStateChanged(e,t)}function vS(r,e,t,s){return rn(r).onAuthStateChanged(e,t,s)}function yS(r){return rn(r).signOut()}const kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=1e3,ES=10;class ew extends Jy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((f,_,v)=>{this.notifyListeners(f,v)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const f=this.storage.getItem(s);!t&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);F1()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,ES):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},wS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ew.type="LOCAL";const TS=ew;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends Jy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tw.type="SESSION";const nw=tw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Wh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:c}=t.data,f=this.handlersMap[a];if(!(f!=null&&f.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const _=Array.from(f).map(async T=>T(t.origin,c)),v=await IS(_);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:v})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,f;return new Promise((_,v)=>{const T=Lp("",20);a.port1.start();const S=setTimeout(()=>{v(new Error("unsupported_event"))},s);f={messageChannel:a,onMessage(C){const k=C;if(k.data.eventId===T)switch(k.data.status){case"ack":clearTimeout(S),c=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),_(k.data.response);break;default:clearTimeout(S),clearTimeout(c),v(new Error("invalid_response"));break}}},this.handlers.add(f),a.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:T,data:t},[a.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){return window}function PS(r){Ci().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function xS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function AS(){return rw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="firebaseLocalStorageDb",kS=1,Rh="firebaseLocalStorage",sw="fbase_key";class tc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function qh(r,e){return r.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function RS(){const r=indexedDB.deleteDatabase(iw);return new tc(r).toPromise()}function Qf(){const r=indexedDB.open(iw,kS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Rh,{keyPath:sw})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Rh)?e(s):(s.close(),await RS(),e(await Qf()))})})}async function U_(r,e,t){const s=qh(r,!0).put({[sw]:e,value:t});return new tc(s).toPromise()}async function LS(r,e){const t=qh(r,!1).get(e),s=await new tc(t).toPromise();return s===void 0?null:s.value}function B_(r,e){const t=qh(r,!0).delete(e);return new tc(t).toPromise()}const NS=800,bS=3;class ow{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>bS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wh._getInstance(AS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await xS(),!this.activeServiceWorker)return;this.sender=new SS(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qf();return await U_(e,kh,"1"),await B_(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>U_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>LS(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>B_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=qh(a,!1).getAll();return new tc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ow.type="LOCAL";const OS=ow;new Xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(r,e){return e?vs(e):(ze(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends kp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Al(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Al(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Al(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function DS(r){return Yy(r.auth,new Np(r),r.bypassAuthState)}function VS(r){const{auth:e,user:t}=r;return ze(t,e,"internal-error"),dS(t,new Np(r),r.bypassAuthState)}async function FS(r){const{auth:e,user:t}=r;return ze(t,e,"internal-error"),hS(t,new Np(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t,s,a,c=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:c,error:f,type:_}=e;if(f){this.reject(f);return}const v={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(_)(v))}catch(T){this.reject(T)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DS;case"linkViaPopup":case"linkViaRedirect":return FS;case"reauthViaPopup":case"reauthViaRedirect":return VS;default:ai(this.auth,"internal-error")}}resolve(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=new Xu(2e3,1e4);class Sl extends aw{constructor(e,t,s,a,c){super(e,t,a,c),this.provider=s,this.authWindow=null,this.pollId=null,Sl.currentPopupAction&&Sl.currentPopupAction.cancel(),Sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Ts(this.filter.length===1,"Popup operations only handle one event");const e=Lp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zS.get())};e()}}Sl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="pendingRedirect",mh=new Map;class US extends aw{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=mh.get(this.auth._key());if(!e){try{const s=await BS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}mh.set(this.auth._key(),e)}return this.bypassAuthState||mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BS(r,e){const t=WS(e),s=HS(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function $S(r,e){mh.set(r._key(),e)}function HS(r){return vs(r._redirectPersistence)}function WS(r){return ph(jS,r.config.apiKey,r.name)}async function qS(r,e,t=!1){if(jr(r.app))return Promise.reject(ys(r));const s=Va(r),a=MS(s,e),f=await new US(s,a,t).execute();return f&&!t&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=600*1e3;class GS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!lw(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(xi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZS&&this.cachedEventUids.clear(),this.cachedEventUids.has($_(e))}saveEventToCache(e){this.cachedEventUids.add($_(e)),this.lastProcessedEventTime=Date.now()}}function $_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function lw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function KS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(r,e={}){return Go(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XS=/^https?/;async function JS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await QS(r);for(const t of e)try{if(eP(t))return}catch{}ai(r,"unauthorized-domain")}function eP(r){const e=Zf(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&f.hostname===s}if(!XS.test(t))return!1;if(YS.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=new Xu(3e4,6e4);function H_(){const r=Ci().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function nP(r){return new Promise((e,t)=>{var s,a,c;function f(){H_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{H_(),t(xi(r,"network-request-failed"))},timeout:tP.get()})}if(!((a=(s=Ci().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((c=Ci().gapi)===null||c===void 0)&&c.load)f();else{const _=Z1("iframefcb");return Ci()[_]=()=>{gapi.load?f():t(xi(r,"network-request-failed"))},qy(`${q1()}?onload=${_}`).catch(v=>t(v))}}).catch(e=>{throw gh=null,e})}let gh=null;function rP(r){return gh=gh||nP(r),gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=new Xu(5e3,15e3),sP="__/auth/iframe",oP="emulator/auth/iframe",aP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uP(r){const e=r.config;ze(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?xp(e,oP):`https://${r.config.authDomain}/${sP}`,s={apiKey:e.apiKey,appName:r.name,v:jl},a=lP.get(r.config.apiHost);a&&(s.eid=a);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Yu(s).slice(1)}`}async function cP(r){const e=await rP(r),t=Ci().gapi;return ze(t,r,"internal-error"),e.open({where:document.body,url:uP(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aP,dontclear:!0},s=>new Promise(async(a,c)=>{await s.restyle({setHideOnLeave:!1});const f=xi(r,"network-request-failed"),_=Ci().setTimeout(()=>{c(f)},iP.get());function v(){Ci().clearTimeout(_),a(s)}s.ping(v).then(v,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dP=500,fP=600,pP="_blank",mP="http://localhost";class W_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gP(r,e,t,s=dP,a=fP){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let _="";const v=Object.assign(Object.assign({},hP),{width:s.toString(),height:a.toString(),top:c,left:f}),T=bn().toLowerCase();t&&(_=zy(T)?pP:t),Vy(T)&&(e=e||mP,v.scrollbars="yes");const S=Object.entries(v).reduce((k,[H,W])=>`${k}${H}=${W},`,"");if(V1(T)&&_!=="_self")return _P(e||"",_),new W_(null);const C=window.open(e||"",_,S);ze(C,r,"popup-blocked");try{C.focus()}catch{}return new W_(C)}function _P(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="__/auth/handler",yP="emulator/auth/handler",wP=encodeURIComponent("fac");async function q_(r,e,t,s,a,c){ze(r.config.authDomain,r,"auth-domain-config-required"),ze(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:jl,eventId:a};if(e instanceof Ky){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",sI(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,C]of Object.entries({}))f[S]=C}if(e instanceof ec){const S=e.getScopes().filter(C=>C!=="");S.length>0&&(f.scopes=S.join(","))}r.tenantId&&(f.tid=r.tenantId);const _=f;for(const S of Object.keys(_))_[S]===void 0&&delete _[S];const v=await r._getAppCheckToken(),T=v?`#${wP}=${encodeURIComponent(v)}`:"";return`${EP(r)}?${Yu(_).slice(1)}${T}`}function EP({config:r}){return r.emulator?xp(r,yP):`https://${r.authDomain}/${vP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="webStorageSupport";class TP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nw,this._completeRedirectFn=qS,this._overrideRedirectResult=$S}async _openPopup(e,t,s,a){var c;Ts((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const f=await q_(e,t,s,Zf(),a);return gP(e,f,Lp())}async _openRedirect(e,t,s,a){await this._originValidation(e);const c=await q_(e,t,s,Zf(),a);return PS(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(Ts(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await cP(e),s=new GS(e);return t.register("authEvent",a=>(ze(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mf,{type:Mf},a=>{var c;const f=(c=a==null?void 0:a[0])===null||c===void 0?void 0:c[Mf];f!==void 0&&t(!!f),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hy()||Fy()||Ap()}}const IP=TP;var Z_="@firebase/auth",G_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xP(r){Nl(new Na("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:_}=s.options;ze(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const v={apiKey:f,authDomain:_,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wy(r)},T=new $1(s,a,c,v);return J1(T,t),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Nl(new Na("auth-internal",e=>{const t=Va(e.getProvider("auth").getImmediate());return(s=>new SP(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bo(Z_,G_,PP(r)),bo(Z_,G_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=300,AP=wy("authIdTokenMaxAge")||CP;let K_=null;const kP=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>AP)return;const a=t==null?void 0:t.token;K_!==a&&(K_=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function RP(r=xy()){const e=Ip(r,"auth");if(e.isInitialized())return e.getImmediate();const t=X1(r,{popupRedirectResolver:IP,persistence:[OS,TS,nw]}),s=wy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=kP(c.toString());_S(t,f,()=>f(t.currentUser)),gS(t,_=>f(_))}}const a=vy("auth");return a&&eS(t,`http://${a}`),t}function LP(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}H1({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const c=xi("internal-error");c.customData=a,t(c)},s.type="text/javascript",s.charset="UTF-8",LP().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xP("Browser");var NP="firebase",bP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bo(NP,bP,"app");var Q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oo,uw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,N){function M(){}M.prototype=N.prototype,V.D=N.prototype,V.prototype=new M,V.prototype.constructor=V,V.C=function(z,j,$){for(var O=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)O[ot-2]=arguments[ot];return N.prototype[j].apply(z,O)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,N,M){M||(M=0);var z=Array(16);if(typeof N=="string")for(var j=0;16>j;++j)z[j]=N.charCodeAt(M++)|N.charCodeAt(M++)<<8|N.charCodeAt(M++)<<16|N.charCodeAt(M++)<<24;else for(j=0;16>j;++j)z[j]=N[M++]|N[M++]<<8|N[M++]<<16|N[M++]<<24;N=V.g[0],M=V.g[1],j=V.g[2];var $=V.g[3],O=N+($^M&(j^$))+z[0]+3614090360&4294967295;N=M+(O<<7&4294967295|O>>>25),O=$+(j^N&(M^j))+z[1]+3905402710&4294967295,$=N+(O<<12&4294967295|O>>>20),O=j+(M^$&(N^M))+z[2]+606105819&4294967295,j=$+(O<<17&4294967295|O>>>15),O=M+(N^j&($^N))+z[3]+3250441966&4294967295,M=j+(O<<22&4294967295|O>>>10),O=N+($^M&(j^$))+z[4]+4118548399&4294967295,N=M+(O<<7&4294967295|O>>>25),O=$+(j^N&(M^j))+z[5]+1200080426&4294967295,$=N+(O<<12&4294967295|O>>>20),O=j+(M^$&(N^M))+z[6]+2821735955&4294967295,j=$+(O<<17&4294967295|O>>>15),O=M+(N^j&($^N))+z[7]+4249261313&4294967295,M=j+(O<<22&4294967295|O>>>10),O=N+($^M&(j^$))+z[8]+1770035416&4294967295,N=M+(O<<7&4294967295|O>>>25),O=$+(j^N&(M^j))+z[9]+2336552879&4294967295,$=N+(O<<12&4294967295|O>>>20),O=j+(M^$&(N^M))+z[10]+4294925233&4294967295,j=$+(O<<17&4294967295|O>>>15),O=M+(N^j&($^N))+z[11]+2304563134&4294967295,M=j+(O<<22&4294967295|O>>>10),O=N+($^M&(j^$))+z[12]+1804603682&4294967295,N=M+(O<<7&4294967295|O>>>25),O=$+(j^N&(M^j))+z[13]+4254626195&4294967295,$=N+(O<<12&4294967295|O>>>20),O=j+(M^$&(N^M))+z[14]+2792965006&4294967295,j=$+(O<<17&4294967295|O>>>15),O=M+(N^j&($^N))+z[15]+1236535329&4294967295,M=j+(O<<22&4294967295|O>>>10),O=N+(j^$&(M^j))+z[1]+4129170786&4294967295,N=M+(O<<5&4294967295|O>>>27),O=$+(M^j&(N^M))+z[6]+3225465664&4294967295,$=N+(O<<9&4294967295|O>>>23),O=j+(N^M&($^N))+z[11]+643717713&4294967295,j=$+(O<<14&4294967295|O>>>18),O=M+($^N&(j^$))+z[0]+3921069994&4294967295,M=j+(O<<20&4294967295|O>>>12),O=N+(j^$&(M^j))+z[5]+3593408605&4294967295,N=M+(O<<5&4294967295|O>>>27),O=$+(M^j&(N^M))+z[10]+38016083&4294967295,$=N+(O<<9&4294967295|O>>>23),O=j+(N^M&($^N))+z[15]+3634488961&4294967295,j=$+(O<<14&4294967295|O>>>18),O=M+($^N&(j^$))+z[4]+3889429448&4294967295,M=j+(O<<20&4294967295|O>>>12),O=N+(j^$&(M^j))+z[9]+568446438&4294967295,N=M+(O<<5&4294967295|O>>>27),O=$+(M^j&(N^M))+z[14]+3275163606&4294967295,$=N+(O<<9&4294967295|O>>>23),O=j+(N^M&($^N))+z[3]+4107603335&4294967295,j=$+(O<<14&4294967295|O>>>18),O=M+($^N&(j^$))+z[8]+1163531501&4294967295,M=j+(O<<20&4294967295|O>>>12),O=N+(j^$&(M^j))+z[13]+2850285829&4294967295,N=M+(O<<5&4294967295|O>>>27),O=$+(M^j&(N^M))+z[2]+4243563512&4294967295,$=N+(O<<9&4294967295|O>>>23),O=j+(N^M&($^N))+z[7]+1735328473&4294967295,j=$+(O<<14&4294967295|O>>>18),O=M+($^N&(j^$))+z[12]+2368359562&4294967295,M=j+(O<<20&4294967295|O>>>12),O=N+(M^j^$)+z[5]+4294588738&4294967295,N=M+(O<<4&4294967295|O>>>28),O=$+(N^M^j)+z[8]+2272392833&4294967295,$=N+(O<<11&4294967295|O>>>21),O=j+($^N^M)+z[11]+1839030562&4294967295,j=$+(O<<16&4294967295|O>>>16),O=M+(j^$^N)+z[14]+4259657740&4294967295,M=j+(O<<23&4294967295|O>>>9),O=N+(M^j^$)+z[1]+2763975236&4294967295,N=M+(O<<4&4294967295|O>>>28),O=$+(N^M^j)+z[4]+1272893353&4294967295,$=N+(O<<11&4294967295|O>>>21),O=j+($^N^M)+z[7]+4139469664&4294967295,j=$+(O<<16&4294967295|O>>>16),O=M+(j^$^N)+z[10]+3200236656&4294967295,M=j+(O<<23&4294967295|O>>>9),O=N+(M^j^$)+z[13]+681279174&4294967295,N=M+(O<<4&4294967295|O>>>28),O=$+(N^M^j)+z[0]+3936430074&4294967295,$=N+(O<<11&4294967295|O>>>21),O=j+($^N^M)+z[3]+3572445317&4294967295,j=$+(O<<16&4294967295|O>>>16),O=M+(j^$^N)+z[6]+76029189&4294967295,M=j+(O<<23&4294967295|O>>>9),O=N+(M^j^$)+z[9]+3654602809&4294967295,N=M+(O<<4&4294967295|O>>>28),O=$+(N^M^j)+z[12]+3873151461&4294967295,$=N+(O<<11&4294967295|O>>>21),O=j+($^N^M)+z[15]+530742520&4294967295,j=$+(O<<16&4294967295|O>>>16),O=M+(j^$^N)+z[2]+3299628645&4294967295,M=j+(O<<23&4294967295|O>>>9),O=N+(j^(M|~$))+z[0]+4096336452&4294967295,N=M+(O<<6&4294967295|O>>>26),O=$+(M^(N|~j))+z[7]+1126891415&4294967295,$=N+(O<<10&4294967295|O>>>22),O=j+(N^($|~M))+z[14]+2878612391&4294967295,j=$+(O<<15&4294967295|O>>>17),O=M+($^(j|~N))+z[5]+4237533241&4294967295,M=j+(O<<21&4294967295|O>>>11),O=N+(j^(M|~$))+z[12]+1700485571&4294967295,N=M+(O<<6&4294967295|O>>>26),O=$+(M^(N|~j))+z[3]+2399980690&4294967295,$=N+(O<<10&4294967295|O>>>22),O=j+(N^($|~M))+z[10]+4293915773&4294967295,j=$+(O<<15&4294967295|O>>>17),O=M+($^(j|~N))+z[1]+2240044497&4294967295,M=j+(O<<21&4294967295|O>>>11),O=N+(j^(M|~$))+z[8]+1873313359&4294967295,N=M+(O<<6&4294967295|O>>>26),O=$+(M^(N|~j))+z[15]+4264355552&4294967295,$=N+(O<<10&4294967295|O>>>22),O=j+(N^($|~M))+z[6]+2734768916&4294967295,j=$+(O<<15&4294967295|O>>>17),O=M+($^(j|~N))+z[13]+1309151649&4294967295,M=j+(O<<21&4294967295|O>>>11),O=N+(j^(M|~$))+z[4]+4149444226&4294967295,N=M+(O<<6&4294967295|O>>>26),O=$+(M^(N|~j))+z[11]+3174756917&4294967295,$=N+(O<<10&4294967295|O>>>22),O=j+(N^($|~M))+z[2]+718787259&4294967295,j=$+(O<<15&4294967295|O>>>17),O=M+($^(j|~N))+z[9]+3951481745&4294967295,V.g[0]=V.g[0]+N&4294967295,V.g[1]=V.g[1]+(j+(O<<21&4294967295|O>>>11))&4294967295,V.g[2]=V.g[2]+j&4294967295,V.g[3]=V.g[3]+$&4294967295}s.prototype.u=function(V,N){N===void 0&&(N=V.length);for(var M=N-this.blockSize,z=this.B,j=this.h,$=0;$<N;){if(j==0)for(;$<=M;)a(this,V,$),$+=this.blockSize;if(typeof V=="string"){for(;$<N;)if(z[j++]=V.charCodeAt($++),j==this.blockSize){a(this,z),j=0;break}}else for(;$<N;)if(z[j++]=V[$++],j==this.blockSize){a(this,z),j=0;break}}this.h=j,this.o+=N},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var N=1;N<V.length-8;++N)V[N]=0;var M=8*this.o;for(N=V.length-8;N<V.length;++N)V[N]=M&255,M/=256;for(this.u(V),V=Array(16),N=M=0;4>N;++N)for(var z=0;32>z;z+=8)V[M++]=this.g[N]>>>z&255;return V};function c(V,N){var M=_;return Object.prototype.hasOwnProperty.call(M,V)?M[V]:M[V]=N(V)}function f(V,N){this.h=N;for(var M=[],z=!0,j=V.length-1;0<=j;j--){var $=V[j]|0;z&&$==N||(M[j]=$,z=!1)}this.g=M}var _={};function v(V){return-128<=V&&128>V?c(V,function(N){return new f([N|0],0>N?-1:0)}):new f([V|0],0>V?-1:0)}function T(V){if(isNaN(V)||!isFinite(V))return C;if(0>V)return Z(T(-V));for(var N=[],M=1,z=0;V>=M;z++)N[z]=V/M|0,M*=4294967296;return new f(N,0)}function S(V,N){if(V.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(V.charAt(0)=="-")return Z(S(V.substring(1),N));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=T(Math.pow(N,8)),z=C,j=0;j<V.length;j+=8){var $=Math.min(8,V.length-j),O=parseInt(V.substring(j,j+$),N);8>$?($=T(Math.pow(N,$)),z=z.j($).add(T(O))):(z=z.j(M),z=z.add(T(O)))}return z}var C=v(0),k=v(1),H=v(16777216);r=f.prototype,r.m=function(){if(Q(this))return-Z(this).m();for(var V=0,N=1,M=0;M<this.g.length;M++){var z=this.i(M);V+=(0<=z?z:4294967296+z)*N,N*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(W(this))return"0";if(Q(this))return"-"+Z(this).toString(V);for(var N=T(Math.pow(V,6)),M=this,z="";;){var j=ge(M,N).g;M=he(M,j.j(N));var $=((0<M.g.length?M.g[0]:M.h)>>>0).toString(V);if(M=j,W(M))return $+z;for(;6>$.length;)$="0"+$;z=$+z}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function W(V){if(V.h!=0)return!1;for(var N=0;N<V.g.length;N++)if(V.g[N]!=0)return!1;return!0}function Q(V){return V.h==-1}r.l=function(V){return V=he(this,V),Q(V)?-1:W(V)?0:1};function Z(V){for(var N=V.g.length,M=[],z=0;z<N;z++)M[z]=~V.g[z];return new f(M,~V.h).add(k)}r.abs=function(){return Q(this)?Z(this):this},r.add=function(V){for(var N=Math.max(this.g.length,V.g.length),M=[],z=0,j=0;j<=N;j++){var $=z+(this.i(j)&65535)+(V.i(j)&65535),O=($>>>16)+(this.i(j)>>>16)+(V.i(j)>>>16);z=O>>>16,$&=65535,O&=65535,M[j]=O<<16|$}return new f(M,M[M.length-1]&-2147483648?-1:0)};function he(V,N){return V.add(Z(N))}r.j=function(V){if(W(this)||W(V))return C;if(Q(this))return Q(V)?Z(this).j(Z(V)):Z(Z(this).j(V));if(Q(V))return Z(this.j(Z(V)));if(0>this.l(H)&&0>V.l(H))return T(this.m()*V.m());for(var N=this.g.length+V.g.length,M=[],z=0;z<2*N;z++)M[z]=0;for(z=0;z<this.g.length;z++)for(var j=0;j<V.g.length;j++){var $=this.i(z)>>>16,O=this.i(z)&65535,ot=V.i(j)>>>16,sn=V.i(j)&65535;M[2*z+2*j]+=O*sn,de(M,2*z+2*j),M[2*z+2*j+1]+=$*sn,de(M,2*z+2*j+1),M[2*z+2*j+1]+=O*ot,de(M,2*z+2*j+1),M[2*z+2*j+2]+=$*ot,de(M,2*z+2*j+2)}for(z=0;z<N;z++)M[z]=M[2*z+1]<<16|M[2*z];for(z=N;z<2*N;z++)M[z]=0;return new f(M,0)};function de(V,N){for(;(V[N]&65535)!=V[N];)V[N+1]+=V[N]>>>16,V[N]&=65535,N++}function me(V,N){this.g=V,this.h=N}function ge(V,N){if(W(N))throw Error("division by zero");if(W(V))return new me(C,C);if(Q(V))return N=ge(Z(V),N),new me(Z(N.g),Z(N.h));if(Q(N))return N=ge(V,Z(N)),new me(Z(N.g),N.h);if(30<V.g.length){if(Q(V)||Q(N))throw Error("slowDivide_ only works with positive integers.");for(var M=k,z=N;0>=z.l(V);)M=be(M),z=be(z);var j=Oe(M,1),$=Oe(z,1);for(z=Oe(z,2),M=Oe(M,2);!W(z);){var O=$.add(z);0>=O.l(V)&&(j=j.add(M),$=O),z=Oe(z,1),M=Oe(M,1)}return N=he(V,j.j(N)),new me(j,N)}for(j=C;0<=V.l(N);){for(M=Math.max(1,Math.floor(V.m()/N.m())),z=Math.ceil(Math.log(M)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),$=T(M),O=$.j(N);Q(O)||0<O.l(V);)M-=z,$=T(M),O=$.j(N);W($)&&($=k),j=j.add($),V=he(V,O)}return new me(j,V)}r.A=function(V){return ge(this,V).h},r.and=function(V){for(var N=Math.max(this.g.length,V.g.length),M=[],z=0;z<N;z++)M[z]=this.i(z)&V.i(z);return new f(M,this.h&V.h)},r.or=function(V){for(var N=Math.max(this.g.length,V.g.length),M=[],z=0;z<N;z++)M[z]=this.i(z)|V.i(z);return new f(M,this.h|V.h)},r.xor=function(V){for(var N=Math.max(this.g.length,V.g.length),M=[],z=0;z<N;z++)M[z]=this.i(z)^V.i(z);return new f(M,this.h^V.h)};function be(V){for(var N=V.g.length+1,M=[],z=0;z<N;z++)M[z]=V.i(z)<<1|V.i(z-1)>>>31;return new f(M,V.h)}function Oe(V,N){var M=N>>5;N%=32;for(var z=V.g.length-M,j=[],$=0;$<z;$++)j[$]=0<N?V.i($+M)>>>N|V.i($+M+1)<<32-N:V.i($+M);return new f(j,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,uw=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=T,f.fromString=S,Oo=f}).apply(typeof Q_<"u"?Q_:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cw,Iu,hw,_h,Yf,dw,fw,pw;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,I){return h==Array.prototype||h==Object.prototype||(h[y]=I.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var y=0;y<h.length;++y){var I=h[y];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var s=t(this);function a(h,y){if(y)e:{var I=s;h=h.split(".");for(var A=0;A<h.length-1;A++){var q=h[A];if(!(q in I))break e;I=I[q]}h=h[h.length-1],A=I[h],y=y(A),y!=A&&y!=null&&e(I,h,{configurable:!0,writable:!0,value:y})}}function c(h,y){h instanceof String&&(h+="");var I=0,A=!1,q={next:function(){if(!A&&I<h.length){var te=I++;return{value:y(te,h[te]),done:!1}}return A=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}a("Array.prototype.values",function(h){return h||function(){return c(this,function(y,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},_=this||self;function v(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function T(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function S(h,y,I){return h.call.apply(h.bind,arguments)}function C(h,y,I){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,A),h.apply(y,q)}}return function(){return h.apply(y,arguments)}}function k(h,y,I){return k=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:C,k.apply(null,arguments)}function H(h,y){var I=Array.prototype.slice.call(arguments,1);return function(){var A=I.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function W(h,y){function I(){}I.prototype=y.prototype,h.aa=y.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(A,q,te){for(var pe=Array(arguments.length-2),at=2;at<arguments.length;at++)pe[at-2]=arguments[at];return y.prototype[q].apply(A,pe)}}function Q(h){const y=h.length;if(0<y){const I=Array(y);for(let A=0;A<y;A++)I[A]=h[A];return I}return[]}function Z(h,y){for(let I=1;I<arguments.length;I++){const A=arguments[I];if(v(A)){const q=h.length||0,te=A.length||0;h.length=q+te;for(let pe=0;pe<te;pe++)h[q+pe]=A[pe]}else h.push(A)}}class he{constructor(y,I){this.i=y,this.j=I,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function de(h){return/^[\s\xa0]*$/.test(h)}function me(){var h=_.navigator;return h&&(h=h.userAgent)?h:""}function ge(h){return ge[" "](h),h}ge[" "]=function(){};var be=me().indexOf("Gecko")!=-1&&!(me().toLowerCase().indexOf("webkit")!=-1&&me().indexOf("Edge")==-1)&&!(me().indexOf("Trident")!=-1||me().indexOf("MSIE")!=-1)&&me().indexOf("Edge")==-1;function Oe(h,y,I){for(const A in h)y.call(I,h[A],A,h)}function V(h,y){for(const I in h)y.call(void 0,h[I],I,h)}function N(h){const y={};for(const I in h)y[I]=h[I];return y}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(h,y){let I,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(I in A)h[I]=A[I];for(let te=0;te<M.length;te++)I=M[te],Object.prototype.hasOwnProperty.call(A,I)&&(h[I]=A[I])}}function j(h){var y=1;h=h.split(":");const I=[];for(;0<y&&h.length;)I.push(h.shift()),y--;return h.length&&I.push(h.join(":")),I}function $(h){_.setTimeout(()=>{throw h},0)}function O(){var h=Re;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ot{constructor(){this.h=this.g=null}add(y,I){const A=sn.get();A.set(y,I),this.h?this.h.next=A:this.g=A,this.h=A}}var sn=new he(()=>new lt,h=>h.reset());class lt{constructor(){this.next=this.g=this.h=null}set(y,I){this.h=y,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,re=!1,Re=new ot,se=()=>{const h=_.Promise.resolve(void 0);nt=()=>{h.then(U)}};var U=()=>{for(var h;h=O();){try{h.h.call(h.g)}catch(I){$(I)}var y=sn;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}re=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Ae=(function(){if(!_.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};_.addEventListener("test",I,y),_.removeEventListener("test",I,y)}catch{}return h})();function Ie(h,y){if(ye.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(be){e:{try{ge(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else I=="mouseover"?y=h.fromElement:I=="mouseout"&&(y=h.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ee[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ie.aa.h.call(this)}}W(Ie,ye);var Ee={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ze="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function ft(h,y,I,A,q){this.listener=h,this.proxy=null,this.src=y,this.type=I,this.capture=!!A,this.ha=q,this.key=++Ke,this.da=this.fa=!1}function Ot(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function lr(h){this.src=h,this.g={},this.h=0}lr.prototype.add=function(h,y,I,A,q){var te=h.toString();h=this.g[te],h||(h=this.g[te]=[],this.h++);var pe=Ir(h,y,A,q);return-1<pe?(y=h[pe],I||(y.fa=!1)):(y=new ft(y,this.src,te,!!A,q),y.fa=I,h.push(y)),y};function Tr(h,y){var I=y.type;if(I in h.g){var A=h.g[I],q=Array.prototype.indexOf.call(A,y,void 0),te;(te=0<=q)&&Array.prototype.splice.call(A,q,1),te&&(Ot(y),h.g[I].length==0&&(delete h.g[I],h.h--))}}function Ir(h,y,I,A){for(var q=0;q<h.length;++q){var te=h[q];if(!te.da&&te.listener==y&&te.capture==!!I&&te.ha==A)return q}return-1}var bi="closure_lm_"+(1e6*Math.random()|0),Oi={};function xs(h,y,I,A,q){if(Array.isArray(y)){for(var te=0;te<y.length;te++)xs(h,y[te],I,A,q);return null}return I=Jo(I),h&&h[Ze]?h.K(y,I,T(A)?!!A.capture:!1,q):Mi(h,y,I,!1,A,q)}function Mi(h,y,I,A,q,te){if(!y)throw Error("Invalid event type");var pe=T(q)?!!q.capture:!!q,at=Vi(h);if(at||(h[bi]=at=new lr(h)),I=at.add(y,I,A,pe,te),I.proxy)return I;if(A=Di(),I.proxy=A,A.src=h,A.listener=I,h.addEventListener)Ae||(q=pe),q===void 0&&(q=!1),h.addEventListener(y.toString(),A,q);else if(h.attachEvent)h.attachEvent(ur(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Di(){function h(I){return y.call(h.src,h.listener,I)}const y=As;return h}function Cs(h,y,I,A,q){if(Array.isArray(y))for(var te=0;te<y.length;te++)Cs(h,y[te],I,A,q);else A=T(A)?!!A.capture:!!A,I=Jo(I),h&&h[Ze]?(h=h.i,y=String(y).toString(),y in h.g&&(te=h.g[y],I=Ir(te,I,A,q),-1<I&&(Ot(te[I]),Array.prototype.splice.call(te,I,1),te.length==0&&(delete h.g[y],h.h--)))):h&&(h=Vi(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ir(y,I,A,q)),(I=-1<h?y[h]:null)&&Sr(I))}function Sr(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ze])Tr(y.i,h);else{var I=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(I,A,h.capture):y.detachEvent?y.detachEvent(ur(I),A):y.addListener&&y.removeListener&&y.removeListener(A),(I=Vi(y))?(Tr(I,h),I.h==0&&(I.src=null,y[bi]=null)):Ot(h)}}}function ur(h){return h in Oi?Oi[h]:Oi[h]="on"+h}function As(h,y){if(h.da)h=!0;else{y=new Ie(y,this);var I=h.listener,A=h.ha||h.src;h.fa&&Sr(h),h=I.call(A,y)}return h}function Vi(h){return h=h[bi],h instanceof lr?h:null}var ks="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jo(h){return typeof h=="function"?h:(h[ks]||(h[ks]=function(y){return h.handleEvent(y)}),h[ks])}function Ct(){ne.call(this),this.i=new lr(this),this.M=this,this.F=null}W(Ct,ne),Ct.prototype[Ze]=!0,Ct.prototype.removeEventListener=function(h,y,I,A){Cs(this,h,y,I,A)};function Mt(h,y){var I,A=h.F;if(A)for(I=[];A;A=A.F)I.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new ye(y,h);else if(y instanceof ye)y.target=y.target||h;else{var q=y;y=new ye(A,h),z(y,q)}if(q=!0,I)for(var te=I.length-1;0<=te;te--){var pe=y.g=I[te];q=Pr(pe,A,!0,y)&&q}if(pe=y.g=h,q=Pr(pe,A,!0,y)&&q,q=Pr(pe,A,!1,y)&&q,I)for(te=0;te<I.length;te++)pe=y.g=I[te],q=Pr(pe,A,!1,y)&&q}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var I=h.g[y],A=0;A<I.length;A++)Ot(I[A]);delete h.g[y],h.h--}}this.F=null},Ct.prototype.K=function(h,y,I,A){return this.i.add(String(h),y,!1,I,A)},Ct.prototype.L=function(h,y,I,A){return this.i.add(String(h),y,!0,I,A)};function Pr(h,y,I,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,te=0;te<y.length;++te){var pe=y[te];if(pe&&!pe.da&&pe.capture==I){var at=pe.listener,Vt=pe.ha||pe.src;pe.fa&&Tr(h.i,pe),q=at.call(Vt,A)!==!1&&q}}return q&&!A.defaultPrevented}function ea(h,y,I){if(typeof h=="function")I&&(h=k(h,I));else if(h&&typeof h.handleEvent=="function")h=k(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:_.setTimeout(h,y||0)}function $r(h){h.g=ea(()=>{h.g=null,h.i&&(h.i=!1,$r(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class ui extends ne{constructor(y,I){super(),this.m=y,this.l=I,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:$r(this)}N(){super.N(),this.g&&(_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(h){ne.call(this),this.h=h,this.g={}}W(Fi,ne);var Rs=[];function zi(h){Oe(h.g,function(y,I){this.g.hasOwnProperty(I)&&Sr(y)},h),h.g={}}Fi.prototype.N=function(){Fi.aa.N.call(this),zi(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ls=_.JSON.stringify,ta=_.JSON.parse,Hr=class{stringify(h){return _.JSON.stringify(h,void 0)}parse(h){return _.JSON.parse(h,void 0)}};function ji(){}ji.prototype.h=null;function Ns(h){return h.h||(h.h=h.i())}function Ui(){}var On={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cr(){ye.call(this,"d")}W(cr,ye);function bs(){ye.call(this,"c")}W(bs,ye);var xr={},na=null;function Bi(){return na=na||new Ct}xr.La="serverreachability";function ra(h){ye.call(this,xr.La,h)}W(ra,ye);function Wr(h){const y=Bi();Mt(y,new ra(y))}xr.STAT_EVENT="statevent";function $i(h,y){ye.call(this,xr.STAT_EVENT,h),this.stat=y}W($i,ye);function At(h){const y=Bi();Mt(y,new $i(y,h))}xr.Ma="timingevent";function Os(h,y){ye.call(this,xr.Ma,h),this.size=y}W(Os,ye);function hr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){h()},y)}function Hi(){this.g=!0}Hi.prototype.xa=function(){this.g=!1};function on(h,y,I,A,q,te){h.info(function(){if(h.g)if(te)for(var pe="",at=te.split("&"),Vt=0;Vt<at.length;Vt++){var Je=at[Vt].split("=");if(1<Je.length){var ct=Je[0];Je=Je[1];var yt=ct.split("_");pe=2<=yt.length&&yt[1]=="type"?pe+(ct+"="+Je+"&"):pe+(ct+"=redacted&")}}else pe=null;else pe=te;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+y+`
`+I+`
`+pe})}function xe(h,y,I,A,q,te,pe){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+y+`
`+I+`
`+te+" "+pe})}function Un(h,y,I,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ja(h,I)+(A?" "+A:"")})}function Ms(h,y){h.info(function(){return"TIMEOUT: "+y})}Hi.prototype.info=function(){};function ja(h,y){if(!h.g)return y;if(!y)return null;try{var I=JSON.parse(y);if(I){for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var A=I[h];if(!(2>A.length)){var q=A[1];if(Array.isArray(q)&&!(1>q.length)){var te=q[0];if(te!="noop"&&te!="stop"&&te!="close")for(var pe=1;pe<q.length;pe++)q[pe]=""}}}}return Ls(I)}catch{return y}}var Wi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ds={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bn;function $n(){}W($n,ji),$n.prototype.g=function(){return new XMLHttpRequest},$n.prototype.i=function(){return{}},Bn=new $n;function Hn(h,y,I,A){this.j=h,this.i=y,this.l=I,this.R=A||1,this.U=new Fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ua}function Ua(){this.i=null,this.g="",this.h=!1}var ia={},Vs={};function Fs(h,y,I){h.L=1,h.v=Tn(wt(y)),h.m=I,h.P=!0,zs(h,null)}function zs(h,y){h.F=Date.now(),_t(h),h.A=wt(h.v);var I=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),mi(I.i,"t",A),h.C=0,I=h.j.J,h.h=new Ua,h.g=qa(h.j,I?y:null,!h.m),0<h.O&&(h.M=new ui(k(h.Y,h,h.g),h.O)),y=h.U,I=h.g,A=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Rs[0]=q.toString()),q=Rs);for(var te=0;te<q.length;te++){var pe=xs(I,q[te],A||y.handleEvent,!1,y.h||y);if(!pe)break;y.g[pe.key]=pe}y=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Wr(),on(h.i,h.u,h.A,h.l,h.R,h.m)}Hn.prototype.ca=function(h){h=h.target;const y=this.M;y&&$t(h)==3?y.j():this.Y(h)},Hn.prototype.Y=function(h){try{if(h==this.g)e:{const yt=$t(this.g);var y=this.g.Ba();const Xn=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||Ws(this.g)))){this.J||yt!=4||y==7||(y==8||0>=Xn?Wr(3):Wr(2)),qi(this);var I=this.g.Z();this.X=I;t:if(Ba(this)){var A=Ws(this.g);h="";var q=A.length,te=$t(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wn(this),ci(this);var pe="";break t}this.h.i=new _.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,h+=this.h.i.decode(A[y],{stream:!(te&&y==q-1)});A.length=0,this.h.g+=h,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=I==200,xe(this.i,this.u,this.A,this.l,this.R,yt,I),this.o){if(this.T&&!this.K){t:{if(this.g){var at,Vt=this.g;if((at=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!de(at)){var Je=at;break t}}Je=null}if(I=Je)Un(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zi(this,I);else{this.o=!1,this.s=3,At(12),Wn(this),ci(this);break e}}if(this.P){I=!0;let kt;for(;!this.J&&this.C<pe.length;)if(kt=js(this,pe),kt==Vs){yt==4&&(this.s=4,At(14),I=!1),Un(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==ia){this.s=4,At(15),Un(this.i,this.l,pe,"[Invalid Chunk]"),I=!1;break}else Un(this.i,this.l,kt,null),Zi(this,kt);if(Ba(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||pe.length!=0||this.h.h||(this.s=1,At(16),I=!1),this.o=this.o&&I,!I)Un(this.i,this.l,pe,"[Invalid Chunked Response]"),Wn(this),ci(this);else if(0<pe.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),Gs(ct),ct.M=!0,At(11))}}else Un(this.i,this.l,pe,null),Zi(this,pe);yt==4&&Wn(this),this.o&&!this.J&&(yt==4?ns(this.j,this):(this.o=!1,_t(this)))}else qs(this.g),I==400&&0<pe.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),Wn(this),ci(this)}}}catch{}finally{}};function Ba(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function js(h,y){var I=h.C,A=y.indexOf(`
`,I);return A==-1?Vs:(I=Number(y.substring(I,A)),isNaN(I)?ia:(A+=1,A+I>y.length?Vs:(y=y.slice(A,A+I),h.C=A+I,y)))}Hn.prototype.cancel=function(){this.J=!0,Wn(this)};function _t(h){h.S=Date.now()+h.I,$a(h,h.I)}function $a(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=hr(k(h.ba,h),y)}function qi(h){h.B&&(_.clearTimeout(h.B),h.B=null)}Hn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ms(this.i,this.A),this.L!=2&&(Wr(),At(17)),Wn(this),this.s=2,ci(this)):$a(this,this.S-h)};function ci(h){h.j.G==0||h.J||ns(h.j,h)}function Wn(h){qi(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,zi(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Zi(h,y){try{var I=h.j;if(I.G!=0&&(I.g==h||Ue(I.h,h))){if(!h.K&&Ue(I.h,h)&&I.G==3){try{var A=I.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<h.F)Qs(I),pr(I);else break e;ts(I),At(18)}}else I.za=q[1],0<I.za-I.T&&37500>q[2]&&I.F&&I.v==0&&!I.C&&(I.C=hr(k(I.Za,I),6e3));if(1>=fi(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Yr(I,11)}else if((h.K||I.g==h)&&Qs(I),!de(y))for(q=I.Da.g.parse(y),y=0;y<q.length;y++){let Je=q[y];if(I.T=Je[0],Je=Je[1],I.G==2)if(Je[0]=="c"){I.K=Je[1],I.ia=Je[2];const ct=Je[3];ct!=null&&(I.la=ct,I.j.info("VER="+I.la));const yt=Je[4];yt!=null&&(I.Aa=yt,I.j.info("SVER="+I.Aa));const Xn=Je[5];Xn!=null&&typeof Xn=="number"&&0<Xn&&(A=1.5*Xn,I.L=A,I.j.info("backChannelRequestTimeoutMs_="+A)),A=I;const kt=h.g;if(kt){const is=kt.g?kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(is){var te=A.h;te.g||is.indexOf("spdy")==-1&&is.indexOf("quic")==-1&&is.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(pt(te,te.h),te.h=null))}if(A.D){const mr=kt.g?kt.g.getResponseHeader("X-HTTP-Session-Id"):null;mr&&(A.ya=mr,Be(A.I,A.D,mr))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms")),A=I;var pe=h;if(A.qa=Ys(A,A.J?A.ia:null,A.W),pe.K){Gi(A.h,pe);var at=pe,Vt=A.L;Vt&&(at.I=Vt),at.B&&(qi(at),_t(at)),A.g=pe}else In(A);0<I.i.length&&Yn(I)}else Je[0]!="stop"&&Je[0]!="close"||Yr(I,7);else I.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Yr(I,7):Ht(I):Je[0]!="noop"&&I.l&&I.l.ta(Je),I.v=0)}}Wr(4)}catch{}}var hi=class{constructor(h,y){this.g=h,this.map=y}};function di(h){this.l=h||10,_.PerformanceNavigationTiming?(h=_.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(_.chrome&&_.chrome.loadTimes&&_.chrome.loadTimes()&&_.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function fi(h){return h.h?1:h.g?h.g.size:0}function Ue(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function pt(h,y){h.g?h.g.add(y):h.h=y}function Gi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}di.prototype.cancel=function(){if(this.i=qr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function qr(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const I of h.g.values())y=y.concat(I.D);return y}return Q(h.i)}function dr(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(v(h)){for(var y=[],I=h.length,A=0;A<I;A++)y.push(h[A]);return y}y=[],I=0;for(A in h)y[I++]=h[A];return y}function pi(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(v(h)||typeof h=="string"){var y=[];h=h.length;for(var I=0;I<h;I++)y.push(I);return y}y=[],I=0;for(const A in h)y[I++]=A;return y}}}function Fe(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(v(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var I=pi(h),A=dr(h),q=A.length,te=0;te<q;te++)y.call(void 0,A[te],I&&I[te],h)}var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sa(h,y){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var A=h[I].indexOf("="),q=null;if(0<=A){var te=h[I].substring(0,A);q=h[I].substring(A+1)}else te=h[I];y(te,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function qn(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof qn){this.h=h.h,Ki(this,h.j),this.o=h.o,this.g=h.g,fr(this,h.s),this.l=h.l;var y=h.i,I=new Gn;I.i=y.i,y.g&&(I.g=new Map(y.g),I.h=y.h),En(this,I),this.m=h.m}else h&&(y=String(h).match(mt))?(this.h=!1,Ki(this,y[1]||"",!0),this.o=Ge(y[2]||""),this.g=Ge(y[3]||"",!0),fr(this,y[4]),this.l=Ge(y[5]||"",!0),En(this,y[6]||"",!0),this.m=Ge(y[7]||"")):(this.h=!1,this.i=new Gn(null,this.h))}qn.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Zn(y,Cr,!0),":");var I=this.g;return(I||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Zn(y,Cr,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&h.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(Zn(I,I.charAt(0)=="/"?$s:Bs,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",Zn(I,Yi)),h.join("")};function wt(h){return new qn(h)}function Ki(h,y,I){h.j=I?Ge(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function fr(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function En(h,y,I){y instanceof Gn?(h.i=y,zt(h.i,h.h)):(I||(y=Zn(y,Qi)),h.i=new Gn(y,h.h))}function Be(h,y,I){h.i.set(y,I)}function Tn(h){return Be(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ge(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Zn(h,y,I){return typeof h=="string"?(h=encodeURI(h).replace(y,Us),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Us(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Cr=/[#\/\?@]/g,Bs=/[#\?:]/g,$s=/[#\?]/g,Qi=/[#\?@]/g,Yi=/#/g;function Gn(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Dt(h){h.g||(h.g=new Map,h.h=0,h.i&&sa(h.i,function(y,I){h.add(decodeURIComponent(y.replace(/\+/g," ")),I)}))}r=Gn.prototype,r.add=function(h,y){Dt(this),this.i=null,h=Le(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(y),this.h+=1,this};function Kn(h,y){Dt(h),y=Le(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Mn(h,y){return Dt(h),y=Le(h,y),h.g.has(y)}r.forEach=function(h,y){Dt(this),this.g.forEach(function(I,A){I.forEach(function(q){h.call(y,q,A,this)},this)},this)},r.na=function(){Dt(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),I=[];for(let A=0;A<y.length;A++){const q=h[A];for(let te=0;te<q.length;te++)I.push(y[A])}return I},r.V=function(h){Dt(this);let y=[];if(typeof h=="string")Mn(this,h)&&(y=y.concat(this.g.get(Le(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)y=y.concat(h[I])}return y},r.set=function(h,y){return Dt(this),this.i=null,h=Le(this,h),Mn(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function mi(h,y,I){Kn(h,y),0<I.length&&(h.i=null,h.g.set(Le(h,y),Q(I)),h.h+=I.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var I=0;I<y.length;I++){var A=y[I];const te=encodeURIComponent(String(A)),pe=this.V(A);for(A=0;A<pe.length;A++){var q=te;pe[A]!==""&&(q+="="+encodeURIComponent(String(pe[A]))),h.push(q)}}return this.i=h.join("&")};function Le(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function zt(h,y){y&&!h.j&&(Dt(h),h.i=null,h.g.forEach(function(I,A){var q=A.toLowerCase();A!=q&&(Kn(this,A),mi(this,q,I))},h)),h.j=y}function ut(h,y){const I=new Hi;if(_.Image){const A=new Image;A.onload=H(an,I,"TestLoadImage: loaded",!0,y,A),A.onerror=H(an,I,"TestLoadImage: error",!1,y,A),A.onabort=H(an,I,"TestLoadImage: abort",!1,y,A),A.ontimeout=H(an,I,"TestLoadImage: timeout",!1,y,A),_.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function oa(h,y){const I=new Hi,A=new AbortController,q=setTimeout(()=>{A.abort(),an(I,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(te=>{clearTimeout(q),te.ok?an(I,"TestPingServer: ok",!0,y):an(I,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),an(I,"TestPingServer: error",!1,y)})}function an(h,y,I,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(I)}catch{}}function aa(){this.g=new Hr}function Hs(h,y,I){const A=I||"";try{Fe(h,function(q,te){let pe=q;T(q)&&(pe=Ls(q)),y.push(A+te+"="+encodeURIComponent(pe))})}catch(q){throw y.push(A+"type="+encodeURIComponent("_badmap")),q}}function fn(h){this.l=h.Ub||null,this.j=h.eb||!1}W(fn,ji),fn.prototype.g=function(){return new Zr(this.l,this.j)},fn.prototype.i=(function(h){return function(){return h}})({});function Zr(h,y){Ct.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}W(Zr,Ct),r=Zr.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Xt(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||_).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gt(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Xt(this)),this.g&&(this.readyState=3,Xt(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof _.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gi(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function gi(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?gt(this):Xt(this),this.readyState==3&&gi(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,gt(this))},r.Qa=function(h){this.g&&(this.response=h,gt(this))},r.ga=function(){this.g&&gt(this)};function gt(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Xt(h)}r.setRequestHeader=function(h,y){this.u.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var I=y.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=y.next();return h.join(`\r
`)};function Xt(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ar(h){let y="";return Oe(h,function(I,A){y+=A,y+=":",y+=I,y+=`\r
`}),y}function Gr(h,y,I){e:{for(A in I){var A=!1;break e}A=!0}A||(I=Ar(I),typeof h=="string"?I!=null&&encodeURIComponent(String(I)):Be(h,y,I))}function Et(h){Ct.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}W(Et,Ct);var Ha=/^https?$/i,Xi=["POST","PUT"];r=Et.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,y,I,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bn.g(),this.v=this.o?Ns(this.o):Ns(Bn),this.g.onreadystatechange=k(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(te){Ji(this,te);return}if(h=I||"",I=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)I.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const te of A.keys())I.set(te,A.get(te));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(I.keys()).find(te=>te.toLowerCase()=="content-type"),q=_.FormData&&h instanceof _.FormData,!(0<=Array.prototype.indexOf.call(Xi,y,void 0))||A||q||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,pe]of I)this.g.setRequestHeader(te,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ln(this),this.u=!0,this.g.send(h),this.u=!1}catch(te){Ji(this,te)}};function Ji(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,es(h),Dn(h)}function es(h){h.A||(h.A=!0,Mt(h,"complete"),Mt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Mt(this,"complete"),Mt(this,"abort"),Dn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dn(this,!0)),Et.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Qe(this):this.bb())},r.bb=function(){Qe(this)};function Qe(h){if(h.h&&typeof f<"u"&&(!h.v[1]||$t(h)!=4||h.Z()!=2)){if(h.u&&$t(h)==4)ea(h.Ea,0,h);else if(Mt(h,"readystatechange"),$t(h)==4){h.h=!1;try{const pe=h.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var I;if(!(I=y)){var A;if(A=pe===0){var q=String(h.D).match(mt)[1]||null;!q&&_.self&&_.self.location&&(q=_.self.location.protocol.slice(0,-1)),A=!Ha.test(q?q.toLowerCase():"")}I=A}if(I)Mt(h,"complete"),Mt(h,"success");else{h.m=6;try{var te=2<$t(h)?h.g.statusText:""}catch{te=""}h.l=te+" ["+h.Z()+"]",es(h)}}finally{Dn(h)}}}}function Dn(h,y){if(h.g){ln(h);const I=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Mt(h,"ready");try{I.onreadystatechange=A}catch{}}}function ln(h){h.I&&(_.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function $t(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<$t(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),ta(y)}};function Ws(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function qs(h){const y={};h=(h.g&&2<=$t(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(de(h[A]))continue;var I=j(h[A]);const q=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const te=y[q]||[];y[q]=te,te.push(I)}V(y,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qn(h,y,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||y}function la(h){this.Aa=0,this.i=[],this.j=new Hi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qn("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qn("baseRetryDelayMs",5e3,h),this.cb=Qn("retryDelaySeedMs",1e4,h),this.Wa=Qn("forwardChannelMaxRetries",2,h),this.wa=Qn("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new di(h&&h.concurrentRequestLimit),this.Da=new aa,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=la.prototype,r.la=8,r.G=1,r.connect=function(h,y,I,A){At(0),this.W=h,this.H=y||{},I&&A!==void 0&&(this.H.OSID=I,this.H.OAID=A),this.F=this.X,this.I=Ys(this,null,this.W),Yn(this)};function Ht(h){if(Zs(h),h.G==3){var y=h.U++,I=wt(h.I);if(Be(I,"SID",h.K),Be(I,"RID",y),Be(I,"TYPE","terminate"),Kr(h,I),y=new Hn(h,h.j,y),y.L=2,y.v=Tn(wt(I)),I=!1,_.navigator&&_.navigator.sendBeacon)try{I=_.navigator.sendBeacon(y.v.toString(),"")}catch{}!I&&_.Image&&(new Image().src=y.v,I=!0),I||(y.g=qa(y.j,null),y.g.ea(y.v)),y.F=Date.now(),_t(y)}Wa(h)}function pr(h){h.g&&(Gs(h),h.g.cancel(),h.g=null)}function Zs(h){pr(h),h.u&&(_.clearTimeout(h.u),h.u=null),Qs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&_.clearTimeout(h.s),h.s=null)}function Yn(h){if(!wn(h.h)&&!h.s){h.s=!0;var y=h.Ga;nt||se(),re||(nt(),re=!0),Re.add(y,h),h.B=0}}function Zl(h,y){return fi(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=hr(k(h.Ga,h,y),ua(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new Hn(this,this.j,h);let te=this.o;if(this.S&&(te?(te=N(te),z(te,this.S)):te=this.S),this.m!==null||this.O||(q.H=te,te=null),this.P)e:{for(var y=0,I=0;I<this.i.length;I++){t:{var A=this.i[I];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=I;break e}if(y===4096||I===this.i.length-1){y=I+1;break e}}y=1e3}else y=1e3;y=Qr(this,q,y),I=wt(this.I),Be(I,"RID",h),Be(I,"CVER",22),this.D&&Be(I,"X-HTTP-Session-Id",this.D),Kr(this,I),te&&(this.O?y="headers="+encodeURIComponent(String(Ar(te)))+"&"+y:this.m&&Gr(I,this.m,te)),pt(this.h,q),this.Ua&&Be(I,"TYPE","init"),this.P?(Be(I,"$req",y),Be(I,"SID","null"),q.T=!0,Fs(q,I,null)):Fs(q,I,y),this.G=2}}else this.G==3&&(h?pn(this,h):this.i.length==0||wn(this.h)||pn(this))};function pn(h,y){var I;y?I=y.l:I=h.U++;const A=wt(h.I);Be(A,"SID",h.K),Be(A,"RID",I),Be(A,"AID",h.T),Kr(h,A),h.m&&h.o&&Gr(A,h.m,h.o),I=new Hn(h,h.j,I,h.B+1),h.m===null&&(I.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Qr(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),pt(h.h,I),Fs(I,A,y)}function Kr(h,y){h.H&&Oe(h.H,function(I,A){Be(y,A,I)}),h.l&&Fe({},function(I,A){Be(y,A,I)})}function Qr(h,y,I){I=Math.min(h.i.length,I);var A=h.l?k(h.l.Na,h.l,h):null;e:{var q=h.i;let te=-1;for(;;){const pe=["count="+I];te==-1?0<I?(te=q[0].g,pe.push("ofs="+te)):te=0:pe.push("ofs="+te);let at=!0;for(let Vt=0;Vt<I;Vt++){let Je=q[Vt].g;const ct=q[Vt].map;if(Je-=te,0>Je)te=Math.max(0,q[Vt].g-100),at=!1;else try{Hs(ct,pe,"req"+Je+"_")}catch{A&&A(ct)}}if(at){A=pe.join("&");break e}}}return h=h.i.splice(0,I),y.D=h,A}function In(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;nt||se(),re||(nt(),re=!0),Re.add(y,h),h.v=0}}function ts(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=hr(k(h.Fa,h),ua(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,Ks(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=hr(k(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),pr(this),Ks(this))};function Gs(h){h.A!=null&&(_.clearTimeout(h.A),h.A=null)}function Ks(h){h.g=new Hn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=wt(h.qa);Be(y,"RID","rpc"),Be(y,"SID",h.K),Be(y,"AID",h.T),Be(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Be(y,"TO",h.ja),Be(y,"TYPE","xmlhttp"),Kr(h,y),h.m&&h.o&&Gr(y,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=Tn(wt(y)),I.m=null,I.P=!0,zs(I,h)}r.Za=function(){this.C!=null&&(this.C=null,pr(this),ts(this),At(19))};function Qs(h){h.C!=null&&(_.clearTimeout(h.C),h.C=null)}function ns(h,y){var I=null;if(h.g==y){Qs(h),Gs(h),h.g=null;var A=2}else if(Ue(h.h,y))I=y.D,Gi(h.h,y),A=1;else return;if(h.G!=0){if(y.o)if(A==1){I=y.m?y.m.length:0,y=Date.now()-y.F;var q=h.B;A=Bi(),Mt(A,new Os(A,I)),Yn(h)}else In(h);else if(q=y.s,q==3||q==0&&0<y.X||!(A==1&&Zl(h,y)||A==2&&ts(h)))switch(I&&0<I.length&&(y=h.h,y.i=y.i.concat(I)),q){case 1:Yr(h,5);break;case 4:Yr(h,10);break;case 3:Yr(h,6);break;default:Yr(h,2)}}}function ua(h,y){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*y}function Yr(h,y){if(h.j.info("Error code "+y),y==2){var I=k(h.fb,h),A=h.Xa;const q=!A;A=new qn(A||"//www.google.com/images/cleardot.gif"),_.location&&_.location.protocol=="http"||Ki(A,"https"),Tn(A),q?ut(A.toString(),I):oa(A.toString(),I)}else At(2);h.G=0,h.l&&h.l.sa(y),Wa(h),Zs(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Wa(h){if(h.G=0,h.ka=[],h.l){const y=qr(h.h);(y.length!=0||h.i.length!=0)&&(Z(h.ka,y),Z(h.ka,h.i),h.h.i.length=0,Q(h.i),h.i.length=0),h.l.ra()}}function Ys(h,y,I){var A=I instanceof qn?wt(I):new qn(I);if(A.g!="")y&&(A.g=y+"."+A.g),fr(A,A.s);else{var q=_.location;A=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var te=new qn(null);A&&Ki(te,A),y&&(te.g=y),q&&fr(te,q),I&&(te.l=I),A=te}return I=h.D,y=h.ya,I&&y&&Be(A,I,y),Be(A,"VER",h.la),Kr(h,A),A}function qa(h,y,I){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Et(new fn({eb:I})):new Et(h.pa),y.Ha(h.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xs(){}r=Xs.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function rs(){}rs.prototype.g=function(h,y){return new Wt(h,y)};function Wt(h,y){Ct.call(this),this.g=new la(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!de(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!de(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Sn(this)}W(Wt,Ct),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){Ht(this.g)},Wt.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.u&&(I={},I.__data__=Ls(h),h=I);y.i.push(new hi(y.Ya++,h)),y.G==3&&Yn(y)},Wt.prototype.N=function(){this.g.l=null,delete this.j,Ht(this.g),delete this.g,Wt.aa.N.call(this)};function kr(h){cr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const I in y){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}W(kr,cr);function Za(){bs.call(this),this.status=1}W(Za,bs);function Sn(h){this.g=h}W(Sn,Xs),Sn.prototype.ua=function(){Mt(this.g,"a")},Sn.prototype.ta=function(h){Mt(this.g,new kr(h))},Sn.prototype.sa=function(h){Mt(this.g,new Za)},Sn.prototype.ra=function(){Mt(this.g,"b")},rs.prototype.createWebChannel=rs.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,pw=function(){return new rs},fw=function(){return Bi()},dw=xr,Yf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wi.NO_ERROR=0,Wi.TIMEOUT=8,Wi.HTTP_ERROR=6,_h=Wi,Ds.COMPLETE="complete",hw=Ds,Ui.EventType=On,On.OPEN="a",On.CLOSE="b",On.ERROR="c",On.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,Iu=Ui,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,cw=Et}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const Y_="@firebase/firestore",X_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new Ep("@firebase/firestore");function wl(){return Ma.logLevel}function Te(r,...e){if(Ma.logLevel<=et.DEBUG){const t=e.map(bp);Ma.debug(`Firestore (${Bl}): ${r}`,...t)}}function Is(r,...e){if(Ma.logLevel<=et.ERROR){const t=e.map(bp);Ma.error(`Firestore (${Bl}): ${r}`,...t)}}function Fo(r,...e){if(Ma.logLevel<=et.WARN){const t=e.map(bp);Ma.warn(`Firestore (${Bl}): ${r}`,...t)}}function bp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,mw(r,s,t)}function mw(r,e,t){let s=`FIRESTORE (${Bl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Is(s),new Error(s)}function dt(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||mw(e,a,s)}function We(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Ps{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ln.UNAUTHENTICATED)))}shutdown(){}}class MP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class DP{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0,42304);let s=this.i;const a=v=>this.i!==s?(s=this.i,t(v)):Promise.resolve();let c=new ws;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ws,e.enqueueRetryable((()=>a(this.currentUser)))};const f=()=>{const v=c;e.enqueueRetryable((async()=>{await v.promise,await a(this.currentUser)}))},_=v=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((v=>_(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?_(v):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ws)}}),0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(dt(typeof s.accessToken=="string",31837,{l:s}),new gw(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new Ln(e)}}class VP{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FP{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new VP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class J_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dt(this.o===void 0,3512);const s=c=>{c.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,Te("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const a=c=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new J_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new J_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=jP(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%62))}return s}}function Ye(r,e){return r<e?-1:r>e?1:0}function Xf(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),a=e.codePointAt(t);if(s!==a){if(s<128&&a<128)return Ye(s,a);{const c=_w(),f=UP(c.encode(ev(r,t)),c.encode(ev(e,t)));return f!==0?f:Ye(s,a)}}t+=s>65535?2:1}return Ye(r.length,e.length)}function ev(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function UP(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Ye(r[t],e[t]);return Ye(r.length,e.length)}function bl(r,e,t){return r.length===e.length&&r.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="__name__";class Pi{constructor(e,t,s){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&je(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Pi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=Pi.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return Ye(e.length,t.length)}static compareSegments(e,t){const s=Pi.isNumericId(e),a=Pi.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Pi.extractNumericId(e).compare(Pi.extractNumericId(t)):Xf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oo.fromString(e.substring(4,e.length-2))}}class It extends Pi{construct(e,t,s){return new It(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ve(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new It(t)}static emptyPath(){return new It([])}}const BP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends Pi{construct(e,t,s){return new vn(e,t,s)}static isValidIdentifier(e){return BP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tv}static keyField(){return new vn([tv])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(s.length===0)throw new ve(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let f=!1;for(;a<e.length;){const _=e[a];if(_==="\\"){if(a+1===e.length)throw new ve(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[a+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new ve(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=v,a+=2}else _==="`"?(f=!f,a++):_!=="."||f?(s+=_,a++):(c(),a++)}if(c(),f)throw new ve(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(t)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(It.fromString(e))}static fromName(e){return new Ne(It.fromString(e).popFirst(5))}static empty(){return new Ne(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return It.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new It(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(r,e,t){if(!t)throw new ve(ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function $P(r,e,t,s){if(e===!0&&s===!0)throw new ve(ie.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function nv(r){if(!Ne.isDocumentKey(r))throw new ve(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function rv(r){if(Ne.isDocumentKey(r))throw new ve(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function yw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Zh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":je(12329,{type:typeof r})}function Br(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ve(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zh(r);throw new ve(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(r,e){const t={typeString:r};return e&&(t.value=e),t}function nc(r,e){if(!yw(r))throw new ve(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const f=r[s];if(a&&typeof f!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(c!==void 0&&f!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new ve(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=-62135596800,sv=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*sv);return new Pt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<iv)throw new ve(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sv}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nc(e,Pt._jsonSchema))return new Pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pt._jsonSchemaVersion="firestore/timestamp/1.0",Pt._jsonSchema={type:Qt("string",Pt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new Pt(0,0))}static max(){return new He(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=-1;function HP(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=He.fromTimestamp(s===1e9?new Pt(t+1,0):new Pt(t,s));return new zo(a,Ne.empty(),e)}function WP(r){return new zo(r.readTime,r.key,zu)}class zo{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new zo(He.min(),Ne.empty(),zu)}static max(){return new zo(He.max(),Ne.empty(),zu)}}function qP(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(r.documentKey,e.documentKey),t!==0?t:Ye(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(r){if(r.code!==ie.FAILED_PRECONDITION||r.message!==ZP)throw r;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,s)=>{t(e)}))}static reject(e){return new oe(((t,s)=>{s(e)}))}static waitFor(e){return new oe(((t,s)=>{let a=0,c=0,f=!1;e.forEach((_=>{++a,_.next((()=>{++c,f&&c===a&&t()}),(v=>s(v)))})),f=!0,c===a&&t()}))}static or(e){let t=oe.resolve(!1);for(const s of e)t=t.next((a=>a?oe.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,c)=>{s.push(t.call(this,a,c))})),this.waitFor(s)}static mapArray(e,t){return new oe(((s,a)=>{const c=e.length,f=new Array(c);let _=0;for(let v=0;v<c;v++){const T=v;t(e[T]).next((S=>{f[T]=S,++_,_===c&&s(f)}),(S=>a(S)))}}))}static doWhile(e,t){return new oe(((s,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):s()};c()}))}}function KP(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Hl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Gh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=-1;function Kh(r){return r==null}function Lh(r){return r===0&&1/r==-1/0}function QP(r){return typeof r=="number"&&Number.isInteger(r)&&!Lh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="";function YP(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ov(e)),e=XP(r.get(t),e);return ov(e)}function XP(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const c=r.charAt(a);switch(c){case"\0":t+="";break;case ww:t+="";break;default:t+=c}}return t}function ov(r){return r+ww+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ko(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Ew(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.comparator=e,this.root=t||_n.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lh(this.root,e,this.comparator,!0)}}class lh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??_n.RED,this.left=a??_n.EMPTY,this.right=c??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new _n(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return _n.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,s,a,c){return this}insert(e,t,s){return new _n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lv(this.data.getIterator())}getIteratorFrom(e){return new lv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new nn(this.comparator);return t.data=e,t}}class lv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new Er([])}unionWith(e){let t=new nn(vn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Er(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Tw("Invalid base64 string: "+c):c}})(e);return new yn(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c})(e);return new yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const JP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jo(r){if(dt(!!r,39018),typeof r=="string"){let e=0;const t=JP.exec(r);if(dt(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ut(r.seconds),nanos:Ut(r.nanos)}}function Ut(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Uo(r){return typeof r=="string"?yn.fromBase64String(r):yn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="server_timestamp",Sw="__type__",Pw="__previous_value__",xw="__local_write_time__";function Dp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Sw])===null||t===void 0?void 0:t.stringValue)===Iw}function Qh(r){const e=r.mapValue.fields[Pw];return Dp(e)?Qh(e):e}function ju(r){const e=jo(r.mapValue.fields[xw].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t,s,a,c,f,_,v,T,S){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=_,this.longPollingOptions=v,this.useFetchStreams=T,this.isUsingEmulator=S}}const Nh="(default)";class Uu{constructor(e,t){this.projectId=e,this.database=t||Nh}static empty(){return new Uu("","")}get isDefaultDatabase(){return this.database===Nh}isEqual(e){return e instanceof Uu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="__type__",tx="__max__",uh={mapValue:{}},Aw="__vector__",bh="value";function Bo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Dp(r)?4:rx(r)?9007199254740991:nx(r)?10:11:je(28295,{value:r})}function Ni(r,e){if(r===e)return!0;const t=Bo(r);if(t!==Bo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ju(r).isEqual(ju(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=jo(a.timestampValue),_=jo(c.timestampValue);return f.seconds===_.seconds&&f.nanos===_.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,c){return Uo(a.bytesValue).isEqual(Uo(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,c){return Ut(a.geoPointValue.latitude)===Ut(c.geoPointValue.latitude)&&Ut(a.geoPointValue.longitude)===Ut(c.geoPointValue.longitude)})(r,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return Ut(a.integerValue)===Ut(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=Ut(a.doubleValue),_=Ut(c.doubleValue);return f===_?Lh(f)===Lh(_):isNaN(f)&&isNaN(_)}return!1})(r,e);case 9:return bl(r.arrayValue.values||[],e.arrayValue.values||[],Ni);case 10:case 11:return(function(a,c){const f=a.mapValue.fields||{},_=c.mapValue.fields||{};if(av(f)!==av(_))return!1;for(const v in f)if(f.hasOwnProperty(v)&&(_[v]===void 0||!Ni(f[v],_[v])))return!1;return!0})(r,e);default:return je(52216,{left:r})}}function Bu(r,e){return(r.values||[]).find((t=>Ni(t,e)))!==void 0}function Ol(r,e){if(r===e)return 0;const t=Bo(r),s=Bo(e);if(t!==s)return Ye(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ye(r.booleanValue,e.booleanValue);case 2:return(function(c,f){const _=Ut(c.integerValue||c.doubleValue),v=Ut(f.integerValue||f.doubleValue);return _<v?-1:_>v?1:_===v?0:isNaN(_)?isNaN(v)?0:-1:1})(r,e);case 3:return uv(r.timestampValue,e.timestampValue);case 4:return uv(ju(r),ju(e));case 5:return Xf(r.stringValue,e.stringValue);case 6:return(function(c,f){const _=Uo(c),v=Uo(f);return _.compareTo(v)})(r.bytesValue,e.bytesValue);case 7:return(function(c,f){const _=c.split("/"),v=f.split("/");for(let T=0;T<_.length&&T<v.length;T++){const S=Ye(_[T],v[T]);if(S!==0)return S}return Ye(_.length,v.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,f){const _=Ye(Ut(c.latitude),Ut(f.latitude));return _!==0?_:Ye(Ut(c.longitude),Ut(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return cv(r.arrayValue,e.arrayValue);case 10:return(function(c,f){var _,v,T,S;const C=c.fields||{},k=f.fields||{},H=(_=C[bh])===null||_===void 0?void 0:_.arrayValue,W=(v=k[bh])===null||v===void 0?void 0:v.arrayValue,Q=Ye(((T=H==null?void 0:H.values)===null||T===void 0?void 0:T.length)||0,((S=W==null?void 0:W.values)===null||S===void 0?void 0:S.length)||0);return Q!==0?Q:cv(H,W)})(r.mapValue,e.mapValue);case 11:return(function(c,f){if(c===uh.mapValue&&f===uh.mapValue)return 0;if(c===uh.mapValue)return 1;if(f===uh.mapValue)return-1;const _=c.fields||{},v=Object.keys(_),T=f.fields||{},S=Object.keys(T);v.sort(),S.sort();for(let C=0;C<v.length&&C<S.length;++C){const k=Xf(v[C],S[C]);if(k!==0)return k;const H=Ol(_[v[C]],T[S[C]]);if(H!==0)return H}return Ye(v.length,S.length)})(r.mapValue,e.mapValue);default:throw je(23264,{le:t})}}function uv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ye(r,e);const t=jo(r),s=jo(e),a=Ye(t.seconds,s.seconds);return a!==0?a:Ye(t.nanos,s.nanos)}function cv(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const c=Ol(t[a],s[a]);if(c)return c}return Ye(t.length,s.length)}function Ml(r){return Jf(r)}function Jf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=jo(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Uo(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ne.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",a=!0;for(const c of t.values||[])a?a=!1:s+=",",s+=Jf(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const f of s)c?c=!1:a+=",",a+=`${f}:${Jf(t.fields[f])}`;return a+"}"})(r.mapValue):je(61005,{value:r})}function vh(r){switch(Bo(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qh(r);return e?16+vh(e):16;case 5:return 2*r.stringValue.length;case 6:return Uo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,c)=>a+vh(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let a=0;return Ko(s.fields,((c,f)=>{a+=c.length+vh(f)})),a})(r.mapValue);default:throw je(13486,{value:r})}}function hv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ep(r){return!!r&&"integerValue"in r}function Vp(r){return!!r&&"arrayValue"in r}function dv(r){return!!r&&"nullValue"in r}function fv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function yh(r){return!!r&&"mapValue"in r}function nx(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Cw])===null||t===void 0?void 0:t.stringValue)===Aw}function Ru(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ko(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ru(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ru(r.arrayValue.values[t]);return e}return Object.assign({},r)}function rx(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===tx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!yh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ru(t)}setAll(e){let t=vn.emptyPath(),s={},a=[];e.forEach(((f,_)=>{if(!t.isImmediateParentOf(_)){const v=this.getFieldsMap(t);this.applyChanges(v,s,a),s={},a=[],t=_.popLast()}f?s[_.lastSegment()]=Ru(f):a.push(_.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());yh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ni(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];yh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Ko(t,((a,c)=>e[a]=c));for(const a of s)delete e[a]}clone(){return new or(Ru(this.value))}}function kw(r){const e=[];return Ko(r.fields,((t,s)=>{const a=new vn([t]);if(yh(s)){const c=kw(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)})),new Er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,t,s,a,c,f,_){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=_}static newInvalidDocument(e){return new Nn(e,0,He.min(),He.min(),He.min(),or.empty(),0)}static newFoundDocument(e,t,s,a){return new Nn(e,1,t,He.min(),s,a,0)}static newNoDocument(e,t){return new Nn(e,2,t,He.min(),He.min(),or.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,He.min(),He.min(),or.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t){this.position=e,this.inclusive=t}}function pv(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const c=e[a],f=r.position[a];if(c.field.isKeyField()?s=Ne.comparator(Ne.fromName(f.referenceValue),t.key):s=Ol(f,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function mv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ni(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t="asc"){this.field=e,this.dir=t}}function ix(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{}class Kt extends Rw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new ox(e,t,s):t==="array-contains"?new ux(e,s):t==="in"?new cx(e,s):t==="not-in"?new hx(e,s):t==="array-contains-any"?new dx(e,s):new Kt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new ax(e,s):new lx(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ol(t,this.value)):t!==null&&Bo(this.value)===Bo(t)&&this.matchesComparison(Ol(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class li extends Rw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new li(e,t)}matches(e){return Lw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Lw(r){return r.op==="and"}function Nw(r){return sx(r)&&Lw(r)}function sx(r){for(const e of r.filters)if(e instanceof li)return!1;return!0}function tp(r){if(r instanceof Kt)return r.field.canonicalString()+r.op.toString()+Ml(r.value);if(Nw(r))return r.filters.map((e=>tp(e))).join(",");{const e=r.filters.map((t=>tp(t))).join(",");return`${r.op}(${e})`}}function bw(r,e){return r instanceof Kt?(function(s,a){return a instanceof Kt&&s.op===a.op&&s.field.isEqual(a.field)&&Ni(s.value,a.value)})(r,e):r instanceof li?(function(s,a){return a instanceof li&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((c,f,_)=>c&&bw(f,a.filters[_])),!0):!1})(r,e):void je(19439)}function Ow(r){return r instanceof Kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ml(t.value)}`})(r):r instanceof li?(function(t){return t.op.toString()+" {"+t.getFilters().map(Ow).join(" ,")+"}"})(r):"Filter"}class ox extends Kt{constructor(e,t,s){super(e,t,s),this.key=Ne.fromName(s.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class ax extends Kt{constructor(e,t){super(e,"in",t),this.keys=Mw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lx extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=Mw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Mw(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>Ne.fromName(s.referenceValue)))}class ux extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vp(t)&&Bu(t.arrayValue,this.value)}}class cx extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bu(this.value.arrayValue,t)}}class hx extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bu(this.value.arrayValue,t)}}class dx extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Bu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t=null,s=[],a=[],c=null,f=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=_,this.Pe=null}}function gv(r,e=null,t=[],s=[],a=null,c=null,f=null){return new fx(r,e,t,s,a,c,f)}function Fp(r){const e=We(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>tp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Kh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ml(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ml(s))).join(",")),e.Pe=t}return e.Pe}function zp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!ix(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!bw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!mv(r.startAt,e.startAt)&&mv(r.endAt,e.endAt)}function np(r){return Ne.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t=null,s=[],a=[],c=null,f="F",_=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=_,this.endAt=v,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function px(r,e,t,s,a,c,f,_){return new Wl(r,e,t,s,a,c,f,_)}function Yh(r){return new Wl(r)}function _v(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Dw(r){return r.collectionGroup!==null}function Lu(r){const e=We(r);if(e.Te===null){e.Te=[];const t=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let _=new nn(vn.comparator);return f.filters.forEach((v=>{v.getFlattenedFilters().forEach((T=>{T.isInequality()&&(_=_.add(T.field))}))})),_})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Te.push(new $u(c,s))})),t.has(vn.keyField().canonicalString())||e.Te.push(new $u(vn.keyField(),s))}return e.Te}function Ai(r){const e=We(r);return e.Ie||(e.Ie=mx(e,Lu(r))),e.Ie}function mx(r,e){if(r.limitType==="F")return gv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new $u(a.field,c)}));const t=r.endAt?new Oh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Oh(r.startAt.position,r.startAt.inclusive):null;return gv(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function rp(r,e){const t=r.filters.concat([e]);return new Wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function ip(r,e,t){return new Wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Xh(r,e){return zp(Ai(r),Ai(e))&&r.limitType===e.limitType}function Vw(r){return`${Fp(Ai(r))}|lt:${r.limitType}`}function El(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>Ow(a))).join(", ")}]`),Kh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Ml(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Ml(a))).join(",")),`Target(${s})`})(Ai(r))}; limitType=${r.limitType})`}function Jh(r,e){return e.isFoundDocument()&&(function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ne.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,a){for(const c of Lu(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0})(r,e)&&(function(s,a){return!(s.startAt&&!(function(f,_,v){const T=pv(f,_,v);return f.inclusive?T<=0:T<0})(s.startAt,Lu(s),a)||s.endAt&&!(function(f,_,v){const T=pv(f,_,v);return f.inclusive?T>=0:T>0})(s.endAt,Lu(s),a))})(r,e)}function gx(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Fw(r){return(e,t)=>{let s=!1;for(const a of Lu(r)){const c=_x(a,e,t);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function _x(r,e,t){const s=r.field.isKeyField()?Ne.comparator(e.key,t.key):(function(c,f,_){const v=f.data.field(c),T=_.data.field(c);return v!==null&&T!==null?Ol(v,T):je(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return je(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ko(this.inner,((t,s)=>{for(const[a,c]of s)e(a,c)}))}isEmpty(){return Ew(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=new bt(Ne.comparator);function Ss(){return vx}const zw=new bt(Ne.comparator);function Su(...r){let e=zw;for(const t of r)e=e.insert(t.key,t);return e}function jw(r){let e=zw;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ca(){return Nu()}function Uw(){return Nu()}function Nu(){return new Fa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const yx=new bt(Ne.comparator),wx=new nn(Ne.comparator);function tt(...r){let e=wx;for(const t of r)e=e.add(t);return e}const Ex=new nn(Ye);function Tx(){return Ex}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function Bw(r){return{integerValue:""+r}}function Ix(r,e){return QP(e)?Bw(e):jp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this._=void 0}}function Sx(r,e,t){return r instanceof Hu?(function(a,c){const f={fields:{[Sw]:{stringValue:Iw},[xw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Dp(c)&&(c=Qh(c)),c&&(f.fields[Pw]=c),{mapValue:f}})(t,e):r instanceof Wu?Hw(r,e):r instanceof qu?Ww(r,e):(function(a,c){const f=$w(a,c),_=vv(f)+vv(a.Ee);return ep(f)&&ep(a.Ee)?Bw(_):jp(a.serializer,_)})(r,e)}function Px(r,e,t){return r instanceof Wu?Hw(r,e):r instanceof qu?Ww(r,e):t}function $w(r,e){return r instanceof Mh?(function(s){return ep(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Hu extends ed{}class Wu extends ed{constructor(e){super(),this.elements=e}}function Hw(r,e){const t=qw(e);for(const s of r.elements)t.some((a=>Ni(a,s)))||t.push(s);return{arrayValue:{values:t}}}class qu extends ed{constructor(e){super(),this.elements=e}}function Ww(r,e){let t=qw(e);for(const s of r.elements)t=t.filter((a=>!Ni(a,s)));return{arrayValue:{values:t}}}class Mh extends ed{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function vv(r){return Ut(r.integerValue||r.doubleValue)}function qw(r){return Vp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,t){this.field=e,this.transform=t}}function Cx(r,e){return r.field.isEqual(e.field)&&(function(s,a){return s instanceof Wu&&a instanceof Wu||s instanceof qu&&a instanceof qu?bl(s.elements,a.elements,Ni):s instanceof Mh&&a instanceof Mh?Ni(s.Ee,a.Ee):s instanceof Hu&&a instanceof Hu})(r.transform,e.transform)}class Ax{constructor(e,t){this.version=e,this.transformResults=t}}class oi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new oi}static exists(e){return new oi(void 0,e)}static updateTime(e){return new oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class td{}function Zw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Up(r.key,oi.none()):new rc(r.key,r.data,oi.none());{const t=r.data,s=or.empty();let a=new nn(vn.comparator);for(let c of e.fields)if(!a.has(c)){let f=t.field(c);f===null&&c.length>1&&(c=c.popLast(),f=t.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new Qo(r.key,s,new Er(a.toArray()),oi.none())}}function kx(r,e,t){r instanceof rc?(function(a,c,f){const _=a.value.clone(),v=wv(a.fieldTransforms,c,f.transformResults);_.setAll(v),c.convertToFoundDocument(f.version,_).setHasCommittedMutations()})(r,e,t):r instanceof Qo?(function(a,c,f){if(!wh(a.precondition,c))return void c.convertToUnknownDocument(f.version);const _=wv(a.fieldTransforms,c,f.transformResults),v=c.data;v.setAll(Gw(a)),v.setAll(_),c.convertToFoundDocument(f.version,v).setHasCommittedMutations()})(r,e,t):(function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,t)}function bu(r,e,t,s){return r instanceof rc?(function(c,f,_,v){if(!wh(c.precondition,f))return _;const T=c.value.clone(),S=Ev(c.fieldTransforms,v,f);return T.setAll(S),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),null})(r,e,t,s):r instanceof Qo?(function(c,f,_,v){if(!wh(c.precondition,f))return _;const T=Ev(c.fieldTransforms,v,f),S=f.data;return S.setAll(Gw(c)),S.setAll(T),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),_===null?null:_.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((C=>C.field)))})(r,e,t,s):(function(c,f,_){return wh(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):_})(r,e,t)}function Rx(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),c=$w(s.transform,a||null);c!=null&&(t===null&&(t=or.empty()),t.set(s.field,c))}return t||null}function yv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&bl(s,a,((c,f)=>Cx(c,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class rc extends td{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Qo extends td{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Gw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function wv(r,e,t){const s=new Map;dt(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let a=0;a<t.length;a++){const c=r[a],f=c.transform,_=e.data.field(c.field);s.set(c.field,Px(f,_,t[a]))}return s}function Ev(r,e,t){const s=new Map;for(const a of r){const c=a.transform,f=t.data.field(a.field);s.set(a.field,Sx(c,f,e))}return s}class Up extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lx extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&kx(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=bu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=bu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Uw();return this.mutations.forEach((a=>{const c=e.get(a.key),f=c.overlayedDocument;let _=this.applyToLocalView(f,c.mutatedFields);_=t.has(a.key)?null:_;const v=Zw(f,_);v!==null&&s.set(a.key,v),f.isValidDocument()||f.convertToNoDocument(He.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),tt())}isEqual(e){return this.batchId===e.batchId&&bl(this.mutations,e.mutations,((t,s)=>yv(t,s)))&&bl(this.baseMutations,e.baseMutations,((t,s)=>yv(t,s)))}}class Bp{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){dt(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let a=(function(){return yx})();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new Bp(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,rt;function Mx(r){switch(r){case ie.OK:return je(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return je(15467,{code:r})}}function Kw(r){if(r===void 0)return Is("GRPC error has no .code"),ie.UNKNOWN;switch(r){case Gt.OK:return ie.OK;case Gt.CANCELLED:return ie.CANCELLED;case Gt.UNKNOWN:return ie.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return ie.INTERNAL;case Gt.UNAVAILABLE:return ie.UNAVAILABLE;case Gt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Gt.NOT_FOUND:return ie.NOT_FOUND;case Gt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Gt.ABORTED:return ie.ABORTED;case Gt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Gt.DATA_LOSS:return ie.DATA_LOSS;default:return je(39323,{code:r})}}(rt=Gt||(Gt={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=new Oo([4294967295,4294967295],0);function Tv(r){const e=_w().encode(r),t=new uw;return t.update(e),new Uint8Array(t.digest())}function Iv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Oo([t,s],0),new Oo([a,c],0)]}class $p{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Pu(`Invalid padding: ${t}`);if(s<0)throw new Pu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Pu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Pu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Oo.fromNumber(this.fe)}pe(e,t,s){let a=e.add(t.multiply(Oo.fromNumber(s)));return a.compare(Dx)===1&&(a=new Oo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Tv(e),[s,a]=Iv(t);for(let c=0;c<this.hashCount;c++){const f=this.pe(s,a,c);if(!this.ye(f))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new $p(c,a,t);return s.forEach((_=>f.insert(_))),f}insert(e){if(this.fe===0)return;const t=Tv(e),[s,a]=Iv(t);for(let c=0;c<this.hashCount;c++){const f=this.pe(s,a,c);this.we(f)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,ic.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new nd(He.min(),a,new bt(Ye),Ss(),tt())}}class ic{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new ic(s,t,tt(),tt(),tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=a}}class Qw{constructor(e,t){this.targetId=e,this.De=t}}class Yw{constructor(e,t,s=yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Sv{constructor(){this.ve=0,this.Ce=Pv(),this.Fe=yn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=tt(),t=tt(),s=tt();return this.Ce.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:je(38017,{changeType:c})}})),new ic(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=Pv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Vx{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ss(),this.je=ch(),this.Je=ch(),this.He=new bt(Ye)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:je(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((s,a)=>{this.nt(a)&&t(a)}))}it(e){const t=e.targetId,s=e.De.count,a=this.st(t);if(a){const c=a.target;if(np(c))if(s===0){const f=new Ne(c.path);this.Xe(t,f,Nn.newNoDocument(f,He.min()))}else dt(s===1,20013,{expectedCount:s});else{const f=this.ot(t);if(f!==s){const _=this._t(e),v=_?this.ut(_,e,f):1;if(v!==0){this.rt(t);const T=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,T)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=t;let f,_;try{f=Uo(s).toUint8Array()}catch(v){if(v instanceof Tw)return Fo("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{_=new $p(f,a,c)}catch(v){return Fo(v instanceof Pu?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return _.fe===0?null:_}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let a=0;return s.forEach((c=>{const f=this.We.lt(),_=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(_)||(this.Xe(t,c,null),a++)})),a}Pt(e){const t=new Map;this.Ge.forEach(((c,f)=>{const _=this.st(f);if(_){if(c.current&&np(_.target)){const v=new Ne(_.target.path);this.Tt(v).has(f)||this.It(f,v)||this.Xe(f,v,Nn.newNoDocument(v,e))}c.Ne&&(t.set(f,c.Le()),c.ke())}}));let s=tt();this.Je.forEach(((c,f)=>{let _=!0;f.forEachWhile((v=>{const T=this.st(v);return!T||T.purpose==="TargetPurposeLimboResolution"||(_=!1,!1)})),_&&(s=s.add(c))})),this.ze.forEach(((c,f)=>f.setReadTime(e)));const a=new nd(e,t,this.He,this.ze,s);return this.ze=Ss(),this.je=ch(),this.Je=ch(),this.He=new bt(Ye),a}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Sv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new nn(Ye),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new nn(Ye),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Sv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ch(){return new bt(Ne.comparator)}function Pv(){return new bt(Ne.comparator)}const Fx={asc:"ASCENDING",desc:"DESCENDING"},zx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jx={and:"AND",or:"OR"};class Ux{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sp(r,e){return r.useProto3Json||Kh(e)?e:{value:e}}function Dh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Bx(r,e){return Dh(r,e.toTimestamp())}function ki(r){return dt(!!r,49232),He.fromTimestamp((function(t){const s=jo(t);return new Pt(s.seconds,s.nanos)})(r))}function Hp(r,e){return op(r,e).canonicalString()}function op(r,e){const t=(function(a){return new It(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Jw(r){const e=It.fromString(r);return dt(i0(e),10190,{key:e.toString()}),e}function ap(r,e){return Hp(r.databaseId,e.path)}function Df(r,e){const t=Jw(e);if(t.get(1)!==r.databaseId.projectId)throw new ve(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ve(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ne(t0(t))}function e0(r,e){return Hp(r.databaseId,e)}function $x(r){const e=Jw(r);return e.length===4?It.emptyPath():t0(e)}function lp(r){return new It(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function t0(r){return dt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function xv(r,e,t){return{name:ap(r,e),fields:t.value.mapValue.fields}}function Hx(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:je(39313,{state:T})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(T,S){return T.useProto3Json?(dt(S===void 0||typeof S=="string",58123),yn.fromBase64String(S||"")):(dt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),yn.fromUint8Array(S||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,_=f&&(function(T){const S=T.code===void 0?ie.UNKNOWN:Kw(T.code);return new ve(S,T.message||"")})(f);t=new Yw(s,a,c,_||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Df(r,s.document.name),c=ki(s.document.updateTime),f=s.document.createTime?ki(s.document.createTime):He.min(),_=new or({mapValue:{fields:s.document.fields}}),v=Nn.newFoundDocument(a,c,f,_),T=s.targetIds||[],S=s.removedTargetIds||[];t=new Eh(T,S,v.key,v)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Df(r,s.document),c=s.readTime?ki(s.readTime):He.min(),f=Nn.newNoDocument(a,c),_=s.removedTargetIds||[];t=new Eh([],_,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Df(r,s.document),c=s.removedTargetIds||[];t=new Eh([],c,a,null)}else{if(!("filter"in e))return je(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new Ox(a,c),_=s.targetId;t=new Qw(_,f)}}return t}function Wx(r,e){let t;if(e instanceof rc)t={update:xv(r,e.key,e.value)};else if(e instanceof Up)t={delete:ap(r,e.key)};else if(e instanceof Qo)t={update:xv(r,e.key,e.data),updateMask:eC(e.fieldMask)};else{if(!(e instanceof Lx))return je(16599,{Rt:e.type});t={verify:ap(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const _=f.transform;if(_ instanceof Hu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof Wu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof qu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof Mh)return{fieldPath:f.field.canonicalString(),increment:_.Ee};throw je(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:Bx(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:je(27497)})(r,e.precondition)),t}function qx(r,e){return r&&r.length>0?(dt(e!==void 0,14353),r.map((t=>(function(a,c){let f=a.updateTime?ki(a.updateTime):ki(c);return f.isEqual(He.min())&&(f=ki(c)),new Ax(f,a.transformResults||[])})(t,e)))):[]}function Zx(r,e){return{documents:[e0(r,e.path)]}}function Gx(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=e0(r,a);const c=(function(T){if(T.length!==0)return r0(li.create(T,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const f=(function(T){if(T.length!==0)return T.map((S=>(function(k){return{field:Tl(k.field),direction:Yx(k.dir)}})(S)))})(e.orderBy);f&&(t.structuredQuery.orderBy=f);const _=sp(r,e.limit);return _!==null&&(t.structuredQuery.limit=_),e.startAt&&(t.structuredQuery.startAt=(function(T){return{before:T.inclusive,values:T.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(T){return{before:!T.inclusive,values:T.position}})(e.endAt)),{Vt:t,parent:a}}function Kx(r){let e=$x(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){dt(s===1,65062);const S=t.from[0];S.allDescendants?a=S.collectionId:e=e.child(S.collectionId)}let c=[];t.where&&(c=(function(C){const k=n0(C);return k instanceof li&&Nw(k)?k.getFilters():[k]})(t.where));let f=[];t.orderBy&&(f=(function(C){return C.map((k=>(function(W){return new $u(Il(W.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(k)))})(t.orderBy));let _=null;t.limit&&(_=(function(C){let k;return k=typeof C=="object"?C.value:C,Kh(k)?null:k})(t.limit));let v=null;t.startAt&&(v=(function(C){const k=!!C.before,H=C.values||[];return new Oh(H,k)})(t.startAt));let T=null;return t.endAt&&(T=(function(C){const k=!C.before,H=C.values||[];return new Oh(H,k)})(t.endAt)),px(e,a,f,c,_,"F",v,T)}function Qx(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function n0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Il(t.unaryFilter.field);return Kt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Il(t.unaryFilter.field);return Kt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Il(t.unaryFilter.field);return Kt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Il(t.unaryFilter.field);return Kt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Kt.create(Il(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return li.create(t.compositeFilter.filters.map((s=>n0(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return je(1026)}})(t.compositeFilter.op))})(r):je(30097,{filter:r})}function Yx(r){return Fx[r]}function Xx(r){return zx[r]}function Jx(r){return jx[r]}function Tl(r){return{fieldPath:r.canonicalString()}}function Il(r){return vn.fromServerFormat(r.fieldPath)}function r0(r){return r instanceof Kt?(function(t){if(t.op==="=="){if(fv(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NAN"}};if(dv(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(fv(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NAN"}};if(dv(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(t.field),op:Xx(t.op),value:t.value}}})(r):r instanceof li?(function(t){const s=t.getFilters().map((a=>r0(a)));return s.length===1?s[0]:{compositeFilter:{op:Jx(t.op),filters:s}}})(r):je(54877,{filter:r})}function eC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function i0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t,s,a,c=He.min(),f=He.min(),_=yn.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=_,this.expectedCount=v}withSequenceNumber(e){return new Ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.gt=e}}function nC(r){const e=Kx({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ip(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.Dn=new iC}addToCollectionParentIndex(e,t){return this.Dn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(zo.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(zo.min())}updateCollectionGroup(e,t,s){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class iC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new nn(It.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new nn(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},s0=41943040;class sr{static withCacheSize(e){return new sr(e,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr.DEFAULT_COLLECTION_PERCENTILE=10,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sr.DEFAULT=new sr(s0,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sr.DISABLED=new sr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Dl(0)}static ur(){return new Dl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="LruGarbageCollector",sC=1048576;function kv([r,e],[t,s]){const a=Ye(r,t);return a===0?Ye(e,s):a}class oC{constructor(e){this.Tr=e,this.buffer=new nn(kv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();kv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Te(Av,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hl(t)?Te(Av,"Ignoring IndexedDB error during garbage collection: ",t):await $l(t)}await this.Rr(3e5)}))}}class lC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Gh.ue);const s=new oC(t);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(Cv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cv):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,a,c,f,_,v,T;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),a=this.params.maximumSequenceNumbersToCollect):a=C,f=Date.now(),this.nthSequenceNumber(e,a)))).next((C=>(s=C,_=Date.now(),this.removeTargets(e,s,t)))).next((C=>(c=C,v=Date.now(),this.removeOrphanedDocuments(e,s)))).next((C=>(T=Date.now(),wl()<=et.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${a} in `+(_-f)+`ms
	Removed ${c} targets in `+(v-_)+`ms
	Removed ${C} documents in `+(T-v)+`ms
Total Duration: ${T-S}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:C}))))}}function uC(r,e){return new lC(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.changes=new Fa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?oe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&bu(s.mutation,a,Er.empty(),Pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,tt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=tt()){const a=Ca();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((c=>{let f=Su();return c.forEach(((_,v)=>{f=f.insert(_,v.overlayedDocument)})),f}))))}getOverlayedDocuments(e,t){const s=Ca();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,tt())))}populateOverlays(e,t,s){const a=[];return s.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((f,_)=>{t.set(f,_)}))}))}computeViews(e,t,s,a){let c=Ss();const f=Nu(),_=(function(){return Nu()})();return t.forEach(((v,T)=>{const S=s.get(T.key);a.has(T.key)&&(S===void 0||S.mutation instanceof Qo)?c=c.insert(T.key,T):S!==void 0?(f.set(T.key,S.mutation.getFieldMask()),bu(S.mutation,T,S.mutation.getFieldMask(),Pt.now())):f.set(T.key,Er.empty())})),this.recalculateAndSaveOverlays(e,c).next((v=>(v.forEach(((T,S)=>f.set(T,S))),t.forEach(((T,S)=>{var C;return _.set(T,new hC(S,(C=f.get(T))!==null&&C!==void 0?C:null))})),_)))}recalculateAndSaveOverlays(e,t){const s=Nu();let a=new bt(((f,_)=>f-_)),c=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((f=>{for(const _ of f)_.keys().forEach((v=>{const T=t.get(v);if(T===null)return;let S=s.get(v)||Er.empty();S=_.applyToLocalView(T,S),s.set(v,S);const C=(a.get(_.batchId)||tt()).add(v);a=a.insert(_.batchId,C)}))})).next((()=>{const f=[],_=a.getReverseIterator();for(;_.hasNext();){const v=_.getNext(),T=v.key,S=v.value,C=Uw();S.forEach((k=>{if(!c.has(k)){const H=Zw(t.get(k),s.get(k));H!==null&&C.set(k,H),c=c.add(k)}})),f.push(this.documentOverlayCache.saveOverlays(e,T,C))}return oe.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(f){return Ne.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Dw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):oe.resolve(Ca());let _=zu,v=c;return f.next((T=>oe.forEach(T,((S,C)=>(_<C.largestBatchId&&(_=C.largestBatchId),c.get(S)?oe.resolve():this.remoteDocumentCache.getEntry(e,S).next((k=>{v=v.insert(S,k)}))))).next((()=>this.populateOverlays(e,T,c))).next((()=>this.computeViews(e,v,T,tt()))).next((S=>({batchId:_,changes:jw(S)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((s=>{let a=Su();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const c=t.collectionGroup;let f=Su();return this.indexManager.getCollectionParents(e,c).next((_=>oe.forEach(_,(v=>{const T=(function(C,k){return new Wl(k,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(t,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,T,s,a).next((S=>{S.forEach(((C,k)=>{f=f.insert(C,k)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,a)))).next((f=>{c.forEach(((v,T)=>{const S=T.getKey();f.get(S)===null&&(f=f.insert(S,Nn.newInvalidDocument(S)))}));let _=Su();return f.forEach(((v,T)=>{const S=c.get(v);S!==void 0&&bu(S.mutation,T,Er.empty(),Pt.now()),Jh(t,T)&&(_=_.insert(v,T))})),_}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:ki(a.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(a){return{name:a.name,query:nC(a.bundledQuery),readTime:ki(a.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.overlays=new bt(Ne.comparator),this.kr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ca();return oe.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&s.set(a,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,c)=>{this.wt(e,t,c)})),oe.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.kr.get(s);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.kr.delete(s)),oe.resolve()}getOverlaysForCollection(e,t,s){const a=Ca(),c=t.length+1,f=new Ne(t.child("")),_=this.overlays.getIteratorFrom(f);for(;_.hasNext();){const v=_.getNext().value,T=v.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===c&&v.largestBatchId>s&&a.set(v.getKey(),v)}return oe.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new bt(((T,S)=>T-S));const f=this.overlays.getIterator();for(;f.hasNext();){const T=f.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>s){let S=c.get(T.largestBatchId);S===null&&(S=Ca(),c=c.insert(T.largestBatchId,S)),S.set(T.getKey(),T)}}const _=Ca(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((T,S)=>_.set(T,S))),!(_.size()>=a)););return oe.resolve(_)}wt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.kr.get(a.largestBatchId).delete(s.key);this.kr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new bx(t,s));let c=this.kr.get(t);c===void 0&&(c=tt(),this.kr.set(t,c)),this.kr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.qr=new nn(dn.Qr),this.$r=new nn(dn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new dn(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new dn(e,t))}Gr(e,t){e.forEach((s=>this.removeReference(s,t)))}zr(e){const t=new Ne(new It([])),s=new dn(t,e),a=new dn(t,e+1),c=[];return this.$r.forEachInRange([s,a],(f=>{this.Wr(f),c.push(f.key)})),c}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ne(new It([])),s=new dn(t,e),a=new dn(t,e+1);let c=tt();return this.$r.forEachInRange([s,a],(f=>{c=c.add(f.key)})),c}containsKey(e){const t=new dn(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class dn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ne.comparator(e.key,t.key)||Ye(e.Hr,t.Hr)}static Ur(e,t){return Ye(e.Hr,t.Hr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new nn(dn.Qr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Nx(c,t,s,a);this.mutationQueue.push(f);for(const _ of a)this.Yr=this.Yr.add(new dn(_.key,c)),this.indexManager.addToCollectionParentIndex(e,_.key.path.popLast());return oe.resolve(f)}lookupMutationBatch(e,t){return oe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),c=a<0?0:a;return oe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Mp:this.er-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new dn(t,0),a=new dn(t,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([s,a],(f=>{const _=this.Zr(f.Hr);c.push(_)})),oe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new nn(Ye);return t.forEach((a=>{const c=new dn(a,0),f=new dn(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,f],(_=>{s=s.add(_.Hr)}))})),oe.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;Ne.isDocumentKey(c)||(c=c.child(""));const f=new dn(new Ne(c),0);let _=new nn(Ye);return this.Yr.forEachWhile((v=>{const T=v.key.path;return!!s.isPrefixOf(T)&&(T.length===a&&(_=_.add(v.Hr)),!0)}),f),oe.resolve(this.ei(_))}ei(e){const t=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){dt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return oe.forEach(t.mutations,(a=>{const c=new dn(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,t){const s=new dn(t,0),a=this.Yr.firstAfterOrEqual(s);return oe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.ni=e,this.docs=(function(){return new bt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,f=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return oe.resolve(s?s.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let s=Ss();return t.forEach((a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Nn.newInvalidDocument(a))})),oe.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=Ss();const f=t.path,_=new Ne(f.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(_);for(;v.hasNext();){const{key:T,value:{document:S}}=v.getNext();if(!f.isPrefixOf(T.path))break;T.path.length>f.length+1||qP(WP(S),s)<=0||(a.has(S.key)||Jh(t,S))&&(c=c.insert(S.key,S.mutableCopy()))}return oe.resolve(c)}getAllFromCollectionGroup(e,t,s,a){je(9500)}ri(e,t){return oe.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new vC(this)}getSize(e){return oe.resolve(this.size)}}class vC extends cC{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(s)})),oe.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.persistence=e,this.ii=new Fa((t=>Fp(t)),zp),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.si=0,this.oi=new Wp,this.targetCount=0,this._i=Dl.ar()}forEachTarget(e,t){return this.ii.forEach(((s,a)=>t(a))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),oe.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Dl(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.hr(t),oe.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.ii.forEach(((f,_)=>{_.sequenceNumber<=t&&s.get(_.targetId)===null&&(this.ii.delete(f),c.push(this.removeMatchingKeysForTargetId(e,_.targetId)),a++)})),oe.waitFor(c).next((()=>a))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return oe.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),oe.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((f=>{c.push(a.markPotentiallyOrphaned(e,f))})),oe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return oe.resolve(s)}containsKey(e,t){return oe.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,t){this.ai={},this.overlays={},this.ui=new Gh(0),this.ci=!1,this.ci=!0,this.li=new mC,this.referenceDelegate=e(this),this.hi=new yC(this),this.indexManager=new rC,this.remoteDocumentCache=(function(a){return new _C(a)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new tC(t),this.Ti=new fC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new gC(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){Te("MemoryPersistence","Starting transaction:",e);const a=new wC(this.ui.next());return this.referenceDelegate.Ii(),s(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,t){return oe.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,t))))}}class wC extends GP{constructor(e){super(),this.currentSequenceNumber=e}}class qp{constructor(e){this.persistence=e,this.Ai=new Wp,this.Ri=null}static Vi(e){return new qp(e)}get mi(){if(this.Ri)return this.Ri;throw je(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),oe.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((a=>this.mi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.mi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.mi,(s=>{const a=Ne.fromPath(s);return this.fi(e,a).next((c=>{c||t.removeEntry(a,He.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return oe.or([()=>oe.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Vh{constructor(e,t){this.persistence=e,this.gi=new Fa((s=>YP(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=uC(this,t)}static Vi(e,t){return new Vh(e,t)}Ii(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}yr(e){let t=0;return this.gr(e,(s=>{t++})).next((()=>t))}gr(e,t){return oe.forEach(this.gi,((s,a)=>this.Sr(e,s,a).next((c=>c?oe.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ri(e,(f=>this.Sr(e,f,t).next((_=>{_||(s++,c.removeEntry(f,He.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),oe.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vh(e.data.value)),t}Sr(e,t,s){return oe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return oe.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=a}static Es(e,t){let s=tt(),a=tt();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Zp(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return JT()?8:KP(bn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,a){const c={result:null};return this.ps(e,t).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ys(e,t,a,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new EC;return this.ws(e,t,f).next((_=>{if(c.result=_,this.Rs)return this.Ss(e,t,f,_.size)}))})).next((()=>c.result))}Ss(e,t,s,a){return s.documentReadCount<this.Vs?(wl()<=et.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",El(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(wl()<=et.DEBUG&&Te("QueryEngine","Query:",El(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.fs*a?(wl()<=et.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",El(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ai(t))):oe.resolve())}ps(e,t){if(_v(t))return oe.resolve(null);let s=Ai(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=ip(t,null,"F"),s=Ai(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=tt(...c);return this.gs.getDocuments(e,f).next((_=>this.indexManager.getMinOffset(e,s).next((v=>{const T=this.bs(t,_);return this.Ds(t,T,f,v.readTime)?this.ps(e,ip(t,null,"F")):this.vs(e,T,t,v)}))))})))))}ys(e,t,s,a){return _v(t)||a.isEqual(He.min())?oe.resolve(null):this.gs.getDocuments(e,s).next((c=>{const f=this.bs(t,c);return this.Ds(t,f,s,a)?oe.resolve(null):(wl()<=et.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),El(t)),this.vs(e,f,t,HP(a,zu)).next((_=>_)))}))}bs(e,t){let s=new nn(Fw(e));return t.forEach(((a,c)=>{Jh(e,c)&&(s=s.add(c))})),s}Ds(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ws(e,t,s){return wl()<=et.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",El(t)),this.gs.getDocumentsMatchingQuery(e,t,zo.min(),s)}vs(e,t,s,a){return this.gs.getDocumentsMatchingQuery(e,s,a).next((c=>(t.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="LocalStore",IC=3e8;class SC{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new bt(Ye),this.Ms=new Fa((c=>Fp(c)),zp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dC(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function PC(r,e,t,s){return new SC(r,e,t,s)}async function a0(r,e){const t=We(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((c=>(a=c,t.Ns(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],_=[];let v=tt();for(const T of a){f.push(T.batchId);for(const S of T.mutations)v=v.add(S.key)}for(const T of c){_.push(T.batchId);for(const S of T.mutations)v=v.add(S.key)}return t.localDocuments.getDocuments(s,v).next((T=>({Bs:T,removedBatchIds:f,addedBatchIds:_})))}))}))}function xC(r,e){const t=We(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),c=t.Os.newChangeBuffer({trackRemovals:!0});return(function(_,v,T,S){const C=T.batch,k=C.keys();let H=oe.resolve();return k.forEach((W=>{H=H.next((()=>S.getEntry(v,W))).next((Q=>{const Z=T.docVersions.get(W);dt(Z!==null,48541),Q.version.compareTo(Z)<0&&(C.applyToRemoteDocument(Q,T),Q.isValidDocument()&&(Q.setReadTime(T.commitVersion),S.addEntry(Q)))}))})),H.next((()=>_.mutationQueue.removeMutationBatch(v,C)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(_){let v=tt();for(let T=0;T<_.mutationResults.length;++T)_.mutationResults[T].transformResults.length>0&&(v=v.add(_.batch.mutations[T].key));return v})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function l0(r){const e=We(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function CC(r,e){const t=We(r),s=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const _=[];e.targetChanges.forEach(((S,C)=>{const k=a.get(C);if(!k)return;_.push(t.hi.removeMatchingKeys(c,S.removedDocuments,C).next((()=>t.hi.addMatchingKeys(c,S.addedDocuments,C))));let H=k.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(C)!==null?H=H.withResumeToken(yn.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):S.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(S.resumeToken,s)),a=a.insert(C,H),(function(Q,Z,he){return Q.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=IC?!0:he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0})(k,H,S)&&_.push(t.hi.updateTargetData(c,H))}));let v=Ss(),T=tt();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(c,S))})),_.push(AC(c,f,e.documentUpdates).next((S=>{v=S.Ls,T=S.ks}))),!s.isEqual(He.min())){const S=t.hi.getLastRemoteSnapshotVersion(c).next((C=>t.hi.setTargetsMetadata(c,c.currentSequenceNumber,s)));_.push(S)}return oe.waitFor(_).next((()=>f.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,v,T))).next((()=>v))})).then((c=>(t.Fs=a,c)))}function AC(r,e,t){let s=tt(),a=tt();return t.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let f=Ss();return t.forEach(((_,v)=>{const T=c.get(_);v.isFoundDocument()!==T.isFoundDocument()&&(a=a.add(_)),v.isNoDocument()&&v.version.isEqual(He.min())?(e.removeEntry(_,v.readTime),f=f.insert(_,v)):!T.isValidDocument()||v.version.compareTo(T.version)>0||v.version.compareTo(T.version)===0&&T.hasPendingWrites?(e.addEntry(v),f=f.insert(_,v)):Te(Gp,"Ignoring outdated watch update for ",_,". Current version:",T.version," Watch version:",v.version)})),{Ls:f,ks:a}}))}function kC(r,e){const t=We(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Mp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function RC(r,e){const t=We(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.hi.getTargetData(s,e).next((c=>c?(a=c,oe.resolve(a)):t.hi.allocateTargetId(s).next((f=>(a=new Ro(e,f,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Fs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s}))}async function up(r,e,t){const s=We(r),a=s.Fs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!Hl(f))throw f;Te(Gp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(a.target)}function Rv(r,e,t){const s=We(r);let a=He.min(),c=tt();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(v,T,S){const C=We(v),k=C.Ms.get(S);return k!==void 0?oe.resolve(C.Fs.get(k)):C.hi.getTargetData(T,S)})(s,f,Ai(e)).next((_=>{if(_)return a=_.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(f,_.targetId).next((v=>{c=v}))})).next((()=>s.Cs.getDocumentsMatchingQuery(f,e,t?a:He.min(),t?c:tt()))).next((_=>(LC(s,gx(e),_),{documents:_,qs:c})))))}function LC(r,e,t){let s=r.xs.get(e)||He.min();t.forEach(((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.xs.set(e,s)}class Lv{constructor(){this.activeTargetIds=Tx()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NC{constructor(){this.Fo=new Lv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Lv,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="ConnectivityMonitor";class bv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Te(Nv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Te(Nv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh=null;function cp(){return hh===null?hh=(function(){return 268435456+Math.round(2147483648*Math.random())})():hh++,"0x"+hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="RestConnection",OC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MC{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.Ko=this.databaseId.database===Nh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,c){const f=cp(),_=this.Go(e,t.toUriEncodedString());Te(Vf,`Sending RPC '${e}' ${f}:`,_,s);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(v,a,c);const{host:T}=new URL(_),S=zl(T);return this.jo(e,_,v,s,S).then((C=>(Te(Vf,`Received RPC '${e}' ${f}: `,C),C)),(C=>{throw Fo(Vf,`RPC '${e}' ${f} failed with error: `,C,"url: ",_,"request:",s),C}))}Jo(e,t,s,a,c,f){return this.Wo(e,t,s,a,c)}zo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),s&&s.headers.forEach(((a,c)=>e[c]=a))}Go(e,t){const s=OC[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="WebChannelConnection";class VC extends MC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,a,c){const f=cp();return new Promise(((_,v)=>{const T=new cw;T.setWithCredentials(!0),T.listenOnce(hw.COMPLETE,(()=>{try{switch(T.getLastErrorCode()){case _h.NO_ERROR:const C=T.getResponseJson();Te(Rn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(C)),_(C);break;case _h.TIMEOUT:Te(Rn,`RPC '${e}' ${f} timed out`),v(new ve(ie.DEADLINE_EXCEEDED,"Request time out"));break;case _h.HTTP_ERROR:const k=T.getStatus();if(Te(Rn,`RPC '${e}' ${f} failed with status:`,k,"response text:",T.getResponseText()),k>0){let H=T.getResponseJson();Array.isArray(H)&&(H=H[0]);const W=H==null?void 0:H.error;if(W&&W.status&&W.message){const Q=(function(he){const de=he.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(de)>=0?de:ie.UNKNOWN})(W.status);v(new ve(Q,W.message))}else v(new ve(ie.UNKNOWN,"Server responded with status "+T.getStatus()))}else v(new ve(ie.UNAVAILABLE,"Connection failed."));break;default:je(9055,{c_:e,streamId:f,l_:T.getLastErrorCode(),h_:T.getLastError()})}}finally{Te(Rn,`RPC '${e}' ${f} completed.`)}}));const S=JSON.stringify(a);Te(Rn,`RPC '${e}' ${f} sending request:`,a),T.send(t,"POST",S,s,15)}))}P_(e,t,s){const a=cp(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=pw(),_=fw(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},T=this.longPollingOptions.timeoutSeconds;T!==void 0&&(v.longPollingTimeout=Math.round(1e3*T)),this.useFetchStreams&&(v.useFetchStreams=!0),this.zo(v.initMessageHeaders,t,s),v.encodeInitMessageHeaders=!0;const S=c.join("");Te(Rn,`Creating RPC '${e}' stream ${a}: ${S}`,v);const C=f.createWebChannel(S,v);this.T_(C);let k=!1,H=!1;const W=new DC({Ho:Z=>{H?Te(Rn,`Not sending because RPC '${e}' stream ${a} is closed:`,Z):(k||(Te(Rn,`Opening RPC '${e}' stream ${a} transport.`),C.open(),k=!0),Te(Rn,`RPC '${e}' stream ${a} sending:`,Z),C.send(Z))},Yo:()=>C.close()}),Q=(Z,he,de)=>{Z.listen(he,(me=>{try{de(me)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return Q(C,Iu.EventType.OPEN,(()=>{H||(Te(Rn,`RPC '${e}' stream ${a} transport opened.`),W.s_())})),Q(C,Iu.EventType.CLOSE,(()=>{H||(H=!0,Te(Rn,`RPC '${e}' stream ${a} transport closed`),W.__(),this.I_(C))})),Q(C,Iu.EventType.ERROR,(Z=>{H||(H=!0,Fo(Rn,`RPC '${e}' stream ${a} transport errored. Name:`,Z.name,"Message:",Z.message),W.__(new ve(ie.UNAVAILABLE,"The operation could not be completed")))})),Q(C,Iu.EventType.MESSAGE,(Z=>{var he;if(!H){const de=Z.data[0];dt(!!de,16349);const me=de,ge=(me==null?void 0:me.error)||((he=me[0])===null||he===void 0?void 0:he.error);if(ge){Te(Rn,`RPC '${e}' stream ${a} received error:`,ge);const be=ge.status;let Oe=(function(M){const z=Gt[M];if(z!==void 0)return Kw(z)})(be),V=ge.message;Oe===void 0&&(Oe=ie.INTERNAL,V="Unknown error status: "+be+" with message "+ge.message),H=!0,W.__(new ve(Oe,V)),C.close()}else Te(Rn,`RPC '${e}' stream ${a} received:`,de),W.a_(de)}})),Q(_,dw.STAT_EVENT,(Z=>{Z.stat===Yf.PROXY?Te(Rn,`RPC '${e}' stream ${a} detected buffering proxy`):Z.stat===Yf.NOPROXY&&Te(Rn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{W.o_()}),0),W}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(r){return new Ux(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t,s=1e3,a=1.5,c=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=a,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-s);a>0&&Te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="PersistentStream";class c0{constructor(e,t,s,a,c,f,_,v){this.Fi=e,this.w_=s,this.S_=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=_,this.listener=v,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new u0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Is(t.toString()),Is("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.b_===t&&this.W_(s,a)}),(s=>{e((()=>{const a=new ve(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(a)}))}))}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{s((()=>this.G_(a)))})),this.stream.onMessage((a=>{s((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Te(Ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(Te(Ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FC extends c0{constructor(e,t,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,f),this.serializer=c}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=Hx(this.serializer,e),s=(function(c){if(!("targetChange"in c))return He.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?He.min():f.readTime?ki(f.readTime):He.min()})(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=lp(this.serializer),t.addTarget=(function(c,f){let _;const v=f.target;if(_=np(v)?{documents:Zx(c,v)}:{query:Gx(c,v).Vt},_.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){_.resumeToken=Xw(c,f.resumeToken);const T=sp(c,f.expectedCount);T!==null&&(_.expectedCount=T)}else if(f.snapshotVersion.compareTo(He.min())>0){_.readTime=Dh(c,f.snapshotVersion.toTimestamp());const T=sp(c,f.expectedCount);T!==null&&(_.expectedCount=T)}return _})(this.serializer,e);const s=Qx(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=lp(this.serializer),t.removeTarget=e,this.k_(t)}}class zC extends c0{constructor(e,t,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,f),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=qx(e.writeResults,e.commitTime),s=ki(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=lp(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Wx(this.serializer,s)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{}class UC extends jC{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new ve(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Wo(e,op(t,s),a,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(ie.UNKNOWN,c.toString())}))}Jo(e,t,s,a,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,_])=>this.connection.Jo(e,op(t,s),a,f,_,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ve(ie.UNKNOWN,f.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class BC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Is(t),this._a=!1):Te("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="RemoteStore";class $C{constructor(e,t,s,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo((f=>{s.enqueueAndForget((async()=>{za(this)&&(Te(Da,"Restarting streams for network reachability change."),await(async function(v){const T=We(v);T.Ia.add(4),await sc(T),T.Aa.set("Unknown"),T.Ia.delete(4),await id(T)})(this))}))})),this.Aa=new BC(s,a)}}async function id(r){if(za(r))for(const e of r.da)await e(!0)}async function sc(r){for(const e of r.da)await e(!1)}function h0(r,e){const t=We(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Xp(t)?Yp(t):ql(t).x_()&&Qp(t,e))}function Kp(r,e){const t=We(r),s=ql(t);t.Ta.delete(e),s.x_()&&d0(t,e),t.Ta.size===0&&(s.x_()?s.B_():za(t)&&t.Aa.set("Unknown"))}function Qp(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ql(r).H_(e)}function d0(r,e){r.Ra.$e(e),ql(r).Y_(e)}function Yp(r){r.Ra=new Vx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),ql(r).start(),r.Aa.aa()}function Xp(r){return za(r)&&!ql(r).M_()&&r.Ta.size>0}function za(r){return We(r).Ia.size===0}function f0(r){r.Ra=void 0}async function HC(r){r.Aa.set("Online")}async function WC(r){r.Ta.forEach(((e,t)=>{Qp(r,e)}))}async function qC(r,e){f0(r),Xp(r)?(r.Aa.la(e),Yp(r)):r.Aa.set("Unknown")}async function ZC(r,e,t){if(r.Aa.set("Online"),e instanceof Yw&&e.state===2&&e.cause)try{await(async function(a,c){const f=c.cause;for(const _ of c.targetIds)a.Ta.has(_)&&(await a.remoteSyncer.rejectListen(_,f),a.Ta.delete(_),a.Ra.removeTarget(_))})(r,e)}catch(s){Te(Da,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fh(r,s)}else if(e instanceof Eh?r.Ra.Ye(e):e instanceof Qw?r.Ra.it(e):r.Ra.et(e),!t.isEqual(He.min()))try{const s=await l0(r.localStore);t.compareTo(s)>=0&&await(function(c,f){const _=c.Ra.Pt(f);return _.targetChanges.forEach(((v,T)=>{if(v.resumeToken.approximateByteSize()>0){const S=c.Ta.get(T);S&&c.Ta.set(T,S.withResumeToken(v.resumeToken,f))}})),_.targetMismatches.forEach(((v,T)=>{const S=c.Ta.get(v);if(!S)return;c.Ta.set(v,S.withResumeToken(yn.EMPTY_BYTE_STRING,S.snapshotVersion)),d0(c,v);const C=new Ro(S.target,v,T,S.sequenceNumber);Qp(c,C)})),c.remoteSyncer.applyRemoteEvent(_)})(r,t)}catch(s){Te(Da,"Failed to raise snapshot:",s),await Fh(r,s)}}async function Fh(r,e,t){if(!Hl(e))throw e;r.Ia.add(1),await sc(r),r.Aa.set("Offline"),t||(t=()=>l0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Te(Da,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await id(r)}))}function p0(r,e){return e().catch((t=>Fh(r,t,e)))}async function sd(r){const e=We(r),t=$o(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Mp;for(;GC(e);)try{const a=await kC(e.localStore,s);if(a===null){e.Pa.length===0&&t.B_();break}s=a.batchId,KC(e,a)}catch(a){await Fh(e,a)}m0(e)&&g0(e)}function GC(r){return za(r)&&r.Pa.length<10}function KC(r,e){r.Pa.push(e);const t=$o(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function m0(r){return za(r)&&!$o(r).M_()&&r.Pa.length>0}function g0(r){$o(r).start()}async function QC(r){$o(r).na()}async function YC(r){const e=$o(r);for(const t of r.Pa)e.X_(t.mutations)}async function XC(r,e,t){const s=r.Pa.shift(),a=Bp.from(s,e,t);await p0(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await sd(r)}async function JC(r,e){e&&$o(r).Z_&&await(async function(s,a){if((function(f){return Mx(f)&&f!==ie.ABORTED})(a.code)){const c=s.Pa.shift();$o(s).N_(),await p0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a))),await sd(s)}})(r,e),m0(r)&&g0(r)}async function Mv(r,e){const t=We(r);t.asyncQueue.verifyOperationInProgress(),Te(Da,"RemoteStore received new credentials");const s=za(t);t.Ia.add(3),await sc(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await id(t)}async function eA(r,e){const t=We(r);e?(t.Ia.delete(2),await id(t)):e||(t.Ia.add(2),await sc(t),t.Aa.set("Unknown"))}function ql(r){return r.Va||(r.Va=(function(t,s,a){const c=We(t);return c.ia(),new FC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:HC.bind(null,r),e_:WC.bind(null,r),n_:qC.bind(null,r),J_:ZC.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),Xp(r)?Yp(r):r.Aa.set("Unknown")):(await r.Va.stop(),f0(r))}))),r.Va}function $o(r){return r.ma||(r.ma=(function(t,s,a){const c=We(t);return c.ia(),new zC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:QC.bind(null,r),n_:JC.bind(null,r),ea:YC.bind(null,r),ta:XC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await sd(r)):(await r.ma.stop(),r.Pa.length>0&&(Te(Da,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,c){const f=Date.now()+s,_=new Jp(e,t,f,a,c);return _.start(s),_}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function em(r,e){if(Is("AsyncQueue",`${e}: ${r}`),Hl(r))return new ve(ie.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{static emptySet(e){return new kl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ne.comparator(t.key,s.key):(t,s)=>Ne.comparator(t.key,s.key),this.keyedMap=Su(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof kl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new kl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.fa=new bt(Ne.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):je(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Vl{constructor(e,t,s,a,c,f,_,v,T){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=_,this.excludesMetadataChanges=v,this.hasCachedResults=T}static fromInitialDocuments(e,t,s,a,c){const f=[];return t.forEach((_=>{f.push({type:0,doc:_})})),new Vl(e,t,kl.emptySet(t),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class nA{constructor(){this.queries=Vv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const a=We(t),c=a.queries;a.queries=Vv(),c.forEach(((f,_)=>{for(const v of _.wa)v.onError(s)}))})(this,new ve(ie.ABORTED,"Firestore shutting down"))}}function Vv(){return new Fa((r=>Vw(r)),Xh)}async function tm(r,e){const t=We(r);let s=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.ba()&&(s=2):(c=new tA,s=e.ba()?0:1);try{switch(s){case 0:c.ya=await t.onListen(a,!0);break;case 1:c.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(f){const _=em(f,`Initialization of query '${El(e.query)}' failed`);return void e.onError(_)}t.queries.set(a,c),c.wa.push(e),e.va(t.onlineState),c.ya&&e.Ca(c.ya)&&rm(t)}async function nm(r,e){const t=We(r),s=e.query;let a=3;const c=t.queries.get(s);if(c){const f=c.wa.indexOf(e);f>=0&&(c.wa.splice(f,1),c.wa.length===0?a=e.ba()?0:1:!c.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function rA(r,e){const t=We(r);let s=!1;for(const a of e){const c=a.query,f=t.queries.get(c);if(f){for(const _ of f.wa)_.Ca(a)&&(s=!0);f.ya=a}}s&&rm(t)}function iA(r,e,t){const s=We(r),a=s.queries.get(e);if(a)for(const c of a.wa)c.onError(t);s.queries.delete(e)}function rm(r){r.Da.forEach((e=>{e.next()}))}var hp,Fv;(Fv=hp||(hp={})).Fa="default",Fv.Cache="cache";class im{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Vl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==hp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e){this.key=e}}class v0{constructor(e){this.key=e}}class sA{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=tt(),this.mutatedKeys=tt(),this.Xa=Fw(e),this.eu=new kl(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new Dv,a=t?t.eu:this.eu;let c=t?t.mutatedKeys:this.mutatedKeys,f=a,_=!1;const v=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,T=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((S,C)=>{const k=a.get(S),H=Jh(this.query,C)?C:null,W=!!k&&this.mutatedKeys.has(k.key),Q=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let Z=!1;k&&H?k.data.isEqual(H.data)?W!==Q&&(s.track({type:3,doc:H}),Z=!0):this.iu(k,H)||(s.track({type:2,doc:H}),Z=!0,(v&&this.Xa(H,v)>0||T&&this.Xa(H,T)<0)&&(_=!0)):!k&&H?(s.track({type:0,doc:H}),Z=!0):k&&!H&&(s.track({type:1,doc:k}),Z=!0,(v||T)&&(_=!0)),Z&&(H?(f=f.add(H),c=Q?c.add(S):c.delete(S)):(f=f.delete(S),c=c.delete(S)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{eu:f,ru:s,Ds:_,mutatedKeys:c}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const f=e.ru.pa();f.sort(((S,C)=>(function(H,W){const Q=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{At:Z})}};return Q(H)-Q(W)})(S.type,C.type)||this.Xa(S.doc,C.doc))),this.su(s),a=a!=null&&a;const _=t&&!a?this.ou():[],v=this.Za.size===0&&this.current&&!a?1:0,T=v!==this.Ya;return this.Ya=v,f.length!==0||T?{snapshot:new Vl(this.query,e.eu,c,f,e.mutatedKeys,v===0,T,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:_}:{_u:_}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Dv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=tt(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const t=[];return e.forEach((s=>{this.Za.has(s)||t.push(new v0(s))})),this.Za.forEach((s=>{e.has(s)||t.push(new _0(s))})),t}uu(e){this.Ha=e.qs,this.Za=tt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Vl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const sm="SyncEngine";class oA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class aA{constructor(e){this.key=e,this.lu=!1}}class lA{constructor(e,t,s,a,c,f){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.hu={},this.Pu=new Fa((_=>Vw(_)),Xh),this.Tu=new Map,this.Iu=new Set,this.du=new bt(Ne.comparator),this.Eu=new Map,this.Au=new Wp,this.Ru={},this.Vu=new Map,this.mu=Dl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function uA(r,e,t=!0){const s=S0(r);let a;const c=s.Pu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.cu()):a=await y0(s,e,t,!0),a}async function cA(r,e){const t=S0(r);await y0(t,e,!0,!1)}async function y0(r,e,t,s){const a=await RC(r.localStore,Ai(e)),c=a.targetId,f=r.sharedClientState.addLocalQueryTarget(c,t);let _;return s&&(_=await hA(r,e,c,f==="current",a.resumeToken)),r.isPrimaryClient&&t&&h0(r.remoteStore,a),_}async function hA(r,e,t,s,a){r.gu=(C,k,H)=>(async function(Q,Z,he,de){let me=Z.view.nu(he);me.Ds&&(me=await Rv(Q.localStore,Z.query,!1).then((({documents:V})=>Z.view.nu(V,me))));const ge=de&&de.targetChanges.get(Z.targetId),be=de&&de.targetMismatches.get(Z.targetId)!=null,Oe=Z.view.applyChanges(me,Q.isPrimaryClient,ge,be);return jv(Q,Z.targetId,Oe._u),Oe.snapshot})(r,C,k,H);const c=await Rv(r.localStore,e,!0),f=new sA(e,c.qs),_=f.nu(c.documents),v=ic.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),T=f.applyChanges(_,r.isPrimaryClient,v);jv(r,t,T._u);const S=new oA(e,t,f);return r.Pu.set(e,S),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),T.snapshot}async function dA(r,e,t){const s=We(r),a=s.Pu.get(e),c=s.Tu.get(a.targetId);if(c.length>1)return s.Tu.set(a.targetId,c.filter((f=>!Xh(f,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await up(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Kp(s.remoteStore,a.targetId),dp(s,a.targetId)})).catch($l)):(dp(s,a.targetId),await up(s.localStore,a.targetId,!0))}async function fA(r,e){const t=We(r),s=t.Pu.get(e),a=t.Tu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Kp(t.remoteStore,s.targetId))}async function pA(r,e,t){const s=EA(r);try{const a=await(function(f,_){const v=We(f),T=Pt.now(),S=_.reduce(((H,W)=>H.add(W.key)),tt());let C,k;return v.persistence.runTransaction("Locally write mutations","readwrite",(H=>{let W=Ss(),Q=tt();return v.Os.getEntries(H,S).next((Z=>{W=Z,W.forEach(((he,de)=>{de.isValidDocument()||(Q=Q.add(he))}))})).next((()=>v.localDocuments.getOverlayedDocuments(H,W))).next((Z=>{C=Z;const he=[];for(const de of _){const me=Rx(de,C.get(de.key).overlayedDocument);me!=null&&he.push(new Qo(de.key,me,kw(me.value.mapValue),oi.exists(!0)))}return v.mutationQueue.addMutationBatch(H,T,he,_)})).next((Z=>{k=Z;const he=Z.applyToLocalDocumentSet(C,Q);return v.documentOverlayCache.saveOverlays(H,Z.batchId,he)}))})).then((()=>({batchId:k.batchId,changes:jw(C)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(f,_,v){let T=f.Ru[f.currentUser.toKey()];T||(T=new bt(Ye)),T=T.insert(_,v),f.Ru[f.currentUser.toKey()]=T})(s,a.batchId,t),await oc(s,a.changes),await sd(s.remoteStore)}catch(a){const c=em(a,"Failed to persist write");t.reject(c)}}async function w0(r,e){const t=We(r);try{const s=await CC(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const f=t.Eu.get(c);f&&(dt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.lu=!0:a.modifiedDocuments.size>0?dt(f.lu,14607):a.removedDocuments.size>0&&(dt(f.lu,42227),f.lu=!1))})),await oc(t,s,e)}catch(s){await $l(s)}}function zv(r,e,t){const s=We(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Pu.forEach(((c,f)=>{const _=f.view.va(e);_.snapshot&&a.push(_.snapshot)})),(function(f,_){const v=We(f);v.onlineState=_;let T=!1;v.queries.forEach(((S,C)=>{for(const k of C.wa)k.va(_)&&(T=!0)})),T&&rm(v)})(s.eventManager,e),a.length&&s.hu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function mA(r,e,t){const s=We(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Eu.get(e),c=a&&a.key;if(c){let f=new bt(Ne.comparator);f=f.insert(c,Nn.newNoDocument(c,He.min()));const _=tt().add(c),v=new nd(He.min(),new Map,new bt(Ye),f,_);await w0(s,v),s.du=s.du.remove(c),s.Eu.delete(e),om(s)}else await up(s.localStore,e,!1).then((()=>dp(s,e,t))).catch($l)}async function gA(r,e){const t=We(r),s=e.batch.batchId;try{const a=await xC(t.localStore,e);T0(t,s,null),E0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await oc(t,a)}catch(a){await $l(a)}}async function _A(r,e,t){const s=We(r);try{const a=await(function(f,_){const v=We(f);return v.persistence.runTransaction("Reject batch","readwrite-primary",(T=>{let S;return v.mutationQueue.lookupMutationBatch(T,_).next((C=>(dt(C!==null,37113),S=C.keys(),v.mutationQueue.removeMutationBatch(T,C)))).next((()=>v.mutationQueue.performConsistencyCheck(T))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(T,S,_))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,S))).next((()=>v.localDocuments.getDocuments(T,S)))}))})(s.localStore,e);T0(s,e,t),E0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await oc(s,a)}catch(a){await $l(a)}}function E0(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function T0(r,e,t){const s=We(r);let a=s.Ru[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.Ru[s.currentUser.toKey()]=a}}function dp(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Tu.get(e))r.Pu.delete(s),t&&r.hu.pu(s,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((s=>{r.Au.containsKey(s)||I0(r,s)}))}function I0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Kp(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),om(r))}function jv(r,e,t){for(const s of t)s instanceof _0?(r.Au.addReference(s.key,e),vA(r,s)):s instanceof v0?(Te(sm,"Document no longer in limbo: "+s.key),r.Au.removeReference(s.key,e),r.Au.containsKey(s.key)||I0(r,s.key)):je(19791,{yu:s})}function vA(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Iu.has(s)||(Te(sm,"New document in limbo: "+t),r.Iu.add(s),om(r))}function om(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new Ne(It.fromString(e)),s=r.mu.next();r.Eu.set(s,new aA(t)),r.du=r.du.insert(t,s),h0(r.remoteStore,new Ro(Ai(Yh(t.path)),s,"TargetPurposeLimboResolution",Gh.ue))}}async function oc(r,e,t){const s=We(r),a=[],c=[],f=[];s.Pu.isEmpty()||(s.Pu.forEach(((_,v)=>{f.push(s.gu(v,e,t).then((T=>{var S;if((T||t)&&s.isPrimaryClient){const C=T?!T.fromCache:(S=t==null?void 0:t.targetChanges.get(v.targetId))===null||S===void 0?void 0:S.current;s.sharedClientState.updateQueryState(v.targetId,C?"current":"not-current")}if(T){a.push(T);const C=Zp.Es(v.targetId,T);c.push(C)}})))})),await Promise.all(f),s.hu.J_(a),await(async function(v,T){const S=We(v);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>oe.forEach(T,(k=>oe.forEach(k.Is,(H=>S.persistence.referenceDelegate.addReference(C,k.targetId,H))).next((()=>oe.forEach(k.ds,(H=>S.persistence.referenceDelegate.removeReference(C,k.targetId,H)))))))))}catch(C){if(!Hl(C))throw C;Te(Gp,"Failed to update sequence numbers: "+C)}for(const C of T){const k=C.targetId;if(!C.fromCache){const H=S.Fs.get(k),W=H.snapshotVersion,Q=H.withLastLimboFreeSnapshotVersion(W);S.Fs=S.Fs.insert(k,Q)}}})(s.localStore,c))}async function yA(r,e){const t=We(r);if(!t.currentUser.isEqual(e)){Te(sm,"User change. New user:",e.toKey());const s=await a0(t.localStore,e);t.currentUser=e,(function(c,f){c.Vu.forEach((_=>{_.forEach((v=>{v.reject(new ve(ie.CANCELLED,f))}))})),c.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await oc(t,s.Bs)}}function wA(r,e){const t=We(r),s=t.Eu.get(e);if(s&&s.lu)return tt().add(s.key);{let a=tt();const c=t.Tu.get(e);if(!c)return a;for(const f of c){const _=t.Pu.get(f);a=a.unionWith(_.view.tu)}return a}}function S0(r){const e=We(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=w0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mA.bind(null,e),e.hu.J_=rA.bind(null,e.eventManager),e.hu.pu=iA.bind(null,e.eventManager),e}function EA(r){const e=We(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_A.bind(null,e),e}class zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return PC(this.persistence,new TC,e.initialUser,this.serializer)}Du(e){return new o0(qp.Vi,this.serializer)}bu(e){return new NC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zh.provider={build:()=>new zh};class TA extends zh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){dt(this.persistence.referenceDelegate instanceof Vh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new aC(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?sr.withCacheSize(this.cacheSizeBytes):sr.DEFAULT;return new o0((s=>Vh.Vi(s,t)),this.serializer)}}class fp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>zv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=yA.bind(null,this.syncEngine),await eA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nA})()}createDatastore(e){const t=rd(e.databaseInfo.databaseId),s=(function(c){return new VC(c)})(e.databaseInfo);return(function(c,f,_,v){return new UC(c,f,_,v)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,c,f,_){return new $C(s,a,c,f,_)})(this.localStore,this.datastore,e.asyncQueue,(t=>zv(this.syncEngine,t,0)),(function(){return bv.C()?new bv:new bC})())}createSyncEngine(e,t){return(function(a,c,f,_,v,T,S){const C=new lA(a,c,f,_,v,T);return S&&(C.fu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const c=We(a);Te(Da,"RemoteStore shutting down."),c.Ia.add(5),await sc(c),c.Ea.shutdown(),c.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}fp.provider={build:()=>new fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Is("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="FirestoreClient";class IA{constructor(e,t,s,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Ln.UNAUTHENTICATED,this.clientId=Op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{Te(Ho,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(Te(Ho,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=em(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function zf(r,e){r.asyncQueue.verifyOperationInProgress(),Te(Ho,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async a=>{s.isEqual(a)||(await a0(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>{Fo("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{Te("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{Fo("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),r._offlineComponents=e}async function Uv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await SA(r);Te(Ho,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>Mv(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,a)=>Mv(e.remoteStore,a))),r._onlineComponents=e}async function SA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Te(Ho,"Using user provided OfflineComponentProvider");try{await zf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Fo("Error using user provided cache. Falling back to memory cache: "+t),await zf(r,new zh)}}else Te(Ho,"Using default OfflineComponentProvider"),await zf(r,new TA(void 0));return r._offlineComponents}async function P0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Te(Ho,"Using user provided OnlineComponentProvider"),await Uv(r,r._uninitializedComponentsProvider._online)):(Te(Ho,"Using default OnlineComponentProvider"),await Uv(r,new fp))),r._onlineComponents}function PA(r){return P0(r).then((e=>e.syncEngine))}async function jh(r){const e=await P0(r),t=e.eventManager;return t.onListen=uA.bind(null,e.syncEngine),t.onUnlisten=dA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fA.bind(null,e.syncEngine),t}function xA(r,e,t={}){const s=new ws;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,_,v,T){const S=new am({next:k=>{S.Ou(),f.enqueueAndForget((()=>nm(c,C)));const H=k.docs.has(_);!H&&k.fromCache?T.reject(new ve(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&k.fromCache&&v&&v.source==="server"?T.reject(new ve(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):T.resolve(k)},error:k=>T.reject(k)}),C=new im(Yh(_.path),S,{includeMetadataChanges:!0,ka:!0});return tm(c,C)})(await jh(r),r.asyncQueue,e,t,s))),s.promise}function CA(r,e,t={}){const s=new ws;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,_,v,T){const S=new am({next:k=>{S.Ou(),f.enqueueAndForget((()=>nm(c,C))),k.fromCache&&v.source==="server"?T.reject(new ve(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):T.resolve(k)},error:k=>T.reject(k)}),C=new im(_,S,{includeMetadataChanges:!0,ka:!0});return tm(c,C)})(await jh(r),r.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="firestore.googleapis.com",$v=!0;class Hv{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=C0,this.ssl=$v}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:$v;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=s0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sC)throw new ve(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$P("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x0((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new OP;switch(s.type){case"firstParty":return new FP(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ve(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Bv.get(t);s&&(Te("ComponentProvider","Removing Datastore"),Bv.delete(t),s.terminate())})(this),Promise.resolve()}}function AA(r,e,t,s={}){var a;r=Br(r,od);const c=zl(e),f=r._getSettings(),_=Object.assign(Object.assign({},f),{emulatorOptions:r._getEmulatorOptions()}),v=`${e}:${t}`;c&&(Ey(`https://${v}`),Ty("Firestore",!0)),f.host!==C0&&f.host!==v&&Fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const T=Object.assign(Object.assign({},f),{host:v,ssl:c,emulatorOptions:s});if(!La(T,_)&&(r._setSettings(T),s.mockUserToken)){let S,C;if(typeof s.mockUserToken=="string")S=s.mockUserToken,C=Ln.MOCK_USER;else{S=HT(s.mockUserToken,(a=r._app)===null||a===void 0?void 0:a.options.projectId);const k=s.mockUserToken.sub||s.mockUserToken.user_id;if(!k)throw new ve(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new Ln(k)}r._authCredentials=new MP(new gw(S,C))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Yo(this.firestore,e,this._query)}}class Bt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(nc(t,Bt._jsonSchema))return new Bt(e,s||null,new Ne(It.fromString(t.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:Qt("string",Bt._jsonSchemaVersion),referencePath:Qt("string")};class Mo extends Yo{constructor(e,t,s){super(e,t,Yh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Ne(e))}withConverter(e){return new Mo(this.firestore,e,this._path)}}function Do(r,e,...t){if(r=rn(r),vw("collection","path",e),r instanceof od){const s=It.fromString(e,...t);return rv(s),new Mo(r,null,s)}{if(!(r instanceof Bt||r instanceof Mo))throw new ve(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(It.fromString(e,...t));return rv(s),new Mo(r.firestore,null,s)}}function Zu(r,e,...t){if(r=rn(r),arguments.length===1&&(e=Op.newId()),vw("doc","path",e),r instanceof od){const s=It.fromString(e,...t);return nv(s),new Bt(r,null,new Ne(s))}{if(!(r instanceof Bt||r instanceof Mo))throw new ve(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(It.fromString(e,...t));return nv(s),new Bt(r.firestore,r instanceof Mo?r.converter:null,new Ne(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="AsyncQueue";class qv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new u0(this,"async_queue_retry"),this.oc=()=>{const s=Ff();s&&Te(Wv,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=Ff();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ff();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new ws;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Hl(e))throw e;Te(Wv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,Is("INTERNAL UNHANDLED ERROR: ",Zv(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=Jp.createAndSchedule(this,e,t,s,(c=>this.lc(c)));return this.ec.push(a),a}ac(){this.tc&&je(47125,{hc:Zv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Zv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Wo extends od{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new qv,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qv(e),this._firestoreClient=void 0,await e}}}function kA(r,e){const t=typeof r=="object"?r:xy(),s=typeof r=="string"?r:Nh,a=Ip(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=BT("firestore");c&&AA(a,...c)}return a}function ad(r){if(r._terminated)throw new ve(ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||RA(r),r._firestoreClient}function RA(r){var e,t,s;const a=r._freezeSettings(),c=(function(_,v,T,S){return new ex(_,v,T,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,x0(S.experimentalLongPollingOptions),S.useFetchStreams,S.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,a);r._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),r._firestoreClient=new IA(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&(function(_){const v=_==null?void 0:_._online.build();return{_offline:_==null?void 0:_._offline.build(v),_online:v}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ur(yn.fromBase64String(e))}catch(t){throw new ve(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ur(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nc(e,Ur._jsonSchema))return Ur.fromBase64String(e.bytes)}}Ur._jsonSchemaVersion="firestore/bytes/1.0",Ur._jsonSchema={type:Qt("string",Ur._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ri._jsonSchemaVersion}}static fromJSON(e){if(nc(e,Ri._jsonSchema))return new Ri(e.latitude,e.longitude)}}Ri._jsonSchemaVersion="firestore/geoPoint/1.0",Ri._jsonSchema={type:Qt("string",Ri._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nc(e,Li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Li(e.vectorValues);throw new ve(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:Qt("string",Li._jsonSchemaVersion),vectorValues:Qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=/^__.*__$/;class NA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Qo(e,this.data,this.fieldMask,t,this.fieldTransforms):new rc(e,this.data,t,this.fieldTransforms)}}class A0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Qo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function k0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ec:r})}}class lm{constructor(e,t,s,a,c,f){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new lm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.fc(e),a}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Uh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(k0(this.Ec)&&LA.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class bA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||rd(e)}Dc(e,t,s,a=!1){return new lm({Ec:e,methodName:t,bc:s,path:vn.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function um(r){const e=r._freezeSettings(),t=rd(r._databaseId);return new bA(r._databaseId,!!e.ignoreUndefinedProperties,t)}function OA(r,e,t,s,a,c={}){const f=r.Dc(c.merge||c.mergeFields?2:0,e,t,a);hm("Data must be an object, but it was:",f,s);const _=R0(s,f);let v,T;if(c.merge)v=new Er(f.fieldMask),T=f.fieldTransforms;else if(c.mergeFields){const S=[];for(const C of c.mergeFields){const k=pp(e,C,t);if(!f.contains(k))throw new ve(ie.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);N0(S,k)||S.push(k)}v=new Er(S),T=f.fieldTransforms.filter((C=>v.covers(C.field)))}else v=null,T=f.fieldTransforms;return new NA(new or(_),v,T)}class cd extends ud{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cd}}class cm extends ud{_toFieldTransform(e){return new xx(e.path,new Hu)}isEqual(e){return e instanceof cm}}function MA(r,e,t,s){const a=r.Dc(1,e,t);hm("Data must be an object, but it was:",a,s);const c=[],f=or.empty();Ko(s,((v,T)=>{const S=dm(e,v,t);T=rn(T);const C=a.gc(S);if(T instanceof cd)c.push(S);else{const k=ac(T,C);k!=null&&(c.push(S),f.set(S,k))}}));const _=new Er(c);return new A0(f,_,a.fieldTransforms)}function DA(r,e,t,s,a,c){const f=r.Dc(1,e,t),_=[pp(e,s,t)],v=[a];if(c.length%2!=0)throw new ve(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<c.length;k+=2)_.push(pp(e,c[k])),v.push(c[k+1]);const T=[],S=or.empty();for(let k=_.length-1;k>=0;--k)if(!N0(T,_[k])){const H=_[k];let W=v[k];W=rn(W);const Q=f.gc(H);if(W instanceof cd)T.push(H);else{const Z=ac(W,Q);Z!=null&&(T.push(H),S.set(H,Z))}}const C=new Er(T);return new A0(S,C,f.fieldTransforms)}function VA(r,e,t,s=!1){return ac(t,r.Dc(s?4:3,e))}function ac(r,e){if(L0(r=rn(r)))return hm("Unsupported field value:",e,r),R0(r,e);if(r instanceof ud)return(function(s,a){if(!k0(a.Ec))throw a.wc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(s,a){const c=[];let f=0;for(const _ of s){let v=ac(_,a.yc(f));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),f++}return{arrayValue:{values:c}}})(r,e)}return(function(s,a){if((s=rn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Ix(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Pt.fromDate(s);return{timestampValue:Dh(a.serializer,c)}}if(s instanceof Pt){const c=new Pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Dh(a.serializer,c)}}if(s instanceof Ri)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ur)return{bytesValue:Xw(a.serializer,s._byteString)};if(s instanceof Bt){const c=a.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw a.wc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Hp(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Li)return(function(f,_){return{mapValue:{fields:{[Cw]:{stringValue:Aw},[bh]:{arrayValue:{values:f.toArray().map((T=>{if(typeof T!="number")throw _.wc("VectorValues must only contain numeric values.");return jp(_.serializer,T)}))}}}}}})(s,a);throw a.wc(`Unsupported field value: ${Zh(s)}`)})(r,e)}function R0(r,e){const t={};return Ew(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ko(r,((s,a)=>{const c=ac(a,e.Vc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function L0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Pt||r instanceof Ri||r instanceof Ur||r instanceof Bt||r instanceof ud||r instanceof Li)}function hm(r,e,t){if(!L0(t)||!yw(t)){const s=Zh(t);throw s==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+s)}}function pp(r,e,t){if((e=rn(e))instanceof ld)return e._internalPath;if(typeof e=="string")return dm(r,e);throw Uh("Field path arguments must be of type string or ",r,!1,void 0,t)}const FA=new RegExp("[~\\*/\\[\\]]");function dm(r,e,t){if(e.search(FA)>=0)throw Uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ld(...e.split("."))._internalPath}catch{throw Uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Uh(r,e,t,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let v="";return(c||f)&&(v+=" (found",c&&(v+=` in field ${s}`),f&&(v+=` in document ${a}`),v+=")"),new ve(ie.INVALID_ARGUMENT,_+r+v)}function N0(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class zA extends b0{data(){return super.data()}}function hd(r,e){return typeof e=="string"?dm(r,e):e instanceof ld?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ve(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fm{}class M0 extends fm{}function D0(r,e,...t){let s=[];e instanceof fm&&s.push(e),s=s.concat(t),(function(c){const f=c.filter((v=>v instanceof pm)).length,_=c.filter((v=>v instanceof dd)).length;if(f>1||f>0&&_>0)throw new ve(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)r=a._apply(r);return r}class dd extends M0{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new dd(e,t,s)}_apply(e){const t=this._parse(e);return V0(e._query,t),new Yo(e.firestore,e.converter,rp(e._query,t))}_parse(e){const t=um(e.firestore);return(function(c,f,_,v,T,S,C){let k;if(T.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new ve(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){Qv(C,S);const W=[];for(const Q of C)W.push(Kv(v,c,Q));k={arrayValue:{values:W}}}else k=Kv(v,c,C)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||Qv(C,S),k=VA(_,f,C,S==="in"||S==="not-in");return Kt.create(T,S,k)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function jA(r,e,t){const s=e,a=hd("where",r);return dd._create(a,s,t)}class pm extends fm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new pm(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:li.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let f=a;const _=c.getFlattenedFilters();for(const v of _)V0(f,v),f=rp(f,v)})(e._query,t),new Yo(e.firestore,e.converter,rp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mm extends M0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new mm(e,t)}_apply(e){const t=(function(a,c,f){if(a.startAt!==null)throw new ve(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ve(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $u(c,f)})(e._query,this._field,this._direction);return new Yo(e.firestore,e.converter,(function(a,c){const f=a.explicitOrderBy.concat([c]);return new Wl(a.path,a.collectionGroup,f,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function UA(r,e="asc"){const t=e,s=hd("orderBy",r);return mm._create(s,t)}function Kv(r,e,t){if(typeof(t=rn(t))=="string"){if(t==="")throw new ve(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dw(e)&&t.indexOf("/")!==-1)throw new ve(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(It.fromString(t));if(!Ne.isDocumentKey(s))throw new ve(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return hv(r,new Ne(s))}if(t instanceof Bt)return hv(r,t._key);throw new ve(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zh(t)}.`)}function Qv(r,e){if(!Array.isArray(r)||r.length===0)throw new ve(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function V0(r,e){const t=(function(a,c){for(const f of a)for(const _ of f.getFlattenedFilters())if(c.indexOf(_.op)>=0)return _.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ve(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class BA{convertValue(e,t="none"){switch(Bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ko(e,((a,c)=>{s[a]=this.convertValue(c,t)})),s}convertVectorValue(e){var t,s,a;const c=(a=(s=(t=e.fields)===null||t===void 0?void 0:t[bh].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map((f=>Ut(f.doubleValue)));return new Li(c)}convertGeoPoint(e){return new Ri(Ut(e.latitude),Ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Qh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ju(e));default:return null}}convertTimestamp(e){const t=jo(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=It.fromString(e);dt(i0(s),9688,{name:e});const a=new Uu(s.get(1),s.get(3)),c=new Ne(s.popFirst(5));return a.isEqual(t)||Is(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(r,e,t){let s;return s=r?r.toFirestore(e):e,s}class xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ka extends b0{constructor(e,t,s,a,c,f){super(e,t,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(hd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ka._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",ka._jsonSchema={type:Qt("string",ka._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Th extends ka{data(e={}){return super.data(e)}}class Ra{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new xu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Th(this._firestore,this._userDataWriter,s.key,s,new xu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map((_=>{const v=new Th(a._firestore,a._userDataWriter,_.doc.key,_.doc,new xu(a._snapshot.mutatedKeys.has(_.doc.key),a._snapshot.fromCache),a.query.converter);return _.doc,{type:"added",doc:v,oldIndex:-1,newIndex:f++}}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((_=>c||_.type!==3)).map((_=>{const v=new Th(a._firestore,a._userDataWriter,_.doc.key,_.doc,new xu(a._snapshot.mutatedKeys.has(_.doc.key),a._snapshot.fromCache),a.query.converter);let T=-1,S=-1;return _.type!==0&&(T=f.indexOf(_.doc.key),f=f.delete(_.doc.key)),_.type!==1&&(f=f.add(_.doc),S=f.indexOf(_.doc.key)),{type:HA(_.type),doc:v,oldIndex:T,newIndex:S}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(r){r=Br(r,Bt);const e=Br(r.firestore,Wo);return xA(ad(e),r._key).then((t=>z0(e,r,t)))}Ra._jsonSchemaVersion="firestore/querySnapshot/1.0",Ra._jsonSchema={type:Qt("string",Ra._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class gm extends BA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ur(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}}function mp(r){r=Br(r,Yo);const e=Br(r.firestore,Wo),t=ad(e),s=new gm(e);return O0(r._query),CA(t,r._query).then((a=>new Ra(e,s,r,a)))}function qA(r,e,t,...s){r=Br(r,Bt);const a=Br(r.firestore,Wo),c=um(a);let f;return f=typeof(e=rn(e))=="string"||e instanceof ld?DA(c,"updateDoc",r._key,e,t,s):MA(c,"updateDoc",r._key,e),ym(a,[f.toMutation(r._key,oi.exists(!0))])}function _m(r){return ym(Br(r.firestore,Wo),[new Up(r._key,oi.none())])}function vm(r,e){const t=Br(r.firestore,Wo),s=Zu(r),a=$A(r.converter,e);return ym(t,[OA(um(r.firestore),"addDoc",s._key,a,r.converter!==null,{}).toMutation(s._key,oi.exists(!1))]).then((()=>s))}function F0(r,...e){var t,s,a;r=rn(r);let c={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||Gv(e[f])||(c=e[f++]);const _={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(Gv(e[f])){const C=e[f];e[f]=(t=C.next)===null||t===void 0?void 0:t.bind(C),e[f+1]=(s=C.error)===null||s===void 0?void 0:s.bind(C),e[f+2]=(a=C.complete)===null||a===void 0?void 0:a.bind(C)}let v,T,S;if(r instanceof Bt)T=Br(r.firestore,Wo),S=Yh(r._key.path),v={next:C=>{e[f]&&e[f](z0(T,r,C))},error:e[f+1],complete:e[f+2]};else{const C=Br(r,Yo);T=Br(C.firestore,Wo),S=C._query;const k=new gm(T);v={next:H=>{e[f]&&e[f](new Ra(T,k,C,H))},error:e[f+1],complete:e[f+2]},O0(r._query)}return(function(k,H,W,Q){const Z=new am(Q),he=new im(H,Z,W);return k.asyncQueue.enqueueAndForget((async()=>tm(await jh(k),he))),()=>{Z.Ou(),k.asyncQueue.enqueueAndForget((async()=>nm(await jh(k),he)))}})(ad(T),S,_,v)}function ym(r,e){return(function(s,a){const c=new ws;return s.asyncQueue.enqueueAndForget((async()=>pA(await PA(s),a,c))),c.promise})(ad(r),e)}function z0(r,e,t){const s=t.docs.get(e._key),a=new gm(r);return new ka(r,a,e._key,s,new xu(t.hasPendingWrites,t.fromCache),e.converter)}function wm(){return new cm("serverTimestamp")}(function(e,t=!0){(function(a){Bl=a})(jl),Nl(new Na("firestore",((s,{instanceIdentifier:a,options:c})=>{const f=s.getProvider("app").getImmediate(),_=new Wo(new DP(s.getProvider("auth-internal")),new zP(f,s.getProvider("app-check-internal")),(function(T,S){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new ve(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uu(T.options.projectId,S)})(f,a),f);return c=Object.assign({useFetchStreams:t},c),_._setSettings(c),_}),"PUBLIC").setMultipleInstances(!0)),bo(Y_,X_,e),bo(Y_,X_,"esm2017")})();const ZA={apiKey:"AIzaSyD8T16MF6Tye3TcdgPwsds2AKlPKoEvLsU",authDomain:"pinplace-402a9.firebaseapp.com",projectId:"pinplace-402a9",storageBucket:"pinplace-402a9.firebasestorage.app",messagingSenderId:"1060464715553",appId:"1:1060464715553:web:c3c1494fdd08596115c060"};let dh=null,Pl=null,ar=null;try{dh=Py(ZA),Pl=RP(dh),ar=kA(dh)}catch(r){console.warn("Firebase initialization failed:",r),dh={name:"demo-app"},Pl={currentUser:null},ar={collection:()=>({addDoc:()=>Promise.resolve({id:"demo-id"})})}}const j0=X.createContext(void 0),Xo=()=>{const r=X.useContext(j0);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},GA=({children:r})=>{const[e,t]=X.useState(null),[s,a]=X.useState(!0);X.useEffect(()=>vS(Pl,S=>{t(S),a(!1)}),[]);const v={user:e,loading:s,login:async(T,S)=>{await mS(Pl,T,S)},signup:async(T,S)=>{await pS(Pl,T,S)},logout:async()=>{await yS(Pl)}};return R.jsx(j0.Provider,{value:v,children:r})},KA=({message:r,type:e,duration:t=3e3,onClose:s})=>{const[a,c]=X.useState(!0);X.useEffect(()=>{const v=setTimeout(()=>{c(!1),setTimeout(s,300)},t);return()=>clearTimeout(v)},[t,s]);const f=()=>{switch(e){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},_=()=>{switch(e){case"success":return R.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"error":return R.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});case"info":return R.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})});default:return null}};return R.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-sm w-full bg-white border rounded-lg shadow-lg transition-all duration-300 ${a?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"} ${f()}`,children:R.jsxs("div",{className:"flex items-start p-4",children:[R.jsx("div",{className:"flex-shrink-0 mr-3",children:_()}),R.jsx("div",{className:"flex-1",children:R.jsx("p",{className:"text-sm font-medium",children:r})}),R.jsx("button",{onClick:()=>{c(!1),setTimeout(s,300)},className:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 transition-colors",children:R.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})},U0=X.createContext(void 0),QA=()=>{const r=X.useContext(U0);if(!r)throw new Error("useToast must be used within a ToastProvider");return r},YA=({children:r})=>{const[e,t]=X.useState([]),s=(c,f,_=3e3)=>{const T={id:Math.random().toString(36).substr(2,9),message:c,type:f,duration:_};t(S=>[...S,T])},a=c=>{t(f=>f.filter(_=>_.id!==c))};return R.jsxs(U0.Provider,{value:{showToast:s},children:[r,e.map(c=>R.jsx(KA,{message:c.message,type:c.type,duration:c.duration,onClose:()=>a(c.id)},c.id))]})},Yv=({children:r})=>{const{user:e,loading:t}=Xo();return t?R.jsx("div",{className:"min-h-screen flex items-center justify-center",children:R.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e?R.jsx(R.Fragment,{children:r}):R.jsx(py,{to:"/",replace:!0})},XA=({onSwitchToSignup:r,onClose:e})=>{const[t,s]=X.useState(""),[a,c]=X.useState(""),[f,_]=X.useState(""),[v,T]=X.useState(!1),{login:S}=Xo(),C=async k=>{k.preventDefault(),_(""),T(!0);try{await S(t,a),e()}catch(H){_(H.message||"Failed to log in")}finally{T(!1)}};return R.jsxs("div",{className:"w-full max-w-md mx-auto",children:[R.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Sign In"}),R.jsxs("form",{onSubmit:C,className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),R.jsx("input",{id:"email",type:"email",value:t,onChange:k=>s(k.target.value),className:"input-field",required:!0})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),R.jsx("input",{id:"password",type:"password",value:a,onChange:k=>c(k.target.value),className:"input-field",required:!0})]}),f&&R.jsx("div",{className:"text-red-600 text-sm text-center",children:f}),R.jsx("button",{type:"submit",disabled:v,className:"btn-primary w-full",children:v?"Signing In...":"Sign In"})]}),R.jsxs("p",{className:"text-center text-sm text-gray-600 mt-4",children:["Don't have an account?"," ",R.jsx("button",{onClick:r,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign up"})]})]})},JA=({onSwitchToLogin:r,onClose:e})=>{const[t,s]=X.useState(""),[a,c]=X.useState(""),[f,_]=X.useState(""),[v,T]=X.useState(""),[S,C]=X.useState(!1),{signup:k}=Xo(),H=async W=>{if(W.preventDefault(),T(""),a!==f){T("Passwords do not match");return}if(a.length<6){T("Password must be at least 6 characters");return}C(!0);try{await k(t,a),e()}catch(Q){T(Q.message||"Failed to create account")}finally{C(!1)}};return R.jsxs("div",{className:"w-full max-w-md mx-auto",children:[R.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Sign Up"}),R.jsxs("form",{onSubmit:H,className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),R.jsx("input",{id:"email",type:"email",value:t,onChange:W=>s(W.target.value),className:"input-field",required:!0})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),R.jsx("input",{id:"password",type:"password",value:a,onChange:W=>c(W.target.value),className:"input-field",required:!0})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),R.jsx("input",{id:"confirmPassword",type:"password",value:f,onChange:W=>_(W.target.value),className:"input-field",required:!0})]}),v&&R.jsx("div",{className:"text-red-600 text-sm text-center",children:v}),R.jsx("button",{type:"submit",disabled:S,className:"btn-primary w-full",children:S?"Creating Account...":"Sign Up"})]}),R.jsxs("p",{className:"text-center text-sm text-gray-600 mt-4",children:["Already have an account?"," ",R.jsx("button",{onClick:r,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in"})]})]})},ek=({isOpen:r,onClose:e,initialMode:t="login"})=>{const[s,a]=X.useState(t);return X.useEffect(()=>{a(t)},[t]),r?R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:R.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 relative",children:[R.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:R.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s==="login"?R.jsx(XA,{onSwitchToSignup:()=>a("signup"),onClose:e}):R.jsx(JA,{onSwitchToLogin:()=>a("login"),onClose:e})]})}):null},Nt=({variant:r="primary",size:e="md",children:t,className:s="",...a})=>{const c="font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",f={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 focus:ring-gray-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500"},_={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},v=`${c} ${f[r]} ${_[e]} ${s}`;return R.jsx("button",{className:v,...a,children:t})},tk=()=>{const{user:r,logout:e}=Xo(),[t,s]=Ll.useState(!1),[a,c]=Ll.useState("login"),f=()=>{c("login"),s(!0)},_=()=>{c("signup"),s(!0)},v=async()=>{try{await e()}catch(T){console.error("Failed to log out:",T)}};return R.jsxs(R.Fragment,{children:[R.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:R.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:R.jsxs("div",{className:"flex justify-between items-center h-16",children:[R.jsx("div",{className:"flex items-center",children:R.jsx("h1",{className:"text-xl font-bold text-blue-600",children:"pinplace"})}),R.jsx("div",{className:"flex items-center space-x-4",children:r?R.jsxs(R.Fragment,{children:[R.jsx("span",{className:"text-sm text-gray-600",children:r.email}),R.jsx(Nt,{variant:"secondary",size:"sm",onClick:v,children:"Sign Out"})]}):R.jsxs(R.Fragment,{children:[R.jsx(Nt,{variant:"secondary",size:"sm",onClick:f,children:"Sign In"}),R.jsx(Nt,{variant:"primary",size:"sm",onClick:_,children:"Sign Up"})]})})]})})}),R.jsx(ek,{isOpen:t,onClose:()=>s(!1),initialMode:a})]})},Vo=({children:r,className:e="",padding:t="md"})=>{const s={sm:"p-4",md:"p-6",lg:"p-8"};return R.jsx("div",{className:`bg-white rounded-lg shadow-md border border-gray-200 ${s[t]} ${e}`,children:r})},nk=()=>{const{user:r}=Xo();return R.jsx("div",{className:"min-h-screen",children:R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[R.jsxs("div",{className:"text-center",children:[R.jsxs("h1",{className:"text-4xl font-bold text-gray-900 sm:text-5xl md:text-6xl",children:["Create and share",R.jsx("span",{className:"text-blue-600",children:" collaborative maps"})]}),R.jsx("p",{className:"mt-3 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl",children:"Build maps for your class, club, team, reunion, or event. Share a link and let others add their location pins in real-time."}),R.jsx("div",{className:"mt-5 max-w-md mx-auto sm:flex sm:justify-center md:mt-8",children:r?R.jsx(Nt,{size:"lg",onClick:()=>window.location.href="/dashboard",children:"Go to Dashboard"}):R.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:space-x-3 sm:flex",children:[R.jsx(Nt,{size:"lg",onClick:()=>window.location.href="/dashboard",children:"Get Started"}),R.jsx(Nt,{variant:"secondary",size:"lg",onClick:()=>window.location.href="/dashboard",children:"Learn More"})]})})]}),R.jsx("div",{className:"mt-16",children:R.jsxs("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3",children:[R.jsx(Vo,{children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-md bg-blue-500 text-white",children:R.jsxs("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),R.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Easy to Create"}),R.jsx("p",{className:"mt-2 text-base text-gray-500",children:"Create maps in seconds with just a name and optional expiration settings."})]})}),R.jsx(Vo,{children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-md bg-blue-500 text-white",children:R.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})}),R.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Share Instantly"}),R.jsx("p",{className:"mt-2 text-base text-gray-500",children:"Generate shareable links that let anyone add pins without creating an account."})]})}),R.jsx(Vo,{children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-md bg-blue-500 text-white",children:R.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),R.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Auto-Lock"}),R.jsx("p",{className:"mt-2 text-base text-gray-500",children:"Set expiration times or manually lock maps to preserve them permanently."})]})})]})})]})})},rk=r=>{const[e,t]=X.useState("open"),[s,a]=X.useState("");return X.useEffect(()=>{if(!r)return;const c=()=>{if(r.isLocked){t("locked"),a("");return}if(r.editableUntil){const _=new Date,T=r.editableUntil.toDate().getTime()-_.getTime();if(T<=0)t("locked"),a("");else{t("expiring");const S=Math.floor(T/(1e3*60*60)),C=Math.floor(T%(1e3*60*60)/(1e3*60));S>0?a(`${S}h ${C}m`):a(`${C}m`)}}else t("open"),a("")};c();const f=setInterval(c,6e4);return()=>clearInterval(f)},[r]),{lockStatus:e,timeRemaining:s}},ik=({map:r,className:e=""})=>{const{lockStatus:t,timeRemaining:s}=rk(r),c=(()=>{switch(t){case"locked":return{text:"Locked",className:"bg-red-100 text-red-800"};case"expiring":return{text:`Expires in ${s}`,className:"bg-yellow-100 text-yellow-800"};default:return{text:"Open",className:"bg-green-100 text-green-800"}}})();return R.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${c.className} ${e}`,children:c.text})},sk=(r,e)=>{const s=[["Name","Description","Latitude","Longitude","Created At"].join(","),...r.map(_=>[`"${_.name.replace(/"/g,'""')}"`,`"${(_.description||"").replace(/"/g,'""')}"`,_.lat,_.lng,_.createdAt.toDate().toISOString()].join(","))].join(`
`),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a"),f=URL.createObjectURL(a);c.setAttribute("href",f),c.setAttribute("download",`${e.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_pins.csv`),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)},ok=(r,e)=>{const t=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>${e}</name>
    <description>Collaborative map pins exported from pinplace</description>
    ${r.map(f=>`
    <Placemark>
      <name>${f.name.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}</name>
      ${f.description?`<description>${f.description.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}</description>`:""}
      <Point>
        <coordinates>${f.lng},${f.lat},0</coordinates>
      </Point>
    </Placemark>`).join("")}
  </Document>
</kml>`,s=new Blob([t],{type:"application/vnd.google-earth.kml+xml"}),a=document.createElement("a"),c=URL.createObjectURL(s);a.setAttribute("href",c),a.setAttribute("download",`${e.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_pins.kml`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},ak=()=>{const{user:r}=Xo(),e=wp(),[t,s]=X.useState([]),[a,c]=X.useState(!0),[f,_]=X.useState(null),[v,T]=X.useState(null);X.useEffect(()=>{if(!r)return;const W=Do(ar,"maps"),Q=D0(W,jA("ownerId","==",r.uid)),Z=F0(Q,he=>{const de=he.docs.map(me=>({id:me.id,...me.data()}));s(de),c(!1),_(null)},he=>{console.error("Error fetching maps:",he),_("Failed to load maps"),c(!1)});return()=>Z()},[r]);const S=async(W,Q)=>{try{const Z=Zu(ar,"maps",W);await qA(Z,{isLocked:!Q})}catch(Z){console.error("Failed to toggle lock:",Z)}},C=async W=>{if(confirm("Are you sure you want to delete this map? This action cannot be undone."))try{await _m(Zu(ar,"maps",W))}catch(Q){console.error("Failed to delete map:",Q)}},k=async W=>{T(W.id);try{const Q=Do(ar,"maps",W.id,"pins"),he=(await mp(Q)).docs.map(de=>({id:de.id,...de.data()}));sk(he,W.name)}catch(Q){console.error("Failed to export CSV:",Q)}finally{T(null)}},H=async W=>{T(W.id);try{const Q=Do(ar,"maps",W.id,"pins"),he=(await mp(Q)).docs.map(de=>({id:de.id,...de.data()}));ok(he,W.name)}catch(Q){console.error("Failed to export KML:",Q)}finally{T(null)}};return a?R.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:R.jsxs("div",{className:"animate-pulse",children:[R.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(W=>R.jsx("div",{className:"h-48 bg-gray-200 rounded"},W))})]})}):R.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[R.jsxs("div",{className:"flex justify-between items-center mb-8",children:[R.jsxs("div",{children:[R.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Maps"}),R.jsx("p",{className:"text-gray-600",children:"Manage your collaborative maps"})]}),R.jsx(Nt,{onClick:()=>e("/create"),children:"Create New Map"})]}),f&&R.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:f}),t.length===0?R.jsxs(Vo,{className:"text-center py-12",children:[R.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-md bg-gray-100 text-gray-400 mb-4",children:R.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),R.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No maps yet"}),R.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first collaborative map to get started."}),R.jsx(Nt,{onClick:()=>e("/create"),children:"Create Your First Map"})]}):R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(W=>R.jsxs(Vo,{className:"hover:shadow-lg transition-shadow",children:[R.jsxs("div",{className:"flex justify-between items-start mb-3",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:W.name}),R.jsx(ik,{map:W})]}),R.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Created ",W.createdAt.toDate().toLocaleDateString()]}),R.jsxs("div",{className:"space-y-2",children:[R.jsxs("div",{className:"flex gap-2",children:[R.jsx(Nt,{size:"sm",variant:"secondary",onClick:()=>e(`/map/${W.id}`),className:"flex-1",children:"View"}),R.jsx(Nt,{size:"sm",variant:"secondary",onClick:()=>S(W.id,W.isLocked),children:W.isLocked?"Unlock":"Lock"}),R.jsx(Nt,{size:"sm",variant:"danger",onClick:()=>C(W.id),children:"Delete"})]}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx(Nt,{size:"sm",variant:"secondary",onClick:()=>k(W),disabled:v===W.id,className:"flex-1",children:v===W.id?"Exporting...":"Export CSV"}),R.jsx(Nt,{size:"sm",variant:"secondary",onClick:()=>H(W),disabled:v===W.id,className:"flex-1",children:v===W.id?"Exporting...":"Export KML"})]})]})]},W.id))})]})},lk=()=>{const[r,e]=X.useState(!1),[t,s]=X.useState(null),{user:a}=Xo();return{createMap:async f=>{if(!a)return s("You must be logged in to create a map"),null;e(!0),s(null);try{const _=Do(ar,"maps");return(await vm(_,{name:f.name,ownerId:a.uid,lockType:f.lockType,isLocked:!1,createdAt:wm(),editableUntil:f.lockType==="manual"?null:f.lockType==="duration"&&f.duration?new Date(Date.now()+f.duration*60*60*1e3):f.lockDate||null})).id}catch(_){throw console.error("Error creating map:",_),s(_.message||"Failed to create map"),_}finally{e(!1)}},loading:r,error:t}},Rl=X.forwardRef(({label:r,error:e,helperText:t,className:s="",...a},c)=>R.jsxs("div",{className:"w-full",children:[r&&R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),R.jsx("input",{ref:c,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${e?"border-red-300":"border-gray-300"} ${s}`,...a}),e&&R.jsx("p",{className:"mt-1 text-sm text-red-600",children:e}),t&&!e&&R.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t})]}));Rl.displayName="Input";const uk=()=>{const r=wp(),{createMap:e,loading:t,error:s}=lk(),[a,c]=X.useState({name:"",lockType:"manual",duration:24,lockDate:""}),f=async v=>{if(v.preventDefault(),!!a.name.trim())try{await e({name:a.name.trim(),lockType:a.lockType,duration:a.lockType==="duration"?a.duration:void 0,lockDate:a.lockType==="datetime"?new Date(a.lockDate):void 0}),r("/dashboard")}catch(T){console.error("Failed to create map:",T)}},_=(v,T)=>{c(S=>({...S,[v]:T}))};return R.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[R.jsxs("div",{className:"mb-8",children:[R.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Map"}),R.jsx("p",{className:"mt-2 text-gray-600",children:"Create a collaborative map that others can add pins to."})]}),R.jsx(Vo,{children:R.jsxs("form",{onSubmit:f,className:"space-y-6",children:[R.jsx(Rl,{label:"Map Name",value:a.name,onChange:v=>_("name",v.target.value),placeholder:"e.g., High School Friends, Company Offsite",required:!0}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Lock Settings"}),R.jsxs("div",{className:"space-y-3",children:[R.jsxs("label",{className:"flex items-center",children:[R.jsx("input",{type:"radio",name:"lockType",value:"manual",checked:a.lockType==="manual",onChange:v=>_("lockType",v.target.value),className:"mr-2"}),R.jsx("span",{children:"Manual lock only (you control when to lock)"})]}),R.jsxs("label",{className:"flex items-center",children:[R.jsx("input",{type:"radio",name:"lockType",value:"duration",checked:a.lockType==="duration",onChange:v=>_("lockType",v.target.value),className:"mr-2"}),R.jsx("span",{children:"Auto-lock after duration"})]}),a.lockType==="duration"&&R.jsx("div",{className:"ml-6",children:R.jsx(Rl,{label:"Duration (hours)",type:"number",min:"1",max:"8760",value:a.duration,onChange:v=>_("duration",parseInt(v.target.value)||24)})}),R.jsxs("label",{className:"flex items-center",children:[R.jsx("input",{type:"radio",name:"lockType",value:"datetime",checked:a.lockType==="datetime",onChange:v=>_("lockType",v.target.value),className:"mr-2"}),R.jsx("span",{children:"Auto-lock at specific date/time"})]}),a.lockType==="datetime"&&R.jsx("div",{className:"ml-6",children:R.jsx(Rl,{label:"Lock Date & Time",type:"datetime-local",value:a.lockDate,onChange:v=>_("lockDate",v.target.value),required:a.lockType==="datetime"})})]})]}),s&&R.jsx("div",{className:"text-red-600 text-sm",children:s}),R.jsxs("div",{className:"flex space-x-4",children:[R.jsx(Nt,{type:"submit",disabled:t||!a.name.trim(),className:"flex-1",children:t?"Creating...":"Create Map"}),R.jsx(Nt,{type:"button",variant:"secondary",onClick:()=>r("/dashboard"),className:"flex-1",children:"Cancel"})]})]})})]})};function B0(r,e){const t=X.useRef(e);X.useEffect(function(){e!==t.current&&r.attributionControl!=null&&(t.current!=null&&r.attributionControl.removeAttribution(t.current),e!=null&&r.attributionControl.addAttribution(e)),t.current=e},[r,e])}const ck=1;function hk(r){return Object.freeze({__version:ck,map:r})}function dk(r,e){return Object.freeze({...r,...e})}const $0=X.createContext(null),H0=$0.Provider;function Em(){const r=X.useContext($0);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function fk(r){function e(t,s){const{instance:a,context:c}=r(t).current;return X.useImperativeHandle(s,()=>a),t.children==null?null:Ll.createElement(H0,{value:c},t.children)}return X.forwardRef(e)}function pk(r){function e(t,s){const[a,c]=X.useState(!1),{instance:f}=r(t,c).current;X.useImperativeHandle(s,()=>f),X.useEffect(function(){a&&f.update()},[f,a,t.children]);const _=f._contentNode;return _?zE.createPortal(t.children,_):null}return X.forwardRef(e)}function mk(r){function e(t,s){const{instance:a}=r(t).current;return X.useImperativeHandle(s,()=>a),null}return X.forwardRef(e)}function W0(r,e){const t=X.useRef();X.useEffect(function(){return e!=null&&r.instance.on(e),t.current=e,function(){t.current!=null&&r.instance.off(t.current),t.current=null}},[r,e])}function Tm(r,e){const t=r.pane??e.pane;return t?{...r,pane:t}:r}function gk(r,e){return function(s,a){const c=Em(),f=r(Tm(s,c),c);return B0(c.map,s.attribution),W0(f.current,s.eventHandlers),e(f.current,c,s,a),f}}var Cu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var _k=Cu.exports,Xv;function vk(){return Xv||(Xv=1,(function(r,e){(function(t,s){s(e)})(_k,(function(t){var s="1.9.4";function a(i){var l,d,m,E;for(d=1,m=arguments.length;d<m;d++){E=arguments[d];for(l in E)i[l]=E[l]}return i}var c=Object.create||(function(){function i(){}return function(l){return i.prototype=l,new i}})();function f(i,l){var d=Array.prototype.slice;if(i.bind)return i.bind.apply(i,d.call(arguments,1));var m=d.call(arguments,2);return function(){return i.apply(l,m.length?m.concat(d.call(arguments)):arguments)}}var _=0;function v(i){return"_leaflet_id"in i||(i._leaflet_id=++_),i._leaflet_id}function T(i,l,d){var m,E,x,D;return D=function(){m=!1,E&&(x.apply(d,E),E=!1)},x=function(){m?E=arguments:(i.apply(d,arguments),setTimeout(D,l),m=!0)},x}function S(i,l,d){var m=l[1],E=l[0],x=m-E;return i===m&&d?i:((i-E)%x+x)%x+E}function C(){return!1}function k(i,l){if(l===!1)return i;var d=Math.pow(10,l===void 0?6:l);return Math.round(i*d)/d}function H(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function W(i){return H(i).split(/\s+/)}function Q(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?c(i.options):{});for(var d in l)i.options[d]=l[d];return i.options}function Z(i,l,d){var m=[];for(var E in i)m.push(encodeURIComponent(d?E.toUpperCase():E)+"="+encodeURIComponent(i[E]));return(!l||l.indexOf("?")===-1?"?":"&")+m.join("&")}var he=/\{ *([\w_ -]+) *\}/g;function de(i,l){return i.replace(he,function(d,m){var E=l[m];if(E===void 0)throw new Error("No value provided for variable "+d);return typeof E=="function"&&(E=E(l)),E})}var me=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function ge(i,l){for(var d=0;d<i.length;d++)if(i[d]===l)return d;return-1}var be="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Oe(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var V=0;function N(i){var l=+new Date,d=Math.max(0,16-(l-V));return V=l+d,window.setTimeout(i,d)}var M=window.requestAnimationFrame||Oe("RequestAnimationFrame")||N,z=window.cancelAnimationFrame||Oe("CancelAnimationFrame")||Oe("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function j(i,l,d){if(d&&M===N)i.call(l);else return M.call(window,f(i,l))}function $(i){i&&z.call(window,i)}var O={__proto__:null,extend:a,create:c,bind:f,get lastId(){return _},stamp:v,throttle:T,wrapNum:S,falseFn:C,formatNum:k,trim:H,splitWords:W,setOptions:Q,getParamString:Z,template:de,isArray:me,indexOf:ge,emptyImageUrl:be,requestFn:M,cancelFn:z,requestAnimFrame:j,cancelAnimFrame:$};function ot(){}ot.extend=function(i){var l=function(){Q(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,m=c(d);m.constructor=l,l.prototype=m;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(l[E]=this[E]);return i.statics&&a(l,i.statics),i.includes&&(sn(i.includes),a.apply(null,[m].concat(i.includes))),a(m,i),delete m.statics,delete m.includes,m.options&&(m.options=d.options?c(d.options):{},a(m.options,i.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var x=0,D=m._initHooks.length;x<D;x++)m._initHooks[x].call(this)}},l},ot.include=function(i){var l=this.prototype.options;return a(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},ot.mergeOptions=function(i){return a(this.prototype.options,i),this},ot.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),d=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function sn(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=me(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var lt={on:function(i,l,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],l);else{i=W(i);for(var E=0,x=i.length;E<x;E++)this._on(i[E],l,d)}return this},off:function(i,l,d){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var m in i)this._off(m,i[m],l);else{i=W(i);for(var E=arguments.length===1,x=0,D=i.length;x<D;x++)E?this._off(i[x]):this._off(i[x],l,d)}return this},_on:function(i,l,d,m){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,d)===!1){d===this&&(d=void 0);var E={fn:l,ctx:d};m&&(E.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(E)}},_off:function(i,l,d){var m,E,x;if(this._events&&(m=this._events[i],!!m)){if(arguments.length===1){if(this._firingCount)for(E=0,x=m.length;E<x;E++)m[E].fn=C;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var D=this._listens(i,l,d);if(D!==!1){var G=m[D];this._firingCount&&(G.fn=C,this._events[i]=m=m.slice()),m.splice(D,1)}}},fire:function(i,l,d){if(!this.listens(i,d))return this;var m=a({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var E=this._events[i];if(E){this._firingCount=this._firingCount+1||1;for(var x=0,D=E.length;x<D;x++){var G=E[x],J=G.fn;G.once&&this.off(i,J,G.ctx),J.call(G.ctx||this,m)}this._firingCount--}}return d&&this._propagateEvent(m),this},listens:function(i,l,d,m){typeof i!="string"&&console.warn('"string" type argument expected');var E=l;typeof l!="function"&&(m=!!l,E=void 0,d=void 0);var x=this._events&&this._events[i];if(x&&x.length&&this._listens(i,E,d)!==!1)return!0;if(m){for(var D in this._eventParents)if(this._eventParents[D].listens(i,l,d,m))return!0}return!1},_listens:function(i,l,d){if(!this._events)return!1;var m=this._events[i]||[];if(!l)return!!m.length;d===this&&(d=void 0);for(var E=0,x=m.length;E<x;E++)if(m[E].fn===l&&m[E].ctx===d)return E;return!1},once:function(i,l,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],l,!0);else{i=W(i);for(var E=0,x=i.length;E<x;E++)this._on(i[E],l,d,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[v(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[v(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,a({layer:i.target,propagatedFrom:i.target},i),!0)}};lt.addEventListener=lt.on,lt.removeEventListener=lt.clearAllEventListeners=lt.off,lt.addOneTimeEventListener=lt.once,lt.fireEvent=lt.fire,lt.hasEventListeners=lt.listens;var nt=ot.extend(lt);function re(i,l,d){this.x=d?Math.round(i):i,this.y=d?Math.round(l):l}var Re=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};re.prototype={clone:function(){return new re(this.x,this.y)},add:function(i){return this.clone()._add(se(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(se(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new re(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new re(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Re(this.x),this.y=Re(this.y),this},distanceTo:function(i){i=se(i);var l=i.x-this.x,d=i.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(i){return i=se(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=se(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+k(this.x)+", "+k(this.y)+")"}};function se(i,l,d){return i instanceof re?i:me(i)?new re(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new re(i.x,i.y):new re(i,l,d)}function U(i,l){if(i)for(var d=l?[i,l]:i,m=0,E=d.length;m<E;m++)this.extend(d[m])}U.prototype={extend:function(i){var l,d;if(!i)return this;if(i instanceof re||typeof i[0]=="number"||"x"in i)l=d=se(i);else if(i=ne(i),l=i.min,d=i.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(i){return se((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return se(this.min.x,this.max.y)},getTopRight:function(){return se(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,d;return typeof i[0]=="number"||i instanceof re?i=se(i):i=ne(i),i instanceof U?(l=i.min,d=i.max):l=d=i,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(i){i=ne(i);var l=this.min,d=this.max,m=i.min,E=i.max,x=E.x>=l.x&&m.x<=d.x,D=E.y>=l.y&&m.y<=d.y;return x&&D},overlaps:function(i){i=ne(i);var l=this.min,d=this.max,m=i.min,E=i.max,x=E.x>l.x&&m.x<d.x,D=E.y>l.y&&m.y<d.y;return x&&D},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,d=this.max,m=Math.abs(l.x-d.x)*i,E=Math.abs(l.y-d.y)*i;return ne(se(l.x-m,l.y-E),se(d.x+m,d.y+E))},equals:function(i){return i?(i=ne(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function ne(i,l){return!i||i instanceof U?i:new U(i,l)}function ye(i,l){if(i)for(var d=l?[i,l]:i,m=0,E=d.length;m<E;m++)this.extend(d[m])}ye.prototype={extend:function(i){var l=this._southWest,d=this._northEast,m,E;if(i instanceof Ie)m=i,E=i;else if(i instanceof ye){if(m=i._southWest,E=i._northEast,!m||!E)return this}else return i?this.extend(Ee(i)||Ae(i)):this;return!l&&!d?(this._southWest=new Ie(m.lat,m.lng),this._northEast=new Ie(E.lat,E.lng)):(l.lat=Math.min(m.lat,l.lat),l.lng=Math.min(m.lng,l.lng),d.lat=Math.max(E.lat,d.lat),d.lng=Math.max(E.lng,d.lng)),this},pad:function(i){var l=this._southWest,d=this._northEast,m=Math.abs(l.lat-d.lat)*i,E=Math.abs(l.lng-d.lng)*i;return new ye(new Ie(l.lat-m,l.lng-E),new Ie(d.lat+m,d.lng+E))},getCenter:function(){return new Ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Ie||"lat"in i?i=Ee(i):i=Ae(i);var l=this._southWest,d=this._northEast,m,E;return i instanceof ye?(m=i.getSouthWest(),E=i.getNorthEast()):m=E=i,m.lat>=l.lat&&E.lat<=d.lat&&m.lng>=l.lng&&E.lng<=d.lng},intersects:function(i){i=Ae(i);var l=this._southWest,d=this._northEast,m=i.getSouthWest(),E=i.getNorthEast(),x=E.lat>=l.lat&&m.lat<=d.lat,D=E.lng>=l.lng&&m.lng<=d.lng;return x&&D},overlaps:function(i){i=Ae(i);var l=this._southWest,d=this._northEast,m=i.getSouthWest(),E=i.getNorthEast(),x=E.lat>l.lat&&m.lat<d.lat,D=E.lng>l.lng&&m.lng<d.lng;return x&&D},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=Ae(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ae(i,l){return i instanceof ye?i:new ye(i,l)}function Ie(i,l,d){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,d!==void 0&&(this.alt=+d)}Ie.prototype={equals:function(i,l){if(!i)return!1;i=Ee(i);var d=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return d<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+k(this.lat,i)+", "+k(this.lng,i)+")"},distanceTo:function(i){return Ke.distance(this,Ee(i))},wrap:function(){return Ke.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Ae([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ie(this.lat,this.lng,this.alt)}};function Ee(i,l,d){return i instanceof Ie?i:me(i)&&typeof i[0]!="object"?i.length===3?new Ie(i[0],i[1],i[2]):i.length===2?new Ie(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Ie(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new Ie(i,l,d)}var Ze={latLngToPoint:function(i,l){var d=this.projection.project(i),m=this.scale(l);return this.transformation._transform(d,m)},pointToLatLng:function(i,l){var d=this.scale(l),m=this.transformation.untransform(i,d);return this.projection.unproject(m)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(i),m=this.transformation.transform(l.min,d),E=this.transformation.transform(l.max,d);return new U(m,E)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?S(i.lng,this.wrapLng,!0):i.lng,d=this.wrapLat?S(i.lat,this.wrapLat,!0):i.lat,m=i.alt;return new Ie(d,l,m)},wrapLatLngBounds:function(i){var l=i.getCenter(),d=this.wrapLatLng(l),m=l.lat-d.lat,E=l.lng-d.lng;if(m===0&&E===0)return i;var x=i.getSouthWest(),D=i.getNorthEast(),G=new Ie(x.lat-m,x.lng-E),J=new Ie(D.lat-m,D.lng-E);return new ye(G,J)}},Ke=a({},Ze,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var d=Math.PI/180,m=i.lat*d,E=l.lat*d,x=Math.sin((l.lat-i.lat)*d/2),D=Math.sin((l.lng-i.lng)*d/2),G=x*x+Math.cos(m)*Math.cos(E)*D*D,J=2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G));return this.R*J}}),ft=6378137,Ot={R:ft,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,d=this.MAX_LATITUDE,m=Math.max(Math.min(d,i.lat),-d),E=Math.sin(m*l);return new re(this.R*i.lng*l,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(i){var l=180/Math.PI;return new Ie((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:(function(){var i=ft*Math.PI;return new U([-i,-i],[i,i])})()};function lr(i,l,d,m){if(me(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=d,this._d=m}lr.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new re((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function Tr(i,l,d,m){return new lr(i,l,d,m)}var Ir=a({},Ke,{code:"EPSG:3857",projection:Ot,transformation:(function(){var i=.5/(Math.PI*Ot.R);return Tr(i,.5,-i,.5)})()}),bi=a({},Ir,{code:"EPSG:900913"});function Oi(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function xs(i,l){var d="",m,E,x,D,G,J;for(m=0,x=i.length;m<x;m++){for(G=i[m],E=0,D=G.length;E<D;E++)J=G[E],d+=(E?"L":"M")+J.x+" "+J.y;d+=l?xe.svg?"z":"x":""}return d||"M0 0"}var Mi=document.documentElement.style,Di="ActiveXObject"in window,Cs=Di&&!document.addEventListener,Sr="msLaunchUri"in navigator&&!("documentMode"in document),ur=on("webkit"),As=on("android"),Vi=on("android 2")||on("android 3"),ks=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Jo=As&&on("Google")&&ks<537&&!("AudioNode"in window),Ct=!!window.opera,Mt=!Sr&&on("chrome"),Pr=on("gecko")&&!ur&&!Ct&&!Di,ea=!Mt&&on("safari"),$r=on("phantom"),ui="OTransition"in Mi,Fi=navigator.platform.indexOf("Win")===0,Rs=Di&&"transition"in Mi,zi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Vi,Ls="MozPerspective"in Mi,ta=!window.L_DISABLE_3D&&(Rs||zi||Ls)&&!ui&&!$r,Hr=typeof orientation<"u"||on("mobile"),ji=Hr&&ur,Ns=Hr&&zi,Ui=!window.PointerEvent&&window.MSPointerEvent,On=!!(window.PointerEvent||Ui),cr="ontouchstart"in window||!!window.TouchEvent,bs=!window.L_NO_TOUCH&&(cr||On),xr=Hr&&Ct,na=Hr&&Pr,Bi=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ra=(function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",C,l),window.removeEventListener("testPassiveEventSupport",C,l)}catch{}return i})(),Wr=(function(){return!!document.createElement("canvas").getContext})(),$i=!!(document.createElementNS&&Oi("svg").createSVGRect),At=!!$i&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Os=!$i&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),hr=navigator.platform.indexOf("Mac")===0,Hi=navigator.platform.indexOf("Linux")===0;function on(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var xe={ie:Di,ielt9:Cs,edge:Sr,webkit:ur,android:As,android23:Vi,androidStock:Jo,opera:Ct,chrome:Mt,gecko:Pr,safari:ea,phantom:$r,opera12:ui,win:Fi,ie3d:Rs,webkit3d:zi,gecko3d:Ls,any3d:ta,mobile:Hr,mobileWebkit:ji,mobileWebkit3d:Ns,msPointer:Ui,pointer:On,touch:bs,touchNative:cr,mobileOpera:xr,mobileGecko:na,retina:Bi,passiveEvents:ra,canvas:Wr,svg:$i,vml:Os,inlineSvg:At,mac:hr,linux:Hi},Un=xe.msPointer?"MSPointerDown":"pointerdown",Ms=xe.msPointer?"MSPointerMove":"pointermove",ja=xe.msPointer?"MSPointerUp":"pointerup",Wi=xe.msPointer?"MSPointerCancel":"pointercancel",Ds={touchstart:Un,touchmove:Ms,touchend:ja,touchcancel:Wi},Bn={touchstart:_t,touchmove:js,touchend:js,touchcancel:js},$n={},Hn=!1;function Ua(i,l,d){return l==="touchstart"&&Ba(),Bn[l]?(d=Bn[l].bind(this,d),i.addEventListener(Ds[l],d,!1),d):(console.warn("wrong event specified:",l),C)}function ia(i,l,d){if(!Ds[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(Ds[l],d,!1)}function Vs(i){$n[i.pointerId]=i}function Fs(i){$n[i.pointerId]&&($n[i.pointerId]=i)}function zs(i){delete $n[i.pointerId]}function Ba(){Hn||(document.addEventListener(Un,Vs,!0),document.addEventListener(Ms,Fs,!0),document.addEventListener(ja,zs,!0),document.addEventListener(Wi,zs,!0),Hn=!0)}function js(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in $n)l.touches.push($n[d]);l.changedTouches=[l],i(l)}}function _t(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&gt(l),js(i,l)}function $a(i){var l={},d,m;for(m in i)d=i[m],l[m]=d&&d.bind?d.bind(i):d;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var qi=200;function ci(i,l){i.addEventListener("dblclick",l);var d=0,m;function E(x){if(x.detail!==1){m=x.detail;return}if(!(x.pointerType==="mouse"||x.sourceCapabilities&&!x.sourceCapabilities.firesTouchEvents)){var D=Ar(x);if(!(D.some(function(J){return J instanceof HTMLLabelElement&&J.attributes.for})&&!D.some(function(J){return J instanceof HTMLInputElement||J instanceof HTMLSelectElement}))){var G=Date.now();G-d<=qi?(m++,m===2&&l($a(x))):m=1,d=G}}}return i.addEventListener("click",E),{dblclick:l,simDblclick:E}}function Wn(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var Zi=fr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),hi=fr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),di=hi==="webkitTransition"||hi==="OTransition"?hi+"End":"transitionend";function wn(i){return typeof i=="string"?document.getElementById(i):i}function fi(i,l){var d=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(i,null);d=m?m[l]:null}return d==="auto"?null:d}function Ue(i,l,d){var m=document.createElement(i);return m.className=l||"",d&&d.appendChild(m),m}function pt(i){var l=i.parentNode;l&&l.removeChild(i)}function Gi(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function qr(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function dr(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function pi(i,l){if(i.classList!==void 0)return i.classList.contains(l);var d=qn(i);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function Fe(i,l){if(i.classList!==void 0)for(var d=W(l),m=0,E=d.length;m<E;m++)i.classList.add(d[m]);else if(!pi(i,l)){var x=qn(i);sa(i,(x?x+" ":"")+l)}}function mt(i,l){i.classList!==void 0?i.classList.remove(l):sa(i,H((" "+qn(i)+" ").replace(" "+l+" "," ")))}function sa(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function qn(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function wt(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&Ki(i,l)}function Ki(i,l){var d=!1,m="DXImageTransform.Microsoft.Alpha";try{d=i.filters.item(m)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):i.style.filter+=" progid:"+m+"(opacity="+l+")"}function fr(i){for(var l=document.documentElement.style,d=0;d<i.length;d++)if(i[d]in l)return i[d];return!1}function En(i,l,d){var m=l||new re(0,0);i.style[Zi]=(xe.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(d?" scale("+d+")":"")}function Be(i,l){i._leaflet_pos=l,xe.any3d?En(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function Tn(i){return i._leaflet_pos||new re(0,0)}var Ge,Zn,Us;if("onselectstart"in document)Ge=function(){Le(window,"selectstart",gt)},Zn=function(){ut(window,"selectstart",gt)};else{var Cr=fr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ge=function(){if(Cr){var i=document.documentElement.style;Us=i[Cr],i[Cr]="none"}},Zn=function(){Cr&&(document.documentElement.style[Cr]=Us,Us=void 0)}}function Bs(){Le(window,"dragstart",gt)}function $s(){ut(window,"dragstart",gt)}var Qi,Yi;function Gn(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Dt(),Qi=i,Yi=i.style.outlineStyle,i.style.outlineStyle="none",Le(window,"keydown",Dt))}function Dt(){Qi&&(Qi.style.outlineStyle=Yi,Qi=void 0,Yi=void 0,ut(window,"keydown",Dt))}function Kn(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Mn(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var mi={__proto__:null,TRANSFORM:Zi,TRANSITION:hi,TRANSITION_END:di,get:wn,getStyle:fi,create:Ue,remove:pt,empty:Gi,toFront:qr,toBack:dr,hasClass:pi,addClass:Fe,removeClass:mt,setClass:sa,getClass:qn,setOpacity:wt,testProp:fr,setTransform:En,setPosition:Be,getPosition:Tn,get disableTextSelection(){return Ge},get enableTextSelection(){return Zn},disableImageDrag:Bs,enableImageDrag:$s,preventOutline:Gn,restoreOutline:Dt,getSizedParentNode:Kn,getScale:Mn};function Le(i,l,d,m){if(l&&typeof l=="object")for(var E in l)aa(i,E,l[E],d);else{l=W(l);for(var x=0,D=l.length;x<D;x++)aa(i,l[x],d,m)}return this}var zt="_leaflet_events";function ut(i,l,d,m){if(arguments.length===1)oa(i),delete i[zt];else if(l&&typeof l=="object")for(var E in l)Hs(i,E,l[E],d);else if(l=W(l),arguments.length===2)oa(i,function(G){return ge(l,G)!==-1});else for(var x=0,D=l.length;x<D;x++)Hs(i,l[x],d,m);return this}function oa(i,l){for(var d in i[zt]){var m=d.split(/\d/)[0];(!l||l(m))&&Hs(i,m,null,null,d)}}var an={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function aa(i,l,d,m){var E=l+v(d)+(m?"_"+v(m):"");if(i[zt]&&i[zt][E])return this;var x=function(G){return d.call(m||i,G||window.event)},D=x;!xe.touchNative&&xe.pointer&&l.indexOf("touch")===0?x=Ua(i,l,x):xe.touch&&l==="dblclick"?x=ci(i,x):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(an[l]||l,x,xe.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(x=function(G){G=G||window.event,Xi(i,G)&&D(G)},i.addEventListener(an[l],x,!1)):i.addEventListener(l,D,!1):i.attachEvent("on"+l,x),i[zt]=i[zt]||{},i[zt][E]=x}function Hs(i,l,d,m,E){E=E||l+v(d)+(m?"_"+v(m):"");var x=i[zt]&&i[zt][E];if(!x)return this;!xe.touchNative&&xe.pointer&&l.indexOf("touch")===0?ia(i,l,x):xe.touch&&l==="dblclick"?Wn(i,x):"removeEventListener"in i?i.removeEventListener(an[l]||l,x,!1):i.detachEvent("on"+l,x),i[zt][E]=null}function fn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Zr(i){return aa(i,"wheel",fn),this}function gi(i){return Le(i,"mousedown touchstart dblclick contextmenu",fn),i._leaflet_disable_click=!0,this}function gt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Xt(i){return gt(i),fn(i),this}function Ar(i){if(i.composedPath)return i.composedPath();for(var l=[],d=i.target;d;)l.push(d),d=d.parentNode;return l}function Gr(i,l){if(!l)return new re(i.clientX,i.clientY);var d=Mn(l),m=d.boundingClientRect;return new re((i.clientX-m.left)/d.x-l.clientLeft,(i.clientY-m.top)/d.y-l.clientTop)}var Et=xe.linux&&xe.chrome?window.devicePixelRatio:xe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ha(i){return xe.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Et:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Xi(i,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==i;)d=d.parentNode}catch{return!1}return d!==i}var Ji={__proto__:null,on:Le,off:ut,stopPropagation:fn,disableScrollPropagation:Zr,disableClickPropagation:gi,preventDefault:gt,stop:Xt,getPropagationPath:Ar,getMousePosition:Gr,getWheelDelta:Ha,isExternalTarget:Xi,addListener:Le,removeListener:ut},es=nt.extend({run:function(i,l,d,m){this.stop(),this._el=i,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=Tn(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var d=this._startPos.add(this._offset.multiplyBy(i));l&&d._round(),Be(this._el,d),this.fire("step")},_complete:function(){$(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Qe=nt.extend({options:{crs:Ir,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=Q(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(Ee(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=hi&&xe.any3d&&!xe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Le(this._proxy,di,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(Ee(i),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=a({animate:d.animate},d.zoom),d.pan=a({animate:d.animate,duration:d.duration},d.pan));var m=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,d.zoom):this._tryAnimatedPan(i,d.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(xe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(xe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,d){var m=this.getZoomScale(l),E=this.getSize().divideBy(2),x=i instanceof re?i:this.latLngToContainerPoint(i),D=x.subtract(E).multiplyBy(1-1/m),G=this.containerPointToLatLng(E.add(D));return this.setView(G,l,{zoom:d})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():Ae(i);var d=se(l.paddingTopLeft||l.padding||[0,0]),m=se(l.paddingBottomRight||l.padding||[0,0]),E=this.getBoundsZoom(i,!1,d.add(m));if(E=typeof l.maxZoom=="number"?Math.min(l.maxZoom,E):E,E===1/0)return{center:i.getCenter(),zoom:E};var x=m.subtract(d).divideBy(2),D=this.project(i.getSouthWest(),E),G=this.project(i.getNorthEast(),E),J=this.unproject(D.add(G).divideBy(2).add(x),E);return{center:J,zoom:E}},fitBounds:function(i,l){if(i=Ae(i),!i.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(i,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=se(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new es,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Fe(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,d){if(d=d||{},d.animate===!1||!xe.any3d)return this.setView(i,l,d);this._stop();var m=this.project(this.getCenter()),E=this.project(i),x=this.getSize(),D=this._zoom;i=Ee(i),l=l===void 0?D:l;var G=Math.max(x.x,x.y),J=G*this.getZoomScale(D,l),ae=E.distanceTo(m)||1,_e=1.42,Me=_e*_e;function qe(ht){var co=ht?-1:1,_d=ht?J:G,vd=J*J-G*G+co*Me*Me*ae*ae,as=2*_d*Me*ae,ls=vd/as,us=Math.sqrt(ls*ls+1)-ls,il=us<1e-9?-18:Math.log(us);return il}function Jt(ht){return(Math.exp(ht)-Math.exp(-ht))/2}function qt(ht){return(Math.exp(ht)+Math.exp(-ht))/2}function Fn(ht){return Jt(ht)/qt(ht)}var Pn=qe(0);function lo(ht){return G*(qt(Pn)/qt(Pn+_e*ht))}function su(ht){return G*(qt(Pn)*Fn(Pn+_e*ht)-Jt(Pn))/Me}function Ei(ht){return 1-Math.pow(1-ht,1.5)}var wc=Date.now(),os=(qe(1)-Pn)/_e,br=d.duration?1e3*d.duration:1e3*os*.8;function uo(){var ht=(Date.now()-wc)/br,co=Ei(ht)*os;ht<=1?(this._flyToFrame=j(uo,this),this._move(this.unproject(m.add(E.subtract(m).multiplyBy(su(co)/ae)),D),this.getScaleZoom(G/lo(co),D),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),uo.call(this),this},flyToBounds:function(i,l){var d=this._getBoundsCenterZoom(i,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(i){return i=Ae(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var d=this.getCenter(),m=this._limitCenter(d,this._zoom,Ae(i));return d.equals(m)||this.panTo(m,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var d=se(l.paddingTopLeft||l.padding||[0,0]),m=se(l.paddingBottomRight||l.padding||[0,0]),E=this.project(this.getCenter()),x=this.project(i),D=this.getPixelBounds(),G=ne([D.min.add(d),D.max.subtract(m)]),J=G.getSize();if(!G.contains(x)){this._enforcingBounds=!0;var ae=x.subtract(G.getCenter()),_e=G.extend(x).getSize().subtract(J);E.x+=ae.x<0?-_e.x:_e.x,E.y+=ae.y<0?-_e.y:_e.y,this.panTo(this.unproject(E),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=a({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),m=l.divideBy(2).round(),E=d.divideBy(2).round(),x=m.subtract(E);return!x.x&&!x.y?this:(i.animate&&i.pan?this.panBy(x):(i.pan&&this._rawPanBy(x),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=a({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=f(this._handleGeolocationResponse,this),d=f(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,i):navigator.geolocation.getCurrentPosition(l,d,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,d=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,d=i.coords.longitude,m=new Ie(l,d),E=m.toBounds(i.coords.accuracy*2),x=this._locateOptions;if(x.setView){var D=this.getBoundsZoom(E);this.setView(m,x.maxZoom?Math.min(D,x.maxZoom):D)}var G={latlng:m,bounds:E,timestamp:i.timestamp};for(var J in i.coords)typeof i.coords[J]=="number"&&(G[J]=i.coords[J]);this.fire("locationfound",G)}},addHandler:function(i,l){if(!l)return this;var d=this[i]=new l(this);return this._handlers.push(d),this.options[i]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)pt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var d="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),m=Ue("div",d,l||this._mapPane);return i&&(this._panes[i]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),d=this.unproject(i.getTopRight());return new ye(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,d){i=Ae(i),d=se(d||[0,0]);var m=this.getZoom()||0,E=this.getMinZoom(),x=this.getMaxZoom(),D=i.getNorthWest(),G=i.getSouthEast(),J=this.getSize().subtract(d),ae=ne(this.project(G,m),this.project(D,m)).getSize(),_e=xe.any3d?this.options.zoomSnap:1,Me=J.x/ae.x,qe=J.y/ae.y,Jt=l?Math.max(Me,qe):Math.min(Me,qe);return m=this.getScaleZoom(Jt,m),_e&&(m=Math.round(m/(_e/100))*(_e/100),m=l?Math.ceil(m/_e)*_e:Math.floor(m/_e)*_e),Math.max(E,Math.min(x,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new re(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var d=this._getTopLeftPoint(i,l);return new U(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(i)/d.scale(l)},getScaleZoom:function(i,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var m=d.zoom(i*d.scale(l));return isNaN(m)?1/0:m},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(Ee(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(se(i),l)},layerPointToLatLng:function(i){var l=se(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(Ee(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(Ee(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Ae(i))},distance:function(i,l){return this.options.crs.distance(Ee(i),Ee(l))},containerPointToLayerPoint:function(i){return se(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return se(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(se(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ee(i)))},mouseEventToContainerPoint:function(i){return Gr(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=wn(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Le(l,"scroll",this._onScroll,this),this._containerId=v(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&xe.any3d,Fe(i,"leaflet-container"+(xe.touch?" leaflet-touch":"")+(xe.retina?" leaflet-retina":"")+(xe.ielt9?" leaflet-oldie":"")+(xe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=fi(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Be(this._mapPane,new re(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Fe(i.markerPane,"leaflet-zoom-hide"),Fe(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,d){Be(this._mapPane,new re(0,0));var m=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var E=this._zoom!==l;this._moveStart(E,d)._move(i,l)._moveEnd(E),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,d,m){l===void 0&&(l=this._zoom);var E=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),m?d&&d.pinch&&this.fire("zoom",d):((E||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Be(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[v(this._container)]=this;var l=i?ut:Le;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),xe.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var d=[],m,E=l==="mouseout"||l==="mouseover",x=i.target||i.srcElement,D=!1;x;){if(m=this._targets[v(x)],m&&(l==="click"||l==="preclick")&&this._draggableMoved(m)){D=!0;break}if(m&&m.listens(l,!0)&&(E&&!Xi(x,i)||(d.push(m),E))||x===this._container)break;x=x.parentNode}return!d.length&&!D&&!E&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var d=i.type;d==="mousedown"&&Gn(l),this._fireDOMEvent(i,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,d){if(i.type==="click"){var m=a({},i);m.type="preclick",this._fireDOMEvent(m,m.type,d)}var E=this._findEventTargets(i,l);if(d){for(var x=[],D=0;D<d.length;D++)d[D].listens(l,!0)&&x.push(d[D]);E=x.concat(E)}if(E.length){l==="contextmenu"&&gt(i);var G=E[0],J={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var ae=G.getLatLng&&(!G._radius||G._radius<=10);J.containerPoint=ae?this.latLngToContainerPoint(G.getLatLng()):this.mouseEventToContainerPoint(i),J.layerPoint=this.containerPointToLayerPoint(J.containerPoint),J.latlng=ae?G.getLatLng():this.layerPointToLatLng(J.layerPoint)}for(D=0;D<E.length;D++)if(E[D].fire(l,J,!0),J.originalEvent._stopped||E[D].options.bubblingMouseEvents===!1&&ge(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return Tn(this._mapPane)||new re(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var d=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var d=this.getSize()._divideBy(2);return this.project(i,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,d){var m=this._getNewPixelOrigin(d,l);return this.project(i,l)._subtract(m)},_latLngBoundsToNewLayerBounds:function(i,l,d){var m=this._getNewPixelOrigin(d,l);return ne([this.project(i.getSouthWest(),l)._subtract(m),this.project(i.getNorthWest(),l)._subtract(m),this.project(i.getSouthEast(),l)._subtract(m),this.project(i.getNorthEast(),l)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,d){if(!d)return i;var m=this.project(i,l),E=this.getSize().divideBy(2),x=new U(m.subtract(E),m.add(E)),D=this._getBoundsOffset(x,d,l);return Math.abs(D.x)<=1&&Math.abs(D.y)<=1?i:this.unproject(m.add(D),l)},_limitOffset:function(i,l){if(!l)return i;var d=this.getPixelBounds(),m=new U(d.min.add(i),d.max.add(i));return i.add(this._getBoundsOffset(m,l))},_getBoundsOffset:function(i,l,d){var m=ne(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),E=m.min.subtract(i.min),x=m.max.subtract(i.max),D=this._rebound(E.x,-x.x),G=this._rebound(E.y,-x.y);return new re(D,G)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),d=this.getMaxZoom(),m=xe.any3d?this.options.zoomSnap:1;return m&&(i=Math.round(i/m)*m),Math.max(l,Math.min(d,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var d=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var i=this._proxy=Ue("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var d=Zi,m=this._proxy.style[d];En(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),m===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();En(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(l),E=this._getCenterOffset(i)._divideBy(1-1/m);return d.animate!==!0&&!this.getSize().contains(E)?!1:(j(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,d,m){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,Fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Dn(i,l){return new Qe(i,l)}var ln=ot.extend({options:{position:"topright"},initialize:function(i){Q(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),d=this.getPosition(),m=i._controlCorners[d];return Fe(l,"leaflet-control"),d.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),$t=function(i){return new ln(i)};Qe.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ue("div",l+"control-container",this._container);function m(E,x){var D=l+E+" "+l+x;i[E+x]=Ue("div",D,d)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)pt(this._controlCorners[i]);pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ws=ln.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,d,m){return d<m?-1:m<d?1:0}},initialize:function(i,l,d){Q(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in i)this._addLayer(i[m],m);for(m in l)this._addLayer(l[m],m,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return ln.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(v(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Fe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Fe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):mt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=Ue("div",i),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),gi(l),Zr(l);var m=this._section=Ue("section",i+"-list");d&&(this._map.on("click",this.collapse,this),Le(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=Ue("a",i+"-toggle",l);E.href="#",E.title="Layers",E.setAttribute("role","button"),Le(E,{keydown:function(x){x.keyCode===13&&this._expandSafely()},click:function(x){gt(x),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ue("div",i+"-base",m),this._separator=Ue("div",i+"-separator",m),this._overlaysList=Ue("div",i+"-overlays",m),l.appendChild(m)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&v(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,d){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(f(function(m,E){return this.options.sortFunction(m.layer,E.layer,m.name,E.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Gi(this._baseLayersList),Gi(this._overlaysList),this._layerControlInputs=[];var i,l,d,m,E=0;for(d=0;d<this._layers.length;d++)m=this._layers[d],this._addItem(m),l=l||m.overlay,i=i||!m.overlay,E+=m.overlay?0:1;return this.options.hideSingleBase&&(i=i&&E>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(v(i.target)),d=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(i,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=d,m.firstChild},_addItem:function(i){var l=document.createElement("label"),d=this._map.hasLayer(i.layer),m;i.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=d):m=this._createRadioElement("leaflet-base-layers_"+v(this),d),this._layerControlInputs.push(m),m.layerId=v(i.layer),Le(m,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+i.name;var x=document.createElement("span");l.appendChild(x),x.appendChild(m),x.appendChild(E);var D=i.overlay?this._overlaysList:this._baseLayersList;return D.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,d,m=[],E=[];this._handlingClick=!0;for(var x=i.length-1;x>=0;x--)l=i[x],d=this._getLayer(l.layerId).layer,l.checked?m.push(d):l.checked||E.push(d);for(x=0;x<E.length;x++)this._map.hasLayer(E[x])&&this._map.removeLayer(E[x]);for(x=0;x<m.length;x++)this._map.hasLayer(m[x])||this._map.addLayer(m[x]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,d,m=this._map.getZoom(),E=i.length-1;E>=0;E--)l=i[E],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&m<d.options.minZoom||d.options.maxZoom!==void 0&&m>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Le(i,"click",gt),this.expand();var l=this;setTimeout(function(){ut(i,"click",gt),l._preventClick=!1})}}),qs=function(i,l,d){return new Ws(i,l,d)},Qn=ln.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",d=Ue("div",l+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,d,m,E){var x=Ue("a",d,m);return x.innerHTML=i,x.href="#",x.title=l,x.setAttribute("role","button"),x.setAttribute("aria-label",l),gi(x),Le(x,"click",Xt),Le(x,"click",E,this),Le(x,"click",this._refocusOnMap,this),x},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";mt(this._zoomInButton,l),mt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Fe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Fe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Qe.mergeOptions({zoomControl:!0}),Qe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qn,this.addControl(this.zoomControl))});var la=function(i){return new Qn(i)},Ht=ln.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",d=Ue("div",l),m=this.options;return this._addScales(m,l+"-line",d),i.on(m.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),d},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,d){i.metric&&(this._mScale=Ue("div",l,d)),i.imperial&&(this._iScale=Ue("div",l,d))},_update:function(){var i=this._map,l=i.getSize().y/2,d=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/i)},_updateImperial:function(i){var l=i*3.2808399,d,m,E;l>5280?(d=l/5280,m=this._getRoundNum(d),this._updateScale(this._iScale,m+" mi",m/d)):(E=this._getRoundNum(l),this._updateScale(this._iScale,E+" ft",E/l))},_updateScale:function(i,l,d){i.style.width=Math.round(this.options.maxWidth*d)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),d=i/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),pr=function(i){return new Ht(i)},Zs='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Yn=ln.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(xe.inlineSvg?Zs+" ":"")+"Leaflet</a>"},initialize:function(i){Q(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Ue("div","leaflet-control-attribution"),gi(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),i.length&&d.push(i.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Qe.mergeOptions({attributionControl:!0}),Qe.addInitHook(function(){this.options.attributionControl&&new Yn().addTo(this)});var Zl=function(i){return new Yn(i)};ln.Layers=Ws,ln.Zoom=Qn,ln.Scale=Ht,ln.Attribution=Yn,$t.layers=qs,$t.zoom=la,$t.scale=pr,$t.attribution=Zl;var pn=ot.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});pn.addTo=function(i,l){return i.addHandler(l,this),this};var Kr={Events:lt},Qr=xe.touch?"touchstart mousedown":"mousedown",In=nt.extend({options:{clickTolerance:3},initialize:function(i,l,d,m){Q(this,m),this._element=i,this._dragStartTarget=l||i,this._preventOutline=d},enable:function(){this._enabled||(Le(this._dragStartTarget,Qr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(In._dragging===this&&this.finishDrag(!0),ut(this._dragStartTarget,Qr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!pi(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){In._dragging===this&&this.finishDrag();return}if(!(In._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(In._dragging=this,this._preventOutline&&Gn(this._element),Bs(),Ge(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,d=Kn(this._element);this._startPoint=new re(l.clientX,l.clientY),this._startPos=Tn(this._element),this._parentScale=Mn(d);var m=i.type==="mousedown";Le(document,m?"mousemove":"touchmove",this._onMove,this),Le(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,d=new re(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,gt(i),this._moved||(this.fire("dragstart"),this._moved=!0,Fe(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Be(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ut(document,"mousemove touchmove",this._onMove,this),ut(document,"mouseup touchend touchcancel",this._onUp,this),$s(),Zn();var l=this._moved&&this._moving;this._moving=!1,In._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function ts(i,l,d){var m,E=[1,4,2,8],x,D,G,J,ae,_e,Me,qe;for(x=0,_e=i.length;x<_e;x++)i[x]._code=kr(i[x],l);for(G=0;G<4;G++){for(Me=E[G],m=[],x=0,_e=i.length,D=_e-1;x<_e;D=x++)J=i[x],ae=i[D],J._code&Me?ae._code&Me||(qe=Wt(ae,J,Me,l,d),qe._code=kr(qe,l),m.push(qe)):(ae._code&Me&&(qe=Wt(ae,J,Me,l,d),qe._code=kr(qe,l),m.push(qe)),m.push(J));i=m}return i}function Gs(i,l){var d,m,E,x,D,G,J,ae,_e;if(!i||i.length===0)throw new Error("latlngs not passed");h(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Me=Ee([0,0]),qe=Ae(i),Jt=qe.getNorthWest().distanceTo(qe.getSouthWest())*qe.getNorthEast().distanceTo(qe.getNorthWest());Jt<1700&&(Me=Ks(i));var qt=i.length,Fn=[];for(d=0;d<qt;d++){var Pn=Ee(i[d]);Fn.push(l.project(Ee([Pn.lat-Me.lat,Pn.lng-Me.lng])))}for(G=J=ae=0,d=0,m=qt-1;d<qt;m=d++)E=Fn[d],x=Fn[m],D=E.y*x.x-x.y*E.x,J+=(E.x+x.x)*D,ae+=(E.y+x.y)*D,G+=D*3;G===0?_e=Fn[0]:_e=[J/G,ae/G];var lo=l.unproject(se(_e));return Ee([lo.lat+Me.lat,lo.lng+Me.lng])}function Ks(i){for(var l=0,d=0,m=0,E=0;E<i.length;E++){var x=Ee(i[E]);l+=x.lat,d+=x.lng,m++}return Ee([l/m,d/m])}var Qs={__proto__:null,clipPolygon:ts,polygonCenter:Gs,centroid:Ks};function ns(i,l){if(!l||!i.length)return i.slice();var d=l*l;return i=qa(i,d),i=Wa(i,d),i}function ua(i,l,d){return Math.sqrt(Sn(i,l,d,!0))}function Yr(i,l,d){return Sn(i,l,d)}function Wa(i,l){var d=i.length,m=typeof Uint8Array<"u"?Uint8Array:Array,E=new m(d);E[0]=E[d-1]=1,Ys(i,E,l,0,d-1);var x,D=[];for(x=0;x<d;x++)E[x]&&D.push(i[x]);return D}function Ys(i,l,d,m,E){var x=0,D,G,J;for(G=m+1;G<=E-1;G++)J=Sn(i[G],i[m],i[E],!0),J>x&&(D=G,x=J);x>d&&(l[D]=1,Ys(i,l,d,m,D),Ys(i,l,d,D,E))}function qa(i,l){for(var d=[i[0]],m=1,E=0,x=i.length;m<x;m++)Za(i[m],i[E])>l&&(d.push(i[m]),E=m);return E<x-1&&d.push(i[x-1]),d}var Xs;function rs(i,l,d,m,E){var x=m?Xs:kr(i,d),D=kr(l,d),G,J,ae;for(Xs=D;;){if(!(x|D))return[i,l];if(x&D)return!1;G=x||D,J=Wt(i,l,G,d,E),ae=kr(J,d),G===x?(i=J,x=ae):(l=J,D=ae)}}function Wt(i,l,d,m,E){var x=l.x-i.x,D=l.y-i.y,G=m.min,J=m.max,ae,_e;return d&8?(ae=i.x+x*(J.y-i.y)/D,_e=J.y):d&4?(ae=i.x+x*(G.y-i.y)/D,_e=G.y):d&2?(ae=J.x,_e=i.y+D*(J.x-i.x)/x):d&1&&(ae=G.x,_e=i.y+D*(G.x-i.x)/x),new re(ae,_e,E)}function kr(i,l){var d=0;return i.x<l.min.x?d|=1:i.x>l.max.x&&(d|=2),i.y<l.min.y?d|=4:i.y>l.max.y&&(d|=8),d}function Za(i,l){var d=l.x-i.x,m=l.y-i.y;return d*d+m*m}function Sn(i,l,d,m){var E=l.x,x=l.y,D=d.x-E,G=d.y-x,J=D*D+G*G,ae;return J>0&&(ae=((i.x-E)*D+(i.y-x)*G)/J,ae>1?(E=d.x,x=d.y):ae>0&&(E+=D*ae,x+=G*ae)),D=i.x-E,G=i.y-x,m?D*D+G*G:new re(E,x)}function h(i){return!me(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function y(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),h(i)}function I(i,l){var d,m,E,x,D,G,J,ae;if(!i||i.length===0)throw new Error("latlngs not passed");h(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var _e=Ee([0,0]),Me=Ae(i),qe=Me.getNorthWest().distanceTo(Me.getSouthWest())*Me.getNorthEast().distanceTo(Me.getNorthWest());qe<1700&&(_e=Ks(i));var Jt=i.length,qt=[];for(d=0;d<Jt;d++){var Fn=Ee(i[d]);qt.push(l.project(Ee([Fn.lat-_e.lat,Fn.lng-_e.lng])))}for(d=0,m=0;d<Jt-1;d++)m+=qt[d].distanceTo(qt[d+1])/2;if(m===0)ae=qt[0];else for(d=0,x=0;d<Jt-1;d++)if(D=qt[d],G=qt[d+1],E=D.distanceTo(G),x+=E,x>m){J=(x-m)/E,ae=[G.x-J*(G.x-D.x),G.y-J*(G.y-D.y)];break}var Pn=l.unproject(se(ae));return Ee([Pn.lat+_e.lat,Pn.lng+_e.lng])}var A={__proto__:null,simplify:ns,pointToSegmentDistance:ua,closestPointOnSegment:Yr,clipSegment:rs,_getEdgeIntersection:Wt,_getBitCode:kr,_sqClosestPointOnSegment:Sn,isFlat:h,_flat:y,polylineCenter:I},q={project:function(i){return new re(i.lng,i.lat)},unproject:function(i){return new Ie(i.y,i.x)},bounds:new U([-180,-90],[180,90])},te={R:6378137,R_MINOR:6356752314245179e-9,bounds:new U([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,d=this.R,m=i.lat*l,E=this.R_MINOR/d,x=Math.sqrt(1-E*E),D=x*Math.sin(m),G=Math.tan(Math.PI/4-m/2)/Math.pow((1-D)/(1+D),x/2);return m=-d*Math.log(Math.max(G,1e-10)),new re(i.lng*l*d,m)},unproject:function(i){for(var l=180/Math.PI,d=this.R,m=this.R_MINOR/d,E=Math.sqrt(1-m*m),x=Math.exp(-i.y/d),D=Math.PI/2-2*Math.atan(x),G=0,J=.1,ae;G<15&&Math.abs(J)>1e-7;G++)ae=E*Math.sin(D),ae=Math.pow((1-ae)/(1+ae),E/2),J=Math.PI/2-2*Math.atan(x*ae)-D,D+=J;return new Ie(D*l,i.x*l/d)}},pe={__proto__:null,LonLat:q,Mercator:te,SphericalMercator:Ot},at=a({},Ke,{code:"EPSG:3395",projection:te,transformation:(function(){var i=.5/(Math.PI*te.R);return Tr(i,.5,-i,.5)})()}),Vt=a({},Ke,{code:"EPSG:4326",projection:q,transformation:Tr(1/180,1,-1/180,.5)}),Je=a({},Ze,{projection:q,transformation:Tr(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var d=l.lng-i.lng,m=l.lat-i.lat;return Math.sqrt(d*d+m*m)},infinite:!0});Ze.Earth=Ke,Ze.EPSG3395=at,Ze.EPSG3857=Ir,Ze.EPSG900913=bi,Ze.EPSG4326=Vt,Ze.Simple=Je;var ct=nt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[v(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[v(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Qe.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=v(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=v(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return v(i)in this._layers},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},_addLayers:function(i){i=i?me(i)?i:[i]:[];for(var l=0,d=i.length;l<d;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[v(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=v(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,d=this._getZoomSpan();for(var m in this._zoomBoundLayers){var E=this._zoomBoundLayers[m].options;i=E.minZoom===void 0?i:Math.min(i,E.minZoom),l=E.maxZoom===void 0?l:Math.max(l,E.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var yt=ct.extend({initialize:function(i,l){Q(this,l),this._layers={};var d,m;if(i)for(d=0,m=i.length;d<m;d++)this.addLayer(i[d])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),d,m;for(d in this._layers)m=this._layers[d],m[i]&&m[i].apply(m,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return v(i)}}),Xn=function(i,l){return new yt(i,l)},kt=yt.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),yt.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),yt.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new ye;for(var l in this._layers){var d=this._layers[l];i.extend(d.getBounds?d.getBounds():d.getLatLng())}return i}}),is=function(i,l){return new kt(i,l)},mr=ot.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){Q(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var d=this._getIconUrl(i);if(!d){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(m,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(i,l){var d=this.options,m=d[l+"Size"];typeof m=="number"&&(m=[m,m]);var E=se(m),x=se(l==="shadow"&&d.shadowAnchor||d.iconAnchor||E&&E.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(d.className||""),x&&(i.style.marginLeft=-x.x+"px",i.style.marginTop=-x.y+"px"),E&&(i.style.width=E.x+"px",i.style.height=E.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return xe.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function uc(i){return new mr(i)}var Js=mr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Js.imagePath!="string"&&(Js.imagePath=this._detectIconPath()),(this.options.imagePath||Js.imagePath)+mr.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(d,m,E){var x=m.exec(d);return x&&x[E]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Ue("div","leaflet-default-icon-path",document.body),l=fi(i,"background-image")||fi(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Gl=pn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new In(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Fe(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,d=l._map,m=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,x=Tn(l._icon),D=d.getPixelBounds(),G=d.getPixelOrigin(),J=ne(D.min._subtract(G).add(E),D.max._subtract(G).subtract(E));if(!J.contains(x)){var ae=se((Math.max(J.max.x,x.x)-J.max.x)/(D.max.x-J.max.x)-(Math.min(J.min.x,x.x)-J.min.x)/(D.min.x-J.min.x),(Math.max(J.max.y,x.y)-J.max.y)/(D.max.y-J.max.y)-(Math.min(J.min.y,x.y)-J.min.y)/(D.min.y-J.min.y)).multiplyBy(m);d.panBy(ae,{animate:!1}),this._draggable._newPos._add(ae),this._draggable._startPos._add(ae),Be(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=j(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&($(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,d=l._shadow,m=Tn(l._icon),E=l._map.layerPointToLatLng(m);d&&Be(d,m),l._latlng=E,i.latlng=E,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){$(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Xr=ct.extend({options:{icon:new Js,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){Q(this,l),this._latlng=Ee(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=Ee(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=i.icon.createIcon(this._icon),m=!1;d!==this._icon&&(this._icon&&this._removeIcon(),m=!0,i.title&&(d.title=i.title),d.tagName==="IMG"&&(d.alt=i.alt||"")),Fe(d,l),i.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Le(d,"focus",this._panOnFocus,this);var E=i.icon.createShadow(this._shadow),x=!1;E!==this._shadow&&(this._removeShadow(),x=!0),E&&(Fe(E,l),E.alt=""),this._shadow=E,i.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&x&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ut(this._icon,"focus",this._panOnFocus,this),pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Be(this._icon,i),this._shadow&&Be(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Gl)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Gl(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&wt(this._icon,i),this._shadow&&wt(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,d=l.iconSize?se(l.iconSize):se(0,0),m=l.iconAnchor?se(l.iconAnchor):se(0,0);i.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:d.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fd(i,l){return new Xr(i,l)}var _i=ct.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return Q(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ga=_i.extend({options:{fill:!0,radius:10},initialize:function(i,l){Q(this,l),this._latlng=Ee(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=Ee(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return _i.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,d=this._clickTolerance(),m=[i+d,l+d];this._pxBounds=new U(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function cc(i,l){return new Ga(i,l)}var Ka=Ga.extend({initialize:function(i,l,d){if(typeof l=="number"&&(l=a({},d,{radius:l})),Q(this,l),this._latlng=Ee(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new ye(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:_i.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,d=this._map,m=d.options.crs;if(m.distance===Ke.distance){var E=Math.PI/180,x=this._mRadius/Ke.R/E,D=d.project([l+x,i]),G=d.project([l-x,i]),J=D.add(G).divideBy(2),ae=d.unproject(J).lat,_e=Math.acos((Math.cos(x*E)-Math.sin(l*E)*Math.sin(ae*E))/(Math.cos(l*E)*Math.cos(ae*E)))/E;(isNaN(_e)||_e===0)&&(_e=x/Math.cos(Math.PI/180*l)),this._point=J.subtract(d.getPixelOrigin()),this._radius=isNaN(_e)?0:J.x-d.project([ae,i-_e]).x,this._radiusY=J.y-D.y}else{var Me=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(Me).x}this._updateBounds()}});function ca(i,l,d){return new Ka(i,l,d)}var Vn=_i.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){Q(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,d=null,m=Sn,E,x,D=0,G=this._parts.length;D<G;D++)for(var J=this._parts[D],ae=1,_e=J.length;ae<_e;ae++){E=J[ae-1],x=J[ae];var Me=m(i,E,x,!0);Me<l&&(l=Me,d=m(i,E,x))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return I(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=Ee(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new ye,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return h(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],d=h(i),m=0,E=i.length;m<E;m++)d?(l[m]=Ee(i[m]),this._bounds.extend(l[m])):l[m]=this._convertLatLngs(i[m]);return l},_project:function(){var i=new U;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new re(i,i);this._rawPxBounds&&(this._pxBounds=new U([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,d){var m=i[0]instanceof Ie,E=i.length,x,D;if(m){for(D=[],x=0;x<E;x++)D[x]=this._map.latLngToLayerPoint(i[x]),d.extend(D[x]);l.push(D)}else for(x=0;x<E;x++)this._projectLatlngs(i[x],l,d)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,m,E,x,D,G,J;for(d=0,E=0,x=this._rings.length;d<x;d++)for(J=this._rings[d],m=0,D=J.length;m<D-1;m++)G=rs(J[m],J[m+1],i,m,!0),G&&(l[E]=l[E]||[],l[E].push(G[0]),(G[1]!==J[m+1]||m===D-2)&&(l[E].push(G[1]),E++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,d=0,m=i.length;d<m;d++)i[d]=ns(i[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var d,m,E,x,D,G,J=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(d=0,x=this._parts.length;d<x;d++)for(G=this._parts[d],m=0,D=G.length,E=D-1;m<D;E=m++)if(!(!l&&m===0)&&ua(i,G[E],G[m])<=J)return!0;return!1}});function pd(i,l){return new Vn(i,l)}Vn._flat=y;var Jr=Vn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Gs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=Vn.prototype._convertLatLngs.call(this,i),d=l.length;return d>=2&&l[0]instanceof Ie&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(i){Vn.prototype._setLatLngs.call(this,i),h(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return h(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,d=new re(l,l);if(i=new U(i.min.subtract(d),i.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,E=this._rings.length,x;m<E;m++)x=ts(this._rings[m],i,!0),x.length&&this._parts.push(x)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,d,m,E,x,D,G,J,ae;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(x=0,J=this._parts.length;x<J;x++)for(d=this._parts[x],D=0,ae=d.length,G=ae-1;D<ae;G=D++)m=d[D],E=d[G],m.y>i.y!=E.y>i.y&&i.x<(E.x-m.x)*(i.y-m.y)/(E.y-m.y)+m.x&&(l=!l);return l||Vn.prototype._containsPoint.call(this,i,!0)}});function md(i,l){return new Jr(i,l)}var Rr=kt.extend({initialize:function(i,l){Q(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=me(i)?i:i.features,d,m,E;if(l){for(d=0,m=l.length;d<m;d++)E=l[d],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var x=this.options;if(x.filter&&!x.filter(i))return this;var D=eo(i,x);return D?(D.feature=el(i),D.defaultOptions=D.options,this.resetStyle(D),x.onEachFeature&&x.onEachFeature(i,D),this.addLayer(D)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=a({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function eo(i,l){var d=i.type==="Feature"?i.geometry:i,m=d?d.coordinates:null,E=[],x=l&&l.pointToLayer,D=l&&l.coordsToLatLng||Ya,G,J,ae,_e;if(!m&&!d)return null;switch(d.type){case"Point":return G=D(m),Qa(x,i,G,l);case"MultiPoint":for(ae=0,_e=m.length;ae<_e;ae++)G=D(m[ae]),E.push(Qa(x,i,G,l));return new kt(E);case"LineString":case"MultiLineString":return J=ha(m,d.type==="LineString"?0:1,D),new Vn(J,l);case"Polygon":case"MultiPolygon":return J=ha(m,d.type==="Polygon"?1:2,D),new Jr(J,l);case"GeometryCollection":for(ae=0,_e=d.geometries.length;ae<_e;ae++){var Me=eo({geometry:d.geometries[ae],type:"Feature",properties:i.properties},l);Me&&E.push(Me)}return new kt(E);case"FeatureCollection":for(ae=0,_e=d.features.length;ae<_e;ae++){var qe=eo(d.features[ae],l);qe&&E.push(qe)}return new kt(E);default:throw new Error("Invalid GeoJSON object.")}}function Qa(i,l,d,m){return i?i(l,d):new Xr(d,m&&m.markersInheritOptions&&m)}function Ya(i){return new Ie(i[1],i[0],i[2])}function ha(i,l,d){for(var m=[],E=0,x=i.length,D;E<x;E++)D=l?ha(i[E],l-1,d):(d||Ya)(i[E]),m.push(D);return m}function Xa(i,l){return i=Ee(i),i.alt!==void 0?[k(i.lng,l),k(i.lat,l),k(i.alt,l)]:[k(i.lng,l),k(i.lat,l)]}function Ja(i,l,d,m){for(var E=[],x=0,D=i.length;x<D;x++)E.push(l?Ja(i[x],h(i[x])?0:l-1,d,m):Xa(i[x],m));return!l&&d&&E.length>0&&E.push(E[0].slice()),E}function to(i,l){return i.feature?a({},i.feature,{geometry:l}):el(l)}function el(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Kl={toGeoJSON:function(i){return to(this,{type:"Point",coordinates:Xa(this.getLatLng(),i)})}};Xr.include(Kl),Ka.include(Kl),Ga.include(Kl),Vn.include({toGeoJSON:function(i){var l=!h(this._latlngs),d=Ja(this._latlngs,l?1:0,!1,i);return to(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Jr.include({toGeoJSON:function(i){var l=!h(this._latlngs),d=l&&!h(this._latlngs[0]),m=Ja(this._latlngs,d?2:l?1:0,!0,i);return l||(m=[m]),to(this,{type:(d?"Multi":"")+"Polygon",coordinates:m})}}),yt.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(i).geometry.coordinates)}),to(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var d=l==="GeometryCollection",m=[];return this.eachLayer(function(E){if(E.toGeoJSON){var x=E.toGeoJSON(i);if(d)m.push(x.geometry);else{var D=el(x);D.type==="FeatureCollection"?m.push.apply(m,D.features):m.push(D)}}}),d?to(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function hc(i,l){return new Rr(i,l)}var gr=hc,vi=ct.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,d){this._url=i,this._bounds=Ae(l),Q(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&qr(this._image),this},bringToBack:function(){return this._map&&dr(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Ae(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:Ue("img");if(Fe(l,"leaflet-image-layer"),this._zoomAnimated&&Fe(l,"leaflet-zoom-animated"),this.options.className&&Fe(l,this.options.className),l.onselectstart=C,l.onmousemove=C,l.onload=f(this.fire,this,"load"),l.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;En(this._image,d,l)},_reset:function(){var i=this._image,l=new U(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();Be(i,l.min),i.style.width=d.x+"px",i.style.height=d.y+"px"},_updateOpacity:function(){wt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),dc=function(i,l,d){return new vi(i,l,d)},Ql=vi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:Ue("video");if(Fe(l,"leaflet-image-layer"),this._zoomAnimated&&Fe(l,"leaflet-zoom-animated"),this.options.className&&Fe(l,this.options.className),l.onselectstart=C,l.onmousemove=C,l.onloadeddata=f(this.fire,this,"load"),i){for(var d=l.getElementsByTagName("source"),m=[],E=0;E<d.length;E++)m.push(d[E].src);this._url=d.length>0?m:[l.src];return}me(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var x=0;x<this._url.length;x++){var D=Ue("source");D.src=this._url[x],l.appendChild(D)}}});function fc(i,l,d){return new Ql(i,l,d)}var Yl=vi.extend({_initImage:function(){var i=this._image=this._url;Fe(i,"leaflet-image-layer"),this._zoomAnimated&&Fe(i,"leaflet-zoom-animated"),this.options.className&&Fe(i,this.options.className),i.onselectstart=C,i.onmousemove=C}});function Xl(i,l,d){return new Yl(i,l,d)}var Lr=ct.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof Ie||me(i))?(this._latlng=Ee(i),Q(this,l)):(Q(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&wt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&wt(this._container,1),this.bringToFront(),this.options.interactive&&(Fe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(wt(this._container,0),this._removeTimeout=setTimeout(f(pt,void 0,this._container),200)):pt(this._container),this.options.interactive&&(mt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=Ee(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&qr(this._container),this},bringToBack:function(){return this._map&&dr(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof kt){l=null;var d=this._source._layers;for(var m in d)if(d[m]._map){l=d[m];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=se(this.options.offset),d=this._getAnchor();this._zoomAnimated?Be(this._container,i.add(d)):l=l.add(i).add(d);var m=this._containerBottom=-l.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=m+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});Qe.include({_initOverlay:function(i,l,d,m){var E=l;return E instanceof i||(E=new i(m).setContent(l)),d&&E.setLatLng(d),E}}),ct.include({_initOverlay:function(i,l,d,m){var E=d;return E instanceof i?(Q(E,m),E._source=this):(E=l&&!m?l:new i(m,this),E.setContent(d)),E}});var tl=Lr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Lr.prototype.openOn.call(this,i)},onAdd:function(i){Lr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof _i||this._source.on("preclick",fn))},onRemove:function(i){Lr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof _i||this._source.off("preclick",fn))},getEvents:function(){var i=Lr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=Ue("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ue("div",i+"-content-wrapper",l);if(this._contentNode=Ue("div",i+"-content",d),gi(l),Zr(this._contentNode),Le(l,"contextmenu",fn),this._tipContainer=Ue("div",i+"-tip-container",l),this._tip=Ue("div",i+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Ue("a",i+"-close-button",l);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',Le(m,"click",function(E){gt(E),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var d=i.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var m=i.offsetHeight,E=this.options.maxHeight,x="leaflet-popup-scrolled";E&&m>E?(l.height=E+"px",Fe(i,x)):mt(i,x),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),d=this._getAnchor();Be(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(fi(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,m=this._containerWidth,E=new re(this._containerLeft,-d-this._containerBottom);E._add(Tn(this._container));var x=i.layerPointToContainerPoint(E),D=se(this.options.autoPanPadding),G=se(this.options.autoPanPaddingTopLeft||D),J=se(this.options.autoPanPaddingBottomRight||D),ae=i.getSize(),_e=0,Me=0;x.x+m+J.x>ae.x&&(_e=x.x+m-ae.x+J.x),x.x-_e-G.x<0&&(_e=x.x-G.x),x.y+d+J.y>ae.y&&(Me=x.y+d-ae.y+J.y),x.y-Me-G.y<0&&(Me=x.y-G.y),(_e||Me)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([_e,Me]))}},_getAnchor:function(){return se(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),no=function(i,l){return new tl(i,l)};Qe.mergeOptions({closePopupOnClick:!0}),Qe.include({openPopup:function(i,l,d){return this._initOverlay(tl,i,l,d).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),ct.include({bindPopup:function(i,l){return this._popup=this._initOverlay(tl,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof kt||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Xt(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof _i)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var ro=Lr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Lr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Lr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Lr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ue("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,d,m=this._map,E=this._container,x=m.latLngToContainerPoint(m.getCenter()),D=m.layerPointToContainerPoint(i),G=this.options.direction,J=E.offsetWidth,ae=E.offsetHeight,_e=se(this.options.offset),Me=this._getAnchor();G==="top"?(l=J/2,d=ae):G==="bottom"?(l=J/2,d=0):G==="center"?(l=J/2,d=ae/2):G==="right"?(l=0,d=ae/2):G==="left"?(l=J,d=ae/2):D.x<x.x?(G="right",l=0,d=ae/2):(G="left",l=J+(_e.x+Me.x)*2,d=ae/2),i=i.subtract(se(l,d,!0)).add(_e).add(Me),mt(E,"leaflet-tooltip-right"),mt(E,"leaflet-tooltip-left"),mt(E,"leaflet-tooltip-top"),mt(E,"leaflet-tooltip-bottom"),Fe(E,"leaflet-tooltip-"+G),Be(E,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&wt(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return se(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),da=function(i,l){return new ro(i,l)};Qe.include({openTooltip:function(i,l,d){return this._initOverlay(ro,i,l,d).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),ct.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ro,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof kt||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(Le(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Le(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,d,m;this._tooltip.options.sticky&&i.originalEvent&&(d=this._map.mouseEventToContainerPoint(i.originalEvent),m=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(l)}});var nl=mr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Gi(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var m=se(d.bgPos);l.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function pc(i){return new nl(i)}mr.Default=Js;var yi=ct.extend({options:{tileSize:256,opacity:1,updateWhenIdle:xe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){Q(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),pt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(qr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(dr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=T(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof re?i:new re(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,d=-i(-1/0,1/0),m=0,E=l.length,x;m<E;m++)x=l[m].style.zIndex,l[m]!==this._container&&x&&(d=i(d,+x));isFinite(d)&&(this.options.zIndex=d+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!xe.ielt9){wt(this._container,this.options.opacity);var i=+new Date,l=!1,d=!1;for(var m in this._tiles){var E=this._tiles[m];if(!(!E.current||!E.loaded)){var x=Math.min(1,(i-E.loaded)/200);wt(E.el,x),x<1?l=!0:(E.active?d=!0:this._onOpaqueTile(E),E.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&($(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:C,_initContainer:function(){this._container||(this._container=Ue("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===i?(this._levels[d].el.style.zIndex=l-Math.abs(i-d),this._onUpdateLevel(d)):(pt(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var m=this._levels[i],E=this._map;return m||(m=this._levels[i]={},m.el=Ue("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=l,m.origin=E.project(E.unproject(E.getPixelOrigin()),i).round(),m.zoom=i,this._setZoomTransform(m,E.getCenter(),E.getZoom()),C(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:C,_onRemoveLevel:C,_onCreateLevel:C,_pruneTiles:function(){if(this._map){var i,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var m=l.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)pt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,d,m){var E=Math.floor(i/2),x=Math.floor(l/2),D=d-1,G=new re(+E,+x);G.z=+D;var J=this._tileCoordsToKey(G),ae=this._tiles[J];return ae&&ae.active?(ae.retain=!0,!0):(ae&&ae.loaded&&(ae.retain=!0),D>m?this._retainParent(E,x,D,m):!1)},_retainChildren:function(i,l,d,m){for(var E=2*i;E<2*i+2;E++)for(var x=2*l;x<2*l+2;x++){var D=new re(E,x);D.z=d+1;var G=this._tileCoordsToKey(D),J=this._tiles[G];if(J&&J.active){J.retain=!0;continue}else J&&J.loaded&&(J.retain=!0);d+1<m&&this._retainChildren(E,x,d+1,m)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,d,m){var E=Math.round(l);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var x=this.options.updateWhenZooming&&E!==this._tileZoom;(!m||x)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(i),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],i,l)},_setZoomTransform:function(i,l,d){var m=this._map.getZoomScale(d,i.zoom),E=i.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(l,d)).round();xe.any3d?En(i.el,E,m):Be(i.el,E)},_resetGrid:function(){var i=this._map,l=i.options.crs,d=this._tileSize=this.getTileSize(),m=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],m).x/d.x),Math.ceil(i.project([0,l.wrapLng[1]],m).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],m).y/d.x),Math.ceil(i.project([l.wrapLat[1],0],m).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),m=l.getZoomScale(d,this._tileZoom),E=l.project(i,this._tileZoom).floor(),x=l.getSize().divideBy(m*2);return new U(E.subtract(x),E.add(x))},_update:function(i){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(i),E=this._pxBoundsToTileRange(m),x=E.getCenter(),D=[],G=this.options.keepBuffer,J=new U(E.getBottomLeft().subtract([G,-G]),E.getTopRight().add([G,-G]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ae in this._tiles){var _e=this._tiles[ae].coords;(_e.z!==this._tileZoom||!J.contains(new re(_e.x,_e.y)))&&(this._tiles[ae].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(i,d);return}for(var Me=E.min.y;Me<=E.max.y;Me++)for(var qe=E.min.x;qe<=E.max.x;qe++){var Jt=new re(qe,Me);if(Jt.z=this._tileZoom,!!this._isValidTile(Jt)){var qt=this._tiles[this._tileCoordsToKey(Jt)];qt?qt.current=!0:D.push(Jt)}}if(D.sort(function(Pn,lo){return Pn.distanceTo(x)-lo.distanceTo(x)}),D.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Fn=document.createDocumentFragment();for(qe=0;qe<D.length;qe++)this._addTile(D[qe],Fn);this._level.el.appendChild(Fn)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(i.x<d.min.x||i.x>d.max.x)||!l.wrapLat&&(i.y<d.min.y||i.y>d.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(i);return Ae(this.options.bounds).overlaps(m)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,d=this.getTileSize(),m=i.scaleBy(d),E=m.add(d),x=l.unproject(m,i.z),D=l.unproject(E,i.z);return[x,D]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),d=new ye(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),d=new re(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(i){var l=this._tiles[i];l&&(pt(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Fe(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=C,i.onmousemove=C,xe.ielt9&&this.options.opacity<1&&wt(i,this.options.opacity)},_addTile:function(i,l){var d=this._getTilePos(i),m=this._tileCoordsToKey(i),E=this.createTile(this._wrapCoords(i),f(this._tileReady,this,i));this._initTile(E),this.createTile.length<2&&j(f(this._tileReady,this,i,null,E)),Be(E,d),this._tiles[m]={el:E,coords:i,current:!0},l.appendChild(E),this.fire("tileloadstart",{tile:E,coords:i})},_tileReady:function(i,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:i});var m=this._tileCoordsToKey(i);d=this._tiles[m],d&&(d.loaded=+new Date,this._map._fadeAnimated?(wt(d.el,0),$(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(Fe(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),xe.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new re(this._wrapX?S(i.x,this._wrapX):i.x,this._wrapY?S(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new U(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function io(i){return new yi(i)}var wi=yi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=Q(this,l),l.detectRetina&&xe.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var d=document.createElement("img");return Le(d,"load",f(this._tileOnLoad,this,l,d)),Le(d,"error",f(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(i),d},getTileUrl:function(i){var l={r:xe.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=d),l["-y"]=d}return de(this._url,a(l,this.options))},_tileOnLoad:function(i,l){xe.ielt9?setTimeout(f(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,d){var m=this.options.errorTileUrl;m&&l.getAttribute("src")!==m&&(l.src=m),i(d,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,m=this.options.zoomOffset;return d&&(i=l-i),i+m},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=C,l.onerror=C,!l.complete)){l.src=be;var d=this._tiles[i].coords;pt(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",be),yi.prototype._removeTile.call(this,i)},_tileReady:function(i,l,d){if(!(!this._map||d&&d.getAttribute("src")===be))return yi.prototype._tileReady.call(this,i,l,d)}});function Jl(i,l){return new wi(i,l)}var fa=wi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var d=a({},this.defaultWmsParams);for(var m in l)m in this.options||(d[m]=l[m]);l=Q(this,l);var E=l.detectRetina&&xe.retina?2:1,x=this.getTileSize();d.width=x.x*E,d.height=x.y*E,this.wmsParams=d},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,wi.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),d=this._crs,m=ne(d.project(l[0]),d.project(l[1])),E=m.min,x=m.max,D=(this._wmsVersion>=1.3&&this._crs===Vt?[E.y,E.x,x.y,x.x]:[E.x,E.y,x.x,x.y]).join(","),G=wi.prototype.getTileUrl.call(this,i);return G+Z(this.wmsParams,G,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+D},setParams:function(i,l){return a(this.wmsParams,i),l||this.redraw(),this}});function mc(i,l){return new fa(i,l)}wi.WMS=fa,Jl.wms=mc;var Nr=ct.extend({options:{padding:.1},initialize:function(i){Q(this,i),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var d=this._map.getZoomScale(l,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,l),x=m.multiplyBy(-d).add(E).subtract(this._map._getNewPixelOrigin(i,l));xe.any3d?En(this._container,x,d):Be(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new U(d,d.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),eu=Nr.extend({options:{tolerance:0},getEvents:function(){var i=Nr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Nr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Le(i,"mousemove",this._onMouseMove,this),Le(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Le(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){$(this._redrawRequest),delete this._ctx,pt(this._container),ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nr.prototype._update.call(this);var i=this._bounds,l=this._container,d=i.getSize(),m=xe.retina?2:1;Be(l,i.min),l.width=m*d.x,l.height=m*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",xe.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Nr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[v(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,d=l.next,m=l.prev;d?d.prev=m:this._drawLast=m,m?m.next=d:this._drawFirst=d,delete i._order,delete this._layers[v(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),d=[],m,E;for(E=0;E<l.length;E++){if(m=Number(l[E]),isNaN(m))return;d.push(m)}i.options._dashArray=d}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new U,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)i=m.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var d,m,E,x,D=i._parts,G=D.length,J=this._ctx;if(G){for(J.beginPath(),d=0;d<G;d++){for(m=0,E=D[d].length;m<E;m++)x=D[d][m],J[m?"lineTo":"moveTo"](x.x,x.y);l&&J.closePath()}this._fillStroke(J,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,d=this._ctx,m=Math.max(Math.round(i._radius),1),E=(Math.max(Math.round(i._radiusY),1)||m)/m;E!==1&&(d.save(),d.scale(1,E)),d.beginPath(),d.arc(l.x,l.y/E,m,0,Math.PI*2,!1),E!==1&&d.restore(),this._fillStroke(d,i)}},_fillStroke:function(i,l){var d=l.options;d.fill&&(i.globalAlpha=d.fillOpacity,i.fillStyle=d.fillColor||d.color,i.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=d.opacity,i.lineWidth=d.weight,i.strokeStyle=d.color,i.lineCap=d.lineCap,i.lineJoin=d.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),d,m,E=this._drawFirst;E;E=E.next)d=E.layer,d.options.interactive&&d._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);this._fireEvent(m?[m]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(mt(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var d,m,E=this._drawFirst;E;E=E.next)d=E.layer,d.options.interactive&&d._containsPoint(l)&&(m=d);m!==this._hoveredLayer&&(this._handleMouseOut(i),m&&(Fe(this._container,"leaflet-interactive"),this._fireEvent([m],i,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,d){this._map._fireDOMEvent(l,d||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var d=l.next,m=l.prev;if(d)d.prev=m;else return;m?m.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var d=l.next,m=l.prev;if(m)m.next=d;else return;d?d.prev=m:m&&(this._drawLast=m),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function tu(i){return xe.canvas?new eu(i):null}var so=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),gc={_initContainer:function(){this._container=Ue("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Nr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=so("shape");Fe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=so("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[v(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;pt(l),i.removeInteractiveTarget(l),delete this._layers[v(i)]},_updateStyle:function(i){var l=i._stroke,d=i._fill,m=i.options,E=i._container;E.stroked=!!m.stroke,E.filled=!!m.fill,m.stroke?(l||(l=i._stroke=so("stroke")),E.appendChild(l),l.weight=m.weight+"px",l.color=m.color,l.opacity=m.opacity,m.dashArray?l.dashStyle=me(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=m.lineCap.replace("butt","flat"),l.joinstyle=m.lineJoin):l&&(E.removeChild(l),i._stroke=null),m.fill?(d||(d=i._fill=so("fill")),E.appendChild(d),d.color=m.fillColor||m.color,d.opacity=m.fillOpacity):d&&(E.removeChild(d),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),d=Math.round(i._radius),m=Math.round(i._radiusY||d);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+m+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){qr(i._container)},_bringToBack:function(i){dr(i._container)}},_r=xe.vml?so:Oi,ss=Nr.extend({_initContainer:function(){this._container=_r("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=_r("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pt(this._container),ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nr.prototype._update.call(this);var i=this._bounds,l=i.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),Be(d,i.min),d.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=_r("path");i.options.className&&Fe(l,i.options.className),i.options.interactive&&Fe(l,"leaflet-interactive"),this._updateStyle(i),this._layers[v(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){pt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[v(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,d=i.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,xs(i._parts,l))},_updateCircle:function(i){var l=i._point,d=Math.max(Math.round(i._radius),1),m=Math.max(Math.round(i._radiusY),1)||d,E="a"+d+","+m+" 0 1,0 ",x=i._empty()?"M0 0":"M"+(l.x-d)+","+l.y+E+d*2+",0 "+E+-d*2+",0 ";this._setPath(i,x)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){qr(i._path)},_bringToBack:function(i){dr(i._path)}});xe.vml&&ss.include(gc);function rl(i){return xe.svg||xe.vml?new ss(i):null}Qe.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&tu(i)||rl(i)}});var _c=Jr.extend({initialize:function(i,l){Jr.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Ae(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function gd(i,l){return new _c(i,l)}ss.create=_r,ss.pointsToPath=xs,Rr.geometryToLayer=eo,Rr.coordsToLatLng=Ya,Rr.coordsToLatLngs=ha,Rr.latLngToCoords=Xa,Rr.latLngsToCoords=Ja,Rr.getFeature=to,Rr.asFeature=el,Qe.mergeOptions({boxZoom:!0});var oo=pn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Le(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ge(),Bs(),this._startPoint=this._map.mouseEventToContainerPoint(i),Le(document,{contextmenu:Xt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Ue("div","leaflet-zoom-box",this._container),Fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new U(this._point,this._startPoint),d=l.getSize();Be(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(pt(this._box),mt(this._container,"leaflet-crosshair")),Zn(),$s(),ut(document,{contextmenu:Xt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var l=new ye(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Qe.addInitHook("addHandler","boxZoom",oo),Qe.mergeOptions({doubleClickZoom:!0});var vc=pn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,d=l.getZoom(),m=l.options.zoomDelta,E=i.originalEvent.shiftKey?d-m:d+m;l.options.doubleClickZoom==="center"?l.setZoom(E):l.setZoomAround(i.containerPoint,E)}});Qe.addInitHook("addHandler","doubleClickZoom",vc),Qe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var nu=pn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new In(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ae(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),d=this._initialWorldOffset,m=this._draggable._newPos.x,E=(m-l+d)%i+l-d,x=(m+l+d)%i-l-d,D=Math.abs(E+d)<Math.abs(x+d)?E:x;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=D},_onDragEnd:function(i){var l=this._map,d=l.options,m=!d.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),m)l.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),x=(this._lastTime-this._times[0])/1e3,D=d.easeLinearity,G=E.multiplyBy(D/x),J=G.distanceTo([0,0]),ae=Math.min(d.inertiaMaxSpeed,J),_e=G.multiplyBy(ae/J),Me=ae/(d.inertiaDeceleration*D),qe=_e.multiplyBy(-Me/2).round();!qe.x&&!qe.y?l.fire("moveend"):(qe=l._limitOffset(qe,l.options.maxBounds),j(function(){l.panBy(qe,{duration:Me,easeLinearity:D,noMoveStart:!0,animate:!0})}))}}});Qe.addInitHook("addHandler","dragging",nu),Qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ru=pn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Le(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,d=i.scrollTop||l.scrollTop,m=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(m,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},d=this.keyCodes,m,E;for(m=0,E=d.left.length;m<E;m++)l[d.left[m]]=[-1*i,0];for(m=0,E=d.right.length;m<E;m++)l[d.right[m]]=[i,0];for(m=0,E=d.down.length;m<E;m++)l[d.down[m]]=[0,i];for(m=0,E=d.up.length;m<E;m++)l[d.up[m]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},d=this.keyCodes,m,E;for(m=0,E=d.zoomIn.length;m<E;m++)l[d.zoomIn[m]]=i;for(m=0,E=d.zoomOut.length;m<E;m++)l[d.zoomOut[m]]=-i},_addHooks:function(){Le(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,d=this._map,m;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(m=this._panKeys[l],i.shiftKey&&(m=se(m).multiplyBy(3)),d.options.maxBounds&&(m=d._limitOffset(se(m),d.options.maxBounds)),d.options.worldCopyJump){var E=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(m)));d.panTo(E)}else d.panBy(m)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Xt(i)}}});Qe.addInitHook("addHandler","keyboard",ru),Qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vt=pn.extend({addHooks:function(){Le(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ut(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=Ha(i),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var m=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),m),Xt(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),d=this._map.options.zoomSnap||0;i._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,x=d?Math.ceil(E/d)*d:E,D=i._limitZoom(l+(this._delta>0?x:-x))-l;this._delta=0,this._startTime=null,D&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+D):i.setZoomAround(this._lastMousePos,l+D))}});Qe.addInitHook("addHandler","scrollWheelZoom",vt);var iu=600;Qe.mergeOptions({tapHold:xe.touchNative&&xe.safari&&xe.mobile,tapTolerance:15});var pa=pn.extend({addHooks:function(){Le(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new re(l.clientX,l.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(Le(document,"touchend",gt),Le(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),iu),Le(document,"touchend touchcancel contextmenu",this._cancel,this),Le(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){ut(document,"touchend",gt),ut(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),ut(document,"touchend touchcancel contextmenu",this._cancel,this),ut(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new re(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var d=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Qe.addInitHook("addHandler","tapHold",pa),Qe.mergeOptions({touchZoom:xe.touch,bounceAtZoomLimits:!0});var ao=pn.extend({addHooks:function(){Fe(this._map._container,"leaflet-touch-zoom"),Le(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(m)._divideBy(2))),this._startDist=d.distanceTo(m),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Le(document,"touchmove",this._onTouchMove,this),Le(document,"touchend touchcancel",this._onTouchEnd,this),gt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]),E=d.distanceTo(m)/this._startDist;if(this._zoom=l.getScaleZoom(E,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&E<1||this._zoom>l.getMaxZoom()&&E>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var x=d._add(m)._divideBy(2)._subtract(this._centerPoint);if(E===1&&x.x===0&&x.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(x),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),$(this._animRequest);var D=f(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(D,this,!0),gt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$(this._animRequest),ut(document,"touchmove",this._onTouchMove,this),ut(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Qe.addInitHook("addHandler","touchZoom",ao),Qe.BoxZoom=oo,Qe.DoubleClickZoom=vc,Qe.Drag=nu,Qe.Keyboard=ru,Qe.ScrollWheelZoom=vt,Qe.TapHold=pa,Qe.TouchZoom=ao,t.Bounds=U,t.Browser=xe,t.CRS=Ze,t.Canvas=eu,t.Circle=Ka,t.CircleMarker=Ga,t.Class=ot,t.Control=ln,t.DivIcon=nl,t.DivOverlay=Lr,t.DomEvent=Ji,t.DomUtil=mi,t.Draggable=In,t.Evented=nt,t.FeatureGroup=kt,t.GeoJSON=Rr,t.GridLayer=yi,t.Handler=pn,t.Icon=mr,t.ImageOverlay=vi,t.LatLng=Ie,t.LatLngBounds=ye,t.Layer=ct,t.LayerGroup=yt,t.LineUtil=A,t.Map=Qe,t.Marker=Xr,t.Mixin=Kr,t.Path=_i,t.Point=re,t.PolyUtil=Qs,t.Polygon=Jr,t.Polyline=Vn,t.Popup=tl,t.PosAnimation=es,t.Projection=pe,t.Rectangle=_c,t.Renderer=Nr,t.SVG=ss,t.SVGOverlay=Yl,t.TileLayer=wi,t.Tooltip=ro,t.Transformation=lr,t.Util=O,t.VideoOverlay=Ql,t.bind=f,t.bounds=ne,t.canvas=tu,t.circle=ca,t.circleMarker=cc,t.control=$t,t.divIcon=pc,t.extend=a,t.featureGroup=is,t.geoJSON=hc,t.geoJson=gr,t.gridLayer=io,t.icon=uc,t.imageOverlay=dc,t.latLng=Ee,t.latLngBounds=Ae,t.layerGroup=Xn,t.map=Dn,t.marker=fd,t.point=se,t.polygon=md,t.polyline=pd,t.popup=no,t.rectangle=gd,t.setOptions=Q,t.stamp=v,t.svg=rl,t.svgOverlay=Xl,t.tileLayer=Jl,t.tooltip=da,t.transformation=Tr,t.version=s,t.videoOverlay=fc;var yc=window.L;t.noConflict=function(){return window.L=yc,this},window.L=t}))})(Cu,Cu.exports)),Cu.exports}var lc=vk();const yk=Jv(lc);function Im(r,e,t){return Object.freeze({instance:r,context:e,container:t})}function Sm(r,e){return e==null?function(s,a){const c=X.useRef();return c.current||(c.current=r(s,a)),c}:function(s,a){const c=X.useRef();c.current||(c.current=r(s,a));const f=X.useRef(s),{instance:_}=c.current;return X.useEffect(function(){f.current!==s&&(e(_,s,f.current),f.current=s)},[_,s,a]),c}}function wk(r,e){X.useEffect(function(){return(e.layerContainer??e.map).addLayer(r.instance),function(){var c;(c=e.layerContainer)==null||c.removeLayer(r.instance),e.map.removeLayer(r.instance)}},[e,r])}function q0(r){return function(t){const s=Em(),a=r(Tm(t,s),s);return B0(s.map,t.attribution),W0(a.current,t.eventHandlers),wk(a.current,s),a}}function Ek(r,e){const t=Sm(r,e),s=q0(t);return fk(s)}function Tk(r,e){const t=Sm(r),s=gk(t,e);return pk(s)}function Ik(r,e){const t=Sm(r,e),s=q0(t);return mk(s)}function Sk(r,e,t){const{opacity:s,zIndex:a}=e;s!=null&&s!==t.opacity&&r.setOpacity(s),a!=null&&a!==t.zIndex&&r.setZIndex(a)}function Pk(){return Em().map}function xk(r){const e=Pk();return X.useEffect(function(){return e.on(r),function(){e.off(r)}},[e,r]),e}function gp(){return gp=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},gp.apply(this,arguments)}function Ck({bounds:r,boundsOptions:e,center:t,children:s,className:a,id:c,placeholder:f,style:_,whenReady:v,zoom:T,...S},C){const[k]=X.useState({className:a,id:c,style:_}),[H,W]=X.useState(null);X.useImperativeHandle(C,()=>(H==null?void 0:H.map)??null,[H]);const Q=X.useCallback(he=>{if(he!==null&&H===null){const de=new lc.Map(he,S);t!=null&&T!=null?de.setView(t,T):r!=null&&de.fitBounds(r,e),v!=null&&de.whenReady(v),W(hk(de))}},[]);X.useEffect(()=>()=>{H==null||H.map.remove()},[H]);const Z=H?Ll.createElement(H0,{value:H},s):f??null;return Ll.createElement("div",gp({},k,{ref:Q}),Z)}const Ak=X.forwardRef(Ck),kk=Ek(function({position:e,...t},s){const a=new lc.Marker(e,t);return Im(a,dk(s,{overlayContainer:a}))},function(e,t,s){t.position!==s.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==s.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==s.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==s.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==s.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),Rk=Tk(function(e,t){const s=new lc.Popup(e,t.overlayContainer);return Im(s,t)},function(e,t,{position:s},a){X.useEffect(function(){const{instance:f}=e;function _(T){T.popup===f&&(f.update(),a(!0))}function v(T){T.popup===f&&a(!1)}return t.map.on({popupopen:_,popupclose:v}),t.overlayContainer==null?(s!=null&&f.setLatLng(s),f.openOn(t.map)):t.overlayContainer.bindPopup(f),function(){var S;t.map.off({popupopen:_,popupclose:v}),(S=t.overlayContainer)==null||S.unbindPopup(),t.map.removeLayer(f)}},[e,t,a,s])}),Lk=Ik(function({url:e,...t},s){const a=new lc.TileLayer(e,Tm(t,s));return Im(a,s)},function(e,t,s){Sk(e,t,s);const{url:a}=t;a!=null&&a!==s.url&&e.setUrl(a)}),Nk=yk.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),bk=({pin:r,canDelete:e=!1,onDelete:t})=>{const s=()=>{e&&t&&confirm("Are you sure you want to delete this pin?")&&t(r.id)},a=()=>{const c=`https://www.google.com/maps/dir/?api=1&destination=${r.lat},${r.lng}`;window.open(c,"_blank")};return R.jsx(kk,{position:[r.lat,r.lng],icon:Nk,children:R.jsx(Rk,{children:R.jsxs("div",{className:"p-2 min-w-[200px]",children:[R.jsx("h3",{className:"font-semibold text-gray-900",children:r.name}),r.description&&R.jsx("p",{className:"text-gray-600 mt-1 text-sm",children:r.description}),R.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Added ",r.createdAt?r.createdAt.toDate().toLocaleDateString():"Recently"]}),R.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[R.jsxs("button",{onClick:a,className:"px-3 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[R.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),"Get Directions"]}),e&&R.jsxs("button",{onClick:s,className:"px-3 py-2 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[R.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[R.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z",clipRule:"evenodd"}),R.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})]}),"Delete Pin"]})]})]})})})},Ok=({position:r,onSubmit:e,onCancel:t})=>{const[s,a]=X.useState(""),[c,f]=X.useState(""),[_,v]=X.useState(!1),T=async S=>{if(S.preventDefault(),!!s.trim()){v(!0);try{await e({name:s.trim(),description:c.trim()||void 0})}finally{v(!1)}}};return R.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg border border-gray-200 p-4 w-80 z-10",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Add Pin"}),R.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Location: ",r.lat.toFixed(6),", ",r.lng.toFixed(6)]}),R.jsxs("form",{onSubmit:T,className:"space-y-3",children:[R.jsx(Rl,{label:"Name",value:s,onChange:S=>a(S.target.value),placeholder:"Enter pin name",required:!0}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),R.jsx("textarea",{value:c,onChange:S=>f(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Enter description"})]}),R.jsxs("div",{className:"flex space-x-2",children:[R.jsx(Nt,{type:"submit",disabled:_||!s.trim(),className:"flex-1",children:_?"Adding...":"Add Pin"}),R.jsx(Nt,{type:"button",variant:"secondary",onClick:t,className:"flex-1",children:"Cancel"})]})]})]})},Mk=({onMapClick:r})=>(xk({click:e=>{r(e.latlng.lat,e.latlng.lng)}}),null),Dk=X.forwardRef(({pins:r,onAddPin:e,onDeletePin:t,onPinAdded:s,isLocked:a,canDeletePins:c=!1,center:f=[40.7128,-74.006],zoom:_=13},v)=>{const[T,S]=X.useState(!1),[C,k]=X.useState(null),H=X.useRef(null);X.useImperativeHandle(v,()=>({addPinAtLocation:(he,de,me)=>{a||e({lat:he,lng:de,name:me})},centerMapOnLocation:(he,de,me)=>{H.current&&H.current.setView([he,de],me||13)}}));const W=(he,de)=>{a||(k({lat:he,lng:de}),S(!0))},Q=async he=>{if(C)try{await e({...C,...he}),s&&s(he.name),S(!1),k(null)}catch(de){console.error("Failed to add pin:",de)}},Z=async he=>{t&&await t(he)};return R.jsxs("div",{className:"h-full w-full relative",children:[R.jsxs(Ak,{ref:H,center:f,zoom:_,style:{height:"100%",width:"100%"},className:"z-0",children:[R.jsx(Lk,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),R.jsx(Mk,{onMapClick:W}),r.map(he=>R.jsx(bk,{pin:he,canDelete:c,onDelete:Z},he.id))]}),T&&C&&R.jsx(Ok,{position:C,onSubmit:Q,onCancel:()=>{S(!1),k(null)}}),a&&R.jsx("div",{className:"absolute top-4 left-4 bg-red-100 border border-red-300 text-red-700 px-3 py-2 rounded-lg shadow-sm",children:R.jsxs("div",{className:"flex items-center",children:[R.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Map is locked - no new pins can be added"]})})]})}),Vk=500,Fk=({onCitySelect:r,disabled:e=!1})=>{const[t,s]=X.useState(""),[a,c]=X.useState([]),[f,_]=X.useState(!1),[v,T]=X.useState(!1),[S,C]=X.useState(-1),k=X.useRef(),H=X.useRef(null),W=X.useRef(null),Q=async ge=>{if(!ge.trim())return[];try{const be=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(ge)}&limit=5&addressdetails=1&extratags=1`);if(!be.ok)throw new Error("Search failed");return(await be.json()).filter(V=>V.class==="place"||V.type==="city"||V.type==="town"||V.type==="village"||V.type==="administrative"||V.address&&(V.address.city||V.address.town||V.address.village)).map(V=>{var N;return{name:V.name||V.display_name.split(",")[0],country:((N=V.address)==null?void 0:N.country)||"Unknown",lat:parseFloat(V.lat),lng:parseFloat(V.lon),displayName:V.display_name}}).slice(0,5)}catch(be){return console.error("Error searching cities:",be),[]}},Z=ge=>{const be=ge.target.value;s(be),C(-1),k.current&&clearTimeout(k.current),be.trim()?(_(!0),k.current=setTimeout(async()=>{try{const Oe=await Q(be);c(Oe),T(Oe.length>0)}catch(Oe){console.error("Search error:",Oe),c([]),T(!1)}finally{_(!1)}},Vk)):(c([]),_(!1),T(!1))},he=ge=>{s(ge.displayName),T(!1),c([]),r(ge)},de=ge=>{if(v)switch(ge.key){case"ArrowDown":ge.preventDefault(),C(be=>be<a.length-1?be+1:be);break;case"ArrowUp":ge.preventDefault(),C(be=>be>0?be-1:-1);break;case"Enter":ge.preventDefault(),S>=0&&S<a.length&&he(a[S]);break;case"Escape":T(!1),C(-1);break}},me=ge=>{H.current&&!H.current.contains(ge.target)&&W.current&&!W.current.contains(ge.target)&&(T(!1),C(-1))};return X.useEffect(()=>(document.addEventListener("mousedown",me),()=>{document.removeEventListener("mousedown",me),k.current&&clearTimeout(k.current)}),[]),R.jsxs("div",{className:"relative w-full max-w-md",children:[R.jsx(Rl,{ref:H,placeholder:"Search for a city...",value:t,onChange:Z,onKeyDown:de,disabled:e,className:"pr-10"}),f&&R.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:R.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})}),v&&a.length>0&&R.jsx("div",{ref:W,className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto",children:a.map((ge,be)=>R.jsxs("div",{className:`px-3 py-2 cursor-pointer border-b border-gray-100 last:border-b-0 ${be===S?"bg-blue-50 text-blue-900":"hover:bg-gray-50"}`,onClick:()=>he(ge),children:[R.jsx("div",{className:"font-medium text-sm",children:ge.name}),R.jsx("div",{className:"text-xs text-gray-500",children:ge.country})]},`${ge.name}-${ge.country}-${ge.lat}-${ge.lng}-${be}`))})]})},zk=r=>{const[e,t]=X.useState(null),[s,a]=X.useState(!0),[c,f]=X.useState(null);return X.useEffect(()=>{if(!r)return;const _=setTimeout(()=>{f("Map not found"),a(!1)},2e3);try{const v=Zu(ar,"maps",r);WA(v).then(T=>{clearTimeout(_),T.exists()?t({id:T.id,...T.data()}):f("Map not found"),a(!1)}).catch(T=>{clearTimeout(_),console.error("Error fetching map:",T),f("Map not found"),a(!1)})}catch(v){clearTimeout(_),console.error("Error fetching map:",v),f("Map not found"),a(!1)}return()=>clearTimeout(_)},[r]),{map:e,loading:s,error:c}},jk=r=>{const[e,t]=X.useState(!1),[s,a]=X.useState(null);return{generateShareLink:async()=>{t(!0),a(null);try{const f=Do(ar,"maps",r,"shareLinks"),_=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return await vm(f,{token:_,createdAt:wm(),expiresAt:null}),`${window.location.origin}/map/${r}?token=${_}`}catch(f){throw console.error("Error generating share link:",f),a(f.message||"Failed to generate share link"),f}finally{t(!1)}},loading:e,error:s}},Uk=r=>{const[e,t]=X.useState([]),[s,a]=X.useState(!0),[c,f]=X.useState(null);return X.useEffect(()=>{if(!r)return;const _=Do(ar,"maps",r,"pins"),v=D0(_,UA("createdAt","desc")),T=F0(v,S=>{const C=S.docs.map(k=>({id:k.id,...k.data()}));t(C),a(!1),f(null)},S=>{console.error("Error fetching pins:",S),f("Failed to load pins"),a(!1)});return()=>T()},[r]),{pins:e,loading:s,error:c}},Bk=r=>{const[e,t]=X.useState(!1),[s,a]=X.useState(null);return{addPin:async f=>{t(!0),a(null);try{const _=Do(ar,"maps",r,"pins");await vm(_,{...f,createdAt:wm()})}catch(_){throw console.error("Error adding pin:",_),a(_.message||"Failed to add pin"),_}finally{t(!1)}},loading:e,error:s}},$k=r=>({deletePin:async t=>{try{const s=Zu(ar,"maps",r,"pins",t);await _m(s)}catch(s){throw console.error("Error deleting pin:",s),s}}}),Hk=r=>({deleteAllPins:async()=>{try{const t=Do(ar,"maps",r,"pins"),s=await mp(t),a=s.docs.map(c=>_m(c.ref));return await Promise.all(a),s.docs.length}catch(t){throw console.error("Error deleting all pins:",t),t}}}),Wk=()=>{const{mapId:r}=pT(),{user:e}=Xo(),{showToast:t}=QA(),s=X.useRef(null),{map:a,loading:c,error:f}=zk(r||""),{pins:_}=Uk(r||""),{addPin:v}=Bk(r||""),{deletePin:T}=$k(r||""),{deleteAllPins:S}=Hk(r||""),{generateShareLink:C,loading:k}=jk(r||""),[H,W]=X.useState(""),[Q,Z]=X.useState(!1);X.useEffect(()=>{r&&W(`${window.location.origin}/map/${r}`)},[r]);const he=async()=>{try{const N=await C();W(N),Z(!0)}catch(N){console.error("Failed to generate share link:",N)}},de=async()=>{try{await navigator.clipboard.writeText(H)}catch(N){console.error("Failed to copy link:",N)}},me=async N=>{if(s.current&&!Oe)try{await v({lat:N.lat,lng:N.lng,name:N.name}),t(`Pin added successfully at ${N.name}!`,"success"),s.current.centerMapOnLocation&&s.current.centerMapOnLocation(N.lat,N.lng)}catch(M){console.error("Failed to add pin:",M),t("Failed to add pin. Please try again.","error")}},ge=N=>{t(`Pin added successfully at ${N}!`,"success")},be=async()=>{if(!V){t("Only the map creator can delete all pins.","error");return}if(_.length===0){t("There are no pins to delete.","error");return}if(confirm(`Are you sure you want to delete all ${_.length} pins? This action cannot be undone.`))try{const N=await S();t(`Successfully deleted ${N} pins!`,"success")}catch(N){console.error("Failed to delete all pins:",N),t("Failed to delete all pins. Please try again.","error")}},Oe=(a==null?void 0:a.isLocked)||(a!=null&&a.editableUntil?a.editableUntil.toDate()<=new Date:!1),V=!!(e&&a&&e.uid===a.ownerId);return c?R.jsx("div",{className:"h-screen flex items-center justify-center",children:R.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):f||!a?R.jsx("div",{className:"h-screen flex items-center justify-center",children:R.jsxs(Vo,{className:"text-center py-12",children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Map Not Found"}),R.jsx("p",{className:"text-gray-600 mb-6",children:"The map you're looking for doesn't exist or has been deleted."}),R.jsx(Nt,{onClick:()=>window.location.href="/",children:"Go Home"})]})}):R.jsxs("div",{className:"h-screen flex flex-col",children:[R.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3",children:R.jsxs("div",{className:"max-w-7xl mx-auto",children:[R.jsxs("div",{className:"flex justify-between items-center mb-3",children:[R.jsxs("div",{children:[R.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:a.name}),R.jsxs("p",{className:"text-sm text-gray-500",children:[_.length," pin",_.length!==1?"s":""," ",Oe?" Locked":" Open for pins",V&&"  You are the map creator"]})]}),R.jsxs("div",{className:"flex space-x-2",children:[V&&_.length>0&&R.jsx(Nt,{variant:"secondary",size:"sm",onClick:be,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Delete All Pins"}),R.jsx(Nt,{variant:"secondary",size:"sm",onClick:he,disabled:k,children:k?"Generating...":"Share Link"}),R.jsx(Nt,{size:"sm",onClick:()=>window.location.href="/",children:"Home"})]})]}),!Oe&&R.jsx("div",{className:"flex justify-center",children:R.jsx(Fk,{onCitySelect:me,disabled:Oe})})]})}),R.jsx("div",{className:"flex-1 relative",children:R.jsx(Dk,{ref:s,mapId:r||"",pins:_,onAddPin:v,onDeletePin:V?T:void 0,onPinAdded:ge,isLocked:Oe,canDeletePins:V})}),Q&&R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:R.jsxs(Vo,{className:"max-w-md w-full mx-4",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Share Map"}),R.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Share this link with others so they can add pins to your map:"}),R.jsxs("div",{className:"flex space-x-2 mb-4",children:[R.jsx("input",{type:"text",value:H,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"}),R.jsx(Nt,{size:"sm",onClick:de,children:"Copy"})]}),R.jsx(Nt,{variant:"secondary",onClick:()=>Z(!1),className:"w-full",children:"Close"})]})})]})},qk=()=>R.jsx(GA,{children:R.jsx(YA,{children:R.jsx(bT,{children:R.jsxs("div",{className:"min-h-screen bg-gray-50",children:[R.jsx(tk,{}),R.jsxs(RT,{children:[R.jsx(yl,{path:"/",element:R.jsx(nk,{})}),R.jsx(yl,{path:"/dashboard",element:R.jsx(Yv,{children:R.jsx(ak,{})})}),R.jsx(yl,{path:"/create",element:R.jsx(Yv,{children:R.jsx(uk,{})})}),R.jsx(yl,{path:"/map/:mapId",element:R.jsx(Wk,{})}),R.jsx(yl,{path:"*",element:R.jsx(py,{to:"/",replace:!0})})]})]})})})}),Z0=document.getElementById("root");if(!Z0)throw new Error("Failed to find the root element");const Zk=VE.createRoot(Z0);Zk.render(R.jsx(qk,{}));
